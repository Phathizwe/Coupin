/*! For license information please see main.8b571959.js.LICENSE.txt */
(()=>{var e={52:(e,t,n)=>{var r=n(6463),s=n(2535);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[s(t[n++])];return n&&n==o?e:void 0}},53:(e,t,n)=>{var r=n(220)(n(4759),"DataView");e.exports=r},78:(e,t,n)=>{var r=n(9508),s=n(1536),o=n(9892);e.exports=function(e){return s(e)?o(e):r(e)}},150:(e,t,n)=>{var r=n(5099),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():s.call(t,n,1),--this.size,!0)}},184:(e,t,n)=>{var r=n(2022),s=n(9248);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},202:(e,t,n)=>{var r=n(220)(n(4759),"Promise");e.exports=r},220:(e,t,n)=>{var r=n(7949),s=n(8166);e.exports=function(e,t){var n=s(e,t);return r(n)?n:void 0}},231:(e,t,n)=>{var r=n(3616),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:s.call(t,e)}},366:(e,t,n)=>{var r=n(8925);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},378:(e,t,n)=>{const r=n(1579);function s(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}s.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},s.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=r.mod(t,this.genPoly),s=this.degree-n.length;if(s>0){const e=new Uint8Array(this.degree);return e.set(n,s),e}return n},e.exports=s},423:(e,t,n)=>{var r=n(3031),s=n(5724);e.exports=function(e,t){return e&&r(e,t,s)}},475:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).has(e)}},487:(e,t,n)=>{const r=n(6580),s=n(8415),o=n(4549),i=n(2890),a=n(1043),l=n(1726),c=n(6106),u=n(5956),d=n(378),h=n(4553),m=n(6695),p=n(794),f=n(1351);function g(e,t,n){const r=e.size,s=m.getEncodedBits(t,n);let o,i;for(o=0;o<15;o++)i=1===(s>>o&1),o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(r-15+o,8,i,!0),o<8?e.set(8,r-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(r-8,8,1,!0)}function y(e,t,n){const s=new o;n.forEach((function(t){s.put(t.mode.bit,4),s.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(s)}));const i=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(s.getLengthInBits()+4<=i&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const a=(i-s.getLengthInBits())/8;for(let r=0;r<a;r++)s.put(r%2?17:236,8);return function(e,t,n){const s=r.getSymbolTotalCodewords(t),o=u.getTotalCodewordsCount(t,n),i=s-o,a=u.getBlocksCount(t,n),l=s%a,c=a-l,h=Math.floor(s/a),m=Math.floor(i/a),p=m+1,f=h-m,g=new d(f);let y=0;const v=new Array(a),x=new Array(a);let b=0;const w=new Uint8Array(e.buffer);for(let r=0;r<a;r++){const e=r<c?m:p;v[r]=w.slice(y,y+e),x[r]=g.encode(v[r]),y+=e,b=Math.max(b,e)}const N=new Uint8Array(s);let j,k,C=0;for(j=0;j<b;j++)for(k=0;k<a;k++)j<v[k].length&&(N[C++]=v[k][j]);for(j=0;j<f;j++)for(k=0;k<a;k++)N[C++]=x[k][j];return N}(s,e,t)}function v(e,t,n,s){let o;if(Array.isArray(e))o=f.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=f.rawSplit(e);r=h.getBestVersionForData(t,n)}o=f.fromString(e,r||40)}}const u=h.getBestVersionForData(o,n);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else t=u;const d=y(t,n,o),m=r.getSymbolSize(t),p=new i(m);return function(e,t){const n=e.size,r=l.getPositions(t);for(let s=0;s<r.length;s++){const t=r[s][0],o=r[s][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||n<=t+r))for(let s=-1;s<=7;s++)o+s<=-1||n<=o+s||(r>=0&&r<=6&&(0===s||6===s)||s>=0&&s<=6&&(0===r||6===r)||r>=2&&r<=4&&s>=2&&s<=4?e.set(t+r,o+s,!0,!0):e.set(t+r,o+s,!1,!0))}}(p,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2===0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(p),function(e,t){const n=a.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],s=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?e.set(t+n,s+r,!0,!0):e.set(t+n,s+r,!1,!0)}}(p,t),g(p,n,0),t>=7&&function(e,t){const n=e.size,r=h.getEncodedBits(t);let s,o,i;for(let a=0;a<18;a++)s=Math.floor(a/3),o=a%3+n-8-3,i=1===(r>>a&1),e.set(s,o,i,!0),e.set(o,s,i,!0)}(p,t),function(e,t){const n=e.size;let r=-1,s=n-1,o=7,i=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!e.isReserved(s,a-n)){let r=!1;i<t.length&&(r=1===(t[i]>>>o&1)),e.set(s,a-n,r),o--,-1===o&&(i++,o=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}(p,d),isNaN(s)&&(s=c.getBestMask(p,g.bind(null,p,n))),c.applyMask(s,p),g(p,n,s),{modules:p,version:t,errorCorrectionLevel:n,maskPattern:s,segments:o}}t.create=function(e,t){if("undefined"===typeof e||""===e)throw new Error("No input text");let n,o,i=s.M;return"undefined"!==typeof t&&(i=s.from(t.errorCorrectionLevel,s.M),n=h.from(t.version),o=c.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),v(e,n,i,o)}},700:(e,t,n)=>{"use strict";n.d(t,{IX:()=>Me,sk:()=>Be,HF:()=>Ue,LD:()=>Fe,R4:()=>st,eJ:()=>it,xI:()=>En,hg:()=>ut,kZ:()=>Xe,J1:()=>rt,x9:()=>at,df:()=>qt,CI:()=>dt,f3:()=>lt,RE:()=>ot});var r=n(9061),s=n(6493),o=n(7827),i=n(4624),a=n(7253);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new r.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new i.Vy("@firebase/auth");function h(e){if(d.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.error("Auth (".concat(s.MF,"): ").concat(e),...n)}}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function f(e,t,n){const s=Object.assign(Object.assign({},c()),{[t]:n});return new r.FA("auth","Firebase",s).create(t,{appName:e.name})}function g(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),f(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw y(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||x(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function N(){return"http:"===j()||"https:"===j()}function j(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.jZ)()||(0,r.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(N()||(0,r.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function C(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},E=new k(3e4,6e4);function _(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function I(e,t,n,s){return T(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let o={},i={};s&&("GET"===t?i=s:o={body:JSON.stringify(s)});const a=(0,r.Am)(Object.assign({key:e.config.apiKey},i)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),S.fetch()(R(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},o))}))}async function T(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},A),t);try{const t=new D(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw M(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw M(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw M(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw M(e,"user-disabled",o);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw f(e,a,i);m(e,a)}}catch(o){if(o instanceof r.g)throw o;m(e,"network-request-failed",{message:String(o)})}}async function P(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await I(e,t,n,r,s);return"mfaPendingCredential"in o&&m(e,"multi-factor-auth-required",{_serverResponse:o}),o}function R(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?C(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}class D{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(p(this.auth,"network-request-failed"))),E.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function M(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=p(e,t,r);return s.customData._tokenResponse=n,s}function L(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function O(e){return 1e3*Number(e)}function F(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(o){return h("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}async function B(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof r.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class U{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=L(this.lastLoginAt),this.creationTime=L(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function V(e){var t;const n=e.auth,r=await e.getIdToken(),s=await B(e,async function(e,t){return I(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));v(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map((e=>{var{providerId:t}=e,n=(0,o.__rest)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const l=(c=e.providerData,u=a,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const d=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null===l||void 0===l?void 0:l.length),m=!!d&&h,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new z(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(e,p)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=F(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await async function(e,t){const n=await T(e,{},(async()=>{const n=(0,r.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=e.config,i=R(e,s,"/v1/token","key=".concat(o)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",S.fetch()(i,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new q;return n&&(v("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(v("number"===typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return x("not implemented")}}function W(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class H{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=(0,o.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new z(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await B(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.Ku)(e),s=await n.getIdToken(t),o=F(s);v(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"===typeof o.firebase?o.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:o,token:s,authTime:L(O(o.auth_time)),issuedAtTime:L(O(o.iat)),expirationTime:L(O(o.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.Ku)(e);await V(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new H(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await V(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await B(this,async function(e,t){return I(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,i,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(i=t.tenantId)&&void 0!==i?i:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:N,stsTokenManager:j}=t;v(x&&j,e,"internal-error");const k=q.fromJSON(this.name,j);v("string"===typeof x,e,"internal-error"),W(u,e.name),W(d,e.name),v("boolean"===typeof b,e,"internal-error"),v("boolean"===typeof w,e,"internal-error"),W(h,e.name),W(m,e.name),W(p,e.name),W(f,e.name),W(g,e.name),W(y,e.name);const C=new H({uid:x,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return N&&Array.isArray(N)&&(C.providerData=N.map((e=>Object.assign({},e)))),f&&(C._redirectEventId=f),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new q;r.updateFromServerResponse(t);const s=new H({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await V(s),s}}const G=new Map;function K(e){b(e instanceof Function,"Expected a class definition");let t=G.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,G.set(e,t),t)}class Y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y.type="NONE";const Q=Y;function $(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class J{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=$(this.userKey,r.apiKey,s),this.fullPersistenceKey=$("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?H._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new J(K(Q),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||K(Q);const o=$(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(o);if(t){const n=H._fromJSON(e,t);c!==s&&(i=n),s=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],i&&await s._set(o,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(o)}catch(l){}}))),new J(s,e,n)):new J(s,e,n)}}function X(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ne(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Z(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(se(t))return"Blackberry";if(oe(t))return"Webos";if(ee(t))return"Safari";if((t.includes("chrome/")||te(t))&&!t.includes("edge/"))return"Chrome";if(re(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/firefox\//i.test(e)}function ee(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/crios\//i.test(e)}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iemobile/i.test(e)}function re(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/android/i.test(e)}function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/blackberry/i.test(e)}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/webos/i.test(e)}function ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return ie(e)||re(e)||oe(e)||se(e)||/windows phone/i.test(e)||ne(e)}function le(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=X((0,r.ZQ)());break;case"Worker":t="".concat(X((0,r.ZQ)()),"-").concat(e);break;default:t=e}const o=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(s.MF,"/").concat(o)}async function ce(e,t){return I(e,"GET","/v2/recaptchaConfig",_(e,t))}function ue(e){return void 0!==e&&void 0!==e.enterprise}class de{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function he(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function me(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class pe{constructor(e){this.type="recaptcha-enterprise",this.auth=ve(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;ue(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ce(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new de(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&ue(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));he("https://www.google.com/recaptcha/enterprise.js?render="+s).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function fe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new pe(e);let o;try{o=await s.verify(n)}catch(a){o=await s.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:o}):Object.assign(i,{captchaResponse:o}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(s){r(s)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xe(this),this.idTokenSubscription=new xe(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=K(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await J.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==o||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await V(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(K(e))}))}async initializeRecaptchaConfig(){const e=await ce(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new de(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new pe(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&K(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await J.create(this,[K(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return v(o,this,"internal-error"),o.then((()=>s(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.warn("Auth (".concat(s.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ve(e){return(0,r.Ku)(e)}class xe{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.tD)((e=>this.observer=e))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function be(e,t,n){const r=ve(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),o=we(t),{host:i,port:a}=function(e){const t=we(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ne(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ne(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(i).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function we(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ne(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class je{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function ke(e,t){return I(e,"POST","/v1/accounts:resetPassword",_(e,t))}async function Ce(e,t){return I(e,"POST","/v1/accounts:update",t)}async function Se(e,t){return P(e,"POST","/v1/accounts:signInWithPassword",_(e,t))}async function Ae(e,t){return I(e,"POST","/v1/accounts:sendOobCode",_(e,t))}async function Ee(e,t){return Ae(e,t)}class _e extends je{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _e(e,t,"password")}static _fromEmailAndCode(e,t){return new _e(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await fe(e,n,"signInWithPassword");return Se(e,t)}return Se(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await fe(e,n,"signInWithPassword");return Se(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{email:this._email,oobCode:this._password});default:m(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ce(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:m(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ie(e,t){return P(e,"POST","/v1/accounts:signInWithIdp",_(e,t))}class Te extends je{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Te(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,o.__rest)(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Te(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ie(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ie(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ie(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.Am)(t)}return e}}const Pe={USER_NOT_FOUND:"user-not-found"};class Re extends je{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Re({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Re({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await P(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Re({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class De{constructor(e){var t,n,s,o,i,a;const l=(0,r.I9)((0,r.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=l.mode)&&void 0!==s?s:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=l.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.I9)((0,r.hp)(e)).link,n=t?(0,r.I9)((0,r.hp)(t)).deep_link_id:null,s=(0,r.I9)((0,r.hp)(e)).deep_link_id;return(s?(0,r.I9)((0,r.hp)(s)).link:null)||s||n||t||e}(e);try{return new De(t)}catch(n){return null}}}class Me{constructor(){this.providerId=Me.PROVIDER_ID}static credential(e,t){return _e._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=De.parseLink(t);return v(n,"argument-error"),_e._fromEmailAndCode(e,n.code,n.tenantId)}}Me.PROVIDER_ID="password",Me.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Me.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Le{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Oe extends Le{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fe extends Oe{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return v("providerId"in t&&"signInMethod"in t,"argument-error"),Te._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return v(e.idToken||e.accessToken,"argument-error"),Te._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fe.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fe.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:i,providerId:a}=t;if(!r&&!s&&!n&&!o)return null;if(!a)return null;try{return new Fe(a)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:o})}catch(l){return null}}}class Be extends Oe{constructor(){super("facebook.com")}static credential(e){return Te._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Be.credential(t.oauthAccessToken)}catch(n){return null}}}Be.FACEBOOK_SIGN_IN_METHOD="facebook.com",Be.PROVIDER_ID="facebook.com";class Ue extends Oe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Te._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ue.credential(n,r)}catch(s){return null}}}Ue.GOOGLE_SIGN_IN_METHOD="google.com",Ue.PROVIDER_ID="google.com";class ze extends Oe{constructor(){super("github.com")}static credential(e){return Te._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ze.credential(t.oauthAccessToken)}catch(n){return null}}}ze.GITHUB_SIGN_IN_METHOD="github.com",ze.PROVIDER_ID="github.com";class Ve extends Oe{constructor(){super("twitter.com")}static credential(e,t){return Te._fromParams({providerId:Ve.PROVIDER_ID,signInMethod:Ve.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ve.credentialFromTaggedObject(e)}static credentialFromError(e){return Ve.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ve.credential(n,r)}catch(s){return null}}}async function qe(e,t){return P(e,"POST","/v1/accounts:signUp",_(e,t))}Ve.TWITTER_SIGN_IN_METHOD="twitter.com",Ve.PROVIDER_ID="twitter.com";class We{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await H._fromIdTokenResponse(e,n,r),o=He(n);return new We({user:s,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=He(n);return new We({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function He(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ge extends r.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ge.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ge(e,t,n,r)}}function Ke(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ge._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await B(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return We._forOperation(e,"link",r)}async function Qe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const o=await B(e,Ke(r,s,t,e),n);v(o.idToken,r,"internal-error");const i=F(o.idToken);v(i,r,"internal-error");const{sub:a}=i;return v(e.uid===a,r,"user-mismatch"),We._forOperation(e,s,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&m(r,"user-mismatch"),o}}async function $e(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await Ke(e,r,t),o=await We._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(o.user),o}async function Je(e,t){return $e(ve(e),t)}async function Xe(e,t){return Qe((0,r.Ku)(e),t)}class Ze{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?et._fromServerResponse(e,t):"totpInfo"in t?tt._fromServerResponse(e,t):m(e,"internal-error")}}class et extends Ze{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new et(t)}}class tt extends Ze{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tt(t)}}function nt(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function rt(e,t,n){var r;const s=ve(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await fe(s,o,"getOobCode",!0);n&&nt(s,e,n),await Ee(s,e)}else n&&nt(s,o,n),await Ee(s,o).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await fe(s,o,"getOobCode",!0);n&&nt(s,e,n),await Ee(s,e)}}))}async function st(e,t,n){await ke((0,r.Ku)(e),{oobCode:t,newPassword:n})}async function ot(e,t){const{data:n}=await async function(e,t){const n=(0,r.Ku)(e),s=await ke(n,{oobCode:t}),o=s.requestType;switch(v(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(s.mfaInfo,n,"internal-error");default:v(s.email,n,"internal-error")}let i=null;return s.mfaInfo&&(i=Ze._fromServerResponse(ve(n),s.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.newEmail:s.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.email:s.newEmail)||null,multiFactorInfo:i},operation:o}}((0,r.Ku)(e),t);return n.email}async function it(e,t,n){var r;const s=ve(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let i;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await fe(s,o,"signUpPassword");i=qe(s,e)}else i=qe(s,o).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await fe(s,o,"signUpPassword");return qe(s,e)}return Promise.reject(e)}));const a=await i.catch((e=>Promise.reject(e))),l=await We._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function at(e,t,n){return Je((0,r.Ku)(e),Me.credential(t,n))}function lt(e,t){return ct((0,r.Ku)(e),null,t)}async function ct(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const o=await B(e,Ce(r,s));await e._updateTokensIfNecessary(o,!0)}function ut(e,t,n,s){return(0,r.Ku)(e).onAuthStateChanged(t,n,s)}function dt(e){return(0,r.Ku)(e).signOut()}new WeakMap;const ht="__sak";class mt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class pt extends mt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.ZQ)();return ee(e)||ie(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ae(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const s=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);(0,r.lT)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pt.type="LOCAL";const ft=pt;class gt extends mt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gt.type="SESSION";const yt=gt;class vt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new vt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(o).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}vt.receivers=[];class bt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise(((i,a)=>{const l=xt("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function wt(){return window}function Nt(){return"undefined"!==typeof wt().WorkerGlobalScope&&"function"===typeof wt().importScripts}const jt="firebaseLocalStorageDb",kt="firebaseLocalStorage",Ct="fbase_key";class St{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function At(e,t){return e.transaction([kt],t?"readwrite":"readonly").objectStore(kt)}function Et(){const e=indexedDB.open(jt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(kt,{keyPath:Ct})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(kt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jt);return new St(e).toPromise()}(),t(await Et()))}))}))}async function _t(e,t,n){const r=At(e,!0).put({[Ct]:t,value:n});return new St(r).toPromise()}function It(e,t){const n=At(e,!0).delete(t);return new St(n).toPromise()}class Tt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Et()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vt._getInstance(Nt()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new bt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Et();return await _t(e,ht,"1"),await It(e,ht),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_t(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=At(e,!1).get(t),r=await new St(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>It(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=At(e,!1).getAll();return new St(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Tt.type="LOCAL";const Pt=Tt;me("rcb"),new k(3e4,6e4);const Rt="recaptcha";async function Dt(e,t,n){var r;const s=await n.verify();try{let o;if(v("string"===typeof s,e,"argument-error"),v(n.type===Rt,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){v("enroll"===t.type,e,"internal-error");const n=await function(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:start",_(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;v(n,e,"missing-multi-factor-info");const i=await function(e,t){return I(e,"POST","/v2/accounts/mfaSignIn:start",_(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return I(e,"POST","/v1/accounts:sendVerificationCode",_(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Mt{constructor(e){this.providerId=Mt.PROVIDER_ID,this.auth=ve(e)}verifyPhoneNumber(e,t){return Dt(this.auth,e,(0,r.Ku)(t))}static credential(e,t){return Re._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Mt.credentialFromTaggedObject(t)}static credentialFromError(e){return Mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Re._fromTokenResponse(n,r):null}}function Lt(e,t){return t?K(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Mt.PROVIDER_ID="phone",Mt.PHONE_SIGN_IN_METHOD="phone";class Ot extends je{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ie(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ie(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ie(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ft(e){return $e(e.auth,new Ot(e),e.bypassAuthState)}function Bt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Qe(n,new Ot(e),e.bypassAuthState)}async function Ut(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Ye(n,new Ot(e),e.bypassAuthState)}class zt{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:i}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ft;case"linkViaPopup":case"linkViaRedirect":return Ut;case"reauthViaPopup":case"reauthViaRedirect":return Bt;default:m(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vt=new k(2e3,1e4);async function qt(e,t,n){const r=ve(e);g(e,t,Le);const s=Lt(r,n);return new Wt(r,"signInViaPopup",t,s).executeNotNull()}class Wt extends zt{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Wt.currentPopupAction&&Wt.currentPopupAction.cancel(),Wt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Vt.get())};e()}}Wt.currentPopupAction=null;const Ht=new Map;class Gt extends zt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ht.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Qt(t),r=Yt(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ht.set(this.auth._key(),e)}return this.bypassAuthState||Ht.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kt(e,t){Ht.set(e._key(),t)}function Yt(e){return K(e._redirectPersistence)}function Qt(e){return $("pendingRedirect",e.config.apiKey,e.name)}async function $t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ve(e),s=Lt(r,t),o=new Gt(r,s,n),i=await o.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class Jt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Zt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(p(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xt(e))}saveEventToCache(e){this.cachedEventUids.add(Xt(e)),this.lastProcessedEventTime=Date.now()}}function Xt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Zt(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const en=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tn=/^https?/;async function nn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return I(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(rn(r))return}catch(n){}m(e,"unauthorized-domain")}function rn(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!tn.test(n))return!1;if(en.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const sn=new k(3e4,6e4);function on(){const e=wt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let an=null;function ln(e){return an=an||function(e){return new Promise(((t,n)=>{var r,s,o;function i(){on(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{on(),n(p(e,"network-request-failed"))},timeout:sn.get()})}if(null===(s=null===(r=wt().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=wt().gapi)||void 0===o?void 0:o.load)){const t=me("iframefcb");return wt()[t]=()=>{gapi.load?i():n(p(e,"network-request-failed"))},he("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}i()}})).catch((e=>{throw an=null,e}))}(e),an}const cn=new k(5e3,15e3),un={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hn(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?C(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),o={apiKey:t.apiKey,appName:e.name,v:s.MF},i=dn.get(e.config.apiHost);i&&(o.eid=i);const a=e._getFrameworks();return a.length&&(o.fw=a.join(",")),"".concat(n,"?").concat((0,r.Am)(o).slice(1))}const mn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function fn(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},mn),{width:s.toString(),height:o.toString(),top:i,left:a}),u=(0,r.ZQ)().toLowerCase();n&&(l=te(u)?"_blank":n),Z(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ie(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new pn(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(m){}return new pn(h)}const gn="__/auth/handler",yn="emulator/auth/handler",vn=encodeURIComponent("fac");async function xn(e,t,n,o,i,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:o,v:s.MF,eventId:i};if(t instanceof Le){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof Oe){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(vn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(gn);return C(t,yn)}(e),"?").concat((0,r.Am)(c).slice(1)).concat(d)}const bn="webStorageSupport";const wn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yt,this._completeRedirectFn=$t,this._overrideRedirectResult=Kt}async _openPopup(e,t,n,r){var s;b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return fn(e,await xn(e,t,n,w(),r),xt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){wt().location.href=e}(await xn(e,t,n,w(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await ln(e),n=wt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:hn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:un,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=p(e,"network-request-failed"),o=wt().setTimeout((()=>{r(s)}),cn.get());function i(){wt().clearTimeout(o),n(t)}t.ping(i).then(i,(()=>{r(s)}))}))))}(e),n=new Jt(e);return t.register("authEvent",(t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bn,{type:bn},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[bn];void 0!==s&&t(!!s),m(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ae()||ee()||ie()}};var Nn="@firebase/auth",jn="0.23.2";class kn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Cn=(0,r.XA)("authIdTokenMaxAge")||300;let Sn=null;const An=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Cn)return;const s=null===n||void 0===n?void 0:n.token;Sn!==s&&(Sn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:"Bearer ".concat(s)}:{}}))};function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sx)();const t=(0,s.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,s.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),s=n.getOptions();if((0,r.bD)(s,null!==t&&void 0!==t?t:{}))return e;m(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wn,persistence:[Pt,ft,yt]}),o=(0,r.XA)("authTokenSyncURL");if(o){const e=An(o);!function(e,t,n){(0,r.Ku)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,s){(0,r.Ku)(e).onIdTokenChanged(t,n,s)}(n,(t=>e(t)))}const i=(0,r.Tj)("auth");return i&&be(n,"http://".concat(i)),n}var _n;_n="Browser",(0,s.om)(new a.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;v(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:a,clientPlatform:_n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(_n)},c=new ye(r,s,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(K);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,s.om)(new a.uA("auth-internal",(e=>(e=>new kn(e))(ve(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KO)(Nn,jn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_n)),(0,s.KO)(Nn,jn,"esm2017")},708:(e,t,n)=>{var r=n(7101);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},738:(e,t,n)=>{var r=n(1111),s=n(5661),o=n(1465);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||s),string:new r}}},794:(e,t,n)=>{const r=n(6432),s=n(7145);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return s.testNumeric(e)?t.NUMERIC:s.testAlphanumeric(e)?t.ALPHANUMERIC:s.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}},799:e=>{e.exports=function(e){return this.__data__.has(e)}},847:function(e,t){var n,r,s;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,o={},i=0,a={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=x(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new m(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(o=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,o)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&void 0!==(o=this._config.beforeFirstChunk(e))&&(e=o),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var o=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=o.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),o&&o.data&&(this._rowCount+=o.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)n.postMessage({results:o,workerId:a.WORKER_ID,finished:r});else if(w(this._config.chunk)&&!t){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!r||!w(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):s&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function u(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,s)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=b((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=b((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(e){var t,n,r,s,o=Math.pow(2,53),i=-o,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,d=0,h=0,m=!1,g=!1,y=[],v={data:[],errors:[],meta:{}};function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function N(){if(v&&r&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!b(e)}))),j()){if(v)if(Array.isArray(v.data[0])){for(var t=0;j()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function s(t,n){for(var r=e.header?{}:[],s=0;s<t.length;s++){var a=s,u=t[s];u=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),i<e&&e<o))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n)(a=e.header?s>=y.length?"__parsed_extra":y[s]:a,u=e.transform?e.transform(u,a):u),"__parsed_extra"===a?(r[a]=r[a]||[],r[a].push(u)):r[a]=u}return e.header&&(s>y.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+s,h+n):s<y.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+s,h+n)),r}var u;v&&(e.header||e.dynamicTyping||e.transform)&&(u=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(s),u=v.data.length):v.data=s(v.data,0),e.header&&v.meta&&(v.meta.fields=y),h+=u)}function j(){return e.header&&0===y.length}function k(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),v.errors.push(e)}w(e.step)&&(s=e.step,e.step=function(t){v=t,j()?N():(N(),0!==v.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(v.data=v.data[0],s(v,u))))}),this.parse=function(s,o,i){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,l)),r=!1,e.delimiter?w(e.delimiter)&&(e.delimiter=e.delimiter(s),v.meta.delimiter=e.delimiter):((l=((t,n,r,s,o)=>{var i,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<o.length;d++){for(var h,m=o[d],p=0,g=0,y=0,v=(c=void 0,new f({comments:s,delimiter:m,newline:n,preview:10}).parse(t)),x=0;x<v.data.length;x++)r&&b(v.data[x])?y++:(g+=h=v.data[x].length,void 0===c?c=h:0<h&&(p+=Math.abs(h-c),c=h));0<v.data.length&&(g/=v.data.length-y),(void 0===l||p<=l)&&(void 0===u||u<g)&&1.99<g&&(l=p,i=m,u=g)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),v.meta.delimiter=e.delimiter),l=x(e),e.preview&&e.header&&l.preview++,t=s,n=new f(l),v=n.parse(t,o,i),N(),m?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(m=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),v.meta.aborted=!0,w(e.complete)&&e.complete(v),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(p(t)+"([^]*?)"+p(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,s=0;s<n.length;s++)"\n"===n[s][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,s=e.step,o=e.preview,i=e.fastMode,l=null,c=!1,u=null==e.quoteChar?'"':e.quoteChar,d=u;if(void 0!==e.escapeChar&&(d=e.escapeChar),("string"!=typeof t||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,m=!1;this.parse=function(a,f,g){if("string"!=typeof a)throw new Error("Input must be a string");var y=a.length,v=t.length,x=n.length,b=r.length,N=w(s),j=[],k=[],C=[],S=h=0;if(!a)return F();if(i||!1!==i&&-1===a.indexOf(u)){for(var A=a.split(n),E=0;E<A.length;E++){if(C=A[E],h+=C.length,E!==A.length-1)h+=n.length;else if(g)return F();if(!r||C.substring(0,b)!==r){if(N){if(j=[],D(C.split(t)),B(),m)return F()}else D(C.split(t));if(o&&o<=E)return j=j.slice(0,o),F(!0)}}return F()}for(var _=a.indexOf(t,h),I=a.indexOf(n,h),T=new RegExp(p(d)+p(u),"g"),P=a.indexOf(u,h);;)if(a[h]===u)for(P=h,h++;;){if(-1===(P=a.indexOf(u,P+1)))return g||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:h}),L();if(P===y-1)return L(a.substring(h,P).replace(T,u));if(u===d&&a[P+1]===d)P++;else if(u===d||0===P||a[P-1]!==d){-1!==_&&_<P+1&&(_=a.indexOf(t,P+1));var R=M(-1===(I=-1!==I&&I<P+1?a.indexOf(n,P+1):I)?_:Math.min(_,I));if(a.substr(P+1+R,v)===t){C.push(a.substring(h,P).replace(T,u)),a[h=P+1+R+v]!==u&&(P=a.indexOf(u,h)),_=a.indexOf(t,h),I=a.indexOf(n,h);break}if(R=M(I),a.substring(P+1+R,P+1+R+x)===n){if(C.push(a.substring(h,P).replace(T,u)),O(P+1+R+x),_=a.indexOf(t,h),P=a.indexOf(u,h),N&&(B(),m))return F();if(o&&j.length>=o)return F(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:h}),P++}}else if(r&&0===C.length&&a.substring(h,h+b)===r){if(-1===I)return F();h=I+x,I=a.indexOf(n,h),_=a.indexOf(t,h)}else if(-1!==_&&(_<I||-1===I))C.push(a.substring(h,_)),h=_+v,_=a.indexOf(t,h);else{if(-1===I)break;if(C.push(a.substring(h,I)),O(I+x),N&&(B(),m))return F();if(o&&j.length>=o)return F(!0)}return L();function D(e){j.push(e),S=h}function M(e){var t=0;return-1!==e&&(e=a.substring(P+1,e))&&""===e.trim()?e.length:t}function L(e){return g||(void 0===e&&(e=a.substring(h)),C.push(e),h=y,D(C),N&&B()),F()}function O(e){h=e,D(C),C=[],I=a.indexOf(n,h)}function F(r){if(e.header&&!f&&j.length&&!c){var s=j[0],o=Object.create(null),i=new Set(s);let t=!1;for(let n=0;n<s.length;n++){let r=s[n];if(o[r=w(e.transformHeader)?e.transformHeader(r,n):r]){let e,a=o[r];for(;e=r+"_"+a,a++,i.has(e););i.add(e),s[n]=e,o[r]++,t=!0,(l=null===l?{}:l)[e]=r}else o[r]=1,s[n]=r;i.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:j,errors:k,meta:{delimiter:t,linebreak:n,aborted:m,truncated:!!r,cursor:S+(f||0),renamedHeaders:l}}}function B(){s(F()),j=[],k=[]}},this.abort=function(){m=!0},this.getCharIndex=function(){return h}}function g(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(w(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},s),!r);i++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=o[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function v(){throw new Error("Not implemented.")}function x(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=x(e[t]);return n}function b(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return a.parse=function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(w(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!w(r.transform)&&r.transform,!r.worker||!a.WORKERS_SUPPORTED)return s=null,a.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),s=new(r.download?c:d)(r)):!0===t.readable&&w(t.read)&&w(t.on)?s=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(s=new u(r)),s.stream(t);(s=(()=>{var t;return!!a.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return a.BLOB_URL||(a.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=g,t.id=i++,o[t.id]=t)})()).userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,s.postMessage({input:t,config:r,workerId:s.id})},a.unparse=function(e,t){var n=!1,r=!0,s=",",o="\r\n",i='"',l=i+i,c=!1,u=null,d=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+i),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return m(null,e,c);if("object"==typeof e[0])return m(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),m(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function m(e,t,n){var i="",a=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(a&&r){for(var c=0;c<e.length;c++)0<c&&(i+=s),i+=f(e[c],c);0<t.length&&(i+=o)}for(var u=0;u<t.length;u++){var d=(a?e:t[u]).length,h=!1,m=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var p=[],g=0;g<d;g++){var y=l?e[g]:g;p.push(t[u][y])}h=""===p.join("").trim()}if(!h){for(var v=0;v<d;v++){0<v&&!m&&(i+=s);var x=a&&l?e[v]:v;i+=f(t[u][x],v)}u<t.length-1&&(!n||0<d&&!m)&&(i+=o)}}return i}function f(e,t){var r,o;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(o=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,o=!0),r=e.toString().replace(h,l),(o=o||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,a.BAD_DELIMITERS)||-1<r.indexOf(s)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=f,a.ParserHandle=m,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},s=[];return this.each((function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)s.push({file:this.files[o],inputElem:this,instanceConfig:t.extend({},r)})})),o(),this;function o(){if(0===s.length)w(e.complete)&&e.complete();else{var n,r,o,l,c=s[0];if(w(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return n="AbortError",r=c.file,o=c.inputElem,l=u.reason,void(w(e.error)&&e.error({name:n},r,o,l));if("skip"===u.action)return void i();"object"==typeof u.config&&(c.instanceConfig=t.extend(c.instanceConfig,u.config))}else if("skip"===u)return void i()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){w(d)&&d(e,c.file,c.inputElem),i()},a.parse(c.file,c.instanceConfig)}}function i(){s.splice(0,1),o()}}),s&&(n.onmessage=function(e){e=e.data,void 0===a.WORKER_ID&&e&&(a.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&n.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a},void 0===(s="function"===typeof n?n.apply(t,r):n)||(e.exports=s)},943:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},964:(e,t,n)=>{var r=n(6463),s=n(4578),o=n(2279),i=n(7059),a=n(5776),l=n(2535);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&a(u)&&i(h,u)&&(o(e)||s(e))}},1018:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var s;n.d(t,{AO:()=>d,B6:()=>E,Gh:()=>D,HS:()=>M,Oi:()=>a,Rr:()=>h,pX:()=>U,pb:()=>I,rc:()=>s,tH:()=>B,ue:()=>f,yD:()=>R,zR:()=>i}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const o="popstate";function i(e){return void 0===e&&(e={}),m((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return u("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,e)}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,s){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:h=!1}=i,m=l.history,p=s.Pop,f=null,g=y();function y(){return(m.state||{idx:null}).idx}function v(){p=s.Pop;let e=y(),t=null==e?null:e-g;g=e,f&&f({action:p,location:b.location,delta:t})}function x(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,m.replaceState(r({},m.state,{idx:g}),""));let b={get action(){return p},get location(){return e(l,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(o,v),f=e,()=>{l.removeEventListener(o,v),f=null}},createHref:e=>t(l,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=s.Push;let r=u(b.location,e,t);n&&n(r,e),g=y()+1;let o=c(r,g),i=b.createHref(r);try{m.pushState(o,"",i)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;l.location.assign(i)}h&&f&&f({action:p,location:b.location,delta:1})},replace:function(e,t){p=s.Replace;let r=u(b.location,e,t);n&&n(r,e),g=y();let o=c(r,g),i=b.createHref(r);m.replaceState(o,"",i),h&&f&&f({action:p,location:b.location,delta:0})},go:e=>m.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let s=I(("string"===typeof t?h(t):t).pathname||"/",n);if(null==s)return null;let o=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let a=0;null==i&&a<o.length;++a){let e=_(s);i=A(o[a],e,r)}return i}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,o)=>{let i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(a(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let l=M([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:S(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))s(e,t,r);else s(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return s?[o,""]:[o];let i=v(r.join("/")),a=[];return a.push(...i.map((e=>""===e?o:[o,e].join("/")))),s&&a.push(...i),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:[\w-]+$/,b=3,w=2,N=1,j=10,k=-2,C=e=>"*"===e;function S(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=w),n.filter((e=>!C(e))).reduce(((e,t)=>e+(x.test(t)?b:""===t?N:j)),r)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:M([o,u.pathname]),pathnameBase:L(M([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=M([o,u.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let o=new RegExp(s,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:i,pattern:e}}function _(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function T(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=P(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function D(e,t,n,s){let o;void 0===s&&(s=!1),"string"===typeof e?o=h(e):(o=r({},e),a(!o.pathname||!o.pathname.includes("?"),T("?","pathname","search",o)),a(!o.pathname||!o.pathname.includes("#"),T("#","pathname","hash",o)),a(!o.search||!o.search.includes("#"),T("#","search","hash",o)));let i,l=""===e||""===o.pathname,c=l?"/":o.pathname;if(null==c)i=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?h(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:O(r),hash:F(s)}}(o,i),d=c&&"/"!==c&&c.endsWith("/"),m=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!m||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class B extends Error{}function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],V=(new Set(z),["get",...z]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},1024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6262);n(1494),n(5097),n(7827),n(1042),n(2045),t.ActionCodeOperation=r.ActionCodeOperation,t.ActionCodeURL=r.ActionCodeURL,t.AuthCredential=r.AuthCredential,t.AuthErrorCodes=r.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY,t.EmailAuthCredential=r.EmailAuthCredential,t.EmailAuthProvider=r.EmailAuthProvider,t.FacebookAuthProvider=r.FacebookAuthProvider,t.FactorId=r.FactorId,t.GithubAuthProvider=r.GithubAuthProvider,t.GoogleAuthProvider=r.GoogleAuthProvider,t.OAuthCredential=r.OAuthCredential,t.OAuthProvider=r.OAuthProvider,t.OperationType=r.OperationType,t.PhoneAuthCredential=r.PhoneAuthCredential,t.PhoneAuthProvider=r.PhoneAuthProvider,t.PhoneMultiFactorGenerator=r.PhoneMultiFactorGenerator,t.ProviderId=r.ProviderId,t.RecaptchaVerifier=r.RecaptchaVerifier,t.SAMLAuthProvider=r.SAMLAuthProvider,t.SignInMethod=r.SignInMethod,t.TotpMultiFactorGenerator=r.TotpMultiFactorGenerator,t.TotpSecret=r.TotpSecret,t.TwitterAuthProvider=r.TwitterAuthProvider,t.applyActionCode=r.applyActionCode,t.beforeAuthStateChanged=r.beforeAuthStateChanged,t.browserLocalPersistence=r.browserLocalPersistence,t.browserPopupRedirectResolver=r.browserPopupRedirectResolver,t.browserSessionPersistence=r.browserSessionPersistence,t.checkActionCode=r.checkActionCode,t.confirmPasswordReset=r.confirmPasswordReset,t.connectAuthEmulator=r.connectAuthEmulator,t.createUserWithEmailAndPassword=r.createUserWithEmailAndPassword,t.debugErrorMap=r.debugErrorMap,t.deleteUser=r.deleteUser,t.fetchSignInMethodsForEmail=r.fetchSignInMethodsForEmail,t.getAdditionalUserInfo=r.getAdditionalUserInfo,t.getAuth=r.getAuth,t.getIdToken=r.getIdToken,t.getIdTokenResult=r.getIdTokenResult,t.getMultiFactorResolver=r.getMultiFactorResolver,t.getRedirectResult=r.getRedirectResult,t.inMemoryPersistence=r.inMemoryPersistence,t.indexedDBLocalPersistence=r.indexedDBLocalPersistence,t.initializeAuth=r.initializeAuth,t.initializeRecaptchaConfig=r.initializeRecaptchaConfig,t.isSignInWithEmailLink=r.isSignInWithEmailLink,t.linkWithCredential=r.linkWithCredential,t.linkWithPhoneNumber=r.linkWithPhoneNumber,t.linkWithPopup=r.linkWithPopup,t.linkWithRedirect=r.linkWithRedirect,t.multiFactor=r.multiFactor,t.onAuthStateChanged=r.onAuthStateChanged,t.onIdTokenChanged=r.onIdTokenChanged,t.parseActionCodeURL=r.parseActionCodeURL,t.prodErrorMap=r.prodErrorMap,t.reauthenticateWithCredential=r.reauthenticateWithCredential,t.reauthenticateWithPhoneNumber=r.reauthenticateWithPhoneNumber,t.reauthenticateWithPopup=r.reauthenticateWithPopup,t.reauthenticateWithRedirect=r.reauthenticateWithRedirect,t.reload=r.reload,t.sendEmailVerification=r.sendEmailVerification,t.sendPasswordResetEmail=r.sendPasswordResetEmail,t.sendSignInLinkToEmail=r.sendSignInLinkToEmail,t.setPersistence=r.setPersistence,t.signInAnonymously=r.signInAnonymously,t.signInWithCredential=r.signInWithCredential,t.signInWithCustomToken=r.signInWithCustomToken,t.signInWithEmailAndPassword=r.signInWithEmailAndPassword,t.signInWithEmailLink=r.signInWithEmailLink,t.signInWithPhoneNumber=r.signInWithPhoneNumber,t.signInWithPopup=r.signInWithPopup,t.signInWithRedirect=r.signInWithRedirect,t.signOut=r.signOut,t.unlink=r.unlink,t.updateCurrentUser=r.updateCurrentUser,t.updateEmail=r.updateEmail,t.updatePassword=r.updatePassword,t.updatePhoneNumber=r.updatePhoneNumber,t.updateProfile=r.updateProfile,t.useDeviceLanguage=r.useDeviceLanguage,t.verifyBeforeUpdateEmail=r.verifyBeforeUpdateEmail,t.verifyPasswordResetCode=r.verifyPasswordResetCode},1042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s,o=n(7827),i=[];t.LogLevel=void 0,(s=t.LogLevel||(t.LogLevel={}))[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT";var a={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},l=t.LogLevel.INFO,c=((r={})[t.LogLevel.DEBUG]="log",r[t.LogLevel.VERBOSE]="log",r[t.LogLevel.INFO]="info",r[t.LogLevel.WARN]="warn",r[t.LogLevel.ERROR]="error",r),u=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var s=(new Date).toISOString(),i=c[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[i].apply(console,o.__spreadArray(["[".concat(s,"]  ").concat(e.name,":")],n,!1))}},d=function(){function e(e){this.name=e,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.DEBUG],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.DEBUG],e,!1))},e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.VERBOSE],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.VERBOSE],e,!1))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.INFO],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.INFO],e,!1))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.WARN],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.WARN],e,!1))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.ERROR],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.ERROR],e,!1))},e}();t.Logger=d,t.setLogLevel=function(e){i.forEach((function(t){t.setLogLevel(e)}))},t.setUserLogHandler=function(e,n){for(var r=function(r){var s=null;n&&n.level&&(s=a[n.level]),r.userLogHandler=null===e?null:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var a=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");r>=(null!==s&&void 0!==s?s:n.logLevel)&&e({level:t.LogLevel[r].toLowerCase(),message:a,args:o,type:n.name})}},s=0,o=i;s<o.length;s++){r(o[s])}}},1043:(e,t,n)=>{const r=n(6580).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=r(e),s=145===n?26:2*Math.ceil((n-13)/(2*t-2)),o=[n-7];for(let r=1;r<t-1;r++)o[r]=o[r-1]-s;return o.push(6),o.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),s=r.length;for(let t=0;t<s;t++)for(let e=0;e<s;e++)0===t&&0===e||0===t&&e===s-1||t===s-1&&0===e||n.push([r[t],r[e]]);return n}},1047:(e,t,n)=>{var r=n(1443),s=n(8300),o=n(4008),i=n(3315);e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?s(e)?i(e):r(e):e.match(t)||[]}},1111:(e,t,n)=>{var r=n(6958),s=n(1176),o=n(1787),i=n(231),a=n(7455);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=i,l.prototype.set=a,e.exports=l},1170:(e,t,n)=>{var r=n(9189)((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));e.exports=r},1176:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1351:(e,t,n)=>{const r=n(794),s=n(3527),o=n(4927),i=n(7404),a=n(8647),l=n(7145),c=n(6580),u=n(2238);function d(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){const r=[];let s;for(;null!==(s=e.exec(n));)r.push({data:s[0],index:s.index,mode:t,length:s[0].length});return r}function m(e){const t=h(l.NUMERIC,r.NUMERIC,e),n=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let s,o;c.isKanjiModeEnabled()?(s=h(l.BYTE,r.BYTE,e),o=h(l.KANJI,r.KANJI,e)):(s=h(l.BYTE_KANJI,r.BYTE,e),o=[]);return t.concat(n,s,o).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return s.getBitsLength(e);case r.ALPHANUMERIC:return o.getBitsLength(e);case r.KANJI:return a.getBitsLength(e);case r.BYTE:return i.getBitsLength(e)}}function f(e,t){let n;const l=r.getBestModeForData(e);if(n=r.from(t,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new s(e);case r.ALPHANUMERIC:return new o(e);case r.KANJI:return new a(e);case r.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"===typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e}),[])},t.fromString=function(e,n){const s=function(e){const t=[];for(let n=0;n<e.length;n++){const s=e[n];switch(s.mode){case r.NUMERIC:t.push([s,{data:s.data,mode:r.ALPHANUMERIC,length:s.length},{data:s.data,mode:r.BYTE,length:s.length}]);break;case r.ALPHANUMERIC:t.push([s,{data:s.data,mode:r.BYTE,length:s.length}]);break;case r.KANJI:t.push([s,{data:s.data,mode:r.BYTE,length:d(s.data)}]);break;case r.BYTE:t.push([{data:s.data,mode:r.BYTE,length:d(s.data)}])}}return t}(m(e,c.isKanjiModeEnabled())),o=function(e,t){const n={},s={start:{}};let o=["start"];for(let i=0;i<e.length;i++){const a=e[i],l=[];for(let e=0;e<a.length;e++){const c=a[e],u=""+i+e;l.push(u),n[u]={node:c,lastCount:0},s[u]={};for(let e=0;e<o.length;e++){const i=o[e];n[i]&&n[i].node.mode===c.mode?(s[i][u]=p(n[i].lastCount+c.length,c.mode)-p(n[i].lastCount,c.mode),n[i].lastCount+=c.length):(n[i]&&(n[i].lastCount=c.length),s[i][u]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}o=l}for(let r=0;r<o.length;r++)s[o[r]].end=0;return{map:s,table:n}}(s,n),i=u.find_path(o.map,"start","end"),a=[];for(let t=1;t<i.length-1;t++)a.push(o.table[i[t]].node);return t.fromArray(function(e){return e.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[])}(a))},t.rawSplit=function(e){return t.fromArray(m(e,c.isKanjiModeEnabled()))}},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1404:(e,t,n)=>{var r=n(2130),s=n(9248);e.exports=function e(t,n,o,i,a){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!==t&&n!==n:r(t,n,o,i,e,a))}},1416:(e,t,n)=>{var r=n(4635),s=n(8246),o=n(4206),i=n(9757),a=n(943),l=n(6557),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=a;case"[object Set]":var p=1&r;if(m||(m=l),e.size!=t.size&&!p)return!1;var f=h.get(e);if(f)return f==t;r|=2,h.set(e,t);var g=i(m(e),m(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},1443:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},1454:(e,t,n)=>{var r=n(2269),s=n(4008),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=s(e))&&e.replace(o,r).replace(i,"")}},1465:(e,t,n)=>{var r=n(220)(n(4759),"Map");e.exports=r},1494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],o=s+1<e.length,i=o?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&o)}else if(s>239&&s<365){const o=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==o||null==i||null==a)throw new l;const c=t<<2|o>>4;if(r.push(c),64!==i){const e=o<<4&240|i>>2;if(r.push(e),64!==a){const e=i<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=i(e);return a.encodeByteArray(t,!0)},u=function(e){return c(e).replace(/\./g,"")},d=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}function m(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const p=()=>{try{return m().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},f=e=>{var t,n;return null===(n=null===(t=p())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){var e;const t=null===(e=p())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new x(n,o,t)}}const w=/\{\$([^}]+)}/g;function N(e){return JSON.parse(e)}const j=function(e){let t={},n={},r={},s="";try{const o=e.split(".");t=N(d(o[0])||""),n=N(d(o[1])||""),s=o[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:s}};function k(e){return null!==e&&"object"===typeof e}class C{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function S(){}function A(e,t){return"".concat(e," failed: ").concat(t," argument ")}const E=144e5;t.CONSTANTS=r,t.DecodeBase64StringError=l,t.Deferred=g,t.ErrorFactory=b,t.FirebaseError=x,t.MAX_VALUE_MILLIS=E,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,s,o=this.chain_[0],i=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^i&(a^l),s=1518500249):(r=i^a^l,s=1859775393):u<60?(r=i&a|l&(i|a),s=2400959708):(r=i^a^l,s=3395469782);const e=(o<<5|o>>>27)+r+c+s+n[u]&4294967295;c=l,l=a,a=4294967295&(i<<30|i>>>2),i=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)},t.assert=s,t.assertionError=o,t.async=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];Promise.resolve(!0).then((()=>{e(...r)})).catch((e=>{t&&t(e)}))}},t.base64=a,t.base64Decode=d,t.base64Encode=c,t.base64urlEncodeWithoutPadding=u,t.calculateBackoffMillis=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(E,n+r)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(o)),""].join(".")},t.createSubscribe=function(e,t){const n=new C(e,t);return n.subscribe.bind(n)},t.decode=j,t.deepCopy=function(e){return h(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),s=Object.keys(n);for(const o of r){if(!s.includes(o))return!1;const r=t[o],i=n[o];if(k(r)&&k(i)){if(!e(r,i))return!1}else if(r!==i)return!1}for(const o of s)if(!r.includes(o))return!1;return!0},t.deepExtend=h,t.errorPrefix=A,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=p())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=f,t.getDefaultEmulatorHostnameAndPort=e=>{const t=f(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=p,t.getExperimentalSetting=e=>{var t;return null===(t=p())||void 0===t?void 0:t["_".concat(e)]},t.getGlobal=m,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=y,t.isAdmin=function(e){const t=j(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isBrowserExtension=function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isElectron=function(){return y().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"===typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},t.isNode=v,t.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return y().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=j(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=j(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,s=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),s=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!s&&n>=r&&n<=s},t.issuedAtTime=function(e){const t=j(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=N,t.map=function(e,t,n){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):"".concat(e)},t.promiseWithTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const n=new g;return setTimeout((()=>n.reject("timeout!")),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);if(o>=55296&&o<=56319){const t=o-55296;r++,s(r<e.length,"Surrogate pair missing trail surrogate.");o=65536+(t<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.validateArgCount=function(e,t,n,r){let s;if(r<t?s="at least "+t:r>n&&(s=0===n?"none":"no more than "+n),s){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+s+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(A(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(A(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(A(e,"namespace")+"must be a valid firebase namespace.")}},1515:e=>{e.exports=function(){return[]}},1516:e=>{e.exports=function(e,t,n,r){var s=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e);return n}},1536:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},1570:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}},1579:(e,t,n)=>{const r=n(8361);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let o=0;o<t.length;o++)n[s+o]^=r.mul(e[s],t[o]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let o=0;o<t.length;o++)n[o]^=r.mul(t[o],e);let s=0;for(;s<n.length&&0===n[s];)s++;n=n.slice(s)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let s=0;s<e;s++)n=t.mul(n,new Uint8Array([1,r.exp(s)]));return n}},1581:(e,t,n)=>{var r=n(4635),s=Object.prototype,o=s.hasOwnProperty,i=s.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var s=i.call(e);return r&&(t?e[a]=n:delete e[a]),s}},1582:(e,t,n)=>{var r=n(4635),s=n(1570),o=n(2279),i=n(184),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return s(t,e)+"";if(i(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1641:(e,t,n)=>{var r=n(8183),s=n(5639),o=n(2479),i=o&&o.isTypedArray,a=i?s(i):r;e.exports=a},1726:(e,t,n)=>{const r=n(6580).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<o(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<s&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,R(N);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function N(e,n){f=!1,g&&(g=!1,v(S),S=-1),p=!0;var o=m;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var a=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,m=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,k=!1,C=null,S=-1,A=5,E=-1;function _(){return!(t.unstable_now()-E<A)}function I(){if(null!==C){var e=t.unstable_now();E=e;var n=!0;try{n=C(!0,e)}finally{n?j():(k=!1,C=null)}}else k=!1}if("function"===typeof x)j=function(){x(I)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=I,j=function(){P.postMessage(null)}}else j=function(){y(I,0)};function R(e){C=e,k||(k=!0,j())}function D(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,D(w,o-i))):(e.sortIndex=a,n(c,e),f||p||(f=!0,R(N))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},1787:(e,t,n)=>{var r=n(3616),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0}},2022:(e,t,n)=>{var r=n(4635),s=n(1581),o=n(5336),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?s(e):o(e)}},2045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7827),s=n(1494),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),i="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new s.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(h){}try{for(var s=r.__values(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=r.__read(o.value,2),l=a[0],c=a[1],u=this.normalizeInstanceIdentifier(l);try{var d=this.getOrInitializeService({instanceIdentifier:u});c.resolve(d)}catch(h){}}}catch(m){t={error:m}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=i),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spreadArray(r.__spreadArray([],r.__read(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),!1),r.__read(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))),!1))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=i),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=i),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var s=e.options,o=void 0===s?{}:s,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:o});try{for(var l=r.__values(this.instancesDeferred.entries()),c=l.next();!c.done;c=l.next()){var u=r.__read(c.value,2),d=u[0],h=u[1];i===this.normalizeInstanceIdentifier(d)&&h.resolve(a)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);var o=this.instances.get(r);return o&&e(o,r),function(){s.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,s,o=this.onInitCallbacks.get(t);if(o)try{for(var i=r.__values(o),a=i.next();!a.done;a=i.next()){var l=a.value;try{l(e,t)}catch(c){}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,s=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===i?void 0:t),options:s}),this.instances.set(n,o),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=i),this.component?this.component.multipleInstances?e:i:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=l,t.Provider=a},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,f(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var s,o={},i=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,s)&&!k.hasOwnProperty(s)&&(o[s]=t[s]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===o[s]&&(o[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:a,props:o,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,s,o,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+E(l,0):o,w(i)?(s="",null!=e&&(s=e.replace(A,"$&/")+"/"),_(i,t,s,"",(function(e){return e}))):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+E(a=e[c],c);l+=_(a,t,s,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=_(a=a.value,t,s,u=o+E(a,c++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return _(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:j};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=i,t.PureComponent=x,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=j.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},2106:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},2130:(e,t,n)=>{var r=n(5535),s=n(9757),o=n(1416),i=n(6195),a=n(5531),l=n(2279),c=n(6794),u=n(1641),d="[object Arguments]",h="[object Array]",m="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,g,y){var v=l(e),x=l(t),b=v?h:a(e),w=x?h:a(t),N=(b=b==d?m:b)==m,j=(w=w==d?m:w)==m,k=b==w;if(k&&c(e)){if(!c(t))return!1;v=!0,N=!1}if(k&&!N)return y||(y=new r),v||u(e)?s(e,t,n,f,g,y):o(e,t,b,n,f,g,y);if(!(1&n)){var C=N&&p.call(e,"__wrapped__"),S=j&&p.call(t,"__wrapped__");if(C||S){var A=C?e.value():e,E=S?t.value():t;return y||(y=new r),g(A,E,n,f,y)}}return!!k&&(y||(y=new r),i(e,t,n,f,g,y))}},2138:e=>{e.exports=function(e){return this.__data__.has(e)}},2161:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2168:(e,t)=>{function n(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:r,scale:r?4:s,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const s=n.modules.size,o=n.modules.data,i=t.getScale(s,r),a=Math.floor((s+2*r.margin)*i),l=r.margin*i,c=[r.color.light,r.color.dark];for(let t=0;t<a;t++)for(let n=0;n<a;n++){let u=4*(t*a+n),d=r.color.light;if(t>=l&&n>=l&&t<a-l&&n<a-l){d=c[o[Math.floor((t-l)/i)*s+Math.floor((n-l)/i)]?1:0]}e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}},2237:(e,t,n)=>{const r=n(2168);t.render=function(e,t,n){let s=n,o=t;"undefined"!==typeof s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),s=r.getOptions(s);const i=r.getImageWidth(e.modules.size,s),a=o.getContext("2d"),l=a.createImageData(i,i);return r.qrToImageData(l.data,e,s),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(a,o,i),a.putImageData(l,0,0),o},t.renderToDataURL=function(e,n,r){let s=r;"undefined"!==typeof s||n&&n.getContext||(s=n,n=void 0),s||(s={});const o=t.render(e,n,s),i=s.type||"image/png",a=s.rendererOpts||{};return o.toDataURL(i,a.quality)}},2238:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,r){var s={},o={};o[n]=0;var i,a,l,c,u,d,h,m=t.PriorityQueue.make();for(m.push(n,0);!m.empty();)for(l in a=(i=m.pop()).value,c=i.cost,u=e[a]||{})u.hasOwnProperty(l)&&(d=c+u[l],h=o[l],("undefined"===typeof o[l]||h>d)&&(o[l]=d,m.push(l,d),s[l]=a));if("undefined"!==typeof r&&"undefined"===typeof o[r]){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return s},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var s=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,s={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(s[n]=r[n]);return s.queue=[],s.sorter=e.sorter||r.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},2269:(e,t,n)=>{var r=n(2106)({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"});e.exports=r},2274:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2279:e=>{var t=Array.isArray;e.exports=t},2320:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},2434:(e,t,n)=>{var r=n(6848);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var i=e.apply(this,r);return n.cache=o.set(s,i)||o,i};return n.cache=new(s.Cache||r),n}s.Cache=r,e.exports=s},2479:(e,t,n)=>{e=n.nmd(e);var r=n(6658),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,i=o&&o.exports===s&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=a},2535:(e,t,n)=>{var r=n(184);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},2551:e=>{function t(e,t){var n=e.length,r=new Array(n),s={},o=n,i=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var s=e[n];t.has(s[0])||t.set(s[0],new Set),t.has(s[1])||t.set(s[1],new Set),t.get(s[0]).add(s[1])}return t}(t),a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!a.has(e[0])||!a.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)s[o]||l(e[o],o,new Set);return r;function l(e,t,o){if(o.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!a.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!s[t]){s[t]=!0;var u=i.get(e)||new Set;if(t=(u=Array.from(u)).length){o.add(e);do{var d=u[--t];l(d,a.get(d),o)}while(t);o.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var s=e[n];t.add(s[0]),t.add(s[1])}return Array.from(t)}(e),e)},e.exports.array=t},2570:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){return new e(new Uint8ClampedArray(t*n),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height)&&!!this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n?1:0},e.prototype.setRegion=function(e,t,n,r,s){for(var o=t;o<t+r;o++)for(var i=e;i<e+n;i++)this.set(i,o,!!s)},e}();t.BitMatrix=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.addOrSubtractGF=function(e,t){return e^t};var s=function(){function e(e,t,n){this.primitive=e,this.size=t,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var s=1,o=0;o<this.size;o++)this.expTable[o]=s,(s*=2)>=this.size&&(s=(s^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new r.default(this,Uint8ClampedArray.from([0])),this.one=new r.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var n=new Uint8ClampedArray(e+1);return n[0]=t,new r.default(this,n)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;if(r===n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-r);for(var s=0;s<this.coefficients.length;s++)this.coefficients[s]=t[r+s]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var n;if(this.isZero())return t;if(t.isZero())return this;var s=this.coefficients,o=t.coefficients;s.length>o.length&&(s=(n=[o,s])[0],o=n[1]);for(var i=new Uint8ClampedArray(o.length),a=o.length-s.length,l=0;l<a;l++)i[l]=o[l];for(l=a;l<o.length;l++)i[l]=r.addOrSubtractGF(s[l-a],o[l]);return new e(this.field,i)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n),s=0;s<n;s++)r[s]=this.field.multiply(this.coefficients[s],t);return new e(this.field,r)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,s=n.length,o=t.coefficients,i=o.length,a=new Uint8ClampedArray(s+i-1),l=0;l<s;l++)for(var c=n[l],u=0;u<i;u++)a[l+u]=r.addOrSubtractGF(a[l+u],this.field.multiply(c,o[u]));return new e(this.field,a)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(0===n)return this.field.zero;for(var r=this.coefficients.length,s=new Uint8ClampedArray(r+t),o=0;o<r;o++)s[o]=this.field.multiply(this.coefficients[o],n);return new e(this.field,s)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var n=this.coefficients.length;if(1===e)return this.coefficients.forEach((function(e){t=r.addOrSubtractGF(t,e)})),t;t=this.coefficients[0];for(var s=1;s<n;s++)t=r.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[s]);return t},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(11),i=n(12);function a(e){var t=i.locate(e);if(!t)return null;for(var n=0,r=t;n<r.length;n++){var a=r[n],l=o.extract(e,a),c=s.decode(l.matrix);if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,version:c.version,location:{topRightCorner:l.mappingFunction(a.dimension,0),topLeftCorner:l.mappingFunction(0,0),bottomRightCorner:l.mappingFunction(a.dimension,a.dimension),bottomLeftCorner:l.mappingFunction(0,a.dimension),topRightFinderPattern:a.topRight,topLeftFinderPattern:a.topLeft,bottomLeftFinderPattern:a.bottomLeft,bottomRightAlignmentPattern:a.alignmentPattern}}}return null}var l={inversionAttempts:"attemptBoth"};function c(e,t,n,s){void 0===s&&(s={});var o=l;Object.keys(o||{}).forEach((function(e){o[e]=s[e]||o[e]}));var i="attemptBoth"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,c="onlyInvert"===o.inversionAttempts||"invertFirst"===o.inversionAttempts,u=r.binarize(e,t,n,i),d=u.binarized,h=u.inverted,m=a(c?h:d);return m||"attemptBoth"!==o.inversionAttempts&&"invertFirst"!==o.inversionAttempts||(m=a(c?d:h)),m}c.default=c,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function s(e,t,n){return e<t?t:e>n?n:e}var o=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e}();t.binarize=function(e,t,n,i){if(e.length!==t*n*4)throw new Error("Malformed data passed to binarizer.");for(var a=new o(t,n),l=0;l<t;l++)for(var c=0;c<n;c++){var u=e[4*(c*t+l)+0],d=e[4*(c*t+l)+1],h=e[4*(c*t+l)+2];a.set(l,c,.2126*u+.7152*d+.0722*h)}for(var m=Math.ceil(t/8),p=Math.ceil(n/8),f=new o(m,p),g=0;g<p;g++)for(var y=0;y<m;y++){var v=0,x=1/0,b=0;for(c=0;c<8;c++)for(l=0;l<8;l++){var w=a.get(8*y+l,8*g+c);v+=w,x=Math.min(x,w),b=Math.max(b,w)}var N=v/Math.pow(8,2);if(b-x<=24&&(N=x/2,g>0&&y>0)){var j=(f.get(y,g-1)+2*f.get(y-1,g)+f.get(y-1,g-1))/4;x<j&&(N=j)}f.set(y,g,N)}var k=r.BitMatrix.createEmpty(t,n),C=null;for(i&&(C=r.BitMatrix.createEmpty(t,n)),g=0;g<p;g++)for(y=0;y<m;y++){for(var S=s(y,2,m-3),A=s(g,2,p-3),E=(v=0,-2);E<=2;E++)for(var _=-2;_<=2;_++)v+=f.get(S+E,A+_);var I=v/25;for(E=0;E<8;E++)for(_=0;_<8;_++){l=8*y+E,c=8*g+_;var T=a.get(l,c);k.set(l,c,T<=I),i&&C.set(l,c,!(T<=I))}}return i?{binarized:k,inverted:C}:{binarized:k}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(6),o=n(9),i=n(10);function a(e,t){for(var n=e^t,r=0;n;)r++,n&=n-1;return r}function l(e,t){return t<<1|e}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2===0},function(e){return e.y%2===0},function(e){return e.x%3===0},function(e){return(e.y+e.x)%3===0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2===0},function(e){return e.x*e.y%2+e.x*e.y%3===0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2===0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2===0}];function d(e,t,n){for(var s=u[n.dataMask],o=e.height,i=function(e){var t=17+4*e.versionNumber,n=r.BitMatrix.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(var s=0,o=e.alignmentPatternCenters;s<o.length;s++)for(var i=o[s],a=0,l=e.alignmentPatternCenters;a<l.length;a++){var c=l[a];6===i&&6===c||6===i&&c===t-7||i===t-7&&6===c||n.setRegion(i-2,c-2,5,5,!0)}return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}(t),a=[],c=0,d=0,h=!0,m=o-1;m>0;m-=2){6===m&&m--;for(var p=0;p<o;p++)for(var f=h?o-1-p:p,g=0;g<2;g++){var y=m-g;if(!i.get(y,f)){d++;var v=e.get(y,f);s({y:f,x:y})&&(v=!v),c=l(v,c),8===d&&(a.push(c),d=0,c=0)}}h=!h}return a}function h(e){var t=function(e){var t=e.height,n=Math.floor((t-17)/4);if(n<=6)return i.VERSIONS[n-1];for(var r=0,s=5;s>=0;s--)for(var o=t-9;o>=t-11;o--)r=l(e.get(o,s),r);var c=0;for(o=5;o>=0;o--)for(s=t-9;s>=t-11;s--)c=l(e.get(o,s),c);for(var u,d=1/0,h=0,m=i.VERSIONS;h<m.length;h++){var p=m[h];if(p.infoBits===r||p.infoBits===c)return p;var f=a(r,p.infoBits);f<d&&(u=p,d=f),(f=a(c,p.infoBits))<d&&(u=p,d=f)}return d<=3?u:void 0}(e);if(!t)return null;var n=function(e){for(var t=0,n=0;n<=8;n++)6!==n&&(t=l(e.get(n,8),t));for(var r=7;r>=0;r--)6!==r&&(t=l(e.get(8,r),t));var s=e.height,o=0;for(r=s-1;r>=s-7;r--)o=l(e.get(8,r),o);for(n=s-8;n<s;n++)o=l(e.get(n,8),o);for(var i=1/0,u=null,d=0,h=c;d<h.length;d++){var m=h[d],p=m.bits,f=m.formatInfo;if(p===t||p===o)return f;var g=a(t,p);g<i&&(u=f,i=g),t!==o&&(g=a(o,p))<i&&(u=f,i=g)}return i<=3?u:null}(e);if(!n)return null;var r=function(e,t,n){var r=t.errorCorrectionLevels[n],s=[],o=0;if(r.ecBlocks.forEach((function(e){for(var t=0;t<e.numBlocks;t++)s.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),o+=e.dataCodewordsPerBlock+r.ecCodewordsPerBlock})),e.length<o)return null;e=e.slice(0,o);for(var i=r.ecBlocks[0].dataCodewordsPerBlock,a=0;a<i;a++)for(var l=0,c=s;l<c.length;l++)c[l].codewords.push(e.shift());if(r.ecBlocks.length>1){var u=r.ecBlocks[0].numBlocks,d=r.ecBlocks[1].numBlocks;for(a=0;a<d;a++)s[u+a].codewords.push(e.shift())}for(;e.length>0;)for(var h=0,m=s;h<m.length;h++)m[h].codewords.push(e.shift());return s}(d(e,t,n),t,n.errorCorrectionLevel);if(!r)return null;for(var u=r.reduce((function(e,t){return e+t.numDataCodewords}),0),h=new Uint8ClampedArray(u),m=0,p=0,f=r;p<f.length;p++){var g=f[p],y=o.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!y)return null;for(var v=0;v<g.numDataCodewords;v++)h[m++]=y[v]}try{return s.decode(h,t.versionNumber)}catch(x){return null}}t.decode=function(e){if(null==e)return null;var t=h(e);if(t)return t;for(var n=0;n<e.width;n++)for(var r=n+1;r<e.height;r++)e.get(n,r)!==e.get(r,n)&&(e.set(n,r,!e.get(n,r)),e.set(r,n,!e.get(r,n)));return h(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,s,o=n(7),i=n(8);function a(e,t){for(var n=[],r="",s=[10,12,14][t],o=e.readBits(s);o>=3;){if((c=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var i=Math.floor(c/100),a=Math.floor(c/10)%10,l=c%10;n.push(48+i,48+a,48+l),r+=i.toString()+a.toString()+l.toString(),o-=3}if(2===o){if((c=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");i=Math.floor(c/10),a=c%10,n.push(48+i,48+a),r+=i.toString()+a.toString()}else if(1===o){var c;if((c=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");n.push(48+c),r+=c.toString()}return{bytes:n,text:r}}!function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"}(r=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(s||(s={}));var l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(e,t){for(var n=[],r="",s=[9,11,13][t],o=e.readBits(s);o>=2;){var i=e.readBits(11),a=Math.floor(i/45),c=i%45;n.push(l[a].charCodeAt(0),l[c].charCodeAt(0)),r+=l[a]+l[c],o-=2}return 1===o&&(a=e.readBits(6),n.push(l[a].charCodeAt(0)),r+=l[a]),{bytes:n,text:r}}function u(e,t){for(var n=[],r="",s=[8,16,16][t],o=e.readBits(s),i=0;i<o;i++){var a=e.readBits(8);n.push(a)}try{r+=decodeURIComponent(n.map((function(e){return"%"+("0"+e.toString(16)).substr(-2)})).join(""))}catch(l){}return{bytes:n,text:r}}function d(e,t){for(var n=[],r="",s=[8,10,12][t],o=e.readBits(s),a=0;a<o;a++){var l=e.readBits(13),c=Math.floor(l/192)<<8|l%192;c+=c<7936?33088:49472,n.push(c>>8,255&c),r+=String.fromCharCode(i.shiftJISTable[c])}return{bytes:n,text:r}}t.decode=function(e,t){for(var n,i,l,h,m=new o.BitStream(e),p=t<=9?0:t<=26?1:2,f={text:"",bytes:[],chunks:[],version:t};m.available()>=4;){var g=m.readBits(4);if(g===s.Terminator)return f;if(g===s.ECI)0===m.readBits(1)?f.chunks.push({type:r.ECI,assignmentNumber:m.readBits(7)}):0===m.readBits(1)?f.chunks.push({type:r.ECI,assignmentNumber:m.readBits(14)}):0===m.readBits(1)?f.chunks.push({type:r.ECI,assignmentNumber:m.readBits(21)}):f.chunks.push({type:r.ECI,assignmentNumber:-1});else if(g===s.Numeric){var y=a(m,p);f.text+=y.text,(n=f.bytes).push.apply(n,y.bytes),f.chunks.push({type:r.Numeric,text:y.text})}else if(g===s.Alphanumeric){var v=c(m,p);f.text+=v.text,(i=f.bytes).push.apply(i,v.bytes),f.chunks.push({type:r.Alphanumeric,text:v.text})}else if(g===s.Byte){var x=u(m,p);f.text+=x.text,(l=f.bytes).push.apply(l,x.bytes),f.chunks.push({type:r.Byte,bytes:x.bytes,text:x.text})}else if(g===s.Kanji){var b=d(m,p);f.text+=b.text,(h=f.bytes).push.apply(h,b.bytes),f.chunks.push({type:r.Kanji,bytes:b.bytes,text:b.text})}}if(0===m.available()||0===m.readBits(m.available()))return f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,r=e<n?e:n,s=255>>8-r<<(o=n-r);t=(this.bytes[this.byteOffset]&s)>>o,e-=r,this.bitOffset+=r,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var o;if(e>0)s=255>>(o=8-e)<<o,t=t<<e|(this.bytes[this.byteOffset]&s)>>o,this.bitOffset+=e}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),s=n(2);t.decode=function(e,t){var n=new Uint8ClampedArray(e.length);n.set(e);for(var o=new r.default(285,256,0),i=new s.default(o,n),a=new Uint8ClampedArray(t),l=!1,c=0;c<t;c++){var u=i.evaluateAt(o.exp(c+o.generatorBase));a[a.length-1-c]=u,0!==u&&(l=!0)}if(!l)return n;var d=new s.default(o,a),h=function(e,t,n,r){var s;t.degree()<n.degree()&&(t=(s=[n,t])[0],n=s[1]);for(var o=t,i=n,a=e.zero,l=e.one;i.degree()>=r/2;){var c=o,u=a;if(a=l,(o=i).isZero())return null;i=c;for(var d=e.zero,h=o.getCoefficient(o.degree()),m=e.inverse(h);i.degree()>=o.degree()&&!i.isZero();){var p=i.degree()-o.degree(),f=e.multiply(i.getCoefficient(i.degree()),m);d=d.addOrSubtract(e.buildMonomial(p,f)),i=i.addOrSubtract(o.multiplyByMonomial(p,f))}if(l=d.multiplyPoly(a).addOrSubtract(u),i.degree()>=o.degree())return null}var g=l.getCoefficient(0);if(0===g)return null;var y=e.inverse(g);return[l.multiply(y),i.multiply(y)]}(o,o.buildMonomial(t,1),d,t);if(null===h)return null;var m=function(e,t){var n=t.degree();if(1===n)return[t.getCoefficient(1)];for(var r=new Array(n),s=0,o=1;o<e.size&&s<n;o++)0===t.evaluateAt(o)&&(r[s]=e.inverse(o),s++);return s!==n?null:r}(o,h[0]);if(null==m)return null;for(var p=function(e,t,n){for(var s=n.length,o=new Array(s),i=0;i<s;i++){for(var a=e.inverse(n[i]),l=1,c=0;c<s;c++)i!==c&&(l=e.multiply(l,r.addOrSubtractGF(1,e.multiply(n[c],a))));o[i]=e.multiply(t.evaluateAt(a),e.inverse(l)),0!==e.generatorBase&&(o[i]=e.multiply(o[i],a))}return o}(o,h[1],m),f=0;f<m.length;f++){var g=n.length-1-o.log(m[f]);if(g<0)return null;n[g]=r.addOrSubtractGF(n[g],p[f])}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function s(e,t,n,r){var s=e.x-t.x+n.x-r.x,o=e.y-t.y+n.y-r.y;if(0===s&&0===o)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-n.x,a=r.x-n.x,l=t.y-n.y,c=r.y-n.y,u=i*c-a*l,d=(s*c-a*o)/u,h=(i*o-s*l)/u;return{a11:t.x-e.x+d*t.x,a12:t.y-e.y+d*t.y,a13:d,a21:r.x-e.x+h*r.x,a22:r.y-e.y+h*r.y,a23:h,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var n,o,i=function(e,t,n,r){var o=s(e,t,n,r);return{a11:o.a22*o.a33-o.a23*o.a32,a12:o.a13*o.a32-o.a12*o.a33,a13:o.a12*o.a23-o.a13*o.a22,a21:o.a23*o.a31-o.a21*o.a33,a22:o.a11*o.a33-o.a13*o.a31,a23:o.a13*o.a21-o.a11*o.a23,a31:o.a21*o.a32-o.a22*o.a31,a32:o.a12*o.a31-o.a11*o.a32,a33:o.a11*o.a22-o.a12*o.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),a=s(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),l=(o=i,{a11:(n=a).a11*o.a11+n.a21*o.a12+n.a31*o.a13,a12:n.a12*o.a11+n.a22*o.a12+n.a32*o.a13,a13:n.a13*o.a11+n.a23*o.a12+n.a33*o.a13,a21:n.a11*o.a21+n.a21*o.a22+n.a31*o.a23,a22:n.a12*o.a21+n.a22*o.a22+n.a32*o.a23,a23:n.a13*o.a21+n.a23*o.a22+n.a33*o.a23,a31:n.a11*o.a31+n.a21*o.a32+n.a31*o.a33,a32:n.a12*o.a31+n.a22*o.a32+n.a32*o.a33,a33:n.a13*o.a31+n.a23*o.a32+n.a33*o.a33}),c=r.BitMatrix.createEmpty(t.dimension,t.dimension),u=function(e,t){var n=l.a13*e+l.a23*t+l.a33;return{x:(l.a11*e+l.a21*t+l.a31)/n,y:(l.a12*e+l.a22*t+l.a32)/n}},d=0;d<t.dimension;d++)for(var h=0;h<t.dimension;h++){var m=u(h+.5,d+.5);c.set(h,d,e.get(Math.floor(m.x),Math.floor(m.y)))}return{matrix:c,mappingFunction:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function s(e){return e.reduce((function(e,t){return e+t}))}function o(e,t,n,s){var o,i,a,l,c=[{x:Math.floor(e.x),y:Math.floor(e.y)}],u=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);u?(o=Math.floor(e.y),i=Math.floor(e.x),a=Math.floor(t.y),l=Math.floor(t.x)):(o=Math.floor(e.x),i=Math.floor(e.y),a=Math.floor(t.x),l=Math.floor(t.y));for(var d=Math.abs(a-o),h=Math.abs(l-i),m=Math.floor(-d/2),p=o<a?1:-1,f=i<l?1:-1,g=!0,y=o,v=i;y!==a+p;y+=p){var x=u?v:y,b=u?y:v;if(n.get(x,b)!==g&&(g=!g,c.push({x:x,y:b}),c.length===s+1))break;if((m+=h)>0){if(v===l)break;v+=f,m-=d}}for(var w=[],N=0;N<s;N++)c[N]&&c[N+1]?w.push(r(c[N],c[N+1])):w.push(0);return w}function i(e,t,n,r){var s,i=t.y-e.y,a=t.x-e.x,l=o(e,t,n,Math.ceil(r/2)),c=o(e,{x:e.x-a,y:e.y-i},n,Math.ceil(r/2)),u=l.shift()+c.shift()-1;return(s=c.concat(u)).concat.apply(s,l)}function a(e,t){var n=s(e)/s(t),r=0;return t.forEach((function(t,s){r+=Math.pow(e[s]-t*n,2)})),{averageSize:n,error:r}}function l(e,t,n){try{var r=i(e,{x:-1,y:e.y},n,t.length),s=i(e,{x:e.x,y:-1},n,t.length),o=i(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},n,t.length),l=i(e,{x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},n,t.length),c=a(r,t),u=a(s,t),d=a(o,t),h=a(l,t),m=Math.sqrt(c.error*c.error+u.error*u.error+d.error*d.error+h.error*h.error),p=(c.averageSize+u.averageSize+d.averageSize+h.averageSize)/4;return m+(Math.pow(c.averageSize-p,2)+Math.pow(u.averageSize-p,2)+Math.pow(d.averageSize-p,2)+Math.pow(h.averageSize-p,2))/p}catch(f){return 1/0}}function c(e,t){for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n--;for(var r=Math.round(t.x);e.get(r,Math.round(t.y));)r++;for(var s=(n+r)/2,o=Math.round(t.y);e.get(Math.round(s),o);)o--;for(var i=Math.round(t.y);e.get(Math.round(s),i);)i++;return{x:s,y:(o+i)/2}}function u(e,t,n,o,a){var c,u,d;try{c=function(e,t,n,o){var a=(s(i(e,n,o,5))/7+s(i(e,t,o,5))/7+s(i(n,e,o,5))/7+s(i(t,e,o,5))/7)/4;if(a<1)throw new Error("Invalid module size");var l=Math.round(r(e,t)/a),c=Math.round(r(e,n)/a),u=Math.floor((l+c)/2)+7;switch(u%4){case 0:u++;break;case 2:u--}return{dimension:u,moduleSize:a}}(o,n,a,e),u=c.dimension,d=c.moduleSize}catch(v){return null}var h=n.x-o.x+a.x,m=n.y-o.y+a.y,p=(r(o,a)+r(o,n))/2/d,f=1-3/p,g={x:o.x+f*(h-o.x),y:o.y+f*(m-o.y)},y=t.map((function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,o=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(n),Math.floor(o))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return s(i),{x:n,y:o,score:l({x:Math.floor(n),y:Math.floor(o)},[1,1,1],e)+r({x:n,y:o},g)}}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score}));return{alignmentPattern:p>=15&&y.length?y[0]:g,dimension:u}}t.locate=function(e){for(var t=[],n=[],o=[],i=[],a=function(r){for(var a=0,l=!1,c=[0,0,0,0,0],u=function(t){var o=e.get(t,r);if(o===l)a++;else{c=[c[1],c[2],c[3],c[4],a],a=1,l=o;var u=s(c)/7,d=Math.abs(c[0]-u)<u&&Math.abs(c[1]-u)<u&&Math.abs(c[2]-3*u)<3*u&&Math.abs(c[3]-u)<u&&Math.abs(c[4]-u)<u&&!o,h=s(c.slice(-3))/3,m=Math.abs(c[2]-h)<h&&Math.abs(c[3]-h)<h&&Math.abs(c[4]-h)<h&&o;if(d){var p=t-c[3]-c[4],f=p-c[2],g={startX:f,endX:p,y:r};(y=n.filter((function(e){return f>=e.bottom.startX&&f<=e.bottom.endX||p>=e.bottom.startX&&f<=e.bottom.endX||f<=e.bottom.startX&&p>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?y[0].bottom=g:n.push({top:g,bottom:g})}if(m){var y,v=t-c[4],x=v-c[3];g={startX:x,y:r,endX:v},(y=i.filter((function(e){return x>=e.bottom.startX&&x<=e.bottom.endX||v>=e.bottom.startX&&x<=e.bottom.endX||x<=e.bottom.startX&&v>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5}))).length>0?y[0].bottom=g:i.push({top:g,bottom:g})}}},d=-1;d<=e.width;d++)u(d);t.push.apply(t,n.filter((function(e){return e.bottom.y!==r&&e.bottom.y-e.top.y>=2}))),n=n.filter((function(e){return e.bottom.y===r})),o.push.apply(o,i.filter((function(e){return e.bottom.y!==r}))),i=i.filter((function(e){return e.bottom.y===r}))},d=0;d<=e.height;d++)a(d);t.push.apply(t,n.filter((function(e){return e.bottom.y-e.top.y>=2}))),o.push.apply(o,i);var h=t.filter((function(e){return e.bottom.y-e.top.y>=2})).map((function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(n),Math.round(r))){var o=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],i=s(o)/o.length;return{score:l({x:Math.round(n),y:Math.round(r)},[1,1,3,1,1],e),x:n,y:r,size:i}}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score})).map((function(e,t,n){if(t>4)return null;var r=n.filter((function(e,n){return t!==n})).map((function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}})).sort((function(e,t){return e.score-t.score}));if(r.length<2)return null;var s=e.score+r[0].score+r[1].score;return{points:[e].concat(r.slice(0,2)),score:s}})).filter((function(e){return!!e})).sort((function(e,t){return e.score-t.score}));if(0===h.length)return null;var m=function(e,t,n){var s,o,i,a,l,c,u,d=r(e,t),h=r(t,n),m=r(e,n);return h>=d&&h>=m?(l=(s=[t,e,n])[0],c=s[1],u=s[2]):m>=h&&m>=d?(l=(o=[e,t,n])[0],c=o[1],u=o[2]):(l=(i=[e,n,t])[0],c=i[1],u=i[2]),(u.x-c.x)*(l.y-c.y)-(u.y-c.y)*(l.x-c.x)<0&&(l=(a=[u,l])[0],u=a[1]),{bottomLeft:l,topLeft:c,topRight:u}}(h[0].points[0],h[0].points[1],h[0].points[2]),p=m.topRight,f=m.topLeft,g=m.bottomLeft,y=u(e,o,p,f,g),v=[];y&&v.push({alignmentPattern:{x:y.alignmentPattern.x,y:y.alignmentPattern.y},bottomLeft:{x:g.x,y:g.y},dimension:y.dimension,topLeft:{x:f.x,y:f.y},topRight:{x:p.x,y:p.y}});var x=c(e,p),b=c(e,f),w=c(e,g),N=u(e,o,x,b,w);return N&&v.push({alignmentPattern:{x:N.alignmentPattern.x,y:N.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:b.x,y:b.y},topRight:{x:x.x,y:x.y},dimension:N.dimension}),0===v.length?null:v}}]).default},e.exports=t()},2575:(e,t,n)=>{"use strict";n.d(t,{yA:()=>v,j2:()=>x,db:()=>b,$F:()=>j,IG:()=>w});var r=n(6493);(0,r.KO)("firebase","9.23.0","app");var s=n(700),o=n(3849),i=n(9751),a=n(9061),l=n(7253);const c="functions";a.g;class u{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((e=>this.auth=e),(()=>{})),this.messaging||t.get().then((e=>this.messaging=e),(()=>{})),this.appCheck||n.get().then((e=>this.appCheck=e),(()=>{}))}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const d="us-central1";class h{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,o=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new u(t,n,r),this.cancelAllRequests=new Promise((e=>{this.deleteService=()=>Promise.resolve(e())}));try{const e=new URL(s);this.customDomain=e.origin,this.region=d}catch(i){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const m="@firebase/functions",p="0.10.0";var f,g;f=fetch.bind(self),(0,r.om)(new l.uA(c,((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),i=e.getProvider("app-check-internal");return new h(r,s,o,i,n,f)}),"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(m,p,g),(0,r.KO)(m,p,"esm2017");var y=n(8025);const v=(0,r.Wp)({apiKey:"AIzaSyB_px307ityLaMaEG-TqT-Ssz3CT-AhJ6Y",authDomain:"coupin-f35d2.firebaseapp.com",projectId:"coupin-f35d2",storageBucket:"coupin-f35d2.appspot.com",messagingSenderId:"757183919417",appId:"1:757183919417:web:6c0146510173250129a4e8",measurementId:"G-R0XYKGNZ9C"}),x=(0,s.xI)(v),b=(0,o.aU)(v),w=(0,i.c7)(v),N=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;const n=(0,r.j6)((0,a.Ku)(e),c).getImmediate({identifier:t}),s=(0,a.yU)("functions");s&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}((0,a.Ku)(e),t,n)}(n,...s)}(v),"undefined"!==typeof window?(0,y.P5)(v):null);if("true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_EMULATORS){const{connectFirestoreEmulator:e}=n(9329),{connectAuthEmulator:t}=n(8982);try{e(b,"localhost",8080),t(x,"http://localhost:9099"),console.log("Connected to Firebase emulators")}catch(k){console.error("Failed to connect to Firebase emulators:",k)}}const j=(e,t)=>{N&&(0,y.$s)(N,e,t)}},2621:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},2654:(e,t,n)=>{"use strict";var r=n(9950),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},2791:(e,t,n)=>{var r=n(5661),s=n(1465),o=n(6848);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!s||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},2890:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,r){const s=e*this.size+t;this.data[s]=n,r&&(this.reservedBit[s]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},3008:(e,t,n)=>{var r=n(2022),s=n(4567);e.exports=function(e){if(!s(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},3012:(e,t,n)=>{var r=n(2022),s=n(9248);e.exports=function(e){return s(e)&&"[object Arguments]"==r(e)}},3031:(e,t,n)=>{var r=n(5211)();e.exports=r},3077:(e,t,n)=>{var r=n(5099);e.exports=function(e,t){var n=this.__data__,s=r(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}},3306:(e,t,n)=>{var r=n(4123),s=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!s&&s in e}},3315:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",s="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+o+"]",a="\\d+",l="["+n+"]",c="["+r+"]",u="[^"+t+o+a+n+r+s+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+s+"]",p="(?:"+c+"|"+u+")",f="(?:"+m+"|"+u+")",g="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",y="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",x="[\\ufe0e\\ufe0f]?",b=x+v+("(?:\\u200d(?:"+["[^"+t+"]",d,h].join("|")+")"+x+v+")*"),w="(?:"+[l,d,h].join("|")+")"+b,N=RegExp([m+"?"+c+"+"+g+"(?="+[i,m,"$"].join("|")+")",f+"+"+y+"(?="+[i,m+p,"$"].join("|")+")",m+"?"+p+"+"+g,m+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,w].join("|"),"g");e.exports=function(e){return e.match(N)||[]}},3334:(e,t,n)=>{var r=n(9794),s=n(5724);e.exports=function(e){for(var t=s(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},3414:(e,t,n)=>{var r=n(6689)("toUpperCase");e.exports=r},3445:e=>{e.exports=function(e,t){return e.has(t)}},3527:(e,t,n)=>{const r=n(794);function s(e){this.mode=r.NUMERIC,this.data=e.toString()}s.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const s=this.data.length-t;s>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*s+1))},e.exports=s},3616:(e,t,n)=>{var r=n(220)(Object,"create");e.exports=r},3660:(e,t,n)=>{var r=n(4761),s=n(8194),o=n(5724);e.exports=function(e){return r(e,o,s)}},3721:e=>{e.exports=function(){return!1}},3734:(e,t,n)=>{var r=n(2434);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},3849:(e,t,n)=>{"use strict";n.d(t,{Dc:()=>ts,gS:()=>Xd,rJ:()=>Lu,kd:()=>Jd,H9:()=>Ou,d_:()=>th,x7:()=>Gd,GG:()=>Yd,aU:()=>Uu,GV:()=>oh,AB:()=>Td,My:()=>_d,P:()=>kd,O5:()=>sh,BN:()=>Qd,HM:()=>Rd,mZ:()=>$d,_M:()=>Sd,wP:()=>ih});var r,s=n(6493),o=n(7253),i=n(4624),a=n(9061),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={},u=u||{},d=l||self;function h(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),f=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function x(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return t.prototype[n].apply(e,s)}}function w(){this.s=this.s,this.o=this.o}w.prototype.s=!1,w.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++f))},w.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const N=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function j(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(h(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",(()=>{}),t),d.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}function E(){var e=d.navigator;return e&&(e=e.userAgent)?e:""}function _(e){return-1!=E().indexOf(e)}function I(e){return I[" "](e),e}I[" "]=function(){};var T,P,R=_("Opera"),D=_("Trident")||_("MSIE"),M=_("Edge"),L=M||D,O=_("Gecko")&&!(-1!=E().toLowerCase().indexOf("webkit")&&!_("Edge"))&&!(_("Trident")||_("MSIE"))&&!_("Edge"),F=-1!=E().toLowerCase().indexOf("webkit")&&!_("Edge");function B(){var e=d.document;return e?e.documentMode:void 0}e:{var U="",z=function(){var e=E();return O?/rv:([^\);]+)(\)|;)/.exec(e):M?/Edge\/([\d\.]+)/.exec(e):D?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):F?/WebKit\/(\S+)/.exec(e):R?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(z&&(U=z?z[1]:""),D){var V=B();if(null!=V&&V>parseFloat(U)){T=String(V);break e}}T=U}if(d.document&&D){var q=B();P=q||(parseInt(T,10)||void 0)}else P=void 0;var W=P;function H(e,t){if(C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(O){e:{try{I(t.nodeName);var s=!0;break e}catch(o){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:G[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.$.h.call(this)}}b(H,C);var G={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),Y=0;function Q(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++Y,this.fa=this.ia=!1}function $(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function J(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function X(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],o=N(s,t);(r=0<=o)&&Array.prototype.splice.call(s,o,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var s=0;s<e.length;++s){var o=e[s];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return s}return-1}te.prototype.add=function(e,t,n,r,s){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var i=re(e,t,r,s);return-1<i?(t=e[i],n||(t.ia=!1)):((t=new Q(t,this.src,o,!!r,s)).ia=n,e.push(t)),t};var se="closure_lm_"+(1e6*Math.random()|0),oe={};function ie(e,t,n,r,s){if(r&&r.once)return le(e,t,n,r,s);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ie(e,t[o],n,r,s);return null}return n=fe(n),e&&e[K]?e.O(t,n,m(r)?!!r.capture:!!r,s):ae(e,t,n,!1,r,s)}function ae(e,t,n,r,s,o){if(!t)throw Error("Invalid event type");var i=m(s)?!!s.capture:!!s,a=me(e);if(a||(e[se]=a=new te(e)),(n=a.add(t,n,r,i,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=he;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S||(s=i),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(de(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function le(e,t,n,r,s){if(Array.isArray(t)){for(var o=0;o<t.length;o++)le(e,t[o],n,r,s);return null}return n=fe(n),e&&e[K]?e.P(t,n,m(r)?!!r.capture:!!r,s):ae(e,t,n,!0,r,s)}function ce(e,t,n,r,s){if(Array.isArray(t))for(var o=0;o<t.length;o++)ce(e,t[o],n,r,s);else r=m(r)?!!r.capture:!!r,n=fe(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=re(o=e.g[t],n,r,s))&&($(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=me(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,s)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[K])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(de(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=me(t))?(ne(n,e),0==n.h&&(n.src=null,t[se]=null)):$(e)}}}function de(e){return e in oe?oe[e]:oe[e]="on"+e}function he(e,t){if(e.fa)e=!0;else{t=new H(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ue(e),e=n.call(r,t)}return e}function me(e){return(e=e[se])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function ge(){w.call(this),this.i=new te(this),this.S=this,this.J=null}function ye(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var s=t;ee(t=new C(r,e),s)}if(s=!0,n)for(var o=n.length-1;0<=o;o--){var i=t.g=n[o];s=ve(i,r,!0,t)&&s}if(s=ve(i=t.g=e,r,!0,t)&&s,s=ve(i,r,!1,t)&&s,n)for(o=0;o<n.length;o++)s=ve(i=t.g=n[o],r,!1,t)&&s}function ve(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,o=0;o<t.length;++o){var i=t[o];if(i&&!i.fa&&i.capture==n){var a=i.listener,l=i.la||i.src;i.ia&&ne(e.i,i),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}b(ge,w),ge.prototype[K]=!0,ge.prototype.removeEventListener=function(e,t,n,r){ce(this,e,t,n,r)},ge.prototype.N=function(){if(ge.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.J=null},ge.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ge.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xe=d.JSON.stringify;function be(){var e=Ae;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var we=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ne),(e=>e.reset()));class Ne{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function je(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ke(e){d.setTimeout((()=>{throw e}),0)}let Ce,Se=!1,Ae=new class{constructor(){this.h=this.g=null}add(e,t){const n=we.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ee=()=>{const e=d.Promise.resolve(void 0);Ce=()=>{e.then(_e)}};var _e=()=>{for(var e;e=be();){try{e.h.call(e.g)}catch(n){ke(n)}var t=we;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Se=!1};function Ie(e,t){ge.call(this),this.h=e||1,this.g=t||d,this.j=v(this.qb,this),this.l=Date.now()}function Te(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Pe(e,t,n){if("function"===typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function Re(e){e.g=Pe((()=>{e.g=null,e.i&&(e.i=!1,Re(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}b(Ie,ge),(r=Ie.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(Te(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){Ie.$.N.call(this),Te(this),delete this.g};class De extends w{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(e){w.call(this),this.h=e,this.g={}}b(Me,w);var Le=[];function Oe(e,t,n,r){Array.isArray(n)||(n&&(Le[0]=n.toString()),n=Le);for(var s=0;s<n.length;s++){var o=ie(t,n[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Fe(e){J(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ue(e)}),e),e.g={}}function Be(){this.g=!0}function Ue(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var i=1;i<s.length;i++)s[i]=""}}}return xe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Me.prototype.N=function(){Me.$.N.call(this),Fe(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Be.prototype.Ea=function(){this.g=!1},Be.prototype.info=function(){};var ze={},Ve=null;function qe(){return Ve=Ve||new ge}function We(e){C.call(this,ze.Ta,e)}function He(e){const t=qe();ye(t,new We(t))}function Ge(e,t){C.call(this,ze.STAT_EVENT,e),this.stat=t}function Ke(e){const t=qe();ye(t,new Ge(t,e))}function Ye(e,t){C.call(this,ze.Ua,e),this.size=t}function Qe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}ze.Ta="serverreachability",b(We,C),ze.STAT_EVENT="statevent",b(Ge,C),ze.Ua="timingevent",b(Ye,C);var $e={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Je={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xe(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Xe.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){C.call(this,"d")}function st(){C.call(this,"c")}function ot(){}function it(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Me(this),this.P=lt,e=L?125:void 0,this.V=new Ie(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}b(rt,C),b(st,C),b(ot,Xe),ot.prototype.g=function(){return new XMLHttpRequest},ot.prototype.i=function(){return{}},tt=new ot;var lt=45e3,ct={},ut={};function dt(e,t,n){e.L=1,e.v=It(Ct(t)),e.s=n,e.S=!0,ht(e,null)}function ht(e,t){e.G=Date.now(),gt(e),e.A=Ct(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),qt(n.i,"t",r),e.C=0,n=e.l.J,e.h=new at,e.g=Hn(e.l,n?t:null,!e.s),0<e.O&&(e.M=new De(v(e.Pa,e,e.g),e.O)),Oe(e.U,e.g,"readystatechange",e.nb),t=e.I?X(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),He(),function(e,t,n,r,s,o){e.info((function(){if(e.g)if(o)for(var i="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=o;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function mt(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function pt(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=ft(e,n),r==ut){4==t&&(e.o=4,Ke(14),s=!1),Ue(e.j,e.m,null,"[Incomplete Response]");break}if(r==ct){e.o=4,Ke(15),Ue(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}Ue(e.j,e.m,r,null),wt(e,r)}mt(e)&&r!=ut&&r!=ct&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ke(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),On(t),t.M=!0,Ke(11))):(Ue(e.j,e.m,n,"[Invalid Chunked Response]"),bt(e),xt(e))}function ft(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ut:(n=Number(t.substring(n,r)),isNaN(n)?ct:(r+=1)+n>t.length?ut:(t=t.slice(r,r+n),e.C=r+n,t))}function gt(e){e.Y=Date.now()+e.P,yt(e,e.P)}function yt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Qe(v(e.lb,e),t)}function vt(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function xt(e){0==e.l.H||e.J||Un(e.l,e)}function bt(e){vt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Te(e.V),Fe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function wt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$t(n.i,e)))if(!e.K&&$t(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Bn(n),_n(n)}Ln(n),Ke(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=Qe(v(n.ib,n),6e3));if(1>=Qt(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Vn(n,11)}else if((e.K||n.g==e)&&Bn(n),!A(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Jt(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,_t(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var i=e;if((r=n).wa=Wn(r,r.J?r.pa:null,r.Y),i.K){Xt(r.i,i);var a=i,l=r.L;l&&a.setTimeout(l),a.B&&(vt(a),gt(a)),r.g=i}else Mn(r);0<n.j.length&&Tn(n)}else"stop"!=c[0]&&"close"!=c[0]||Vn(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Vn(n,7):En(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}He()}catch(c){}}function Nt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(h(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}(r=it.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==Nn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const u=Nn(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||L||this.g&&(this.h.h||this.g.ja()||jn(this.g)))){this.J||4!=u||7==t||He(),vt(this);var n=this.g.da();this.ca=n;t:if(mt(this)){var r=jn(this.g);e="";var s=r.length,o=4==Nn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bt(this),xt(this);var i="";break t}this.h.i=new d.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,i=this.h.g}else i=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,o,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+o+" "+i}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ke(12),bt(this),xt(this);break e}Ue(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wt(this,n)}this.S?(pt(this,u,i),L&&this.i&&3==u&&(Oe(this.U,this.V,"tick",this.mb),this.V.start())):(Ue(this.j,this.m,i,null),wt(this,i)),4==u&&bt(this),this.i&&!this.J&&(4==u?Un(this.l,this):(this.i=!1,gt(this)))}else(function(e){const t={};e=(e.g&&2<=Nn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(A(e[r]))continue;var n=je(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[s]||[];t[s]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<i.indexOf("Unknown SID")?(this.o=3,Ke(12)):(this.o=0,Ke(13)),bt(this),xt(this)}}}catch(u){}},r.mb=function(){if(this.g){var e=Nn(this.g),t=this.g.ja();this.C<t.length&&(vt(this),pt(this,e,t),this.i&&4!=e&&gt(this))}},r.cancel=function(){this.J=!0,bt(this)},r.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(He(),Ke(17)),bt(this),this.o=2,xt(this)):yt(this,this.Y-e)};var jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kt(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kt){this.h=e.h,St(this,e.j),this.s=e.s,this.g=e.g,At(this,e.m),this.l=e.l;var t=e.i,n=new Bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Et(this,n),this.o=e.o}else e&&(t=String(e).match(jt))?(this.h=!1,St(this,t[1]||"",!0),this.s=Tt(t[2]||""),this.g=Tt(t[3]||"",!0),At(this,t[4]),this.l=Tt(t[5]||"",!0),Et(this,t[6]||"",!0),this.o=Tt(t[7]||"")):(this.h=!1,this.i=new Bt(null,this.h))}function Ct(e){return new kt(e)}function St(e,t,n){e.j=n?Tt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function At(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Et(e,t,n){t instanceof Bt?(e.i=t,function(e,t){t&&!e.j&&(Ut(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zt(this,t),qt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Pt(t,Ot)),e.i=new Bt(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function It(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Tt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Rt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pt(t,Dt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pt(t,Dt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pt(n,"/"==n.charAt(0)?Lt:Mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pt(n,Ft)),e.join("")};var Dt=/[#\/\?@]/g,Mt=/[#\?:]/g,Lt=/[#\?]/g,Ot=/[#\?@]/g,Ft=/#/g;function Bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ut(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var o=e[n].substring(0,r);s=e[n].substring(r+1)}else o=e[n];t(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zt(e,t){Ut(e),t=Wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vt(e,t){return Ut(e),t=Wt(e,t),e.g.has(t)}function qt(e,t,n){zt(e,t),0<n.length&&(e.i=null,e.g.set(Wt(e,t),j(n)),e.h+=n.length)}function Wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Bt.prototype).add=function(e,t){Ut(this),this.i=null,e=Wt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Ut(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){Ut(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},r.Z=function(e){Ut(this);let t=[];if("string"===typeof e)Vt(this,e)&&(t=t.concat(this.g.get(Wt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Ut(this),this.i=null,Vt(this,e=Wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),i=this.Z(r);for(r=0;r<i.length;r++){var s=o;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")};var Ht=class{constructor(e,t){this.g=e,this.map=t}};function Gt(e){this.l=e||Kt,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kt=10;function Yt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qt(e){return e.h?1:e.g?e.g.size:0}function $t(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jt(e,t){e.g?e.g.add(t):e.h=t}function Xt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return j(e.i)}Gt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en,tn=class{stringify(e){return d.JSON.stringify(e,void 0)}parse(e){return d.JSON.parse(e,void 0)}};function nn(){this.g=new tn}function rn(e,t,n){const r=n||"";try{Nt(e,(function(e,n){let s=e;m(e)&&(s=xe(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function sn(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(o){}}function on(e){this.l=e.fc||null,this.j=e.ob||!1}function an(e,t){ge.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ln,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}b(on,Xe),on.prototype.g=function(){return new an(this.l,this.j)},on.prototype.i=(en={},function(){return en}),b(an,ge);var ln=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function un(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dn(e)}function dn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=an.prototype).open=function(e,t){if(this.readyState!=ln)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||d).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,un(this)),this.readyState=ln},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?un(this):dn(this),3==this.readyState&&cn(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,un(this))},r.Ya=function(e){this.g&&(this.response=e,un(this))},r.ka=function(){this.g&&un(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(an.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=d.JSON.parse;function mn(e){ge.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pn,this.L=this.M=!1}b(mn,ge);var pn="",fn=/^https?$/i,gn=["POST","PUT"];function yn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vn(e),bn(e)}function vn(e){e.F||(e.F=!0,ye(e,"complete"),ye(e,"error"))}function xn(e){if(e.h&&"undefined"!=typeof u&&(!e.C[1]||4!=Nn(e)||2!=e.da()))if(e.v&&4==Nn(e))Pe(e.La,0,e);else if(ye(e,"readystatechange"),4==Nn(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var s=String(e.I).match(jt)[1]||null;!s&&d.self&&d.self.location&&(s=d.self.location.protocol.slice(0,-1)),r=!fn.test(s?s.toLowerCase():"")}n=r}if(n)ye(e,"complete"),ye(e,"success");else{e.m=6;try{var o=2<Nn(e)?e.g.statusText:""}catch(i){o=""}e.j=o+" ["+e.da()+"]",vn(e)}}finally{bn(e)}}}function bn(e,t){if(e.g){wn(e);const r=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ye(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function Nn(e){return e.g?e.g.readyState:0}function jn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case pn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Er){return null}}function kn(e){let t="";return J(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Cn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Sn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.Ga=0,this.j=[],this.l=new Be,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Sn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Sn("baseRetryDelayMs",5e3,e),this.hb=Sn("retryDelaySeedMs",1e4,e),this.eb=Sn("forwardChannelMaxRetries",2,e),this.xa=Sn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Gt(e&&e.concurrentRequestLimit),this.Ja=new nn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function En(e){if(In(e),3==e.H){var t=e.W++,n=Ct(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),Rn(e,n),(t=new it(e,e.l,t)).L=2,t.v=It(Ct(n)),n=!1,d.navigator&&d.navigator.sendBeacon)try{n=d.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=Hn(t.l,null),t.g.ha(t.v)),t.G=Date.now(),gt(t)}qn(e)}function _n(e){e.g&&(On(e),e.g.cancel(),e.g=null)}function In(e){_n(e),e.u&&(d.clearTimeout(e.u),e.u=null),Bn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Tn(e){if(!Yt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ce||Ee(),Se||(Ce(),Se=!0),Ae.add(t,e),e.C=0}}function Pn(e,t){var n;n=t?t.m:e.W++;const r=Ct(e.I);_t(r,"SID",e.K),_t(r,"RID",n),_t(r,"AID",e.V),Rn(e,r),e.o&&e.s&&Cn(r,e.o,e.s),n=new it(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Dn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jt(e.i,n),dt(n,r,t)}function Rn(e,t){e.na&&J(e.na,(function(e,n){_t(t,n,e)})),e.h&&Nt({},(function(e,n){_t(t,n,e)}))}function Dn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?v(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let i=0;i<n;i++){let n=s[i].g;const a=s[i].map;if(n-=t,0>n)t=Math.max(0,s[i].g-100),o=!1;else try{rn(a,e,"req"+n+"_")}catch(Br){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Mn(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ce||Ee(),Se||(Ce(),Se=!0),Ae.add(t,e),e.A=0}}function Ln(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Qe(v(e.Ma,e),zn(e,e.A)),e.A++,!0)}function On(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Fn(e){e.g=new it(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ct(e.wa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.V),_t(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&_t(t,"TO",e.qa),_t(t,"TYPE","xmlhttp"),Rn(e,t),e.o&&e.s&&Cn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=It(Ct(t)),n.s=null,n.S=!0,ht(n,e)}function Bn(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function Un(e,t){var n=null;if(e.g==t){Bn(e),On(e),e.g=null;var r=2}else{if(!$t(e.i,t))return;n=t.F,Xt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;ye(r=qe(),new Ye(r,n)),Tn(e)}else Mn(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(Qt(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Qe(v(e.Na,e,t),zn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ln(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}function zn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=v(e.pb,e);n||(n=new kt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||St(n,"https"),It(n)),function(e,t){const n=new Be;if(d.Image){const r=new Image;r.onload=x(sn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=x(sn,n,r,"TestLoadImage: error",!1,t),r.onabort=x(sn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=x(sn,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ke(2);e.H=0,e.h&&e.h.za(t),qn(e),In(e)}function qn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(k(e.ma,t),k(e.ma,e.j),e.i.i.length=0,j(e.j),e.j.length=0),e.h.ya()}}function Wn(e,t,n){var r=n instanceof kt?Ct(n):new kt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),At(r,r.m);else{var s=d.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new kt(null);r&&St(o,r),t&&(o.g=t),s&&At(o,s),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&_t(r,n,t),_t(r,"VER",e.ra),Rn(e,r),r}function Hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new mn(new on({ob:!0})):new mn(e.va)).Oa(e.J),t}function Gn(){}function Kn(){if(D&&!(10<=Number(W)))throw Error("Environmental error: no available transport.")}function Yn(e,t){ge.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jn(this)}function Qn(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $n(){st.call(this),this.status=1}function Jn(e){this.g=e}function Xn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zn(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var o=e.g[3],i=t+(o^n&(s^o))+r[0]+3614090360&4294967295;i=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=n+(i<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^o&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^o)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((o=(t=n+((i=t+(s^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=o+((i=s+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+o&4294967295}function er(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var o=0|e[s];r&&o==t||(n[s]=o,r=!1)}this.g=n}(r=mn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=v(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void yn(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=d.FormData&&e instanceof d.FormData,!(0<=N(gn,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return D&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.ua,this)):this.A=Pe(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){yn(this,o)}},r.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ye(this,"complete"),ye(this,"abort"),bn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bn(this,!0)),mn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?xn(this):this.kb())},r.kb=function(){xn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<Nn(this)?this.g.status:-1}catch(en){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(en){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=An.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new it(this,this.l,e);let o=this.s;if(this.U&&(o?(o=X(o),ee(o,this.U)):o=this.U),null!==this.o||this.O||(s.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Dn(this,s,t),_t(n=Ct(this.I),"RID",e),_t(n,"CVER",22),this.F&&_t(n,"X-HTTP-Session-Id",this.F),Rn(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(kn(o)))+"&"+t:this.o&&Cn(n,this.o,o)),Jt(this.i,s),this.bb&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),s.aa=!0,dt(s,n,null)):dt(s,n,t),this.H=2}}else 3==this.H&&(e?Pn(this,e):0==this.j.length||Yt(this.i)||Pn(this))},r.Ma=function(){if(this.u=null,Fn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qe(v(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ke(10),_n(this),Fn(this))},r.ib=function(){null!=this.v&&(this.v=null,_n(this),Ln(this),Ke(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ke(2)):(this.l.info("Failed to ping google.com"),Ke(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=Gn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Kn.prototype.g=function(e,t){return new Yn(e,t)},b(Yn,ge),Yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ke(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Wn(e,null,e.Y),Tn(e)},Yn.prototype.close=function(){En(this.g)},Yn.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=xe(e),e=n);t.j.push(new Ht(t.fb++,e)),3==t.H&&Tn(t)},Yn.prototype.N=function(){this.g.h=null,delete this.j,En(this.g),delete this.g,Yn.$.N.call(this)},b(Qn,rt),b($n,st),b(Jn,Gn),Jn.prototype.Ba=function(){ye(this.g,"a")},Jn.prototype.Aa=function(e){ye(this.g,new Qn(e))},Jn.prototype.za=function(e){ye(this.g,new $n)},Jn.prototype.ya=function(){ye(this.g,"b")},b(Xn,(function(){this.blockSize=-1})),Xn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Xn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,o=0;o<t;){if(0==s)for(;o<=n;)Zn(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){Zn(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){Zn(this,r),s=0;break}}this.h=s,this.i+=t},Xn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var tr={};function nr(e){return-128<=e&&128>e?function(e,t){var n=tr;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new er([0|e],0>e?-1:0)})):new er([0|e],0>e?-1:0)}function rr(e){if(isNaN(e)||!isFinite(e))return or;if(0>e)return ur(rr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sr;return new er(t,0)}var sr=4294967296,or=nr(0),ir=nr(1),ar=nr(16777216);function lr(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cr(e){return-1==e.h}function ur(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new er(n,~e.h).add(ir)}function dr(e,t){return e.add(ur(t))}function hr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function mr(e,t){this.g=e,this.h=t}function pr(e,t){if(lr(t))throw Error("division by zero");if(lr(e))return new mr(or,or);if(cr(e))return t=pr(ur(e),t),new mr(ur(t.g),ur(t.h));if(cr(t))return t=pr(e,ur(t)),new mr(ur(t.g),t.h);if(30<e.g.length){if(cr(e)||cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ir,r=t;0>=r.X(e);)n=fr(n),r=fr(r);var s=gr(n,1),o=gr(r,1);for(r=gr(r,2),n=gr(n,2);!lr(r);){var i=o.add(r);0>=i.X(e)&&(s=s.add(n),o=i),r=gr(r,1),n=gr(n,1)}return t=dr(e,s.R(t)),new mr(s,t)}for(s=or;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),i=(o=rr(n)).R(t);cr(i)||0<i.X(e);)i=(o=rr(n-=r)).R(t);lr(o)&&(o=ir),s=s.add(o),e=dr(e,i)}return new mr(s,e)}function fr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new er(n,e.h)}function gr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new er(s,e.h)}(r=er.prototype).ea=function(){if(cr(this))return-ur(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sr+r)*t,t*=sr}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(lr(this))return"0";if(cr(this))return"-"+ur(this).toString(e);for(var t=rr(Math.pow(e,6)),n=this,r="";;){var s=pr(n,t).g,o=((0<(n=dr(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(lr(n=s))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return cr(e=dr(this,e))?-1:lr(e)?0:1},r.abs=function(){return cr(this)?ur(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.D(s))+(65535&e.D(s)),i=(o>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=i>>>16,o&=65535,i&=65535,n[s]=i<<16|o}return new er(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(lr(this)||lr(e))return or;if(cr(this))return cr(e)?ur(this).R(ur(e)):ur(ur(this).R(e));if(cr(e))return ur(this.R(ur(e)));if(0>this.X(ar)&&0>e.X(ar))return rr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var o=this.D(r)>>>16,i=65535&this.D(r),a=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=i*l,hr(n,2*r+2*s),n[2*r+2*s+1]+=o*l,hr(n,2*r+2*s+1),n[2*r+2*s+1]+=i*a,hr(n,2*r+2*s+1),n[2*r+2*s+2]+=o*a,hr(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new er(n,0)},r.gb=function(e){return pr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new er(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new er(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new er(n,this.h^e.h)},Kn.prototype.createWebChannel=Kn.prototype.g,Yn.prototype.send=Yn.prototype.u,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,$e.NO_ERROR=0,$e.TIMEOUT=8,$e.HTTP_ERROR=6,Je.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",ge.prototype.listen=ge.prototype.O,mn.prototype.listenOnce=mn.prototype.P,mn.prototype.getLastError=mn.prototype.Sa,mn.prototype.getLastErrorCode=mn.prototype.Ia,mn.prototype.getStatus=mn.prototype.da,mn.prototype.getResponseJson=mn.prototype.Wa,mn.prototype.getResponseText=mn.prototype.ja,mn.prototype.send=mn.prototype.ha,mn.prototype.setWithCredentials=mn.prototype.Oa,Xn.prototype.digest=Xn.prototype.l,Xn.prototype.reset=Xn.prototype.reset,Xn.prototype.update=Xn.prototype.j,er.prototype.add=er.prototype.add,er.prototype.multiply=er.prototype.R,er.prototype.modulo=er.prototype.gb,er.prototype.compare=er.prototype.X,er.prototype.toNumber=er.prototype.ea,er.prototype.toString=er.prototype.toString,er.prototype.getBits=er.prototype.D,er.fromNumber=rr,er.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ur(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=rr(Math.pow(n,8)),s=or,o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+i),n);8>i?(i=rr(Math.pow(n,i)),s=s.R(i).add(rr(a))):s=(s=s.R(r)).add(rr(a))}return s};var yr=c.createWebChannelTransport=function(){return new Kn},vr=c.getStatEventTarget=function(){return qe()},xr=c.ErrorCode=$e,br=c.EventType=Je,wr=c.Event=ze,Nr=c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jr=c.FetchXmlHttpFactory=on,kr=c.WebChannel=et,Cr=c.XhrIo=mn,Sr=c.Md5=Xn,Ar=c.Integer=er;const Er="@firebase/firestore";class _r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let Ir="9.23.0";const Tr=new i.Vy("@firebase/firestore");function Pr(){return Tr.logLevel}function Rr(e){if(Tr.logLevel<=i.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Lr);Tr.debug("Firestore (".concat(Ir,"): ").concat(e),...s)}}function Dr(e){if(Tr.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Lr);Tr.error("Firestore (".concat(Ir,"): ").concat(e),...s)}}function Mr(e){if(Tr.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Lr);Tr.warn("Firestore (".concat(Ir,"): ").concat(e),...s)}}function Lr(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ir,") INTERNAL ASSERTION FAILED: ")+e;throw Dr(t),new Error(t)}function Fr(e,t){e||Or()}function Br(e,t){return e}const Ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zr extends a.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Wr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_r.UNAUTHENTICATED)))}shutdown(){}}class Hr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Gr{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{Rr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(Rr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vr)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Rr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Fr("string"==typeof t.accessToken),new qr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Fr(null===e||"string"==typeof e),new _r(e)}}class Kr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Yr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Kr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(_r.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $r{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Rr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Rr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Rr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Rr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Fr("string"==typeof e.token),this.T=e.token,new Qr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Xr{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jr(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Zr(e,t){return e<t?-1:e>t?1:0}function es(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class ts{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ts.fromMillis(Date.now())}static fromDate(e){return ts.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ts(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zr(this.nanoseconds,e.nanoseconds):Zr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ns{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ns(e)}static min(){return new ns(new ts(0,0))}static max(){return new ns(new ts(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rs{constructor(e,t,n){void 0===t?t=0:t>e.length&&Or(),void 0===n?n=e.length-t:n>e.length-t&&Or(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===rs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ss extends rs{construct(e,t,n){return new ss(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new zr(Ur.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter((e=>e.length>0)))}return new ss(e)}static emptyPath(){return new ss([])}}const os=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends rs{construct(e,t,n){return new is(e,t,n)}static isValidIdentifier(e){return os.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new zr(Ur.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zr(Ur.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zr(Ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(s(),r++)}if(s(),o)throw new zr(Ur.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}class as{constructor(e){this.path=e}static fromPath(e){return new as(ss.fromString(e))}static fromName(e){return new as(ss.fromString(e).popFirst(5))}static empty(){return new as(ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ss.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new as(new ss(e.slice()))}}class ls{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ls.UNKNOWN_ID=-1;function cs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ns.fromTimestamp(1e9===r?new ts(n+1,0):new ts(n,r));return new ds(s,as.empty(),t)}function us(e){return new ds(e.readTime,e.key,-1)}class ds{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ds(ns.min(),as.empty(),-1)}static max(){return new ds(ns.max(),as.empty(),-1)}}function hs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=as.comparator(e.documentKey,t.documentKey),0!==n?n:Zr(e.largestBatchId,t.largestBatchId))}const ms="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ps{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fs(e){if(e.code!==Ur.FAILED_PRECONDITION||e.message!==ms)throw e;Rr("LocalStore","Unexpectedly lost primary lease")}class gs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Or(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gs(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof gs?t:gs.resolve(t)}catch(e){return gs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):gs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):gs.reject(t)}static resolve(e){return new gs(((t,n)=>{t(e)}))}static reject(e){return new gs(((t,n)=>{n(e)}))}static waitFor(e){return new gs(((t,n)=>{let r=0,s=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++s,o&&s===r&&t()}),(e=>n(e)))})),o=!0,s===r&&t()}))}static or(e){let t=gs.resolve(!1);for(const n of e)t=t.next((e=>e?gs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new gs(((n,r)=>{const s=e.length,o=new Array(s);let i=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++i,i===s&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new gs(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function ys(e){return"IndexedDbTransactionError"===e.name}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function xs(e){return null==e}function bs(e){return 0===e&&1/e==-1/0}function ws(e){return"number"==typeof e&&Number.isInteger(e)&&!bs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}vs.ct=-1;const Ns=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],js=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ks=js;function Cs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ss(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function As(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Es{constructor(e,t){this.comparator=e,this.root=t||Is.EMPTY}insert(e,t){return new Es(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Is.BLACK,null,null))}remove(e){return new Es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}}class _s{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Is{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Is.RED,this.left=null!=r?r:Is.EMPTY,this.right=null!=s?s:Is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Is(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Is.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Or();if(this.right.isRed())throw Or();const e=this.left.check();if(e!==this.right.check())throw Or();return e+(this.isRed()?0:1)}}Is.EMPTY=null,Is.RED=!0,Is.BLACK=!1,Is.EMPTY=new class{constructor(){this.size=0}get key(){throw Or()}get value(){throw Or()}get color(){throw Or()}get left(){throw Or()}get right(){throw Or()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Is(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ts{constructor(e){this.comparator=e,this.data=new Es(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ps(this.data.getIterator())}getIteratorFrom(e){return new Ps(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ts))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ts(this.comparator);return t.data=e,t}}class Ps{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rs{constructor(e){this.fields=e,e.sort(is.comparator)}static empty(){return new Rs([])}unionWith(e){let t=new Ts(is.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return es(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ds extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ms{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ds("Invalid base64 string: "+e):e}}(e);return new Ms(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ms(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ms.EMPTY_BYTE_STRING=new Ms("");const Ls=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(e){if(Fr(!!e),"string"==typeof e){let t=0;const n=Ls.exec(e);if(Fr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fs(e.seconds),nanos:Fs(e.nanos)}}function Fs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bs(e){return"string"==typeof e?Ms.fromBase64String(e):Ms.fromUint8Array(e)}function Us(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zs(e){const t=e.mapValue.fields.__previous_value__;return Us(t)?zs(t):t}function Vs(e){const t=Os(e.mapValue.fields.__local_write_time__.timestampValue);return new ts(t.seconds,t.nanos)}class qs{constructor(e,t,n,r,s,o,i,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=i,this.longPollingOptions=a,this.useFetchStreams=l}}class Ws{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ws("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ws&&e.projectId===this.projectId&&e.database===this.database}}const Hs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Us(e)?4:io(e)?9007199254740991:10:Or()}function Ks(e,t){if(e===t)return!0;const n=Gs(e);if(n!==Gs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vs(e).isEqual(Vs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Os(e.timestampValue),r=Os(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bs(e.bytesValue).isEqual(Bs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fs(e.geoPointValue.latitude)===Fs(t.geoPointValue.latitude)&&Fs(e.geoPointValue.longitude)===Fs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fs(e.integerValue)===Fs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fs(e.doubleValue),r=Fs(t.doubleValue);return n===r?bs(n)===bs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return es(e.arrayValue.values||[],t.arrayValue.values||[],Ks);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cs(n)!==Cs(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ks(n[s],r[s])))return!1;return!0}(e,t);default:return Or()}}function Ys(e,t){return void 0!==(e.values||[]).find((e=>Ks(e,t)))}function Qs(e,t){if(e===t)return 0;const n=Gs(e),r=Gs(t);if(n!==r)return Zr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fs(e.integerValue||e.doubleValue),r=Fs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $s(e.timestampValue,t.timestampValue);case 4:return $s(Vs(e),Vs(t));case 5:return Zr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bs(e),r=Bs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Zr(n[s],r[s]);if(0!==e)return e}return Zr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Zr(Fs(e.latitude),Fs(t.latitude));return 0!==n?n:Zr(Fs(e.longitude),Fs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Qs(n[s],r[s]);if(e)return e}return Zr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Hs.mapValue&&t===Hs.mapValue)return 0;if(e===Hs.mapValue)return 1;if(t===Hs.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},o=Object.keys(s);r.sort(),o.sort();for(let i=0;i<r.length&&i<o.length;++i){const e=Zr(r[i],o[i]);if(0!==e)return e;const t=Qs(n[r[i]],s[o[i]]);if(0!==t)return t}return Zr(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Or()}}function $s(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zr(e,t);const n=Os(e),r=Os(t),s=Zr(n.seconds,r.seconds);return 0!==s?s:Zr(n.nanos,r.nanos)}function Js(e){return Xs(e)}function Xs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Os(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Bs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,as.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Xs(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Xs(e.fields[s]));return n+"}"}(e.mapValue):Or();var t,n}function Zs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eo(e){return!!e&&"integerValue"in e}function to(e){return!!e&&"arrayValue"in e}function no(e){return!!e&&"nullValue"in e}function ro(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function so(e){return!!e&&"mapValue"in e}function oo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ss(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=oo(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function io(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ao{constructor(e){this.value=e}static empty(){return new ao({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!so(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(t)}setAll(e){let t=is.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=oo(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());so(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];so(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ss(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ao(oo(this.value))}}function lo(e){const t=[];return Ss(e.fields,((e,n)=>{const r=new is([e]);if(so(n)){const e=lo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Rs(t)}class co{constructor(e,t,n,r,s,o,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=i}static newInvalidDocument(e){return new co(e,0,ns.min(),ns.min(),ns.min(),ao.empty(),0)}static newFoundDocument(e,t,n,r){return new co(e,1,t,ns.min(),n,r,0)}static newNoDocument(e,t){return new co(e,2,t,ns.min(),ns.min(),ao.empty(),0)}static newUnknownDocument(e,t){return new co(e,3,t,ns.min(),ns.min(),ao.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ns.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ns.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof co&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uo{constructor(e,t){this.position=e,this.inclusive=t}}function ho(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const o=t[s],i=e.position[s];if(r=o.field.isKeyField()?as.comparator(as.fromName(i.referenceValue),n.key):Qs(i,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function mo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ks(e.position[n],t.position[n]))return!1;return!0}class po{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function fo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class go{}class yo extends go{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Co(e,t,n):"array-contains"===t?new _o(e,n):"in"===t?new Io(e,n):"not-in"===t?new To(e,n):"array-contains-any"===t?new Po(e,n):new yo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new So(e,n):new Ao(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qs(t,this.value)):null!==t&&Gs(this.value)===Gs(t)&&this.matchesComparison(Qs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Or()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vo extends go{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vo(e,t)}matches(e){return xo(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function xo(e){return"and"===e.op}function bo(e){return wo(e)&&xo(e)}function wo(e){for(const t of e.filters)if(t instanceof vo)return!1;return!0}function No(e){if(e instanceof yo)return e.field.canonicalString()+e.op.toString()+Js(e.value);if(bo(e))return e.filters.map((e=>No(e))).join(",");{const t=e.filters.map((e=>No(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function jo(e,t){return e instanceof yo?function(e,t){return t instanceof yo&&e.op===t.op&&e.field.isEqual(t.field)&&Ks(e.value,t.value)}(e,t):e instanceof vo?function(e,t){return t instanceof vo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&jo(n,t.filters[r])),!0)}(e,t):void Or()}function ko(e){return e instanceof yo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Js(e.value))}(e):e instanceof vo?function(e){return e.op.toString()+" {"+e.getFilters().map(ko).join(" ,")+"}"}(e):"Filter"}class Co extends yo{constructor(e,t,n){super(e,t,n),this.key=as.fromName(n.referenceValue)}matches(e){const t=as.comparator(e.key,this.key);return this.matchesComparison(t)}}class So extends yo{constructor(e,t){super(e,"in",t),this.keys=Eo("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ao extends yo{constructor(e,t){super(e,"not-in",t),this.keys=Eo("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Eo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>as.fromName(e.referenceValue)))}class _o extends yo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return to(t)&&Ys(t.arrayValue,this.value)}}class Io extends yo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ys(this.value.arrayValue,t)}}class To extends yo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ys(this.value.arrayValue,t)}}class Po extends yo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!to(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ys(this.value.arrayValue,e)))}}class Ro{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=i,this.dt=null}}function Do(e){return new Ro(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mo(e){const t=Br(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>No(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),xs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Js(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Js(e))).join(",")),t.dt=e}return t.dt}function Lo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!jo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mo(e.startAt,t.startAt)&&mo(e.endAt,t.endAt)}function Oo(e){return as.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=i,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Bo(e,t,n,r,s,o,i,a){return new Fo(e,t,n,r,s,o,i,a)}function Uo(e){return new Fo(e)}function zo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vo(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function qo(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Wo(e){return null!==e.collectionGroup}function Ho(e){const t=Br(e);if(null===t.wt){t.wt=[];const e=qo(t),n=Vo(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new po(e)),t.wt.push(new po(is.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new po(is.keyField(),e))}}}return t.wt}function Go(e){const t=Br(e);if(!t._t)if("F"===t.limitType)t._t=Do(t.path,t.collectionGroup,Ho(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Ho(t)){const t="desc"===s.dir?"asc":"desc";e.push(new po(s.field,t))}const n=t.endAt?new uo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uo(t.startAt.position,t.startAt.inclusive):null;t._t=Do(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Ko(e,t){t.getFirstInequalityField(),qo(e);const n=e.filters.concat([t]);return new Fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Yo(e,t,n){return new Fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qo(e,t){return Lo(Go(e),Go(t))&&e.limitType===t.limitType}function $o(e){return"".concat(Mo(Go(e)),"|lt:").concat(e.limitType)}function Jo(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ko(e))).join(", "),"]")),xs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Js(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Js(e))).join(",")),"Target(".concat(t,")")}(Go(e)),"; limitType=").concat(e.limitType,")")}function Xo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):as.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ho(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ho(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ho(e),t))&&!(e.endAt&&!function(e,t,n){const r=ho(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ho(e),t))}(e,t)}function Zo(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ei(e){return(t,n)=>{let r=!1;for(const s of Ho(e)){const e=ti(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function ti(e,t,n){const r=e.field.isKeyField()?as.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Qs(r,s):Or()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Or()}}class ni{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return As(this.inner)}size(){return this.innerSize}}const ri=new Es(as.comparator);function si(){return ri}const oi=new Es(as.comparator);function ii(){let e=oi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function ai(e){let t=oi;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function li(){return ui()}function ci(){return ui()}function ui(){return new ni((e=>e.toString()),((e,t)=>e.isEqual(t)))}const di=new Es(as.comparator),hi=new Ts(as.comparator);function mi(){let e=hi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const pi=new Ts(Zr);function fi(){return pi}function gi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(t)?"-0":t}}function yi(e){return{integerValue:""+e}}function vi(e,t){return ws(t)?yi(t):gi(e,t)}class xi{constructor(){this._=void 0}}function bi(e,t,n){return e instanceof ji?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Us(t)&&(t=zs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ki?Ci(e,t):e instanceof Si?Ai(e,t):function(e,t){const n=Ni(e,t),r=_i(n)+_i(e.gt);return eo(n)&&eo(e.gt)?yi(r):gi(e.serializer,r)}(e,t)}function wi(e,t,n){return e instanceof ki?Ci(e,t):e instanceof Si?Ai(e,t):n}function Ni(e,t){return e instanceof Ei?eo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ji extends xi{}class ki extends xi{constructor(e){super(),this.elements=e}}function Ci(e,t){const n=Ii(t);for(const r of e.elements)n.some((e=>Ks(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Si extends xi{constructor(e){super(),this.elements=e}}function Ai(e,t){let n=Ii(t);for(const r of e.elements)n=n.filter((e=>!Ks(e,r)));return{arrayValue:{values:n}}}class Ei extends xi{constructor(e,t){super(),this.serializer=e,this.gt=t}}function _i(e){return Fs(e.integerValue||e.doubleValue)}function Ii(e){return to(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ti{constructor(e,t){this.field=e,this.transform=t}}class Pi{constructor(e,t){this.version=e,this.transformResults=t}}class Ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ri}static exists(e){return new Ri(void 0,e)}static updateTime(e){return new Ri(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Di(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mi{}function Li(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gi(e.key,Ri.none()):new zi(e.key,e.data,Ri.none());{const n=e.data,r=ao.empty();let s=new Ts(is.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Vi(e.key,r,new Rs(s.toArray()),Ri.none())}}function Oi(e,t,n){e instanceof zi?function(e,t,n){const r=e.value.clone(),s=Wi(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vi?function(e,t,n){if(!Di(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Wi(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(qi(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fi(e,t,n,r){return e instanceof zi?function(e,t,n,r){if(!Di(e.precondition,t))return n;const s=e.value.clone(),o=Hi(e.fieldTransforms,r,t);return s.setAll(o),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vi?function(e,t,n,r){if(!Di(e.precondition,t))return n;const s=Hi(e.fieldTransforms,r,t),o=t.data;return o.setAll(qi(e)),o.setAll(s),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Di(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Ni(r.transform,e||null);null!=s&&(null===n&&(n=ao.empty()),n.set(r.field,s))}return n||null}function Ui(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&es(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ki&&t instanceof ki||e instanceof Si&&t instanceof Si?es(e.elements,t.elements,Ks):e instanceof Ei&&t instanceof Ei?Ks(e.gt,t.gt):e instanceof ji&&t instanceof ji}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zi extends Mi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vi extends Mi{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qi(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Wi(e,t,n){const r=new Map;Fr(e.length===n.length);for(let s=0;s<n.length;s++){const o=e[s],i=o.transform,a=t.data.field(o.field);r.set(o.field,wi(i,a,n[s]))}return r}function Hi(e,t,n){const r=new Map;for(const s of e){const e=s.transform,o=n.data.field(s.field);r.set(s.field,bi(e,o,t))}return r}class Gi extends Mi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ki extends Mi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yi{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Oi(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ci();return this.mutations.forEach((r=>{const s=e.get(r.key),o=s.overlayedDocument;let i=this.applyToLocalView(o,s.mutatedFields);i=t.has(r.key)?null:i;const a=Li(o,i);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ns.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mi())}isEqual(e){return this.batchId===e.batchId&&es(this.mutations,e.mutations,((e,t)=>Ui(e,t)))&&es(this.baseMutations,e.baseMutations,((e,t)=>Ui(e,t)))}}class Qi{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Fr(e.mutations.length===n.length);let r=di;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new Qi(e,t,n,r)}}class $i{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ji{constructor(e,t,n){this.alias=e,this.yt=t,this.fieldPath=n}}class Xi{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zi,ea;function ta(e){switch(e){default:return Or();case Ur.CANCELLED:case Ur.UNKNOWN:case Ur.DEADLINE_EXCEEDED:case Ur.RESOURCE_EXHAUSTED:case Ur.INTERNAL:case Ur.UNAVAILABLE:case Ur.UNAUTHENTICATED:return!1;case Ur.INVALID_ARGUMENT:case Ur.NOT_FOUND:case Ur.ALREADY_EXISTS:case Ur.PERMISSION_DENIED:case Ur.FAILED_PRECONDITION:case Ur.ABORTED:case Ur.OUT_OF_RANGE:case Ur.UNIMPLEMENTED:case Ur.DATA_LOSS:return!0}}function na(e){if(void 0===e)return Dr("GRPC error has no .code"),Ur.UNKNOWN;switch(e){case Zi.OK:return Ur.OK;case Zi.CANCELLED:return Ur.CANCELLED;case Zi.UNKNOWN:return Ur.UNKNOWN;case Zi.DEADLINE_EXCEEDED:return Ur.DEADLINE_EXCEEDED;case Zi.RESOURCE_EXHAUSTED:return Ur.RESOURCE_EXHAUSTED;case Zi.INTERNAL:return Ur.INTERNAL;case Zi.UNAVAILABLE:return Ur.UNAVAILABLE;case Zi.UNAUTHENTICATED:return Ur.UNAUTHENTICATED;case Zi.INVALID_ARGUMENT:return Ur.INVALID_ARGUMENT;case Zi.NOT_FOUND:return Ur.NOT_FOUND;case Zi.ALREADY_EXISTS:return Ur.ALREADY_EXISTS;case Zi.PERMISSION_DENIED:return Ur.PERMISSION_DENIED;case Zi.FAILED_PRECONDITION:return Ur.FAILED_PRECONDITION;case Zi.ABORTED:return Ur.ABORTED;case Zi.OUT_OF_RANGE:return Ur.OUT_OF_RANGE;case Zi.UNIMPLEMENTED:return Ur.UNIMPLEMENTED;case Zi.DATA_LOSS:return Ur.DATA_LOSS;default:return Or()}}(ea=Zi||(Zi={}))[ea.OK=0]="OK",ea[ea.CANCELLED=1]="CANCELLED",ea[ea.UNKNOWN=2]="UNKNOWN",ea[ea.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ea[ea.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ea[ea.NOT_FOUND=5]="NOT_FOUND",ea[ea.ALREADY_EXISTS=6]="ALREADY_EXISTS",ea[ea.PERMISSION_DENIED=7]="PERMISSION_DENIED",ea[ea.UNAUTHENTICATED=16]="UNAUTHENTICATED",ea[ea.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ea[ea.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ea[ea.ABORTED=10]="ABORTED",ea[ea.OUT_OF_RANGE=11]="OUT_OF_RANGE",ea[ea.UNIMPLEMENTED=12]="UNIMPLEMENTED",ea[ea.INTERNAL=13]="INTERNAL",ea[ea.UNAVAILABLE=14]="UNAVAILABLE",ea[ea.DATA_LOSS=15]="DATA_LOSS";class ra{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return sa}static getOrCreateInstance(){return null===sa&&(sa=new ra),sa}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let sa=null;function oa(){return new TextEncoder}const ia=new Ar([4294967295,4294967295],0);function aa(e){const t=oa().encode(e),n=new Sr;return n.update(t),new Uint8Array(n.digest())}function la(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,o],0)]}class ca{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ua("Invalid padding: ".concat(t));if(n<0)throw new ua("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ua("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ua("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Ar.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Ar.fromNumber(n)));return 1===r.compare(ia)&&(r=new Ar([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=aa(e),[n,r]=la(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ca(s,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=aa(e),[n,r]=la(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class da{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new da(ns.min(),r,new Es(Zr),si(),mi())}}class ha{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ha(n,t,mi(),mi(),mi())}}class ma{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class pa{constructor(e,t){this.targetId=e,this.Vt=t}}class fa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ms.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ga{constructor(){this.St=0,this.Dt=xa(),this.Ct=Ms.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=mi(),t=mi(),n=mi();return this.Dt.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Or()}})),new ha(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=xa()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ya{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=si(),this.zt=va(),this.Wt=new Es(Zr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Or()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const o=s.target;if(Oo(o))if(0===r){const e=new as(o.path);this.Yt(n,e,co.newNoDocument(e,ns.min()))}else Fr(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=ra.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,o,i,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(i=null===(o=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==i?i:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:i=0}=n;let a,l;try{a=Bs(s).toUint8Array()}catch(e){if(e instanceof Ds)return Mr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new ca(a,o,i)}catch(e){return Mr(e instanceof ua?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const s=this.Gt.ue(),o="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const s=this.se(r);if(s){if(n.current&&Oo(s.target)){const t=new as(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,co.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=mi();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new da(e,t,this.Wt,this.jt,n);return this.jt=si(),this.zt=va(),this.Wt=new Es(Zr),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ga,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ts(Zr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Rr("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ga),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function va(){return new Es(as.comparator)}function xa(){return new Es(as.comparator)}const ba={asc:"ASCENDING",desc:"DESCENDING"},wa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Na={and:"AND",or:"OR"};class ja{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ka(e,t){return e.useProto3Json||xs(t)?t:{value:t}}function Ca(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sa(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Aa(e,t){return Ca(e,t.toTimestamp())}function Ea(e){return Fr(!!e),ns.fromTimestamp(function(e){const t=Os(e);return new ts(t.seconds,t.nanos)}(e))}function _a(e,t){return function(e){return new ss(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ia(e){const t=ss.fromString(e);return Fr($a(t)),t}function Ta(e,t){return _a(e.databaseId,t.path)}function Pa(e,t){const n=Ia(t);if(n.get(1)!==e.databaseId.projectId)throw new zr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new as(La(n))}function Ra(e,t){return _a(e.databaseId,t)}function Da(e){const t=Ia(e);return 4===t.length?ss.emptyPath():La(t)}function Ma(e){return new ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function La(e){return Fr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Oa(e,t,n){return{name:Ta(e,t),fields:n.value.mapValue.fields}}function Fa(e,t){let n;if(t instanceof zi)n={update:Oa(e,t.key,t.value)};else if(t instanceof Gi)n={delete:Ta(e,t.key)};else if(t instanceof Vi)n={update:Oa(e,t.key,t.data),updateMask:Qa(t.fieldMask)};else{if(!(t instanceof Ki))return Or();n={verify:Ta(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ji)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ki)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Si)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ei)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Or()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Aa(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Or()}(e,t.precondition)),n}function Ba(e,t){return{documents:[Ra(e,t.path)]}}function Ua(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ra(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ra(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return Ya(vo.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ga(e.field),direction:qa(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const i=ka(e,t.limit);var a;return null!==i&&(n.structuredQuery.limit=i),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function za(e){let t=Da(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fr(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Va(e);return t instanceof vo&&bo(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=n.orderBy.map((e=>function(e){return new po(Ka(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,xs(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new uo(n,t)}(n.endAt)),Bo(t,s,i,o,a,"F",l,c)}function Va(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ka(e.unaryFilter.field);return yo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ka(e.unaryFilter.field);return yo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ka(e.unaryFilter.field);return yo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ka(e.unaryFilter.field);return yo.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Or()}}(e):void 0!==e.fieldFilter?function(e){return yo.create(Ka(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Or()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vo.create(e.compositeFilter.filters.map((e=>Va(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Or()}}(e.compositeFilter.op))}(e):Or()}function qa(e){return ba[e]}function Wa(e){return wa[e]}function Ha(e){return Na[e]}function Ga(e){return{fieldPath:e.canonicalString()}}function Ka(e){return is.fromServerFormat(e.fieldPath)}function Ya(e){return e instanceof yo?function(e){if("=="===e.op){if(ro(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NAN"}};if(no(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ro(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NOT_NAN"}};if(no(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(e.field),op:Wa(e.op),value:e.value}}}(e):e instanceof vo?function(e){const t=e.getFilters().map((e=>Ya(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ha(e.op),filters:t}}}(e):Or()}function Qa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $a(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ja{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ns.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ns.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ms.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=i,this.expectedCount=a}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Xa{constructor(e){this.fe=e}}function Za(e){const t=za({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yo(t,t.limit,"L"):t}class el{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Fs(e.integerValue));else if("doubleValue"in e){const n=Fs(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),bs(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Bs(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?io(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Or()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),as.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}el.Ve=new el;class tl{constructor(){this.rn=new nl}addToCollectionParentIndex(e,t){return this.rn.add(t),gs.resolve()}getCollectionParents(e,t){return gs.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return gs.resolve()}deleteFieldIndex(e,t){return gs.resolve()}getDocumentsMatchingTarget(e,t){return gs.resolve(null)}getIndexType(e,t){return gs.resolve(0)}getFieldIndexes(e,t){return gs.resolve([])}getNextCollectionGroupToUpdate(e){return gs.resolve(null)}getMinOffset(e,t){return gs.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return gs.resolve(ds.min())}updateCollectionGroup(e,t,n){return gs.resolve()}updateIndexEntries(e,t){return gs.resolve()}}class nl{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ts(ss.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ts(ss.comparator)).toArray()}}new Uint8Array(0);class rl{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rl(e,rl.DEFAULT_COLLECTION_PERCENTILE,rl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}rl.DEFAULT_COLLECTION_PERCENTILE=10,rl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rl.DEFAULT=new rl(41943040,rl.DEFAULT_COLLECTION_PERCENTILE,rl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rl.DISABLED=new rl(-1,0,0);class sl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new sl(0)}static Mn(){return new sl(-1)}}class ol{constructor(){this.changes=new ni((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,co.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class il{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class al{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fi(n.mutation,e,Rs.empty(),ts.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,mi()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mi();const r=li();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ii();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=li();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,mi())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=si();const o=ui(),i=ui();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof Vi)?s=s.insert(t.key,t):void 0!==i?(o.set(t.key,i.mutation.getFieldMask()),Fi(i.mutation,t,i.mutation.getFieldMask(),ts.now())):o.set(t.key,Rs.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new il(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=ui();let r=new Es(((e,t)=>e-t)),s=mi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let i=n.get(e)||Rs.empty();i=s.applyToLocalView(o,i),n.set(e,i);const a=(r.get(s.batchId)||mi()).add(e);r=r.insert(s.batchId,a)}))})).next((()=>{const o=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),a=r.key,l=r.value,c=ci();l.forEach((e=>{if(!s.has(e)){const r=Li(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return gs.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return as.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):gs.resolve(li());let i=-1,a=s;return o.next((t=>gs.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?gs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,a,t,mi()))).next((e=>({batchId:i,changes:ai(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new as(t)).next((e=>{let t=ii();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=ii();return this.indexManager.getCollectionParents(e,r).next((o=>gs.forEach(o,(o=>{const i=function(e,t){return new Fo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,i,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,co.newInvalidDocument(r)))}));let n=ii();return e.forEach(((e,s)=>{const o=r.get(e);void 0!==o&&Fi(o.mutation,s,Rs.empty(),ts.now()),Xo(t,s)&&(n=n.insert(e,s))})),n}))}}class ll{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return gs.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ea(n.createTime)}),gs.resolve()}getNamedQuery(e,t){return gs.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Za(e.bundledQuery),readTime:Ea(e.readTime)}}(t)),gs.resolve()}}class cl{constructor(){this.overlays=new Es(as.comparator),this.ls=new Map}getOverlay(e,t){return gs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=li();return gs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),gs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),gs.resolve()}getOverlaysForCollection(e,t,n){const r=li(),s=t.length+1,o=new as(t.child("")),i=this.overlays.getIteratorFrom(o);for(;i.hasNext();){const e=i.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return gs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Es(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=li(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=li(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return gs.resolve(i)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $i(t,n));let s=this.ls.get(t);void 0===s&&(s=mi(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class ul{constructor(){this.fs=new Ts(dl.ds),this.ws=new Ts(dl._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new dl(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new dl(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new as(new ss([])),n=new dl(t,e),r=new dl(t,e+1),s=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),s.push(e.key)})),s}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new as(new ss([])),n=new dl(t,e),r=new dl(t,e+1);let s=mi();return this.ws.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new dl(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dl{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return as.comparator(e.key,t.key)||Zr(e.As,t.As)}static _s(e,t){return Zr(e.As,t.As)||as.comparator(e.key,t.key)}}class hl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ts(dl.ds)}checkEmpty(e){return gs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yi(s,t,n,r);this.mutationQueue.push(o);for(const i of r)this.Rs=this.Rs.add(new dl(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return gs.resolve(o)}lookupMutationBatch(e,t){return gs.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return gs.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return gs.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return gs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dl(t,0),r=new dl(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);s.push(t)})),gs.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ts(Zr);return t.forEach((e=>{const t=new dl(e,0),r=new dl(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),gs.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;as.isDocumentKey(s)||(s=s.child(""));const o=new dl(new as(s),0);let i=new Ts(Zr);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.As)),!0)}),o),gs.resolve(this.Vs(i))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Fr(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return gs.forEach(t.mutations,(r=>{const s=new dl(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new dl(t,0),r=this.Rs.firstAfterOrEqual(n);return gs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,gs.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ml{constructor(e){this.Ds=e,this.docs=new Es(as.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gs.resolve(n?n.document.mutableCopy():co.newInvalidDocument(t))}getEntries(e,t){let n=si();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():co.newInvalidDocument(e))})),gs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=si();const o=t.path,i=new as(o.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:e,value:{document:i}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||hs(us(i),n)<=0||(r.has(i.key)||Xo(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return gs.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Or()}Cs(e,t){return gs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new pl(this)}getSize(e){return gs.resolve(this.size)}}class pl extends ol{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),gs.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class fl{constructor(e){this.persistence=e,this.xs=new ni((e=>Mo(e)),Lo),this.lastRemoteSnapshotVersion=ns.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ul,this.targetCount=0,this.Ms=sl.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),gs.resolve()}getLastRemoteSnapshotVersion(e){return gs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gs.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),gs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),gs.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new sl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,gs.resolve()}updateTargetData(e,t){return this.Fn(t),gs.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,gs.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach(((o,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),gs.waitFor(s).next((()=>r))}getTargetCount(e){return gs.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return gs.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),gs.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),gs.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),gs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return gs.resolve(n)}containsKey(e,t){return gs.resolve(this.ks.containsKey(t))}}class gl{constructor(e,t){this.$s={},this.overlays={},this.Os=new vs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new fl(this),this.indexManager=new tl,this.remoteDocumentCache=function(e){return new ml(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Xa(t),this.qs=new ll(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cl,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new hl(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Rr("MemoryPersistence","Starting transaction:",e);const r=new yl(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return gs.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class yl extends ps{constructor(e){super(),this.currentSequenceNumber=e}}class vl{constructor(e){this.persistence=e,this.Qs=new ul,this.js=null}static zs(e){return new vl(e)}get Ws(){if(this.js)return this.js;throw Or()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),gs.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),gs.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),gs.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gs.forEach(this.Ws,(n=>{const r=as.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,ns.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return gs.or([()=>gs.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class xl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=mi(),r=mi();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xl(e,t.fromCache,n,r)}}class bl{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((s=>s||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(zo(t))return gs.resolve(null);let n=Go(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Yo(t,null,"F"),n=Go(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=mi(...r);return this.Ui.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,s,n.readTime)?this.Ki(e,Yo(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return zo(t)||r.isEqual(ns.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((s=>{const o=this.ji(t,s);return this.zi(t,o,n,r)?this.Qi(e,t):(Pr()<=i.$b.DEBUG&&Rr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jo(t)),this.Wi(e,o,t,cs(r,-1)))}))}ji(e,t){let n=new Ts(ei(e));return t.forEach(((t,r)=>{Xo(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return Pr()<=i.$b.DEBUG&&Rr("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.Ui.getDocumentsMatchingQuery(e,t,ds.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class wl{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Es(Zr),this.Yi=new ni((e=>Mo(e)),Lo),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new al(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Nl(e,t,n,r){return new wl(e,t,n,r)}async function jl(e,t){const n=Br(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],o=[];let i=mi();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({er:e,removedBatchIds:s,addedBatchIds:o})))}))}))}function kl(e){const t=Br(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Cl(e,t,n){let r=mi(),s=mi();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=si();return n.forEach(((n,o)=>{const i=e.get(n);o.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),o.isNoDocument()&&o.version.isEqual(ns.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!i.isValidDocument()||o.version.compareTo(i.version)>0||0===o.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Rr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",o.version)})),{nr:r,sr:s}}))}function Sl(e,t){const n=Br(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Al(e,t){const n=Br(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((s=>s?(r=s,gs.resolve(r)):n.Bs.allocateTargetId(e).next((s=>(r=new Ja(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function El(e,t,n){const r=Br(e),s=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!ys(e))throw e;Rr("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function _l(e,t,n){const r=Br(e);let s=ns.min(),o=mi();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Br(e),s=r.Yi.get(n);return void 0!==s?gs.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,Go(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:ns.min(),n?o:mi()))).next((e=>(Il(r,Zo(t),e),{documents:e,ir:o})))))}function Il(e,t,n){let r=e.Xi.get(t)||ns.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class Tl{constructor(){this.activeTargetIds=fi()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pl{constructor(){this.Hr=new Tl,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Tl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rl{Yr(e){}shutdown(){}}class Dl{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ml=null;function Ll(){return null===Ml?Ml=268435456+Math.round(2147483648*Math.random()):Ml++,"0x"+Ml.toString(16)}const Ol={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fl{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Bl="WebChannelConnection";class Ul extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const o=Ll(),i=this.To(e,t);Rr("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),i,n);const a={};return this.Eo(a,r,s),this.Ao(e,i,a,n).then((t=>(Rr("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Mr("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",i,"request:",n),t}))}vo(e,t,n,r,s,o){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ir,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Ol[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=Ll();return new Promise(((o,i)=>{const a=new Cr;a.setWithCredentials(!0),a.listenOnce(br.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case xr.NO_ERROR:const t=a.getResponseJson();Rr(Bl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),o(t);break;case xr.TIMEOUT:Rr(Bl,"RPC '".concat(e,"' ").concat(s," timed out")),i(new zr(Ur.DEADLINE_EXCEEDED,"Request time out"));break;case xr.HTTP_ERROR:const n=a.getStatus();if(Rr(Bl,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ur).indexOf(t)>=0?t:Ur.UNKNOWN}(t.status);i(new zr(e,t.message))}else i(new zr(Ur.UNKNOWN,"Server responded with status "+a.getStatus()))}else i(new zr(Ur.UNAVAILABLE,"Connection failed."));break;default:Or()}}finally{Rr(Bl,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);Rr(Bl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Ll(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yr(),i=vr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new jr({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");Rr(Bl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const m=new Fl({ro:t=>{h?Rr(Bl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Rr(Bl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,kr.EventType.OPEN,(()=>{h||Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,kr.EventType.CLOSE,(()=>{h||(h=!0,Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.wo())})),p(u,kr.EventType.ERROR,(t=>{h||(h=!0,Mr(Bl,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),m.wo(new zr(Ur.UNAVAILABLE,"The operation could not be completed")))})),p(u,kr.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];Fr(!!s);const o=s,i=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(i){Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=Zi[e];if(void 0!==t)return na(t)}(t),s=i.message;void 0===n&&(n=Ur.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),h=!0,m.wo(new zr(n,s)),u.close()}else Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m._o(s)}})),p(i,wr.STAT_EVENT,(t=>{t.stat===Nr.PROXY?Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Nr.NOPROXY&&Rr(Bl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{m.fo()}),0),m}}function zl(){return"undefined"!=typeof document?document:null}function Vl(e){return new ja(e,!0)}class ql{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Rr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Wl{constructor(e,t,n,r,s,o,i,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=i,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ql(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Ur.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Ur.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new zr(Ur.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Rr("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hl extends Wl{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Or()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Fr(void 0===t||"string"==typeof t),Ms.fromBase64String(t||"")):(Fr(void 0===t||t instanceof Uint8Array),Ms.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,a=i&&function(e){const t=void 0===e.code?Ur.UNKNOWN:na(e.code);return new zr(t,e.message||"")}(i);n=new fa(r,s,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pa(e,r.document.name),o=Ea(r.document.updateTime),i=r.document.createTime?Ea(r.document.createTime):ns.min(),a=new ao({mapValue:{fields:r.document.fields}}),l=co.newFoundDocument(s,o,i,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ma(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Pa(e,r.document),o=r.readTime?Ea(r.readTime):ns.min(),i=co.newNoDocument(s,o),a=r.removedTargetIds||[];n=new ma([],a,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Pa(e,r.document),o=r.removedTargetIds||[];n=new ma([],o,s,null)}else{if(!("filter"in t))return Or();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,o=new Xi(r,s),i=e.targetId;n=new pa(i,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ns.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ns.min():t.readTime?Ea(t.readTime):ns.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Ma(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Oo(r)?{documents:Ba(e,r)}:{query:Ua(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Sa(e,t.resumeToken);const r=ka(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ns.min())>0){n.readTime=Ca(e,t.snapshotVersion.toTimestamp());const r=ka(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Or()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Ma(this.serializer),t.removeTarget=e,this.Wo(t)}}class Gl extends Wl{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Fr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Fr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ea(e.updateTime):Ea(t);return n.isEqual(ns.min())&&(n=Ea(t)),new Pi(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ea(e.commitTime);return this.listener.cu(n,t)}return Fr(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ma(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Fa(this.serializer,e)))};this.Wo(t)}}class Kl extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new zr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.Io(e,t,n,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zr(Ur.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,i]=s;return this.connection.vo(e,t,n,o,i,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zr(Ur.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Yl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Dr(t),this.mu=!1):Rr("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Ql{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{sc(this)&&(Rr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Br(e);t.vu.add(4),await Jl(t),t.bu.set("Unknown"),t.vu.delete(4),await $l(t)}(this))}))})),this.bu=new Yl(n,r)}}async function $l(e){if(sc(e))for(const t of e.Ru)await t(!0)}async function Jl(e){for(const t of e.Ru)await t(!1)}function Xl(e,t){const n=Br(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),rc(n)?nc(n):Nc(n).Ko()&&ec(n,t))}function Zl(e,t){const n=Br(e),r=Nc(n);n.Au.delete(t),r.Ko()&&tc(n,t),0===n.Au.size&&(r.Ko()?r.jo():sc(n)&&n.bu.set("Unknown"))}function ec(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ns.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nc(e).su(t)}function tc(e,t){e.Vu.qt(t),Nc(e).iu(t)}function nc(e){e.Vu=new ya({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Nc(e).start(),e.bu.gu()}function rc(e){return sc(e)&&!Nc(e).Uo()&&e.Au.size>0}function sc(e){return 0===Br(e).vu.size}function oc(e){e.Vu=void 0}async function ic(e){e.Au.forEach(((t,n)=>{ec(e,t)}))}async function ac(e,t){oc(e),rc(e)?(e.bu.Iu(t),nc(e)):e.bu.set("Unknown")}async function lc(e,t,n){if(e.bu.set("Online"),t instanceof fa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Rr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await cc(e,n)}else if(t instanceof ma?e.Vu.Ht(t):t instanceof pa?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ns.min()))try{const t=await kl(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Ms.EMPTY_BYTE_STRING,r.snapshotVersion)),tc(e,t);const s=new Ja(r.target,t,n,r.sequenceNumber);ec(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Rr("RemoteStore","Failed to raise snapshot:",t),await cc(e,t)}}async function cc(e,t,n){if(!ys(t))throw t;e.vu.add(1),await Jl(e),e.bu.set("Offline"),n||(n=()=>kl(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Rr("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await $l(e)}))}function uc(e,t){return t().catch((n=>cc(e,n,t)))}async function dc(e){const t=Br(e),n=jc(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;hc(t);)try{const e=await Sl(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,mc(t,e)}catch(e){await cc(t,e)}pc(t)&&fc(t)}function hc(e){return sc(e)&&e.Eu.length<10}function mc(e,t){e.Eu.push(t);const n=jc(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function pc(e){return sc(e)&&!jc(e).Uo()&&e.Eu.length>0}function fc(e){jc(e).start()}async function gc(e){jc(e).hu()}async function yc(e){const t=jc(e);for(const n of e.Eu)t.uu(n.mutations)}async function vc(e,t,n){const r=e.Eu.shift(),s=Qi.from(r,t,n);await uc(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await dc(e)}async function xc(e,t){t&&jc(e).ou&&await async function(e,t){if(ta(n=t.code)&&n!==Ur.ABORTED){const n=e.Eu.shift();jc(e).Qo(),await uc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await dc(e)}var n}(e,t),pc(e)&&fc(e)}async function bc(e,t){const n=Br(e);n.asyncQueue.verifyOperationInProgress(),Rr("RemoteStore","RemoteStore received new credentials");const r=sc(n);n.vu.add(3),await Jl(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await $l(n)}async function wc(e,t){const n=Br(e);t?(n.vu.delete(2),await $l(n)):t||(n.vu.add(2),await Jl(n),n.bu.set("Unknown"))}function Nc(e){return e.Su||(e.Su=function(e,t,n){const r=Br(e);return r.fu(),new Hl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ic.bind(null,e),ao:ac.bind(null,e),nu:lc.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),rc(e)?nc(e):e.bu.set("Unknown")):(await e.Su.stop(),oc(e))}))),e.Su}function jc(e){return e.Du||(e.Du=function(e,t,n){const r=Br(e);return r.fu(),new Gl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:gc.bind(null,e),ao:xc.bind(null,e),au:yc.bind(null,e),cu:vc.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await dc(e)):(await e.Du.stop(),e.Eu.length>0&&(Rr("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class kc{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,i=new kc(e,t,o,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zr(Ur.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cc(e,t){if(Dr("AsyncQueue","".concat(t,": ").concat(e)),ys(e))return new zr(Ur.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Sc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||as.comparator(t.key,n.key):(e,t)=>as.comparator(e.key,t.key),this.keyedMap=ii(),this.sortedSet=new Es(this.comparator)}static emptySet(e){return new Sc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Sc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ac{constructor(){this.Cu=new Es(as.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Or():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ec{constructor(e,t,n,r,s,o,i,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=i,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Ec(e,t,Sc.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _c{constructor(){this.Nu=void 0,this.listeners=[]}}class Ic{constructor(){this.queries=new ni((e=>$o(e)),Qo),this.onlineState="Unknown",this.ku=new Set}}async function Tc(e,t){const n=Br(e),r=t.query;let s=!1,o=n.queries.get(r);if(o||(s=!0,o=new _c),s)try{o.Nu=await n.onListen(r)}catch(e){const n=Cc(e,"Initialization of query '".concat(Jo(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&Mc(n)}async function Pc(e,t){const n=Br(e),r=t.query;let s=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),s=0===o.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Rc(e,t){const n=Br(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&Mc(n)}function Dc(e,t,n){const r=Br(e),s=r.queries.get(t);if(s)for(const o of s.listeners)o.onError(n);r.queries.delete(t)}function Mc(e){e.ku.forEach((e=>{e.next()}))}class Lc{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ec(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Oc{constructor(e){this.key=e}}class Fc{constructor(e){this.key=e}}class Bc{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=mi(),this.mutatedKeys=mi(),this.tc=ei(e),this.ec=new Sc(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Ac,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,i=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Xo(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),m=!0):this.rc(c,u)||(n.track({type:2,doc:u}),m=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(a||l)&&(i=!0)),m&&(u?(o=o.add(u),s=h?s.add(e):s.delete(e)):(o=o.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:i,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Or()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],i=0===this.Zu.size&&this.current?1:0,a=i!==this.Xu;return this.Xu=i,0!==s.length||a?{snapshot:new Ec(this.query,e.ec,r,s,e.mutatedKeys,0===i,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ac,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=mi(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Fc(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Oc(n))})),t}hc(e){this.Yu=e.ir,this.Zu=mi();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ec.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Uc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zc{constructor(e){this.key=e,this.fc=!1}}class Vc{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ni((e=>$o(e)),Qo),this._c=new Map,this.mc=new Set,this.gc=new Es(as.comparator),this.yc=new Map,this.Ic=new ul,this.Tc={},this.Ec=new Map,this.Ac=sl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function qc(e,t){const n=au(e);let r,s;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),s=o.view.lc();else{const e=await Al(n.localStore,Go(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await Wc(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Xl(n.remoteStore,e)}return s}async function Wc(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await _l(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,s)})));const o=r&&r.targetChanges.get(t.targetId),i=t.view.applyChanges(s,e.isPrimaryClient,o);return tu(e,t.targetId,i.cc),i.snapshot}(e,t,n,r);const o=await _l(e.localStore,t,!0),i=new Bc(t,o.ir),a=i.sc(o.documents),l=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(a,e.isPrimaryClient,l);tu(e,n,c.cc);const u=new Uc(t,n,i);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Hc(e,t){const n=Br(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter((e=>!Qo(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await El(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Zl(n.remoteStore,r.targetId),Zc(n,r.targetId)})).catch(fs)):(Zc(n,r.targetId),await El(n.localStore,r.targetId,!0))}async function Gc(e,t){const n=Br(e);try{const e=await function(e,t){const n=Br(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const i=[];t.targetChanges.forEach(((o,a)=>{const l=s.get(a);if(!l)return;i.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Ms.EMPTY_BYTE_STRING,ns.min()).withLastLimboFreeSnapshotVersion(ns.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&i.push(n.Bs.updateTargetData(e,c))}));let a=si(),l=mi();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(Cl(e,o,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(ns.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return gs.waitFor(i).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Fr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Fr(r.fc):e.removedDocuments.size>0&&(Fr(r.fc),r.fc=!1))})),await su(n,e,t)}catch(e){await fs(e)}}function Kc(e,t,n){const r=Br(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=Br(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)})),r&&Mc(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Yc(e,t,n){const r=Br(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),o=s&&s.key;if(o){let e=new Es(as.comparator);e=e.insert(o,co.newNoDocument(o,ns.min()));const n=mi().add(o),s=new da(ns.min(),new Map,new Es(Zr),e,n);await Gc(r,s),r.gc=r.gc.remove(o),r.yc.delete(t),ru(r)}else await El(r.localStore,t,!1).then((()=>Zc(r,t,n))).catch(fs)}async function Qc(e,t){const n=Br(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Br(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,o=s.keys();let i=gs.resolve();return o.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Fr(null!==o),t.version.compareTo(o)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Xc(n,r,null),Jc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await su(n,e)}catch(e){await fs(e)}}async function $c(e,t,n){const r=Br(e);try{const e=await function(e,t){const n=Br(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Fr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Xc(r,t,n),Jc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await su(r,e)}catch(n){await fs(n)}}function Jc(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Xc(e,t,n){const r=Br(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function Zc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||eu(e,t)}))}function eu(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Zl(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),ru(e))}function tu(e,t,n){for(const r of n)r instanceof Oc?(e.Ic.addReference(r.key,t),nu(e,r)):r instanceof Fc?(Rr("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||eu(e,r.key)):Or()}function nu(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Rr("SyncEngine","New document in limbo: "+n),e.mc.add(r),ru(e))}function ru(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new as(ss.fromString(t)),r=e.Ac.next();e.yc.set(r,new zc(n)),e.gc=e.gc.insert(n,r),Xl(e.remoteStore,new Ja(Go(Uo(n.path)),r,"TargetPurposeLimboResolution",vs.ct))}}async function su(e,t,n){const r=Br(e),s=[],o=[],i=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{i.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=xl.Li(a.targetId,e);o.push(t)}})))})),await Promise.all(i),r.dc.nu(s),await async function(e,t){const n=Br(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>gs.forEach(t,(t=>gs.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>gs.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ys(e))throw e;Rr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,o))}async function ou(e,t){const n=Br(e);if(!n.currentUser.isEqual(t)){Rr("SyncEngine","User change. New user:",t.toKey());const e=await jl(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new zr(Ur.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await su(n,e.er)}}function iu(e,t){const n=Br(e),r=n.yc.get(t);if(r&&r.fc)return mi().add(r.key);{let e=mi();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function au(e){const t=Br(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yc.bind(null,t),t.dc.nu=Rc.bind(null,t.eventManager),t.dc.Pc=Dc.bind(null,t.eventManager),t}function lu(e){const t=Br(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$c.bind(null,t),t}class cu{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Nl(this.persistence,new bl,e.initialUser,this.serializer)}createPersistence(e){return new gl(vl.zs,this.serializer)}createSharedClientState(e){return new Pl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ou.bind(null,this.syncEngine),await wc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ic}createDatastore(e){const t=Vl(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Ul(r));var r;return function(e,t,n,r){return new Kl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Kc(this.syncEngine,e,0),o=Dl.D()?new Dl:new Rl,new Ql(t,n,r,s,o);var t,n,r,s,o}createSyncEngine(e,t){return function(e,t,n,r,s,o,i){const a=new Vc(e,t,n,r,s,o);return i&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Br(e);Rr("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Jl(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class du{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hu{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_r.UNAUTHENTICATED,this.clientId=Xr.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Rr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Rr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cc(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function mu(e,t){e.asyncQueue.verifyOperationInProgress(),Rr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await jl(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function pu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gu(e);Rr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>bc(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bc(t.remoteStore,n))),e._onlineComponents=t}function fu(e){return"FirebaseError"===e.name?e.code===Ur.FAILED_PRECONDITION||e.code===Ur.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Rr("FirestoreClient","Using user provided OfflineComponentProvider");try{await mu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!fu(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),await mu(e,new cu)}}else Rr("FirestoreClient","Using default OfflineComponentProvider"),await mu(e,new cu);return e._offlineComponents}async function yu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Rr("FirestoreClient","Using user provided OnlineComponentProvider"),await pu(e,e._uninitializedComponentsProvider._online)):(Rr("FirestoreClient","Using default OnlineComponentProvider"),await pu(e,new uu))),e._onlineComponents}function vu(e){return yu(e).then((e=>e.syncEngine))}function xu(e){return yu(e).then((e=>e.datastore))}async function bu(e){const t=await yu(e),n=t.eventManager;return n.onListen=qc.bind(null,t.syncEngine),n.onUnlisten=Hc.bind(null,t.syncEngine),n}function wu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const o=new du({next:o=>{t.enqueueAndForget((()=>Pc(e,i)));const a=o.docs.has(n);!a&&o.fromCache?s.reject(new zr(Ur.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?s.reject(new zr(Ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new Lc(Uo(n.path),o,{includeMetadataChanges:!0,Ku:!0});return Tc(e,i)}(await bu(e),e.asyncQueue,t,n,r))),r.promise}function Nu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const o=new du({next:n=>{t.enqueueAndForget((()=>Pc(e,i))),n.fromCache&&"server"===r.source?s.reject(new zr(Ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new Lc(n,o,{includeMetadataChanges:!0,Ku:!0});return Tc(e,i)}(await bu(e),e.asyncQueue,t,n,r))),r.promise}function ju(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ku=new Map;function Cu(e,t,n){if(!n)throw new zr(Ur.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Su(e){if(!as.isDocumentKey(e))throw new zr(Ur.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Au(e){if(as.isDocumentKey(e))throw new zr(Ur.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Or()}function _u(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zr(Ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eu(e);throw new zr(Ur.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Iu(e,t){if(t<=0)throw new zr(Ur.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Tu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zr(Ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zr(Ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new zr(Ur.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ju(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new zr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new zr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Pu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zr(Ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zr(Ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wr;switch(e.type){case"firstParty":return new Yr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zr(Ur.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ku.get(e);t&&(Rr("ComponentProvider","Removing Datastore"),ku.delete(e),t.terminate())}(this),Promise.resolve()}}class Ru{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ru(this.firestore,e,this._key)}}class Du{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Du(this.firestore,e,this._query)}}class Mu extends Du{constructor(e,t,n){super(e,t,Uo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ru(this.firestore,null,new as(e))}withConverter(e){return new Mu(this.firestore,e,this._path)}}function Lu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,a.Ku)(e),Cu("collection","path",t),e instanceof Pu){const n=ss.fromString(t,...r);return Au(n),new Mu(e,null,n)}{if(!(e instanceof Ru||e instanceof Mu))throw new zr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return Au(n),new Mu(e.firestore,null,n)}}function Ou(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,a.Ku)(e),1===arguments.length&&(t=Xr.A()),Cu("doc","path",t),e instanceof Pu){const n=ss.fromString(t,...r);return Su(n),new Ru(e,null,new as(n))}{if(!(e instanceof Ru||e instanceof Mu))throw new zr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return Su(n),new Ru(e.firestore,e instanceof Mu?e.converter:null,new as(n))}}class Fu{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ql(this,"async_queue_retry"),this.Xc=()=>{const e=zl();e&&Rr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=zl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=zl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Vr;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ys(e))throw e;Rr("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Dr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=kc.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Or()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Bu extends Pu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Fu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vu(this),this._firestoreClient.terminate()}}function Uu(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||"(default)",o=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const e=(0,a.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const o=(e=_u(e,Pu))._getSettings(),i="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==i&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:i,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_r.MOCK_USER;else{t=(0,a.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new zr(Ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _r(o)}e._authCredentials=new Hr(new qr(t,n))}}(o,...e)}return o}function zu(e){return e._firestoreClient||Vu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Vu(e){var t,n,r;const s=e._freezeSettings(),o=function(e,t,n,r){return new qs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ju(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new hu(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}class qu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._aggregateType=e,this._internalFieldPath=t,this.type="AggregateField"}}class Wu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(Ms.fromBase64String(e))}catch(e){throw new zr(Ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hu(Ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zr(Ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ku{constructor(e){this._methodName=e}}class Yu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zr(Ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zr(Ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zr(this._lat,e._lat)||Zr(this._long,e._long)}}const Qu=/^__.*__$/;class $u{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new zi(e,this.data,t,this.fieldTransforms)}}class Ju{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Or()}}class Zu{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Zu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return gd(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Xu(this.ca)&&Qu.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ed{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vl(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Zu({ca:e,methodName:t,ga:n,path:is.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function td(e){const t=e._freezeSettings(),n=Vl(e._databaseId);return new ed(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nd(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.ya(o.merge||o.mergeFields?2:0,t,n,s);hd("Data must be an object, but it was:",i,r);const a=ud(r,i);let l,c;if(o.merge)l=new Rs(i.fieldMask),c=i.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const s=md(t,r,n);if(!i.contains(s))throw new zr(Ur.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));yd(e,s)||e.push(s)}l=new Rs(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new $u(new ao(a),l,c)}class rd extends Ku{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}class sd extends Ku{_toFieldTransform(e){return new Ti(e.path,new ji)}isEqual(e){return e instanceof sd}}class od extends Ku{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Ei(e.serializer,vi(e.serializer,this.Ia));return new Ti(e.path,t)}isEqual(e){return this===e}}function id(e,t,n,r){const s=e.ya(1,t,n);hd("Data must be an object, but it was:",s,r);const o=[],i=ao.empty();Ss(r,((e,r)=>{const l=fd(t,e,n);r=(0,a.Ku)(r);const c=s.da(l);if(r instanceof rd)o.push(l);else{const e=cd(r,c);null!=e&&(o.push(l),i.set(l,e))}}));const l=new Rs(o);return new Ju(i,l,s.fieldTransforms)}function ad(e,t,n,r,s,o){const i=e.ya(1,t,n),l=[md(t,r,n)],c=[s];if(o.length%2!=0)throw new zr(Ur.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let a=0;a<o.length;a+=2)l.push(md(t,o[a])),c.push(o[a+1]);const u=[],d=ao.empty();for(let m=l.length-1;m>=0;--m)if(!yd(u,l[m])){const e=l[m];let t=c[m];t=(0,a.Ku)(t);const n=i.da(e);if(t instanceof rd)u.push(e);else{const r=cd(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new Rs(u);return new Ju(d,h,i.fieldTransforms)}function ld(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cd(n,e.ya(r?4:3,t))}function cd(e,t){if(dd(e=(0,a.Ku)(e)))return hd("Unsupported field value:",t,e),ud(e,t);if(e instanceof Ku)return function(e,t){if(!Xu(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=cd(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ts.fromDate(e);return{timestampValue:Ca(t.serializer,n)}}if(e instanceof ts){const n=new ts(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ca(t.serializer,n)}}if(e instanceof Yu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hu)return{bytesValue:Sa(t.serializer,e._byteString)};if(e instanceof Ru){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:_a(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Eu(e)))}(e,t)}function ud(e,t){const n={};return As(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ss(e,((e,r)=>{const s=cd(r,t.ha(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function dd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ts||e instanceof Yu||e instanceof Hu||e instanceof Ru||e instanceof Ku)}function hd(e,t,n){if(!dd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Eu(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function md(e,t,n){if((t=(0,a.Ku)(t))instanceof Gu)return t._internalPath;if("string"==typeof t)return fd(e,t);throw gd("Field path arguments must be of type string or ",e,!1,void 0,n)}const pd=new RegExp("[~\\*/\\[\\]]");function fd(e,t,n){if(t.search(pd)>=0)throw gd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Gu(...t.split("."))._internalPath}catch(r){throw gd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gd(e,t,n,r,s){const o=r&&!r.isEmpty(),i=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||i)&&(l+=" (found",o&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(s)),l+=")"),new zr(Ur.INVALID_ARGUMENT,a+e+l)}function yd(e,t){return e.some((e=>e.isEqual(t)))}class vd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ru(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xd extends vd{data(){return super.data()}}function bd(e,t){return"string"==typeof t?fd(e,t):t instanceof Gu?t._internalPath:t._delegate._internalPath}function wd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zr(Ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nd{}class jd extends Nd{}function kd(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];t instanceof Nd&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof Ad)).length,n=e.filter((e=>e instanceof Cd)).length;if(t>1||t>0&&n>0)throw new zr(Ur.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e}class Cd extends jd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Cd(e,t,n)}_apply(e){const t=this._parse(e);return Od(e._query,t),new Du(e.firestore,e.converter,Ko(e._query,t))}_parse(e){const t=td(e.firestore),n=function(e,t,n,r,s,o,i){let a;if(s.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zr(Ur.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Ld(i,o);const t=[];for(const n of i)t.push(Md(r,e,n));a={arrayValue:{values:t}}}else a=Md(r,e,i)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ld(i,o),a=ld(n,"where",i,"in"===o||"not-in"===o);return yo.create(s,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Sd(e,t,n){const r=t,s=bd("where",e);return Cd._create(s,r,n)}class Ad extends Nd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ad(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:vo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Od(n,s),n=Ko(n,s)}(e._query,t),new Du(e.firestore,e.converter,Ko(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ed extends jd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ed(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new po(t,n);return function(e,t){if(null===Vo(e)){const n=qo(e);null!==n&&Fd(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Du(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Fo(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function _d(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=bd("orderBy",e);return Ed._create(n,t)}class Id extends jd{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Id(e,t,n)}_apply(e){return new Du(e.firestore,e.converter,Yo(e._query,this._limit,this._limitType))}}function Td(e){return Iu("limit",e),Id._create("limit",e,"F")}class Pd extends jd{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Pd(e,t,n)}_apply(e){const t=Dd(e,this.type,this._docOrFields,this._inclusive);return new Du(e.firestore,e.converter,function(e,t){return new Fo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Rd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Pd._create("startAfter",t,!1)}function Dd(e,t,n,r){if(n[0]=(0,a.Ku)(n[0]),n[0]instanceof vd)return function(e,t,n,r,s){if(!r)throw new zr(Ur.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const i of Ho(e))if(i.field.isKeyField())o.push(Zs(t,r.key));else{const e=r.data.field(i.field);if(Us(e))throw new zr(Ur.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+i.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=i.field.canonicalString();throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new uo(o,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=td(e.firestore);return function(e,t,n,r,s,o){const i=e.explicitOrderBy;if(s.length>i.length)throw new zr(Ur.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<s.length;l++){const o=s[l];if(i[l].field.isKeyField()){if("string"!=typeof o)throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Wo(e)&&-1!==o.indexOf("/"))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(ss.fromString(o));if(!as.isDocumentKey(n))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new as(n);a.push(Zs(t,s))}else{const e=ld(n,r,o);a.push(e)}}return new uo(a,o)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Md(e,t,n){if("string"==typeof(n=(0,a.Ku)(n))){if(""===n)throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wo(t)&&-1!==n.indexOf("/"))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ss.fromString(n));if(!as.isDocumentKey(r))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zs(e,new as(r))}if(n instanceof Ru)return Zs(e,n._key);throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Eu(n),"."))}function Ld(e,t){if(!Array.isArray(e)||0===e.length)throw new zr(Ur.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Od(e,t){if(t.isInequality()){const n=qo(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const s=Vo(e);null!==s&&Fd(e,r,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Fd(e,t,n){if(!n.isEqual(t))throw new zr(Ur.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Bd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Or()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ss(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Yu(Fs(e.latitude),Fs(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vs(e));default:return null}}convertTimestamp(e){const t=Os(e);return new ts(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ss.fromString(e);Fr($a(n));const r=new Ws(n.get(1),n.get(3)),s=new as(n.popFirst(5));return r.isEqual(t)||Dr("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Ud(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class zd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vd extends vd{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(bd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class qd extends Vd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Wd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new qd(this._firestore,this._userDataWriter,n.key,n,new zd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zr(Ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new qd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new qd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,o=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Hd(t.type),doc:r,oldIndex:s,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Or()}}function Gd(e){e=_u(e,Ru);const t=_u(e.firestore,Bu);return wu(zu(t),e._key).then((n=>eh(t,e,n)))}class Kd extends Bd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ru(this.firestore,null,t)}}function Yd(e){e=_u(e,Du);const t=_u(e.firestore,Bu),n=zu(t),r=new Kd(t);return wd(e._query),Nu(n,e._query).then((n=>new Wd(t,r,e,n)))}function Qd(e,t,n){e=_u(e,Ru);const r=_u(e.firestore,Bu),s=Ud(e.converter,t,n);return Zd(r,[nd(td(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Ri.none())])}function $d(e,t,n){e=_u(e,Ru);const r=_u(e.firestore,Bu),s=td(r);let o;for(var i=arguments.length,l=new Array(i>3?i-3:0),c=3;c<i;c++)l[c-3]=arguments[c];return o="string"==typeof(t=(0,a.Ku)(t))||t instanceof Gu?ad(s,"updateDoc",e._key,t,n,l):id(s,"updateDoc",e._key,t),Zd(r,[o.toMutation(e._key,Ri.exists(!0))])}function Jd(e){return Zd(_u(e.firestore,Bu),[new Gi(e._key,Ri.none())])}function Xd(e,t){const n=_u(e.firestore,Bu),r=Ou(e),s=Ud(e.converter,t);return Zd(n,[nd(td(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Ri.exists(!1))]).then((()=>r))}function Zd(e,t){return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=lu(e);try{const e=await function(e,t){const n=Br(e),r=ts.now(),s=t.reduce(((e,t)=>e.add(t.key)),mi());let o,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=si(),l=mi();return n.Zi.getEntries(e,s).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((s=>{o=s;const i=[];for(const e of t){const t=Bi(e,o.get(e.key).overlayedDocument);null!=t&&i.push(new Vi(e.key,t,lo(t.value.mapValue),Ri.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:ai(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Es(Zr)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await su(r,e.changes),await dc(r.remoteStore)}catch(e){const t=Cc(e,"Failed to persist write");n.reject(t)}}(await vu(e),t,n))),n.promise}(zu(e),t)}function eh(e,t,n){const r=n.docs.get(t._key),s=new Kd(e);return new Vd(e,s,t._key,r,new zd(n.hasPendingWrites,n.fromCache),t.converter)}function th(e){return function(e,t){const n=_u(e.firestore,Bu),r=zu(n),s=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}(t,((e,t)=>new Ji(t,e._aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>{try{const s=await xu(e);r.resolve(async function(e,t,n){var r;const s=Br(e),{request:o,du:i}=function(e,t,n){const r=Ua(e,t),s={},o=[];let i=0;return n.forEach((e=>{const t="aggregate_"+i++;s[t]=e.alias,"count"===e.yt?o.push({alias:t,count:{}}):"avg"===e.yt?o.push({alias:t,avg:{field:Ga(e.fieldPath)}}):"sum"===e.yt&&o.push({alias:t,sum:{field:Ga(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},du:s}}(s.serializer,Go(t),n),a=o.parent;s.connection.po||delete o.parent;const l=(await s.vo("RunAggregationQuery",a,o,1)).filter((e=>!!e.result));Fr(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[i[t]]=c[t],e)),{})}(s,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,s).then((t=>function(e,t,n){const r=new Kd(e);return new Wu(t,r,n)}(n,e,t)))}(e,{count:new qu("count")})}class nh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=td(e)}set(e,t,n){this._verifyNotCommitted();const r=rh(e,this._firestore),s=Ud(r.converter,t,n),o=nd(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ri.none())),this}update(e,t,n){this._verifyNotCommitted();const r=rh(e,this._firestore);let s;for(var o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];return s="string"==typeof(t=(0,a.Ku)(t))||t instanceof Gu?ad(this._dataReader,"WriteBatch.update",r._key,t,n,i):id(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Ri.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rh(e,this._firestore);return this._mutations=this._mutations.concat(new Gi(t._key,Ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zr(Ur.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rh(e,t){if((e=(0,a.Ku)(e)).firestore!==t)throw new zr(Ur.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function sh(){return new sd("serverTimestamp")}function oh(e){return new od("increment",e)}function ih(e){return zu(e=_u(e,Bu)),new nh(e,(t=>Zd(e,t)))}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ir=e}(s.MF),(0,s.om)(new o.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const o=e.getProvider("app").getImmediate(),i=new Bu(new Gr(e.getProvider("auth-internal")),new $r(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zr(Ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ws(e.options.projectId,t)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(Er,"3.13.0",e),(0,s.KO)(Er,"3.13.0","esm2017")}()},3862:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});n(9950);const r="navbar_navbar__5eYuM",s="navbar_navContent__4X0FA",o="navbar_navItem__n8A62",i="navbar_active__Oh67F",a="navbar_navIcon__yvvEc",l="navbar_completedIndicator__sMrrt",c="navbar_navLabel__X01tV";var u=n(4414);const d=e=>{let{sections:t,activeSection:n,onSectionChange:d,sectionStatus:h}=e;return(0,u.jsx)("nav",{className:r,children:(0,u.jsx)("div",{className:s,children:t.map((e=>{var t;return(0,u.jsxs)("button",{className:"".concat(o," ").concat(n===e.id?i:""),onClick:()=>d(e.id),"aria-label":e.title,children:[(0,u.jsxs)("div",{className:a,children:[e.icon,(null===(t=h[e.id])||void 0===t?void 0:t.completed)&&(0,u.jsx)("span",{className:l,children:"\u2713"})]}),(0,u.jsx)("span",{className:c,children:e.title})]},e.id)}))})})}},3876:(e,t,n)=>{"use strict";var r=n(6429),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?i:a[e.$$typeof]||s}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=i;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var s=m(n);s&&s!==p&&e(t,s,r)}var i=u(n);d&&(i=i.concat(d(n)));for(var a=l(t),f=l(n),g=0;g<i.length;++g){var y=i[g];if(!o[y]&&(!r||!r[y])&&(!f||!f[y])&&(!a||!a[y])){var v=h(n,y);try{c(t,y,v)}catch(x){}}}}return t}},4008:(e,t,n)=>{var r=n(1582);e.exports=function(e){return null==e?"":r(e)}},4102:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},4104:(e,t,n)=>{var r=n(1404),s=n(7946),o=n(5321),i=n(5916),a=n(9794),l=n(4243),c=n(2535);e.exports=function(e,t){return i(e)&&a(t)?l(c(e),t):function(n){var i=s(n,e);return void 0===i&&i===t?o(n,e):r(t,i,3)}}},4123:(e,t,n)=>{var r=n(4759)["__core-js_shared__"];e.exports=r},4206:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},4243:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},4272:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteDB:()=>v,openDB:()=>y,unwrap:()=>g,wrap:()=>f});var r=n(9379);const s=(e,t)=>t.some((t=>e instanceof t));let o,i;const a=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),f(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const o=e.call(g(this),t,...r);return c.set(o,t.sort?t.sort():[t]),f(o)}}function p(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));l.set(e,t)}(e),s(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{t(f(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=p(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),a=f(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(f(i.result),e.oldVersion,e.newVersion,f(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),f(n).then((()=>{}))}const x=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function N(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!x.includes(n))return;const o=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let o=t.store;for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),s&&t.done]))[0]};return w.set(t,o),o}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>N(t,n)||e.get(t,n,r),has:(t,n)=>!!N(t,n)||e.has(t,n)}))(h)},4349:(e,t,n)=>{var r=n(5099);e.exports=function(e){return r(this.__data__,e)>-1}},4370:(e,t,n)=>{const r=n(2168);function s(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(e,t,n){let r=e+t;return"undefined"!==typeof n&&(r+=" "+n),r}t.render=function(e,t,n){const i=r.getOptions(t),a=e.modules.size,l=e.modules.data,c=a+2*i.margin,u=i.color.light.a?"<path "+s(i.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+s(i.color.dark,"stroke")+' d="'+function(e,t,n){let r="",s=0,i=!1,a=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||i||(i=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(r+=i?o("M",c+n,.5+u+n):o("m",s,0),s=0,i=!1),c+1<t&&e[l+1]||(r+=o("h",a),a=0)):s++}return r}(l,a,i.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"===typeof n&&n(null,m),m}},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(9526);function s(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4489:(e,t,n)=>{var r=n(5535),s=n(1404);e.exports=function(e,t,n,o){var i=n.length,a=i,l=!o;if(null==e)return!a;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var u=(c=n[i])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var m=new r;if(o)var p=o(d,h,u,e,t,m);if(!(void 0===p?s(h,d,3,o,m):p))return!1}}return!0}},4549:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1===(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1===(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},4553:(e,t,n)=>{const r=n(6580),s=n(5956),o=n(8415),i=n(794),a=n(6432),l=r.getBCHDigit(7973);function c(e,t){return i.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const r=c(e.mode,t);n+=r+e.getBitsLength()})),n}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!a.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=i.BYTE);const o=8*(r.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,t));if(n===i.MIXED)return o;const l=o-c(n,e);switch(n){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let r;const s=o.from(n,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,s);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,n,r){for(let s=1;s<=40;s++)if(n<=t.getCapacity(s,r,e))return s}(r.mode,r.getLength(),s)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},4567:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},4578:(e,t,n)=>{var r=n(3012),s=n(9248),o=Object.prototype,i=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return s(e)&&i.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},4591:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},4624:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const o={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},i=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,o=new Array(s>2?s-2:0),i=2;i<s;i++)o[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class c{constructor(e){this.name=e,this._logLevel=i,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},4635:(e,t,n)=>{var r=n(4759).Symbol;e.exports=r},4672:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4710:(e,t,n)=>{var r=n(5661);e.exports=function(){this.__data__=new r,this.size=0}},4753:(e,t,n)=>{var r=n(52);e.exports=function(e){return function(t){return r(t,e)}}},4759:(e,t,n)=>{var r=n(6658),s="object"==typeof self&&self&&self.Object===Object&&self,o=r||s||Function("return this")();e.exports=o},4761:(e,t,n)=>{var r=n(7518),s=n(2279);e.exports=function(e,t,n){var o=t(e);return s(e)?o:r(o,n(e))}},4762:(e,t,n)=>{"use strict";n.d(t,{O:()=>u,c:()=>c});var r=n(9950),s=n(700),o=n(2575),i=n(5734),a=n(5344),l=n(4414);const c=(0,r.createContext)(i.E),u=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[u,d]=(0,r.useState)(!0),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=(0,s.hg)(o.j2,(async e=>{try{if(e){console.log("Auth state changed: User is signed in");const t=await(0,a.Ex)(e);if(t){i(t),t.businessProfile?m(t.businessProfile):m(null);const e=await(0,a.iP)(t.uid);f(e)}else console.error("Failed to get extended user data"),i(null),m(null),f([])}else console.log("Auth state changed: User is signed out"),i(null),m(null),f([])}catch(t){console.error("Error in auth state change handler:",t),i(null),m(null),f([])}finally{d(!1)}}));return()=>e()}),[]);const g={user:n,isLoading:u,businessProfile:h,userBusinesses:p,login:async(e,t)=>{try{return await(0,a._h)(e,t)}catch(n){throw n}},register:async(e,t,n,r,s)=>{try{return await(0,a.DY)(e,t,n,r,s)}catch(o){throw o}},logout:async()=>{try{await(0,a.y4)()}catch(e){throw e}},resetPassword:async e=>{try{await(0,a.cw)(e)}catch(t){throw t}},googleSignIn:async()=>{try{return await(0,a.Uv)("google")}catch(e){throw e}},facebookSignIn:async()=>{try{return await(0,a.Uv)("facebook")}catch(e){throw e}},microsoftSignIn:async()=>{try{return await(0,a.Uv)("microsoft")}catch(e){throw e}},linkedInSignIn:async()=>{try{return await(0,a.Uv)("linkedin")}catch(e){throw e}},switchBusiness:async e=>{try{if(!n)throw new Error("User not authenticated");if(await(0,a.lR)(n.uid,e),o.j2.currentUser){const e=await(0,a.Ex)(o.j2.currentUser);e&&(i(e),e.businessProfile&&m(e.businessProfile))}}catch(t){throw t}},fetchUserBusinesses:async()=>{try{if(!n)throw new Error("User not authenticated");const e=await(0,a.iP)(n.uid);f(e)}catch(e){throw e}},checkForInvitations:async()=>{try{return!(!n||!n.email)&&await(0,a.ef)(n.email)}catch(e){return console.error("Error checking for invitations:",e),!1}},handleUserData:a.Ex};return(0,l.jsx)(c.Provider,{value:g,children:t})}},4801:(e,t,n)=>{var r=n(220)(n(4759),"WeakMap");e.exports=r},4901:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,s="undefined"!==typeof Element;function o(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){var a,l,c,u=t(e),d=t(i);if(u&&d){if((l=e.length)!=i.length)return!1;for(a=l;0!==a--;)if(!o(e[a],i[a]))return!1;return!0}if(u!=d)return!1;var h=e instanceof Date,m=i instanceof Date;if(h!=m)return!1;if(h&&m)return e.getTime()==i.getTime();var p=e instanceof RegExp,f=i instanceof RegExp;if(p!=f)return!1;if(p&&f)return e.toString()==i.toString();var g=n(e);if((l=g.length)!==n(i).length)return!1;for(a=l;0!==a--;)if(!r.call(i,g[a]))return!1;if(s&&e instanceof Element&&i instanceof Element)return e===i;for(a=l;0!==a--;)if(("_owner"!==(c=g[a])||!e.$$typeof)&&!o(e[c],i[c]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return o(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},4927:(e,t,n)=>{const r=n(794),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=r.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*s.indexOf(this.data[t]);n+=s.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(s.indexOf(this.data[t]),6)},e.exports=o},4978:e=>{e.exports=function(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(s);++r<s;)o[r]=e[r+t];return o}},5088:e=>{e.exports=function(){this.__data__=[],this.size=0}},5097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2045),s=n(7827),o=n(1042),i=n(1494),a=n(4272),l=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")},e}();var c,u,d="@firebase/app",h="0.9.13",m=new o.Logger("@firebase/app"),p="[DEFAULT]",f=((c={})[d]="fire-core",c["@firebase/app-compat"]="fire-core-compat",c["@firebase/analytics"]="fire-analytics",c["@firebase/analytics-compat"]="fire-analytics-compat",c["@firebase/app-check"]="fire-app-check",c["@firebase/app-check-compat"]="fire-app-check-compat",c["@firebase/auth"]="fire-auth",c["@firebase/auth-compat"]="fire-auth-compat",c["@firebase/database"]="fire-rtdb",c["@firebase/database-compat"]="fire-rtdb-compat",c["@firebase/functions"]="fire-fn",c["@firebase/functions-compat"]="fire-fn-compat",c["@firebase/installations"]="fire-iid",c["@firebase/installations-compat"]="fire-iid-compat",c["@firebase/messaging"]="fire-fcm",c["@firebase/messaging-compat"]="fire-fcm-compat",c["@firebase/performance"]="fire-perf",c["@firebase/performance-compat"]="fire-perf-compat",c["@firebase/remote-config"]="fire-rc",c["@firebase/remote-config-compat"]="fire-rc-compat",c["@firebase/storage"]="fire-gcs",c["@firebase/storage-compat"]="fire-gcs-compat",c["@firebase/firestore"]="fire-fst",c["@firebase/firestore-compat"]="fire-fst-compat",c["fire-js"]="fire-js",c.firebase="fire-js-all",c),g=new Map,y=new Map;function v(e,t){try{e.container.addComponent(t)}catch(n){m.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function x(e){var t,n,r=e.name;if(y.has(r))return m.debug("There were multiple attempts to register component ".concat(r,".")),!1;y.set(r,e);try{for(var o=s.__values(g.values()),i=o.next();!i.done;i=o.next()){v(i.value,e)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}function b(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var w=((u={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",u["bad-app-name"]="Illegal App name: '{$appName}",u["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",u["app-deleted"]="Firebase App named '{$appName}' already deleted",u["no-options"]="Need to provide options, when not being deployed to hosting via source.",u["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",u["invalid-log-argument"]="First argument to `onLog` must be null or a function.",u["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",u["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",u["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",u["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",u),N=new i.ErrorFactory("app","Firebase",w),j=function(){function e(e,t,n){var o=this;this._isDeleted=!1,this._options=s.__assign({},e),this._config=s.__assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",(function(){return o}),"PUBLIC"))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),e.prototype.checkDestroyed=function(){if(this.isDeleted)throw N.create("app-deleted",{appName:this._name})},e}();function k(e,t){var n,o;void 0===t&&(t={});var a=e;"object"!==typeof t&&(t={name:t});var l=s.__assign({name:p,automaticDataCollectionEnabled:!1},t),c=l.name;if("string"!==typeof c||!c)throw N.create("bad-app-name",{appName:String(c)});if(a||(a=i.getDefaultAppConfig()),!a)throw N.create("no-options");var u=g.get(c);if(u){if(i.deepEqual(a,u.options)&&i.deepEqual(l,u.config))return u;throw N.create("duplicate-app",{appName:c})}var d=new r.ComponentContainer(c);try{for(var h=s.__values(y.values()),m=h.next();!m.done;m=h.next()){var f=m.value;d.addComponent(f)}}catch(x){n={error:x}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var v=new j(a,l,d);return g.set(c,v),v}function C(e,t,n){var s,o=null!==(s=f[e])&&void 0!==s?s:e;n&&(o+="-".concat(n));var i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){var l=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&l.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&a&&l.push("and"),a&&l.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void m.warn(l.join(" "))}x(new r.Component("".concat(o,"-version"),(function(){return{library:o,version:t}}),"VERSION"))}var S="firebase-heartbeat-store",A=null;function E(){return A||(A=a.openDB("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(S)}}).catch((function(e){throw N.create("idb-open",{originalErrorMessage:e.message})}))),A}function _(e){return s.__awaiter(this,void 0,void 0,(function(){var t,n;return s.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,E()];case 1:return[4,r.sent().transaction(S).objectStore(S).get(T(e))];case 2:return[2,r.sent()];case 3:return(t=r.sent())instanceof i.FirebaseError?m.warn(t.message):(n=N.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message}),m.warn(n.message)),[3,4];case 4:return[2]}}))}))}function I(e,t){return s.__awaiter(this,void 0,void 0,(function(){var n,r,o,a;return s.__generator(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,E()];case 1:return n=s.sent(),r=n.transaction(S,"readwrite"),[4,r.objectStore(S).put(t,T(e))];case 2:return s.sent(),[4,r.done];case 3:return s.sent(),[3,5];case 4:return(o=s.sent())instanceof i.FirebaseError?m.warn(o.message):(a=N.create("idb-set",{originalErrorMessage:null===o||void 0===o?void 0:o.message}),m.warn(a.message)),[3,5];case 5:return[2]}}))}))}function T(e){return"".concat(e.name,"!").concat(e.options.appId)}var P=function(){function e(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new M(n),this._heartbeatsCachePromise=this._storage.read().then((function(e){return t._heartbeatsCache=e,e}))}return e.prototype.triggerHeartbeat=function(){return s.__awaiter(this,void 0,void 0,(function(){var e,t,n,r;return s.__generator(this,(function(s){switch(s.label){case 0:return e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=R(),null!==this._heartbeatsCache?[3,2]:(r=this,[4,this._heartbeatsCachePromise]);case 1:r._heartbeatsCache=s.sent(),s.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((function(e){return e.date===n}))?[2]:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),[2,this._storage.overwrite(this._heartbeatsCache)])}}))}))},e.prototype.getHeartbeatsHeader=function(){return s.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o;return s.__generator(this,(function(a){switch(a.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:a.sent(),a.label=2;case 2:return null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?[2,""]:(e=R(),t=function(e,t){var n,r;void 0===t&&(t=1024);var o=[],i=e.slice(),a=function(e){var n=o.find((function(t){return t.agent===e.agent}));if(n){if(n.dates.push(e.date),L(o)>t)return n.dates.pop(),"break"}else if(o.push({agent:e.agent,dates:[e.date]}),L(o)>t)return o.pop(),"break";i=i.slice(1)};try{for(var l=s.__values(e),c=l.next();!c.done;c=l.next()){if("break"===a(c.value))break}}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return{heartbeatsToSend:o,unsentEntries:i}}(this._heartbeatsCache.heartbeats),n=t.heartbeatsToSend,r=t.unsentEntries,o=i.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n})),this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return a.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),a.label=5;case 5:return[2,o]}}))}))},e}();function R(){return(new Date).toISOString().substring(0,10)}var D,M=function(){function e(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e.prototype.runIndexedDBEnvironmentCheck=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){return i.isIndexedDBAvailable()?[2,i.validateIndexedDBOpenable().then((function(){return!0})).catch((function(){return!1}))]:[2,!1]}))}))},e.prototype.read=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,_(this.app)];case 3:return[2,e.sent()||{heartbeats:[]}]}}))}))},e.prototype.overwrite=function(e){var t;return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,I(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})]}}))}))},e.prototype.add=function(e){var t;return s.__awaiter(this,void 0,void 0,(function(){var n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,I(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:s.__spreadArray(s.__spreadArray([],s.__read(n.heartbeats),!1),s.__read(e.heartbeats),!1)})]}}))}))},e}();function L(e){return i.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}D="node",x(new r.Component("platform-logger",(function(e){return new l(e)}),"PRIVATE")),x(new r.Component("heartbeat",(function(e){return new P(e)}),"PRIVATE")),C(d,h,D),C(d,h,"cjs5"),C("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return i.FirebaseError}}),t.SDK_VERSION="9.23.0",t._DEFAULT_ENTRY_NAME=p,t._addComponent=v,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=g,t._clearComponents=function(){y.clear()},t._components=y,t._getProvider=b,t._registerComponent=x,t._removeServiceInstance=function(e,t,n){void 0===n&&(n=p),b(e,t).clearInstance(n)},t.deleteApp=function(e){return s.__awaiter(this,void 0,void 0,(function(){var t;return s.__generator(this,(function(n){switch(n.label){case 0:return t=e.name,g.has(t)?(g.delete(t),[4,Promise.all(e.container.getProviders().map((function(e){return e.delete()})))]):[3,2];case 1:n.sent(),e.isDeleted=!0,n.label=2;case 2:return[2]}}))}))},t.getApp=function(e){void 0===e&&(e=p);var t=g.get(e);if(!t&&e===p&&i.getDefaultAppConfig())return k();if(!t)throw N.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(g.values())},t.initializeApp=k,t.onLog=function(e,t){if(null!==e&&"function"!==typeof e)throw N.create("invalid-log-argument");o.setUserLogHandler(e,t)},t.registerVersion=C,t.setLogLevel=function(e){o.setLogLevel(e)}},5099:(e,t,n)=>{var r=n(4206);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},5112:(e,t,n)=>{var r=n(2621)(Object.keys,Object);e.exports=r},5127:(e,t,n)=>{var r=n(9769),s=n(4104),o=n(9002),i=n(2279),a=n(8857);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?s(e[0],e[1]):r(e):a(e)}},5211:e=>{e.exports=function(e){return function(t,n,r){for(var s=-1,o=Object(t),i=r(t),a=i.length;a--;){var l=i[e?a:++s];if(!1===n(o[l],l,o))break}return t}}},5321:(e,t,n)=>{var r=n(4591),s=n(964);e.exports=function(e,t){return null!=e&&s(e,t,r)}},5336:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5344:(e,t,n)=>{"use strict";n.d(t,{ef:()=>p,iP:()=>m,Ex:()=>f,_h:()=>a,y4:()=>c,DY:()=>l,cw:()=>u,Uv:()=>d,lR:()=>h});var r=n(9379),s=n(700),o=n(3849),i=n(2575);n(8869);const a=async(e,t)=>{try{const n=await(0,s.x9)(i.j2,e,t),r=await f(n.user);if(!r)throw new Error("Failed to load user data");return r}catch(n){throw console.error("Login error:",n),n}},l=async(e,t,n,a,l)=>{try{const c=(await(0,s.eJ)(i.j2,e,t)).user;console.log("[authServices] User created in Firebase Auth:",c.uid);const u={uid:c.uid,email:c.email,displayName:n,role:a,createdAt:new Date};if(l&&(u.phoneNumber=l),"business"===a){console.log("[authServices] Creating business document for business user");const e=(0,o.H9)((0,o.rJ)(i.db,"businesses")),t=e.id,r={businessId:t,businessName:n,industry:"",createdAt:new Date,ownerId:c.uid,active:!0,businessNameLower:n.toLowerCase()};await(0,o.BN)(e,r),console.log("[authServices] Created business document:",t),u.businessId=t,u.businesses=[t],u.currentBusinessId=t}else if("customer"===a&&l){console.log("[authServices] Creating customer record with phone:",l);const t=await(async e=>{try{if(!e)return null;const s=e.replace(/\s+|-|\(|\)|\+/g,""),a=(0,o.rJ)(i.db,"users"),l=(0,o.P)(a,(0,o._M)("phoneNumber","==",s),(0,o._M)("role","==","customer")),c=await(0,o.GG)(l);if(!c.empty){var t,n;const e=c.docs[0].data(),r=c.docs[0].id;return{id:r,userId:r,firstName:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"",lastName:(null===(n=e.displayName)||void 0===n?void 0:n.split(" ").slice(1).join(" "))||"",email:e.email||"",phone:s,joinDate:e.createdAt,source:"platform",platformUser:!0}}const u=(0,o.rJ)(i.db,"customers"),d=(0,o.P)(u,(0,o._M)("phone","==",s)),h=await(0,o.GG)(d);if(!h.empty){const e=h.docs[0].data();return(0,r.A)((0,r.A)({},e),{},{id:h.docs[0].id,platformUser:!!e.userId,source:"business"})}const m=(0,o.P)(u,(0,o._M)("phone","==",e)),p=await(0,o.GG)(m);if(!p.empty){const e=p.docs[0].data();return(0,r.A)((0,r.A)({},e),{},{id:p.docs[0].id,platformUser:!!e.userId,source:"business"})}return null}catch(s){throw console.error("Error finding customer by phone:",s),s}})(l);if(t)console.log("[authServices] Found existing customer with phone:",t.id),t.userId||(await(0,o.mZ)((0,o.H9)(i.db,"customers",t.id),{userId:c.uid,updatedAt:(0,o.O5)()}),console.log("[authServices] Linked user to existing customer"));else{console.log("[authServices] No existing customer found, creating new customer record");const t=n.split(" "),r=t[0],s={firstName:r,lastName:t.length>1?t.slice(1).join(" "):"",email:e,phone:l,userId:c.uid,joinDate:(0,o.O5)(),createdAt:(0,o.O5)()},a=(0,o.rJ)(i.db,"customers"),u=(0,o.H9)(a);await(0,o.BN)(u,s),console.log("[authServices] Created new customer record:",u.id)}}await(0,o.BN)((0,o.H9)(i.db,"users",c.uid),u),console.log("[authServices] Created user document in Firestore");const d=await f(c);if(!d)throw new Error("Failed to load user data after registration");return d}catch(c){throw console.error("Registration error:",c),c}},c=async()=>{try{await(0,s.CI)(i.j2)}catch(e){throw console.error("Sign out error:",e),e}},u=async e=>{try{await(0,s.J1)(i.j2,e)}catch(t){throw console.error("Reset password error:",t),t}},d=async e=>{try{let t;switch(e){case"google":t=new s.HF;break;case"facebook":t=new s.sk;break;case"microsoft":t=new s.LD("microsoft.com");break;case"linkedin":throw new Error("LinkedIn sign in not implemented");default:throw new Error("Unsupported provider: ".concat(e))}const n=await(0,s.df)(i.j2,t);(await(0,o.x7)((0,o.H9)(i.db,"users",n.user.uid))).exists()||await(0,o.BN)((0,o.H9)(i.db,"users",n.user.uid),{uid:n.user.uid,email:n.user.email,displayName:n.user.displayName,photoURL:n.user.photoURL,role:"customer",createdAt:new Date});const r=await f(n.user);if(!r)throw new Error("Failed to load user data after ".concat(e," sign-in"));return r}catch(t){throw console.error("".concat(e," sign in error:"),t),t}},h=async(e,t)=>{try{const n=(0,o.H9)(i.db,"users",e);await(0,o.mZ)(n,{currentBusinessId:t})}catch(n){throw console.error("Switch business error:",n),n}},m=async e=>{try{const t=await(0,o.x7)((0,o.H9)(i.db,"users",e));if(!t.exists())return[];const n=t.data().businesses||[];if(0===n.length)return[];const r=[];for(const e of n){const t=await(0,o.x7)((0,o.H9)(i.db,"businesses",e));if(t.exists()){const n=t.data();r.push({businessId:e,businessName:n.businessName||"",industry:n.industry||"",address:n.address||"",phone:n.phone||"",website:n.website||"",logo:n.logo||"",colors:n.colors||{primary:"#3B82F6",secondary:"#10B981"},subscriptionTier:n.subscriptionTier||"free",subscriptionStatus:n.subscriptionStatus||"active"})}}return r}catch(t){return console.error("Fetch user businesses error:",t),[]}},p=async e=>{try{const t=(0,o.P)((0,o.rJ)(i.db,"invitations"),(0,o._M)("email","==",e),(0,o._M)("status","==","pending"));return!(await(0,o.GG)(t)).empty}catch(t){return console.error("Check invitations error:",t),!1}},f=async e=>{if(!e)return console.error("[handleUserData] No Firebase user provided"),null;try{console.log("[handleUserData] Processing user data for:",e.uid),console.log("[handleUserData] Firebase user object:",{uid:e.uid,email:e.email,displayName:e.displayName,emailVerified:e.emailVerified});const t=(0,o.H9)(i.db,"users",e.uid);console.log("[handleUserData] Getting user document from Firestore...");const n=await(0,o.x7)(t);console.log("[handleUserData] User document exists:",n.exists()),await(async e=>{try{console.log("Debugging user data for:",e);const t=await(0,o.x7)((0,o.H9)(i.db,"users",e));if(console.log("User document exists:",t.exists()),t.exists()){console.log("User data:",t.data());const e=t.data().businessId||t.data().currentBusinessId;if(console.log("Business ID from user document:",e),e){const t=await(0,o.x7)((0,o.H9)(i.db,"businesses",e));console.log("Business document exists:",t.exists()),t.exists()&&console.log("Business data:",t.data())}}}catch(t){console.error("Error debugging user data:",t)}})(e.uid),console.log("[handleUserData] Creating extended user object...");const s=(0,r.A)((0,r.A)({},e),{},{role:"customer",businesses:[],businessId:void 0,currentBusinessId:void 0,businessProfile:void 0});if(console.log("[handleUserData] Base extended user created successfully"),n.exists()){console.log("[handleUserData] User document exists in Firestore");const r=n.data();if(s.role=r.role||"customer",s.businessId=r.businessId||void 0,s.businesses=r.businesses||[],s.currentBusinessId=r.currentBusinessId||r.businessId||void 0,r.phoneNumber&&(s.phoneNumber=r.phoneNumber),"business"===s.role)if(!s.businessId&&s.businesses&&s.businesses.length>0)s.businessId=s.businesses[0],s.currentBusinessId=s.businesses[0],await(0,o.mZ)(t,{businessId:s.businessId,currentBusinessId:s.currentBusinessId}),console.log("[handleUserData] Updated user with businessId:",s.businessId);else if(!s.businessId||s.businesses&&0!==s.businesses.length){if((!s.businessId||""===s.businessId)&&(!s.businesses||0===s.businesses.length)){const n=(0,o.H9)((0,o.rJ)(i.db,"businesses")),r=n.id;await(0,o.BN)(n,{businessId:r,businessName:e.displayName||"My Business",industry:"",createdAt:new Date,ownerId:e.uid,active:!0,businessNameLower:(e.displayName||"My Business").toLowerCase()}),s.businessId=r,s.businesses=[r],s.currentBusinessId=r,await(0,o.mZ)(t,{businessId:r,businesses:[r],currentBusinessId:r}),console.log("[handleUserData] Created new business for user:",r)}}else s.businesses=[s.businessId],await(0,o.mZ)(t,{businesses:s.businesses}),console.log("[handleUserData] Updated user with businesses array:",s.businesses)}else{console.log("[handleUserData] User document does not exist, creating one...");const n="customer",r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:n,createdAt:new Date};await(0,o.BN)(t,r),console.log("[handleUserData] Created user document:",r),s.role=n}if(s.businessId){const t=(0,o.H9)(i.db,"businesses",s.businessId),n=await(0,o.x7)(t);if(n.exists()){const e=n.data();s.businessProfile={businessId:s.businessId,businessName:e.businessName||"",industry:e.industry||"",address:e.address||"",phone:e.phone||"",website:e.website||"",logo:e.logo||"",colors:e.colors||{primary:"#3B82F6",secondary:"#10B981"},subscriptionTier:e.subscriptionTier||"free",subscriptionStatus:e.subscriptionStatus||"active"},console.log("[handleUserData] Loaded business profile:",s.businessProfile)}else console.error("[handleUserData] Business document does not exist for ID:",s.businessId),"business"===s.role&&(await(0,o.BN)(t,{businessId:s.businessId,businessName:e.displayName||"My Business",industry:"",createdAt:new Date,ownerId:e.uid,active:!0,businessNameLower:(e.displayName||"My Business").toLowerCase()}),console.log("[handleUserData] Created missing business document:",s.businessId),s.businessProfile={businessId:s.businessId,businessName:e.displayName||"My Business",industry:"",address:"",phone:"",website:"",logo:"",colors:{primary:"#3B82F6",secondary:"#10B981"},subscriptionTier:"free",subscriptionStatus:"active"})}return console.log("[handleUserData] Successfully processed user data:",s.uid),console.log("[handleUserData] Final extended user object:",{uid:s.uid,email:s.email,role:s.role,businessId:s.businessId,currentBusinessId:s.currentBusinessId,hasBusinessProfile:!!s.businessProfile,phoneNumber:s.phoneNumber}),s.uid?(console.log("[handleUserData] Returning valid extended user"),s):(console.error("[handleUserData] CRITICAL: Extended user missing UID!"),null)}catch(t){return console.error("[handleUserData] Error processing user data:",t),console.error("[handleUserData] Error stack:",t instanceof Error?t.stack:"No stack trace"),null}}},5531:(e,t,n)=>{var r=n(53),s=n(1465),o=n(202),i=n(7887),a=n(4801),l=n(2022),c=n(9131),u="[object Map]",d="[object Promise]",h="[object Set]",m="[object WeakMap]",p="[object DataView]",f=c(r),g=c(s),y=c(o),v=c(i),x=c(a),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||s&&b(new s)!=u||o&&b(o.resolve())!=d||i&&b(new i)!=h||a&&b(new a)!=m)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return p;case g:return u;case y:return d;case v:return h;case x:return m}return t}),e.exports=b},5535:(e,t,n)=>{var r=n(5661),s=n(4710),o=n(8384),i=n(7379),a=n(799),l=n(2791);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=l,e.exports=c},5639:e=>{e.exports=function(e){return function(t){return e(t)}}},5661:(e,t,n)=>{var r=n(5088),s=n(150),o=n(7889),i=n(4349),a=n(3077);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=i,l.prototype.set=a,e.exports=l},5724:(e,t,n)=>{var r=n(7405),s=n(7462),o=n(7840);e.exports=function(e){return o(e)?r(e):s(e)}},5732:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case s:case i:case o:case u:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case c:case m:case h:case a:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===i||e===o||e===u||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===l||e.$$typeof===a||e.$$typeof===c||e.$$typeof===f||void 0!==e.getModuleId)}},5734:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});const r={user:null,isLoading:!0,businessProfile:null,userBusinesses:[],login:async(e,t)=>({}),register:async(e,t,n,r,s)=>({}),logout:async()=>{},resetPassword:async()=>{},googleSignIn:async()=>({}),facebookSignIn:async()=>({}),microsoftSignIn:async()=>({}),linkedInSignIn:async()=>({}),switchBusiness:async()=>{},fetchUserBusinesses:async()=>{},checkForInvitations:async()=>!1,handleUserData:async()=>null}},5776:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5887:(e,t,n)=>{"use strict";n.d(t,{oR:()=>H});var r=n(7528),s=n(9379),o=n(9950);let i={data:""},a=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||i,l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,c=/\/\*[^]*?\*\/|  +/g,u=/\n+/g,d=(e,t)=>{let n="",r="",s="";for(let o in e){let i=e[o];"@"==o[0]?"i"==o[1]?n=o+" "+i+";":r+="f"==o[1]?d(i,o):o+"{"+d(i,"k"==o[1]?"":t)+"}":"object"==typeof i?r+=d(i,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=i&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=d.p?d.p(o,i):o+":"+i+";")}return n+(t&&s?t+"{"+s+"}":s)+r},h={},m=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+m(e[n]);return t}return e},p=(e,t,n,r,s)=>{let o=m(e),i=h[o]||(h[o]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(o));if(!h[i]){let t=o!==e?e:(e=>{let t,n,r=[{}];for(;t=l.exec(e.replace(c,""));)t[4]?r.shift():t[3]?(n=t[3].replace(u," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(u," ").trim();return r[0]})(e);h[i]=d(s?{["@keyframes "+i]:t}:t,n?"":"."+i)}let a=n&&h.g?h.g:null;return n&&(h.g=h[i]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(h[i],t,r,a),i};function f(e){let t=this||{},n=e.call?e(t.p):e;return p(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,s)=>{let o=t[s];if(o&&o.call){let e=o(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":d(e,""):!1===e?"":e}return e+r+(null==o?"":o)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,a(t.target),t.g,t.o,t.k)}f.bind({g:1});let g,y,v,x=f.bind({k:1});function b(e,t){let n=this||{};return function(){let r=arguments;function s(o,i){let a=Object.assign({},o),l=a.className||s.className;n.p=Object.assign({theme:y&&y()},a),n.o=/ *go\d+/.test(l),a.className=f.apply(n,r)+(l?" "+l:""),t&&(a.ref=i);let c=e;return e[0]&&(c=a.as||e,delete a.as),v&&c[0]&&v(a),g(c,a)}return t?t(s):s}}var w,N,j,k,C,S,A,E,_,I,T,P,R,D,M,L,O=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,F=(()=>{let e=0;return()=>(++e).toString()})(),B=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U=(e,t)=>{switch(t.type){case 0:return(0,s.A)((0,s.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?(0,s.A)((0,s.A)({},e),t.toast):e))});case 2:let{toast:n}=t;return U(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.map((e=>e.id===r||void 0===r?(0,s.A)((0,s.A)({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?(0,s.A)((0,s.A)({},e),{},{toasts:[]}):(0,s.A)((0,s.A)({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return(0,s.A)((0,s.A)({},e),{},{pausedAt:t.time});case 6:let o=t.time-(e.pausedAt||0);return(0,s.A)((0,s.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>(0,s.A)((0,s.A)({},e),{},{pauseDuration:e.pauseDuration+o})))})}},z=[],V={toasts:[],pausedAt:void 0},q=e=>{V=U(V,e),z.forEach((e=>{e(V)}))},W=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,s.A)((0,s.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||F()})}(t,e,n);return q({type:2,toast:r}),r.id},H=(e,t)=>W("blank")(e,t);H.error=W("error"),H.success=W("success"),H.loading=W("loading"),H.custom=W("custom"),H.dismiss=e=>{q({type:3,toastId:e})},H.remove=e=>q({type:4,toastId:e}),H.promise=(e,t,n)=>{let r=H.loading(t.loading,(0,s.A)((0,s.A)({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let o=t.success?O(t.success,e):void 0;return o?H.success(o,(0,s.A)((0,s.A)({id:r},n),null==n?void 0:n.success)):H.dismiss(r),e})).catch((e=>{let o=t.error?O(t.error,e):void 0;o?H.error(o,(0,s.A)((0,s.A)({id:r},n),null==n?void 0:n.error)):H.dismiss(r)})),e};new Map;var G=x(w||(w=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),K=x(N||(N=(0,r.A)(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Y=x(j||(j=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Q=b("div")(k||(k=(0,r.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),G,K,(e=>e.secondary||"#fff"),Y),$=x(C||(C=(0,r.A)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),J=b("div")(S||(S=(0,r.A)(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),$),X=x(A||(A=(0,r.A)(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Z=x(E||(E=(0,r.A)(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ee=b("div")(_||(_=(0,r.A)(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),X,Z,(e=>e.secondary||"#fff")),te=b("div")(I||(I=(0,r.A)(["\n  position: absolute;\n"]))),ne=b("div")(T||(T=(0,r.A)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),re=x(P||(P=(0,r.A)(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),se=b("div")(R||(R=(0,r.A)(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),re),oe=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:i}=t;return void 0!==n?"string"==typeof n?o.createElement(se,null,n):n:"blank"===r?null:o.createElement(ne,null,o.createElement(J,(0,s.A)({},i)),"loading"!==r&&o.createElement(te,null,"error"===r?o.createElement(Q,(0,s.A)({},i)):o.createElement(ee,(0,s.A)({},i))))},ie=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),ae=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),le=b("div")(D||(D=(0,r.A)(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),ce=b("div")(M||(M=(0,r.A)(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"])));o.memo((e=>{let{toast:t,position:n,style:r,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=B()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ie(n),ae(n)];return{animation:t?"".concat(x(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(x(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},l=o.createElement(oe,{toast:t}),c=o.createElement(ce,(0,s.A)({},t.ariaProps),O(t.message,t));return o.createElement(le,{className:t.className,style:(0,s.A)((0,s.A)((0,s.A)({},a),r),t.style)},"function"==typeof i?i({icon:l,message:c}):o.createElement(o.Fragment,null,l,c))}));!function(e,t,n,r){d.p=t,g=e,y=n,v=r}(o.createElement);f(L||(L=(0,r.A)(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"])))},5916:(e,t,n)=>{var r=n(2279),s=n(184),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}},5956:(e,t,n)=>{const r=n(8415),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return s[4*(e-1)+0];case r.M:return s[4*(e-1)+1];case r.Q:return s[4*(e-1)+2];case r.H:return s[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[4*(e-1)+0];case r.M:return o[4*(e-1)+1];case r.Q:return o[4*(e-1)+2];case r.H:return o[4*(e-1)+3];default:return}}},5961:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),s=n(4762);const o=()=>{const e=(0,r.useContext)(s.c);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}},6010:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6014:(e,t,n)=>{var r=n(4008),s=n(3414);e.exports=function(e){return s(r(e).toLowerCase())}},6094:(e,t,n)=>{var r=n(2320),s=n(964);e.exports=function(e,t){return null!=e&&s(e,t,r)}},6106:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n=3,r=3,s=40,o=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return r%3===0;case t.Patterns.PATTERN011:return(n+r)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case t.Patterns.PATTERN101:return n*r%2+n*r%3===0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let r=0,s=0,o=0,i=null,a=null;for(let l=0;l<t;l++){s=o=0,i=a=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===i?s++:(s>=5&&(r+=n+(s-5)),i=t,s=1),t=e.get(c,l),t===a?o++:(o>=5&&(r+=n+(o-5)),a=t,o=1)}s>=5&&(r+=n+(s-5)),o>=5&&(r+=n+(o-5))}return r},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let r=0;r<t-1;r++)for(let s=0;s<t-1;s++){const t=e.get(r,s)+e.get(r,s+1)+e.get(r+1,s)+e.get(r+1,s+1);4!==t&&0!==t||n++}return n*r},t.getPenaltyN3=function(e){const t=e.size;let n=0,r=0,o=0;for(let s=0;s<t;s++){r=o=0;for(let i=0;i<t;i++)r=r<<1&2047|e.get(s,i),i>=10&&(1488===r||93===r)&&n++,o=o<<1&2047|e.get(i,s),i>=10&&(1488===o||93===o)&&n++}return n*s},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let s=0;s<n;s++)t.isReserved(s,r)||t.xor(s,r,i(e,s,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let s=0,o=1/0;for(let i=0;i<r;i++){n(i),t.applyMask(i,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),r<o&&(o=r,s=i)}return s}},6195:(e,t,n)=>{var r=n(3660),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:s.call(t,h)))return!1}var m=a.get(e),p=a.get(t);if(m&&p)return m==t&&p==e;var f=!0;a.set(e,t),a.set(t,e);for(var g=l;++d<u;){var y=e[h=c[d]],v=t[h];if(o)var x=l?o(v,y,h,t,e,a):o(y,v,h,e,t,a);if(!(void 0===x?y===v||i(y,v,n,o,a):x)){f=!1;break}g||(g="constructor"==h)}if(f&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(f=!1)}return a.delete(e),a.delete(t),f}},6212:(e,t,n)=>{var r=n(4978);e.exports=function(e,t,n){var s=e.length;return n=void 0===n?s:n,!t&&n>=s?e:r(e,t,n)}},6262:(e,t,n)=>{"use strict";var r=n(1494),s=n(5097),o=n(7827),i=n(1042),a=n(2045);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},u=l,d=new r.ErrorFactory("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),h=new i.Logger("@firebase/auth");function m(e){if(h.logLevel<=i.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];h.error("Auth (".concat(s.SDK_VERSION,"): ").concat(e),...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw v(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e,...n)}function g(e,t,n){const s=Object.assign(Object.assign({},u()),{[t]:n});return new r.ErrorFactory("auth","Firebase",s).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),g(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return d.create(e,...n)}function x(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw v(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function w(e,t){e||b(t)}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function j(){return"http:"===k()||"https:"===k()}function k(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,w(t>e,"Short delay should be less than long delay!"),this.isMobile=r.isMobileCordova()||r.isReactNative()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(j()||r.isBrowserExtension()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function S(e,t){w(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const E={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_=new C(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function T(e,t,n,s){return P(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let o={},i={};s&&("GET"===t?i=s:o={body:JSON.stringify(s)});const a=r.querystring(Object.assign({key:e.config.apiKey},i)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),A.fetch()(D(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},o))}))}async function P(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},E),t);try{const t=new M(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw L(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw L(e,"user-disabled",o);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw g(e,a,i);p(e,a)}}catch(o){if(o instanceof r.FirebaseError)throw o;p(e,"network-request-failed",{message:String(o)})}}async function R(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await T(e,t,n,r,s);return"mfaPendingCredential"in o&&p(e,"multi-factor-auth-required",{_serverResponse:o}),o}function D(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?S(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}class M{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),_.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=f(e,t,r);return s.customData._tokenResponse=n,s}function O(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=r.getModularInstance(e),s=await n.getIdToken(t),o=U(s);x(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"===typeof o.firebase?o.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:o,token:s,authTime:O(B(o.auth_time)),issuedAtTime:O(B(o.iat)),expirationTime:O(B(o.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}function B(e){return 1e3*Number(e)}function U(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return m("JWT malformed, contained fewer than 3 sections"),null;try{const e=r.base64Decode(n);return e?JSON.parse(e):(m("Failed to decode base64 JWT payload"),null)}catch(o){return m("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}async function z(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof r.FirebaseError&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class V{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class q{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=O(this.lastLoginAt),this.creationTime=O(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function W(e){var t;const n=e.auth,r=await e.getIdToken(),s=await z(e,async function(e,t){return T(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));x(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map((e=>{var{providerId:t}=e,n=o.__rest(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const l=(c=e.providerData,u=a,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const d=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null===l||void 0===l?void 0:l.length),m=!!d&&h,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new q(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(e,p)}async function H(e){const t=r.getModularInstance(e);await W(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x("undefined"!==typeof e.idToken,"internal-error"),x("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=U(e);return x(t,"internal-error"),x("undefined"!==typeof t.exp,"internal-error"),x("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await async function(e,t){const n=await P(e,{},(async()=>{const n=r.querystring({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:o}=e.config,i=D(e,s,"/v1/token","key=".concat(o)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",A.fetch()(i,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,o=new G;return n&&(x("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(x("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(x("number"===typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return b("not implemented")}}function K(e,t){x("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Y{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=o.__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new q(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await z(this,this.stsTokenManager.getToken(this.auth,e));return x(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return F(this,e)}reload(){return H(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Y(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await W(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await z(this,async function(e,t){return T(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,o,i,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(i=t.tenantId)&&void 0!==i?i:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:N,stsTokenManager:j}=t;x(v&&j,e,"internal-error");const k=G.fromJSON(this.name,j);x("string"===typeof v,e,"internal-error"),K(u,e.name),K(d,e.name),x("boolean"===typeof b,e,"internal-error"),x("boolean"===typeof w,e,"internal-error"),K(h,e.name),K(m,e.name),K(p,e.name),K(f,e.name),K(g,e.name),K(y,e.name);const C=new Y({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return N&&Array.isArray(N)&&(C.providerData=N.map((e=>Object.assign({},e)))),f&&(C._redirectEventId=f),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new G;r.updateFromServerResponse(t);const s=new Y({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await W(s),s}}const Q=new Map;function $(e){w(e instanceof Function,"Expected a class definition");let t=Q.get(e);return t?(w(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Q.set(e,t),t)}class J{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J.type="NONE";const X=J;function Z(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ee{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Z(this.userKey,r.apiKey,s),this.fullPersistenceKey=Z("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Y._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ee($(X),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||$(X);const o=Z(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Y._fromJSON(e,t);c!==s&&(i=n),s=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],i&&await s._set(o,i.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(o)}catch(l){}}))),new ee(s,e,n)):new ee(s,e,n)}}function te(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(oe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ae(t))return"Blackberry";if(le(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||se(t))&&!t.includes("edge/"))return"Chrome";if(ie(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/firefox\//i.test(e)}function re(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/crios\//i.test(e)}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/iemobile/i.test(e)}function ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/android/i.test(e)}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/blackberry/i.test(e)}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/webos/i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return ce(e)||ie(e)||le(e)||ae(e)||/windows phone/i.test(e)||oe(e)}function de(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=te(r.getUA());break;case"Worker":t="".concat(te(r.getUA()),"-").concat(e);break;default:t=e}const o=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(s.SDK_VERSION,"/").concat(o)}async function he(e,t){return T(e,"GET","/v2/recaptchaConfig",I(e,t))}function me(e){return void 0!==e&&void 0!==e.getResponse}function pe(e){return void 0!==e&&void 0!==e.enterprise}class fe{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function ge(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ye(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ve{constructor(e){this.type="recaptcha-enterprise",this.auth=Ne(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;pe(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{he(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new fe(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&pe(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ge("https://www.google.com/recaptcha/enterprise.js?render="+s).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new ve(e);let o;try{o=await s.verify(n)}catch(a){o=await s.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:o}):Object.assign(i,{captchaResponse:o}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}class be{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(s){r(s)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class we{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.beforeStateQueue=new be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ee.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==o||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await W(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?r.getModularInstance(e):null;return t&&x(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&x(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence($(e))}))}async initializeRecaptchaConfig(){const e=await he(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new fe(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ve(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$(e)||this._popupRedirectResolver;x(t,this,"argument-error"),this.redirectPersistenceManager=await ee.create(this,[$(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return x(o,this,"internal-error"),o.then((()=>s(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(h.logLevel<=i.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];h.warn("Auth (".concat(s.SDK_VERSION,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ne(e){return r.getModularInstance(e)}class je{constructor(e){this.auth=e,this.observer=null,this.addObserver=r.createSubscribe((e=>this.observer=e))}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ke(e,t){const n=s._getProvider(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),s=n.getOptions();if(r.deepEqual(s,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}function Ce(e,t,n){const r=Ne(e);x(r._canInitEmulator,r,"emulator-config-failed"),x(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Se(t),{host:i,port:a}=function(e){const t=Se(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(i).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Se(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ee{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function _e(e,t){return T(e,"POST","/v1/accounts:resetPassword",I(e,t))}async function Ie(e,t){return T(e,"POST","/v1/accounts:update",t)}async function Te(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}async function Pe(e,t){return T(e,"POST","/v1/accounts:sendOobCode",I(e,t))}async function Re(e,t){return Pe(e,t)}async function De(e,t){return Pe(e,t)}class Me extends Ee{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Me(e,t,"password")}static _fromEmailAndCode(e,t){return new Me(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await xe(e,n,"signInWithPassword");return Te(e,t)}return Te(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await xe(e,n,"signInWithPassword");return Te(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Le(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class Oe extends Ee{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=o.__rest(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Oe(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Le(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Le(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Le(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=r.querystring(t)}return e}}const Fe={USER_NOT_FOUND:"user-not-found"};class Be extends Ee{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Be({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Be({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Fe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Be({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Ue{constructor(e){var t,n,s,o,i,a;const l=r.querystringDecode(r.extractQuerystring(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=l.mode)&&void 0!==s?s:null);x(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=l.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=r.querystringDecode(r.extractQuerystring(e)).link,n=t?r.querystringDecode(r.extractQuerystring(t)).deep_link_id:null,s=r.querystringDecode(r.extractQuerystring(e)).deep_link_id;return(s?r.querystringDecode(r.extractQuerystring(s)).link:null)||s||n||t||e}(e);try{return new Ue(t)}catch(n){return null}}}class ze{constructor(){this.providerId=ze.PROVIDER_ID}static credential(e,t){return Me._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ue.parseLink(t);return x(n,"argument-error"),Me._fromEmailAndCode(e,n.code,n.tenantId)}}ze.PROVIDER_ID="password",ze.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ze.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ve{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qe extends Ve{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class We extends qe{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return x("providerId"in t&&"signInMethod"in t,"argument-error"),Oe._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return x(e.idToken||e.accessToken,"argument-error"),Oe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return We.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return We.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:i,providerId:a}=t;if(!r&&!s&&!n&&!o)return null;if(!a)return null;try{return new We(a)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:o})}catch(l){return null}}}class He extends qe{constructor(){super("facebook.com")}static credential(e){return Oe._fromParams({providerId:He.PROVIDER_ID,signInMethod:He.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return He.credentialFromTaggedObject(e)}static credentialFromError(e){return He.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return He.credential(t.oauthAccessToken)}catch(n){return null}}}He.FACEBOOK_SIGN_IN_METHOD="facebook.com",He.PROVIDER_ID="facebook.com";class Ge extends qe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oe._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ge.credential(n,r)}catch(s){return null}}}Ge.GOOGLE_SIGN_IN_METHOD="google.com",Ge.PROVIDER_ID="google.com";class Ke extends qe{constructor(){super("github.com")}static credential(e){return Oe._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ke.credential(t.oauthAccessToken)}catch(n){return null}}}Ke.GITHUB_SIGN_IN_METHOD="github.com",Ke.PROVIDER_ID="github.com";class Ye extends Ee{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Le(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Le(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Le(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:s}=t;return n&&r&&s&&n===r?new Ye(n,s):null}static _create(e,t){return new Ye(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qe extends Ve{constructor(e){x(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Qe.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Qe.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ye.fromJSON(e);return x(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Ye._create(r,n)}catch(s){return null}}}class $e extends qe{constructor(){super("twitter.com")}static credential(e,t){return Oe._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $e.credential(n,r)}catch(s){return null}}}async function Je(e,t){return R(e,"POST","/v1/accounts:signUp",I(e,t))}$e.TWITTER_SIGN_IN_METHOD="twitter.com",$e.PROVIDER_ID="twitter.com";class Xe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Y._fromIdTokenResponse(e,n,r),o=Ze(n);return new Xe({user:s,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Xe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends r.FirebaseError{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw et._fromErrorAndOperation(e,n,t,r);throw n}))}function nt(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await z(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xe._forOperation(e,"link",r)}async function st(e,t,n){await W(t);const r=!1===e?"provider-already-linked":"no-such-provider";x(nt(t.providerData).has(n)===e,t.auth,r)}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const o=await z(e,tt(r,s,t,e),n);x(o.idToken,r,"internal-error");const i=U(o.idToken);x(i,r,"internal-error");const{sub:a}=i;return x(e.uid===a,r,"user-mismatch"),Xe._forOperation(e,s,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&p(r,"user-mismatch"),o}}async function it(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await tt(e,r,t),o=await Xe._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(o.user),o}async function at(e,t){return it(Ne(e),t)}async function lt(e,t){const n=r.getModularInstance(e);return await st(!1,n,t.providerId),rt(n,t)}async function ct(e,t){return ot(r.getModularInstance(e),t)}class ut{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?dt._fromServerResponse(e,t):"totpInfo"in t?ht._fromServerResponse(e,t):p(e,"internal-error")}}class dt extends ut{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new dt(t)}}class ht extends ut{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ht(t)}}function mt(e,t,n){var r;x((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),x("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(x(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(x(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function pt(e,t){const n=r.getModularInstance(e),s=await _e(n,{oobCode:t}),o=s.requestType;switch(x(o,n,"internal-error"),o){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":x(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":x(s.mfaInfo,n,"internal-error");default:x(s.email,n,"internal-error")}let i=null;return s.mfaInfo&&(i=ut._fromServerResponse(Ne(n),s.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.newEmail:s.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.email:s.newEmail)||null,multiFactorInfo:i},operation:o}}async function ft(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const o=await z(e,Ie(r,s));await e._updateTokensIfNecessary(o,!0)}class gt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class yt extends gt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class vt extends gt{constructor(e,t){super(e,"facebook.com",t)}}class xt extends yt{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class bt extends gt{constructor(e,t){super(e,"google.com",t)}}class wt extends yt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Nt(e,t,n,s){return r.getModularInstance(e).onIdTokenChanged(t,n,s)}function jt(e,t,n){return r.getModularInstance(e).beforeAuthStateChanged(t,n)}class kt{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new kt("enroll",e,t)}static _fromMfaPendingCredential(e){return new kt("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return kt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return kt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ct{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ne(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map((e=>ut._fromServerResponse(n,e)));x(r.mfaPendingCredential,n,"internal-error");const o=kt._fromMfaPendingCredential(r.mfaPendingCredential);return new Ct(o,s,(async e=>{const s=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const i=Object.assign(Object.assign({},r),{idToken:s.idToken,refreshToken:s.refreshToken});switch(t.operationType){case"signIn":const e=await Xe._fromIdTokenResponse(n,t.operationType,i);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return x(t.user,n,"internal-error"),Xe._forOperation(t.user,t.operationType,i);default:p(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class St{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ut._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new St(e)}async getSession(){return kt._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),s=await z(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await z(this.user,function(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:withdraw",I(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const At=new WeakMap;const Et="__sak";class _t{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Et,"1"),this.storage.removeItem(Et),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class It extends _t{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=r.getUA();return re(e)||ce(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ue(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const s=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);r.isIE()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,10):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}It.type="LOCAL";const Tt=It;class Pt extends _t{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pt.type="SESSION";const Rt=Pt;class Dt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Dt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(o).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Dt.receivers=[];class Lt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise(((i,a)=>{const l=Mt("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Ot(){return window}function Ft(){return"undefined"!==typeof Ot().WorkerGlobalScope&&"function"===typeof Ot().importScripts}const Bt="firebaseLocalStorageDb",Ut="firebaseLocalStorage",zt="fbase_key";class Vt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function qt(e,t){return e.transaction([Ut],t?"readwrite":"readonly").objectStore(Ut)}function Wt(){const e=indexedDB.open(Bt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ut,{keyPath:zt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ut)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bt);return new Vt(e).toPromise()}(),t(await Wt()))}))}))}async function Ht(e,t,n){const r=qt(e,!0).put({[zt]:t,value:n});return new Vt(r).toPromise()}function Gt(e,t){const n=qt(e,!0).delete(t);return new Vt(n).toPromise()}class Kt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Wt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ft()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dt._getInstance(Ft()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Lt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wt();return await Ht(e,Et,"1"),await Gt(e,Et),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ht(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=qt(e,!1).get(t),r=await new Vt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Gt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=qt(e,!1).getAll();return new Vt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kt.type="LOCAL";const Yt=Kt;const Qt=1e12;class $t{constructor(e){this.auth=e,this.counter=Qt,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jt(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Qt;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Qt;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Qt;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Jt{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;x(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xt=ye("rcb"),Zt=new C(3e4,6e4);class en{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ot().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return x(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&me(Ot().grecaptcha)?Promise.resolve(Ot().grecaptcha):new Promise(((n,s)=>{const o=Ot().setTimeout((()=>{s(f(e,"network-request-failed"))}),Zt.get());Ot()[Xt]=()=>{Ot().clearTimeout(o),delete Ot()[Xt];const r=Ot().grecaptcha;if(!r||!me(r))return void s(f(e,"internal-error"));const i=r.render;r.render=(e,t)=>{const n=i(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};ge("".concat("https://www.google.com/recaptcha/api.js?","?").concat(r.querystring({onload:Xt,render:"explicit",hl:t}))).catch((()=>{clearTimeout(o),s(f(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ot().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tn{async load(e){return new $t(e)}clearedOneInstance(){}}const nn="recaptcha",rn={theme:"light",type:"image"};class sn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Be._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function on(e,t,n){var r;const s=await n.verify();try{let o;if(x("string"===typeof s,e,"argument-error"),x(n.type===nn,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){x("enroll"===t.type,e,"internal-error");const n=await function(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{x("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;x(n,e,"missing-multi-factor-info");const i=await function(e,t){return T(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return T(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class an{constructor(e){this.providerId=an.PROVIDER_ID,this.auth=Ne(e)}verifyPhoneNumber(e,t){return on(this.auth,e,r.getModularInstance(t))}static credential(e,t){return Be._fromVerification(e,t)}static credentialFromResult(e){const t=e;return an.credentialFromTaggedObject(t)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Be._fromTokenResponse(n,r):null}}function ln(e,t){return t?$(t):(x(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}an.PROVIDER_ID="phone",an.PHONE_SIGN_IN_METHOD="phone";class cn extends Ee{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Le(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Le(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Le(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function un(e){return it(e.auth,new cn(e),e.bypassAuthState)}function dn(e){const{auth:t,user:n}=e;return x(n,t,"internal-error"),ot(n,new cn(e),e.bypassAuthState)}async function hn(e){const{auth:t,user:n}=e;return x(n,t,"internal-error"),rt(n,new cn(e),e.bypassAuthState)}class mn{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:o,type:i}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return un;case"linkViaPopup":case"linkViaRedirect":return hn;case"reauthViaPopup":case"reauthViaRedirect":return dn;default:p(this.auth,"internal-error")}}resolve(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pn=new C(2e3,1e4);class fn extends mn{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,fn.currentPopupAction&&fn.currentPopupAction.cancel(),fn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return x(e,this.auth,"internal-error"),e}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const e=Mt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pn.get())};e()}}fn.currentPopupAction=null;const gn=new Map;class yn extends mn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=gn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=wn(t),r=bn(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}gn.set(this.auth._key(),e)}return this.bypassAuthState||gn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function vn(e,t){return bn(e)._set(wn(t),"true")}function xn(e,t){gn.set(e._key(),t)}function bn(e){return $(e._redirectPersistence)}function wn(e){return Z("pendingRedirect",e.config.apiKey,e.name)}async function Nn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Ne(e),s=ln(r,t),o=new yn(r,s,n),i=await o.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}async function jn(e){const t=Mt("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class kn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Sn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cn(e))}saveEventToCache(e){this.cachedEventUids.add(Cn(e)),this.lastProcessedEventTime=Date.now()}}function Cn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Sn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function An(e){return T(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const En=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_n=/^https?/;function In(e){const t=N(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!_n.test(n))return!1;if(En.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Tn=new C(3e4,6e4);function Pn(){const e=Ot().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Rn=null;function Dn(e){return Rn=Rn||function(e){return new Promise(((t,n)=>{var r,s,o;function i(){Pn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Pn(),n(f(e,"network-request-failed"))},timeout:Tn.get()})}if(null===(s=null===(r=Ot().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Ot().gapi)||void 0===o?void 0:o.load)){const t=ye("iframefcb");return Ot()[t]=()=>{gapi.load?i():n(f(e,"network-request-failed"))},ge("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}i()}})).catch((e=>{throw Rn=null,e}))}(e),Rn}const Mn=new C(5e3,15e3),Ln={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},On=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fn(e){const t=e.config;x(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?S(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),o={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},i=On.get(e.config.apiHost);i&&(o.eid=i);const a=e._getFrameworks();return a.length&&(o.fw=a.join(",")),"".concat(n,"?").concat(r.querystring(o).slice(1))}const Bn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Un{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function zn(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Bn),{width:s.toString(),height:o.toString(),top:i,left:a}),u=r.getUA().toLowerCase();n&&(l=se(u)?"_blank":n),ne(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Un(null);const h=window.open(t||"",l,d);x(h,e,"popup-blocked");try{h.focus()}catch(m){}return new Un(h)}const Vn="__/auth/handler",qn="emulator/auth/handler",Wn=encodeURIComponent("fac");async function Hn(e,t,n,o,i,a){x(e.config.authDomain,e,"auth-domain-config-required"),x(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:o,v:s.SDK_VERSION,eventId:i};if(t instanceof Ve){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",r.isEmpty(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof qe){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(Wn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Vn);return S(t,qn)}(e),"?").concat(r.querystring(c).slice(1)).concat(d)}const Gn="webStorageSupport";const Kn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rt,this._completeRedirectFn=Nn,this._overrideRedirectResult=xn}async _openPopup(e,t,n,r){var s;w(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return zn(e,await Hn(e,t,n,N(),r),Mt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ot().location.href=e}(await Hn(e,t,n,N(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Dn(e),n=Ot().gapi;return x(n,e,"internal-error"),t.open({where:document.body,url:Fn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ln,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=f(e,"network-request-failed"),o=Ot().setTimeout((()=>{r(s)}),Mn.get());function i(){Ot().clearTimeout(o),n(t)}t.ping(i).then(i,(()=>{r(s)}))}))))}(e),n=new kn(e);return t.register("authEvent",(t=>{x(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gn,{type:Gn},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Gn];void 0!==s&&t(!!s),p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await An(e);for(const r of t)try{if(In(r))return}catch(n){}p(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ue()||re()||ce()}};class Yn{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return b("unexpected MultiFactorSessionType")}}}class Qn extends Yn{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Qn(e)}_finalizeEnroll(e,t,n){return function(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:finalize",I(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return T(e,"POST","/v2/accounts/mfaSignIn:finalize",I(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $n{constructor(){}static assertion(e){return Qn._fromCredential(e)}}$n.FACTOR_ID="phone";class Jn{static assertionForEnrollment(e,t){return Xn._fromSecret(e,t)}static assertionForSignIn(e,t){return Xn._fromEnrollmentId(e,t)}static async generateSecret(e){const t=e;x("undefined"!==typeof t.auth,"internal-error");const n=await function(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}(t.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return Zn._fromStartTotpMfaEnrollmentResponse(n,t.auth)}}Jn.FACTOR_ID="totp";class Xn extends Yn{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new Xn(t,void 0,e)}static _fromEnrollmentId(e,t){return new Xn(t,e)}async _finalizeEnroll(e,t,n){return x("undefined"!==typeof this.secret,e,"argument-error"),function(e,t){return T(e,"POST","/v2/accounts/mfaEnrollment:finalize",I(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){x(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return T(e,"POST","/v2/accounts/mfaSignIn:finalize",I(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Zn{constructor(e,t,n,r,s,o,i){this.sessionInfo=o,this.auth=i,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Zn(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let r=!1;return(er(e)||er(t))&&(r=!0),r&&(er(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),er(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}function er(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var tr="@firebase/auth",nr="0.23.2";class rr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const sr=r.getExperimentalSetting("authIdTokenMaxAge")||300;let or=null;var ir;ir="Browser",s._registerComponent(new a.Component("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;x(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:a,clientPlatform:ir,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(ir)},c=new we(r,s,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),s._registerComponent(new a.Component("auth-internal",(e=>(e=>new rr(e))(Ne(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),s.registerVersion(tr,nr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ir)),s.registerVersion(tr,nr,"cjs2017"),t.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},t.ActionCodeOperation={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},t.ActionCodeURL=Ue,t.AuthCredential=Ee,t.AuthEventManager=kn,t.AuthImpl=we,t.AuthPopup=Un,t.EmailAuthCredential=Me,t.EmailAuthProvider=ze,t.FacebookAuthProvider=He,t.FactorId={PHONE:"phone",TOTP:"totp"},t.FetchProvider=A,t.GithubAuthProvider=Ke,t.GoogleAuthProvider=Ge,t.OAuthCredential=Oe,t.OAuthProvider=We,t.OperationType={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},t.PhoneAuthCredential=Be,t.PhoneAuthProvider=an,t.PhoneMultiFactorGenerator=$n,t.ProviderId={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},t.RecaptchaVerifier=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},rn),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=nn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(n),this.isInvisible="invisible"===this.parameters.size,x("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;x(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tn:new en,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){x(!this.parameters.sitekey,this.auth,"argument-error"),x(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),x("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ot()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){x(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){x(j()&&!Ft(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await T(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);x(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return x(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},t.SAMLAuthCredential=Ye,t.SAMLAuthProvider=Qe,t.SignInMethod={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},t.TotpMultiFactorGenerator=Jn,t.TotpSecret=Zn,t.TwitterAuthProvider=$e,t.UserImpl=Y,t._assert=x,t._castAuth=Ne,t._clearRedirectOutcomes=function(){gn.clear()},t._createError=f,t._fail=p,t._generateEventId=Mt,t._getClientVersion=de,t._getInstance=$,t._getProjectConfig=An,t._getRedirectResult=Nn,t._getRedirectUrl=Hn,t._isAndroid=ie,t._isIOS=ce,t._isIOS7Or8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.getUA();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)},t._overrideRedirectResult=xn,t._persistenceKeyName=Z,t.applyActionCode=async function(e,t){await async function(e,t){return T(e,"POST","/v1/accounts:update",I(e,t))}(r.getModularInstance(e),{oobCode:t})},t.beforeAuthStateChanged=jt,t.browserLocalPersistence=Tt,t.browserPopupRedirectResolver=Kn,t.browserSessionPersistence=Rt,t.checkActionCode=pt,t.confirmPasswordReset=async function(e,t,n){await _e(r.getModularInstance(e),{oobCode:t,newPassword:n})},t.connectAuthEmulator=Ce,t.createUserWithEmailAndPassword=async function(e,t,n){var r;const s=Ne(e),o={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let i;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await xe(s,o,"signUpPassword");i=Je(s,e)}else i=Je(s,o).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await xe(s,o,"signUpPassword");return Je(s,e)}return Promise.reject(e)}));const a=await i.catch((e=>Promise.reject(e))),l=await Xe._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l},t.debugAssert=w,t.debugErrorMap=c,t.deleteUser=async function(e){return r.getModularInstance(e).delete()},t.fetchSignInMethodsForEmail=async function(e,t){const n={identifier:t,continueUri:j()?N():"http://localhost"},{signinMethods:s}=await async function(e,t){return T(e,"POST","/v1/accounts:createAuthUri",I(e,t))}(r.getModularInstance(e),n);return s||[]},t.getAdditionalUserInfo=function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,s=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=U(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new gt(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new vt(o,s);case"github.com":return new xt(o,s);case"google.com":return new bt(o,s);case"twitter.com":return new wt(o,s,e.screenName||null);case"custom":case"anonymous":return new gt(o,null);default:return new gt(o,r,s)}}(n)},t.getAuth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.getApp();const t=s._getProvider(e,"auth");if(t.isInitialized())return t.getImmediate();const n=ke(e,{popupRedirectResolver:Kn,persistence:[Yt,Tt,Rt]}),o=r.getExperimentalSetting("authTokenSyncURL");if(o){const e=(i=o,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>sr)return;const r=null===t||void 0===t?void 0:t.token;or!==r&&(or=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});jt(n,e,(()=>e(n.currentUser))),Nt(n,(t=>e(t)))}var i;const a=r.getDefaultEmulatorHost("auth");return a&&Ce(n,"http://".concat(a)),n},t.getIdToken=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.getModularInstance(e).getIdToken(t)},t.getIdTokenResult=F,t.getMultiFactorResolver=function(e,t){var n;const s=r.getModularInstance(e),o=t;return x(t.customData.operationType,s,"argument-error"),x(null===(n=o.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,s,"argument-error"),Ct._fromError(s,o)},t.getRedirectResult=async function(e,t){return await Ne(e)._initializationPromise,Nn(e,t,!1)},t.inMemoryPersistence=X,t.indexedDBLocalPersistence=Yt,t.initializeAuth=ke,t.initializeRecaptchaConfig=function(e){return Ne(e).initializeRecaptchaConfig()},t.isSignInWithEmailLink=function(e,t){const n=Ue.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)},t.linkWithCredential=lt,t.linkWithPhoneNumber=async function(e,t,n){const s=r.getModularInstance(e);await st(!1,s,"phone");const o=await on(s.auth,t,r.getModularInstance(n));return new sn(o,(e=>lt(s,e)))},t.linkWithPopup=async function(e,t,n){const s=r.getModularInstance(e);y(s.auth,t,Ve);const o=ln(s.auth,n);return new fn(s.auth,"linkViaPopup",t,o,s).executeNotNull()},t.linkWithRedirect=function(e,t,n){return async function(e,t,n){const s=r.getModularInstance(e);y(s.auth,t,Ve),await s.auth._initializationPromise;const o=ln(s.auth,n);await st(!1,s,t.providerId),await vn(o,s.auth);const i=await jn(s);return o._openRedirect(s.auth,t,"linkViaRedirect",i)}(e,t,n)},t.multiFactor=function(e){const t=r.getModularInstance(e);return At.has(t)||At.set(t,St._fromUser(t)),At.get(t)},t.onAuthStateChanged=function(e,t,n,s){return r.getModularInstance(e).onAuthStateChanged(t,n,s)},t.onIdTokenChanged=Nt,t.parseActionCodeURL=function(e){return Ue.parseLink(e)},t.prodErrorMap=u,t.reauthenticateWithCredential=ct,t.reauthenticateWithPhoneNumber=async function(e,t,n){const s=r.getModularInstance(e),o=await on(s.auth,t,r.getModularInstance(n));return new sn(o,(e=>ct(s,e)))},t.reauthenticateWithPopup=async function(e,t,n){const s=r.getModularInstance(e);y(s.auth,t,Ve);const o=ln(s.auth,n);return new fn(s.auth,"reauthViaPopup",t,o,s).executeNotNull()},t.reauthenticateWithRedirect=function(e,t,n){return async function(e,t,n){const s=r.getModularInstance(e);y(s.auth,t,Ve),await s.auth._initializationPromise;const o=ln(s.auth,n);await vn(o,s.auth);const i=await jn(s);return o._openRedirect(s.auth,t,"reauthViaRedirect",i)}(e,t,n)},t.reload=H,t.sendEmailVerification=async function(e,t){const n=r.getModularInstance(e),s={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&mt(n.auth,s,t);const{email:o}=await async function(e,t){return Pe(e,t)}(n.auth,s);o!==e.email&&await e.reload()},t.sendPasswordResetEmail=async function(e,t,n){var r;const s=Ne(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await xe(s,o,"getOobCode",!0);n&&mt(s,e,n),await Re(s,e)}else n&&mt(s,o,n),await Re(s,o).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await xe(s,o,"getOobCode",!0);n&&mt(s,e,n),await Re(s,e)}}))},t.sendSignInLinkToEmail=async function(e,t,n){var r;const s=Ne(e),o={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function i(e,t){x(t.handleCodeInApp,s,"argument-error"),t&&mt(s,e,t)}if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await xe(s,o,"getOobCode",!0);i(e,n),await De(s,e)}else i(o,n),await De(s,o).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await xe(s,o,"getOobCode",!0);i(e,n),await De(s,e)}}))},t.setPersistence=function(e,t){return r.getModularInstance(e).setPersistence(t)},t.signInAnonymously=async function(e){var t;const n=Ne(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Xe({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Je(n,{returnSecureToken:!0}),s=await Xe._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s},t.signInWithCredential=at,t.signInWithCustomToken=async function(e,t){const n=Ne(e),r=await async function(e,t){return R(e,"POST","/v1/accounts:signInWithCustomToken",I(e,t))}(n,{token:t,returnSecureToken:!0}),s=await Xe._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s},t.signInWithEmailAndPassword=function(e,t,n){return at(r.getModularInstance(e),ze.credential(t,n))},t.signInWithEmailLink=async function(e,t,n){const s=r.getModularInstance(e),o=ze.credentialWithLink(t,n||N());return x(o._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),at(s,o)},t.signInWithPhoneNumber=async function(e,t,n){const s=Ne(e),o=await on(s,t,r.getModularInstance(n));return new sn(o,(e=>at(s,e)))},t.signInWithPopup=async function(e,t,n){const r=Ne(e);y(e,t,Ve);const s=ln(r,n);return new fn(r,"signInViaPopup",t,s).executeNotNull()},t.signInWithRedirect=function(e,t,n){return async function(e,t,n){const r=Ne(e);y(e,t,Ve),await r._initializationPromise;const s=ln(r,n);return await vn(s,r),s._openRedirect(r,t,"signInViaRedirect")}(e,t,n)},t.signOut=function(e){return r.getModularInstance(e).signOut()},t.unlink=async function(e,t){const n=r.getModularInstance(e);await st(!0,n,t);const{providerUserInfo:s}=await async function(e,t){return T(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),o=nt(s||[]);return n.providerData=n.providerData.filter((e=>o.has(e.providerId))),o.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},t.updateCurrentUser=function(e,t){return r.getModularInstance(e).updateCurrentUser(t)},t.updateEmail=function(e,t){return ft(r.getModularInstance(e),t,null)},t.updatePassword=function(e,t){return ft(r.getModularInstance(e),null,t)},t.updatePhoneNumber=async function(e,t){await rt(r.getModularInstance(e),t)},t.updateProfile=async function(e,t){let{displayName:n,photoURL:s}=t;if(void 0===n&&void 0===s)return;const o=r.getModularInstance(e),i={idToken:await o.getIdToken(),displayName:n,photoUrl:s,returnSecureToken:!0},a=await z(o,async function(e,t){return T(e,"POST","/v1/accounts:update",t)}(o.auth,i));o.displayName=a.displayName||null,o.photoURL=a.photoUrl||null;const l=o.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),await o._updateTokensIfNecessary(a)},t.useDeviceLanguage=function(e){r.getModularInstance(e).useDeviceLanguage()},t.verifyBeforeUpdateEmail=async function(e,t,n){const s=r.getModularInstance(e),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&mt(s.auth,o,n);const{email:i}=await async function(e,t){return Pe(e,t)}(s.auth,o);i!==e.email&&await e.reload()},t.verifyPasswordResetCode=async function(e,t){const{data:n}=await pt(r.getModularInstance(e),t);return n.email}},6429:(e,t,n)=>{"use strict";e.exports=n(8577)},6432:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},6463:(e,t,n)=>{var r=n(2279),s=n(5916),o=n(7044),i=n(4008);e.exports=function(e,t){return r(e)?e:s(e,t)?[e]:o(i(e))}},6493:(e,t,n)=>{"use strict";n.d(t,{KO:()=>Y,MF:()=>H,Sx:()=>K,Wp:()=>G,j6:()=>z,om:()=>U});var r=n(7253),s=n(4624),o=n(9061),i=n(4272);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.9.13",u=new s.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",m="@firebase/analytics",p="@firebase/app-check-compat",f="@firebase/app-check",g="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",x="@firebase/database-compat",b="@firebase/functions",w="@firebase/functions-compat",N="@firebase/installations",j="@firebase/installations-compat",k="@firebase/messaging",C="@firebase/messaging-compat",S="@firebase/performance",A="@firebase/performance-compat",E="@firebase/remote-config",_="@firebase/remote-config-compat",I="@firebase/storage",T="@firebase/storage-compat",P="@firebase/firestore",R="@firebase/firestore-compat",D="firebase",M="[DEFAULT]",L={[l]:"fire-core",[d]:"fire-core-compat",[m]:"fire-analytics",[h]:"fire-analytics-compat",[f]:"fire-app-check",[p]:"fire-app-check-compat",[g]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[x]:"fire-rtdb-compat",[b]:"fire-fn",[w]:"fire-fn-compat",[N]:"fire-iid",[j]:"fire-iid-compat",[k]:"fire-fcm",[C]:"fire-fcm-compat",[S]:"fire-perf",[A]:"fire-perf-compat",[E]:"fire-rc",[_]:"fire-rc-compat",[I]:"fire-gcs",[T]:"fire-gcs-compat",[P]:"fire-fst",[R]:"fire-fst-compat","fire-js":"fire-js",[D]:"fire-js-all"},O=new Map,F=new Map;function B(e,t){try{e.container.addComponent(t)}catch(n){u.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function U(e){const t=e.name;if(F.has(t))return u.debug("There were multiple attempts to register component ".concat(t,".")),!1;F.set(t,e);for(const n of O.values())B(n,e);return!0}function z(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},q=new o.FA("app","Firebase",V);class W{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw q.create("app-deleted",{appName:this._name})}}const H="9.23.0";function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:M,automaticDataCollectionEnabled:!1},t),i=s.name;if("string"!==typeof i||!i)throw q.create("bad-app-name",{appName:String(i)});if(n||(n=(0,o.T9)()),!n)throw q.create("no-options");const a=O.get(i);if(a){if((0,o.bD)(n,a.options)&&(0,o.bD)(s,a.config))return a;throw q.create("duplicate-app",{appName:i})}const l=new r.h1(i);for(const r of F.values())l.addComponent(r);const c=new W(n,s,l);return O.set(i,c),c}function K(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;const t=O.get(e);if(!t&&e===M&&(0,o.T9)())return G();if(!t)throw q.create("no-app",{appName:e});return t}function Y(e,t,n){var s;let o=null!==(s=L[e])&&void 0!==s?s:e;n&&(o+="-".concat(n));const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void u.warn(e.join(" "))}U(new r.uA("".concat(o,"-version"),(()=>({library:o,version:t})),"VERSION"))}const Q="firebase-heartbeat-store";let $=null;function J(){return $||($=(0,i.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Q)}}).catch((e=>{throw q.create("idb-open",{originalErrorMessage:e.message})}))),$}async function X(e,t){try{const n=(await J()).transaction(Q,"readwrite"),r=n.objectStore(Q);await r.put(t,Z(e)),await n.done}catch(n){if(n instanceof o.g)u.warn(n.message);else{const e=q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function Z(e){return"".concat(e.name,"!").concat(e.options.appId)}class ee{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ne(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=te();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=te(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),re(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),re(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,o.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function te(){return(new Date).toISOString().substring(0,10)}class ne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await J();return await t.transaction(Q).objectStore(Q).get(Z(e))}catch(t){if(t instanceof o.g)u.warn(t.message);else{const e=q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return X(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return X(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function re(e){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var se;se="",U(new r.uA("platform-logger",(e=>new a(e)),"PRIVATE")),U(new r.uA("heartbeat",(e=>new ee(e)),"PRIVATE")),Y(l,c,se),Y(l,c,"esm2017"),Y("fire-js","")},6540:(e,t,n)=>{var r=n(366),s=n(423),o=n(5127);e.exports=function(e,t){var n={};return t=o(t,3),s(e,(function(e,s,o){r(n,t(e,s,o),e)})),n}},6557:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6580:(e,t)=>{let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return"undefined"!==typeof n},t.toSJIS=function(e){return n(e)}},6638:(e,t,n)=>{var r=n(366),s=n(423),o=n(5127);e.exports=function(e,t){var n={};return t=o(t,3),s(e,(function(e,s,o){r(n,s,t(e,s,o))})),n}},6658:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},6669:(e,t,n)=>{var r=n(6848),s=n(2274),o=n(2138);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=s,i.prototype.has=o,e.exports=i},6689:(e,t,n)=>{var r=n(6212),s=n(1536),o=n(78),i=n(4008);e.exports=function(e){return function(t){t=i(t);var n=s(t)?o(t):void 0,a=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return a[e]()+l}}},6695:(e,t,n)=>{const r=n(6580),s=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let o=n<<10;for(;r.getBCHDigit(o)-s>=0;)o^=1335<<r.getBCHDigit(o)-s;return 21522^(n<<10|o)}},6794:(e,t,n)=>{e=n.nmd(e);var r=n(4759),s=n(3721),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||s;e.exports=l},6808:(e,t,n)=>{var r=n(6014),s=n(9189)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=s},6823:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).get(e)}},6848:(e,t,n)=>{var r=n(738),s=n(708),o=n(6823),i=n(475),a=n(7859);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=i,l.prototype.set=a,e.exports=l},6860:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[s++]=i)}return o}},6932:(e,t,n)=>{"use strict";n.d(t,{Im:()=>c,n6:()=>u,CP:()=>d,mx:()=>l});var r=n(9379),s=n(3849),o=n(8631);class i{static async generateCouponQRCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";try{let r;if("string"===typeof e)try{JSON.parse(e);r=e}catch(n){r=JSON.stringify({type:"coupon",code:e})}else r=JSON.stringify({type:"coupon",code:e.code});switch(t.toLowerCase()){case"svg":return this.generateSvgQRCode(r);case"pdf":return this.generatePdfQRCode(r);default:return this.generatePngQRCode(r)}}catch(r){throw console.error("Error generating QR code:",r),new Error("Failed to generate QR code")}}static generatePngQRCode(e){return this.generateSvgQRCode(e)}static generateSvgQRCode(e){const t=300,n=e.length>20?e.substring(0,20)+"...":e,r='\n      <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'">\n        <rect width="100%" height="100%" fill="white"/>\n        <text x="50%" y="50%" font-family="Arial" font-size="14" text-anchor="middle" fill="black">\n          ').concat(n,'\n        </text>\n        <rect x="30" y="30" width="240" height="240" fill="none" stroke="black" stroke-width="2"/>\n        <rect x="60" y="60" width="180" height="180" fill="none" stroke="black" stroke-width="2"/>\n        <rect x="90" y="90" width="120" height="120" fill="none" stroke="black" stroke-width="2"/>\n      </svg>\n    ');return"data:image/svg+xml;base64,".concat(btoa(r))}static generatePdfQRCode(e){return this.generateSvgQRCode(e)}static parseQRCodeData(e){try{const t=JSON.parse(e);if(t&&t.type){if("coupon"===t.type&&t.code)return{type:"coupon",code:t.code};if("business"===t.type&&t.id)return{type:"business",id:t.id}}return null}catch(t){return"string"===typeof e&&e.trim().length>0?{type:"coupon",code:e.trim()}:null}}}const a=()=>{const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(32*Math.random()));return t},l=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{let i=[(0,s._M)("businessId","==",e),(0,s.My)("createdAt","desc")];n&&i.push((0,s._M)("active","==",!0)),t>0&&i.push((0,s.AB)(t));const a=(0,s.P)((0,s.rJ)(o.db,"coupons"),...i);return(await(0,s.GG)(a)).docs.map((e=>(0,r.A)({id:e.id},e.data())))}catch(i){throw console.error("Error getting coupons:",i),i}},c=async e=>{try{const n={};if(Object.keys(e).forEach((t=>{void 0!==e[t]&&(n[t]=e[t])})),n.createdAt=s.Dc.now(),n.updatedAt=s.Dc.now(),n.usageCount=0,n.active=void 0===n.active||n.active,n.qrCodeUrl=n.qrCodeUrl||"","buyXgetY"===n.type&&(n.buyQuantity=Number(n.buyQuantity)||1,n.getQuantity=Number(n.getQuantity)||1),n.code)try{const e=await i.generateCouponQRCode(n.code);n.qrCodeUrl=e}catch(t){console.error("Error generating QR code:",t)}const a=await(0,s.gS)((0,s.rJ)(o.db,"coupons"),n);return(0,r.A)({id:a.id},n)}catch(t){throw console.error("Error adding coupon:",t),t}},u=async(e,t,n,r)=>{try{const i="string"===typeof n?n:n.name||n.label||"Special",a={businessId:e,title:"".concat(i," Offer"),description:"Special ".concat(i," offer from ").concat(t),type:i.toLowerCase().includes("percent")?"percentage":i.toLowerCase().includes("free")?"freeItem":i.toLowerCase().includes("buy")?"buyXgetY":"fixed",value:i.toLowerCase().includes("percent")?10:5,active:!0,code:await d(e)};"buyXgetY"===a.type?(a.buyQuantity=1,a.getQuantity=1):"freeItem"===a.type&&(a.freeItem="Free Item");const l=await c(a);if(r&&r.length>0){const t=r.map((async t=>await(0,s.gS)((0,s.rJ)(o.db,"couponDistributions"),{couponId:l.id,businessId:e,customerId:t,status:"sent",sentAt:s.Dc.now()})));await Promise.all(t),await(0,s.mZ)((0,s.H9)(o.db,"coupons",l.id),{distributionCount:r.length})}return l}catch(i){throw console.error("Error creating and distributing coupon:",i),i}},d=async e=>{try{let t=a();const n=(0,s.P)((0,s.rJ)(o.db,"coupons"),(0,s._M)("businessId","==",e),(0,s._M)("code","==",t));let r=await(0,s.GG)(n);for(;!r.empty;)t=a(),r=await(0,s.GG)((0,s.P)((0,s.rJ)(o.db,"coupons"),(0,s._M)("businessId","==",e),(0,s._M)("code","==",t)));return t}catch(t){throw console.error("Error generating coupon code:",t),t}}},6958:(e,t,n)=>{var r=n(3616);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7044:(e,t,n)=>{var r=n(3734),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,(function(e,n,r,s){t.push(r?s.replace(o,"$1"):n||e)})),t}));e.exports=i},7059:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7101:(e,t,n)=>{var r=n(4672);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7145:(e,t)=>{const n="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(s,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const o=new RegExp("^"+r+"$"),i=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},7253:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>s});var r=n(9061);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===o?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},7379:e=>{e.exports=function(e){return this.__data__.get(e)}},7404:(e,t,n)=>{const r=n(794);function s(e){this.mode=r.BYTE,this.data="string"===typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=s},7405:(e,t,n)=>{var r=n(4102),s=n(4578),o=n(2279),i=n(6794),a=n(7059),l=n(1641),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&s(e),d=!n&&!u&&i(e),h=!n&&!u&&!d&&l(e),m=n||u||d||h,p=m?r(e.length,String):[],f=p.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,f))||p.push(g);return p}},7455:(e,t,n)=>{var r=n(3616);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7462:(e,t,n)=>{var r=n(2161),s=n(5112),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return s(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7467:(e,t,n)=>{(function(){var t;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:r(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}var o="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a,l=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function c(e,t){if(t)e:{var n=l;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)a=Object.setPrototypeOf;else{var u;e:{var d={};try{d.__proto__={a:!0},u=d.a;break e}catch(ln){}u=!1}a=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var h=a;function m(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}c("Symbol",(function(e){function t(e,t){this.g=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(s){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(s||"")+"_"+r++,s)}})),c("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var s=l[t[n]];"function"===typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return m(r(this))}})}return e})),c("Promise",(function(e){function t(e){this.g=0,this.i=void 0,this.h=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=l.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.B),reject:e(this.l)}},t.prototype.B=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.D(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.m(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.g)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.g);this.g=e,this.i=t,2===this.g&&this.C(),this.u()},t.prototype.C=function(){var e=this;o((function(){if(e.v()){var t=l.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.v=function(){if(this.o)return!1;var e=l.CustomEvent,t=l.Event,n=l.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=l.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)i.h(this.h[e]);this.h=null}};var i=new n;return t.prototype.D=function(e){var t=this.j();e.la(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{s(e(t))}catch(n){o(n)}}:t}var s,o,i=new t((function(e,t){s=e,o=t}));return this.la(r(e,s),r(n,o)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.la=function(e,t){function n(){switch(r.g){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.g)}}var r=this;null==this.h?i.h(n):this.h.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var o=s(e),i=o.next();!i.done;i=o.next())r(i.value).la(t,n)}))},t.all=function(e){var n=s(e),o=n.next();return o.done?r([]):new t((function(e,t){function s(t){return function(n){i[t]=n,0==--a&&e(i)}}var i=[],a=0;do{i.push(void 0),a++,r(o.value).la(s(i.length-1),t),o=n.next()}while(!o.done)}))},t})),c("Array.prototype.values",(function(e){return e||function(){return p(this,(function(e,t){return t}))}})),c("Array.prototype.keys",(function(e){return e||function(){return p(this,(function(e){return e}))}})),c("WeakMap",(function(e){function t(e){if(this.g=(c+=Math.random()+1).toString(),e){e=s(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function o(e){if(!f(e,l)){var t=new n;i(e,l,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(s){return!1}}())return e;var l="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var c=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!f(e,l))throw Error("WeakMap key fail: "+e);return e[l][this.g]=t,this},t.prototype.get=function(e){return r(e)&&f(e,l)?e[l][this.g]:void 0},t.prototype.has=function(e){return r(e)&&f(e,l)&&f(e[l],this.g)},t.prototype.delete=function(e){return!!(r(e)&&f(e,l)&&f(e[l],this.g))&&delete e[l][this.g]},t})),c("Map",(function(e){function t(){var e={};return e.V=e.next=e.head=e}function n(e,t){var n=e.g;return m((function(){if(n){for(;n.head!=e.g;)n=n.V;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?i.has(t)?n=i.get(t):(n=""+ ++a,i.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&f(e.h,n))for(e=0;e<r.length;e++){var s=r[e];if(t!==t&&s.key!==s.key||t===s.key)return{id:n,list:r,index:e,K:s}}return{id:n,list:r,index:-1,K:void 0}}function o(e){if(this.h={},this.g=t(),this.size=0,e){e=s(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(s([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(i){return!1}}())return e;var i=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.K?n.K.value=t:(n.K={next:this.g,V:this.g.V,head:this.g,key:e,value:t},n.list.push(n.K),this.g.V.next=n.K,this.g.V=n.K,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).K||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.K.V.next=e.K.next,e.K.next.V=e.K.V,e.K.head=null,this.size--,!0)},o.prototype.clear=function(){this.h={},this.g=this.g.V=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).K},o.prototype.get=function(e){return(e=r(this,e).K)&&e.value},o.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},o.prototype.keys=function(){return n(this,(function(e){return e.key}))},o.prototype.values=function(){return n(this,(function(e){return e.value}))},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var a=0;return o})),c("Array.prototype.find",(function(e){return e||function(e,t){e:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,s=0;s<r;s++){var o=n[s];if(e.call(t,o,s,n)){e=o;break e}}e=void 0}return e}})),c("Array.prototype.entries",(function(e){return e||function(){return p(this,(function(e,t){return[e,t]}))}})),c("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],s="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof s){e=s.call(e);for(var o=0;!(s=e.next()).done;)r.push(t.call(n,s.value,o++))}else for(s=e.length,o=0;o<s;o++)r.push(t.call(n,e[o],o));return r}})),c("Set",(function(e){function t(e){if(this.g=new Map,e){e=s(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(s([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&(!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done)}catch(i){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)}));var g=g||{},y=this||self;function v(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function x(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function b(e){return Object.prototype.hasOwnProperty.call(e,w)&&e[w]||(e[w]=++N)}var w="closure_uid_"+(1e9*Math.random()>>>0),N=0;function j(e,t,n){return e.call.apply(e.bind,arguments)}function k(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function C(e,t,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?j:k).apply(null,arguments)}function S(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function A(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.dc=function(e,n,r){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return t.prototype[n].apply(e,s)}}function E(){0!=_&&(I[b(this)]=this),this.s=this.s,this.o=this.o}var _=0,I={};E.prototype.s=!1,E.prototype.va=function(){if(!this.s&&(this.s=!0,this.O(),0!=_)){var e=b(this);if(0!=_&&this.o&&0<this.o.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete I[e]}},E.prototype.O=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function P(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function R(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(v(r)){var s=e.length||0,o=r.length||0;e.length=s+o;for(var i=0;i<o;i++)e[s+i]=r[i]}else e.push(r)}}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{y.addEventListener("test",(function(){}),t),y.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function L(e){return/^[\s\xa0]*$/.test(e)}function O(){var e=y.navigator;return e&&(e=e.userAgent)?e:""}function F(e){return-1!=O().indexOf(e)}function B(e){return B[" "](e),e}B[" "]=function(){};var U,z,V=F("Opera"),q=F("Trident")||F("MSIE"),W=F("Edge"),H=W||q,G=F("Gecko")&&!(-1!=O().toLowerCase().indexOf("webkit")&&!F("Edge"))&&!(F("Trident")||F("MSIE"))&&!F("Edge"),K=-1!=O().toLowerCase().indexOf("webkit")&&!F("Edge");function Y(){var e=y.document;return e?e.documentMode:void 0}e:{var Q="",$=function(){var e=O();return G?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):K?/WebKit\/(\S+)/.exec(e):V?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if($&&(Q=$?$[1]:""),q){var J=Y();if(null!=J&&J>parseFloat(Q)){U=String(J);break e}}U=Q}if(y.document&&q){var X=Y();z=X||(parseInt(U,10)||void 0)}else z=void 0;var Z=z;function ee(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(G){e:{try{B(t.nodeName);var s=!0;break e}catch(o){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:te[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ee.Z.h.call(this)}}A(ee,D);var te={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),re=0;function se(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.oa=s,this.key=++re,this.ha=this.ka=!1}function oe(e){e.ha=!0,e.listener=null,e.proxy=null,e.src=null,e.oa=null}function ie(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ae(e){var t,n={};for(t in e)n[t]=e[t];return n}var le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(e,t){for(var n,r,s=1;s<arguments.length;s++){for(n in r=arguments[s])e[n]=r[n];for(var o=0;o<le.length;o++)n=le[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ue(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],o=T(s,t);(r=0<=o)&&Array.prototype.splice.call(s,o,1),r&&(oe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function he(e,t,n,r){for(var s=0;s<e.length;++s){var o=e[s];if(!o.ha&&o.listener==t&&o.capture==!!n&&o.oa==r)return s}return-1}ue.prototype.add=function(e,t,n,r,s){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var i=he(e,t,r,s);return-1<i?(t=e[i],n||(t.ka=!1)):((t=new se(t,this.src,o,!!r,s)).ka=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),pe={};function fe(e,t,n,r,s){if(r&&r.once)return ye(e,t,n,r,s);if(Array.isArray(t)){for(var o=0;o<t.length;o++)fe(e,t[o],n,r,s);return null}return n=ke(n),e&&e[ne]?e.P(t,n,x(r)?!!r.capture:!!r,s):ge(e,t,n,!1,r,s)}function ge(e,t,n,r,s,o){if(!t)throw Error("Invalid event type");var i=x(s)?!!s.capture:!!s,a=Ne(e);if(a||(e[me]=a=new ue(e)),(n=a.add(t,n,r,i,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=we;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(s=i),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e,t,n,r,s){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,s);return null}return n=ke(n),e&&e[ne]?e.R(t,n,x(r)?!!r.capture:!!r,s):ge(e,t,n,!0,r,s)}function ve(e,t,n,r,s){if(Array.isArray(t))for(var o=0;o<t.length;o++)ve(e,t[o],n,r,s);else r=x(r)?!!r.capture:!!r,n=ke(n),e&&e[ne]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=he(o=e.g[t],n,r,s))&&(oe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Ne(e))&&(t=e.g[t.toString()],e=-1,t&&(e=he(t,n,r,s)),(n=-1<e?t[e]:null)&&xe(n))}function xe(e){if("number"!==typeof e&&e&&!e.ha){var t=e.src;if(t&&t[ne])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ne(t))?(de(n,e),0==n.h&&(n.src=null,t[me]=null)):oe(e)}}}function be(e){return e in pe?pe[e]:pe[e]="on"+e}function we(e,t){if(e.ha)e=!0;else{t=new ee(t,this);var n=e.listener,r=e.oa||e.src;e.ka&&xe(e),e=n.call(r,t)}return e}function Ne(e){return(e=e[me])instanceof ue?e:null}var je="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(e){return"function"===typeof e?e:(e[je]||(e[je]=function(t){return e.handleEvent(t)}),e[je])}function Ce(){E.call(this),this.i=new ue(this),this.T=this,this.J=null}function Se(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.T,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;ce(t=new D(r,e),s)}if(s=!0,n)for(var o=n.length-1;0<=o;o--){var i=t.g=n[o];s=Ae(i,r,!0,t)&&s}if(s=Ae(i=t.g=e,r,!0,t)&&s,s=Ae(i,r,!1,t)&&s,n)for(o=0;o<n.length;o++)s=Ae(i=t.g=n[o],r,!1,t)&&s}function Ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,o=0;o<t.length;++o){var i=t[o];if(i&&!i.ha&&i.capture==n){var a=i.listener,l=i.oa||i.src;i.ka&&de(e.i,i),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}A(Ce,E),Ce.prototype[ne]=!0,Ce.prototype.removeEventListener=function(e,t,n,r){ve(this,e,t,n,r)},Ce.prototype.O=function(){if(Ce.Z.O.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oe(n[r]);delete t.g[e],t.h--}}this.J=null},Ce.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ce.prototype.R=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ee=y.JSON.stringify;function _e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}function Ie(){this.h=this.g=null}function Te(){var e=Fe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}_e.prototype.get=function(){if(0<this.h){this.h--;var e=this.g;this.g=e.next,e.next=null}else e=this.i();return e},Ie.prototype.add=function(e,t){var n=Pe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n};var Pe=new _e((function(){return new Re}),(function(e){return e.reset()}));function Re(){this.next=this.g=this.h=null}function De(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Me(e){y.setTimeout((function(){throw e}),0)}Re.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},Re.prototype.reset=function(){this.next=this.g=this.h=null};var Le,Oe=!1,Fe=new Ie;function Be(e,t){Le||function(){var e=y.Promise.resolve(void 0);Le=function(){e.then(Ue)}}(),Oe||(Le(),Oe=!0),Fe.add(e,t)}function Ue(){for(var e;e=Te();){try{e.h.call(e.g)}catch(n){Me(n)}var t=Pe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Oe=!1}function ze(e,t){Ce.call(this),this.h=e||1,this.g=t||y,this.j=C(this.tb,this),this.l=Date.now()}function Ve(e){e.ia=!1,e.U&&(e.g.clearTimeout(e.U),e.U=null)}function qe(e,t,n){if("function"===typeof e)n&&(e=C(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(t)?-1:y.setTimeout(e,t||0)}function We(e,t,n){E.call(this),this.m=null!=n?e.bind(n):e,this.j=t,this.h=null,this.i=!1,this.g=null}if(A(ze,Ce),(t=ze.prototype).ia=!1,t.U=null,t.tb=function(){if(this.ia){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.U=this.g.setTimeout(this.j,this.h-e):(this.U&&(this.g.clearTimeout(this.U),this.U=null),Se(this,"tick"),this.ia&&(Ve(this),this.start()))}},t.start=function(){this.ia=!0,this.U||(this.U=this.g.setTimeout(this.j,this.h),this.l=Date.now())},t.O=function(){ze.Z.O.call(this),Ve(this),delete this.g},We.prototype=o(E.prototype),We.prototype.constructor=We,h)h(We,E);else for(var He in E)if("prototype"!=He)if(Object.defineProperties){var Ge=Object.getOwnPropertyDescriptor(E,He);Ge&&Object.defineProperty(We,He,Ge)}else We[He]=E[He];function Ke(e){e.g=qe((function(){e.g=null,e.i&&(e.i=!1,Ke(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}function Ye(e){E.call(this),this.h=e,this.g={}}We.Z=E.prototype,We.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Ke(this)},We.prototype.O=function(){E.prototype.O.call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},A(Ye,E);var Qe=[];function $e(e,t,n,r){Array.isArray(n)||(n&&(Qe[0]=n.toString()),n=Qe);for(var s=0;s<n.length;s++){var o=fe(t,n[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Je(e){ie(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xe(e)}),e),e.g={}}function Xe(){this.g=!0}function Ze(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var i=1;i<s.length;i++)s[i]=""}}}return Ee(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Ye.prototype.O=function(){Ye.Z.O.call(this),Je(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xe.prototype.Ha=function(){this.g=!1},Xe.prototype.info=function(){};var et={},tt=null;function nt(){return tt=tt||new Ce}function rt(e){D.call(this,et.Wa,e)}function st(e){var t=nt();Se(t,new rt(t,e))}function ot(e,t){D.call(this,et.STAT_EVENT,e),this.stat=t}function it(e){var t=nt();Se(t,new ot(t,e))}function at(e,t){D.call(this,et.Xa,e),this.size=t}function lt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return y.setTimeout((function(){e()}),t)}et.Wa="serverreachability",A(rt,D),et.STAT_EVENT="statevent",A(ot,D),et.Xa="timingevent",A(at,D);var ct={NO_ERROR:0,ub:1,Hb:2,Gb:3,Bb:4,Fb:5,Ib:6,Ta:7,TIMEOUT:8,Lb:9},ut={zb:"complete",Vb:"success",Ua:"error",Ta:"abort",Nb:"ready",Ob:"readystatechange",TIMEOUT:"timeout",Jb:"incrementaldata",Mb:"progress",Cb:"downloadprogress",cc:"uploadprogress"};function dt(){}function ht(e){return e.h||(e.h=e.i())}function mt(){}dt.prototype.h=null;var pt,ft={OPEN:"a",yb:"b",Ua:"c",Kb:"d"};function gt(){D.call(this,"d")}function yt(){D.call(this,"c")}function vt(){}function xt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.Y=r||1,this.W=new Ye(this),this.R=wt,e=H?125:void 0,this.X=new ze(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.M=this.G=this.aa=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.ea=-1,this.J=!1,this.P=0,this.N=null,this.da=this.L=this.ca=this.T=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}A(gt,D),A(yt,D),A(vt,dt),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},pt=new vt;var wt=45e3,Nt={},jt={};function kt(e,t,n){e.M=1,e.v=qt(Ft(t)),e.s=n,e.T=!0,Ct(e,null)}function Ct(e,t){e.G=Date.now(),_t(e),e.A=Ft(e.v);var n=e.A,r=e.Y;Array.isArray(r)||(r=[String(r)]),nn(n.i,"t",r),e.C=0,n=e.l.J,e.h=new bt,e.g=or(e.l,n?t:null,!e.s),0<e.P&&(e.N=new We(C(e.Sa,e,e.g),e.P)),$e(e.W,e.g,"readystatechange",e.qb),t=e.I?ae(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ja(e.A,e.u,e.s,t)):(e.u="GET",e.g.ja(e.A,e.u,null,t)),st(1),function(e,t,n,r,s,o){e.info((function(){if(e.g)if(o)for(var i="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=o;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i}))}(e.j,e.u,e.A,e.m,e.Y,e.s)}function St(e){return!!e.g&&("GET"==e.u&&2!=e.M&&e.l.Ka)}function At(e,t,n){for(var r,s=!0;!e.J&&e.C<n.length;){if((r=Et(e,n))==jt){4==t&&(e.o=4,it(14),s=!1),Ze(e.j,e.m,null,"[Incomplete Response]");break}if(r==Nt){e.o=4,it(15),Ze(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}Ze(e.j,e.m,r,null),Dt(e,r)}St(e)&&r!=jt&&r!=Nt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,it(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.da&&(e.da=!0,(t=e.l).g==e&&t.ea&&!t.N&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(t),t.N=!0,it(11))):(Ze(e.j,e.m,n,"[Invalid Chunked Response]"),Rt(e),Pt(e))}function Et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?jt:(n=Number(t.substring(n,r)),isNaN(n)?Nt:(r+=1)+n>t.length?jt:(t=t.slice(r,r+n),e.C=r+n,t))}function _t(e){e.aa=Date.now()+e.R,It(e,e.R)}function It(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=lt(C(e.ob,e),t)}function Tt(e){e.B&&(y.clearTimeout(e.B),e.B=null)}function Pt(e){0==e.l.H||e.J||er(e.l,e)}function Rt(e){Tt(e);var t=e.N;t&&"function"==typeof t.va&&t.va(),e.N=null,Ve(e.X),Je(e.W),e.g&&(t=e.g,e.g=null,t.abort(),t.va())}function Dt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||hn(n.i,e)))if(!e.L&&hn(n.i,e)&&3==n.H){try{var r=n.Ma.g.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Zn(n),qn(n)}$n(n),it(18)}}else n.Ia=s[1],0<n.Ia-n.X&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=lt(C(n.lb,n),6e3));if(1>=dn(n.i)&&n.ra){try{n.ra()}catch(g){}n.ra=void 0}}else nr(n,11)}else if((e.L||n.g==e)&&Zn(n),!L(t))for(s=n.Ma.g.parse(t),t=0;t<s.length;t++){var o=s[t];if(n.X=o[0],o=o[1],2==n.H)if("c"==o[0]){n.L=o[1],n.sa=o[2];var i=o[3];null!=i&&(n.ua=i,n.l.info("VER="+n.ua));var a=o[4];null!=a&&(n.Ja=a,n.l.info("SVER="+n.Ja));var l=o[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.M=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var u=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var d=r.i;d.g||-1==u.indexOf("spdy")&&-1==u.indexOf("quic")&&-1==u.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(mn(d,d.h),d.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Ga=h,Vt(r.I,r.D,h))}}n.H=3,n.h&&n.h.Ea(),n.ea&&(n.T=Date.now()-e.G,n.l.info("Handshake RTT: "+n.T+"ms"));var m=e;if((r=n).za=sr(r,r.J?r.sa:null,r.aa),m.L){pn(r.i,m);var p=m,f=r.M;f&&p.setTimeout(f),p.B&&(Tt(p),_t(p)),r.g=m}else Qn(r);0<n.j.length&&Hn(n)}else"stop"!=o[0]&&"close"!=o[0]||nr(n,7);else 3==n.H&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?nr(n,7):Vn(n):"noop"!=o[0]&&n.h&&n.h.Da(o),n.A=0)}st(4)}catch(g){}}function Mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.wa&&"function"==typeof e.wa)return e.wa();if(!e.ba||"function"!=typeof e.ba){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(v(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.ba&&"function"==typeof e.ba)return e.ba();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}(t=xt.prototype).setTimeout=function(e){this.R=e},t.qb=function(e){e=e.target;var t=this.N;t&&3==Ln(e)?t.l():this.Sa(e)},t.Sa=function(e){try{if(e==this.g)e:{var t=Ln(this.g),n=this.g.La(),r=this.g.fa();if(!(3>t)&&(3!=t||H||this.g&&(this.h.h||this.g.ma()||On(this.g)))){this.J||4!=t||7==n||st(8==n||0>=r?3:2),Tt(this);var s=this.g.fa();this.ea=s;t:if(St(this)){var o=On(this.g);e="";var i=o.length,a=4==Ln(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rt(this),Pt(this);var l="";break t}this.h.i=new y.TextDecoder}for(n=0;n<i;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:a&&n==i-1});o.splice(0,i),this.h.g+=e,this.C=0,l=this.h.g}else l=this.g.ma();if(this.i=200==s,function(e,t,n,r,s,o,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+o+" "+i}))}(this.j,this.u,this.A,this.m,this.Y,t,s),this.i){if(this.ca&&!this.L){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(c)){var d=c;break t}}d=null}if(!(s=d)){this.i=!1,this.o=3,it(12),Rt(this),Pt(this);break e}Ze(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Dt(this,s)}this.T?(At(this,t,l),H&&this.i&&3==t&&($e(this.W,this.X,"tick",this.pb),this.X.start())):(Ze(this.j,this.m,l,null),Dt(this,l)),4==t&&Rt(this),this.i&&!this.J&&(4==t?er(this.l,this):(this.i=!1,_t(this)))}else(function(e){var t={};e=(e.g&&2<=Ln(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!L(e[n])){var r=De(e[n]),s=r[0];if("string"===typeof(r=r[1])){r=r.trim();var o=t[s]||[];t[s]=o,o.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==s&&0<l.indexOf("Unknown SID")?(this.o=3,it(12)):(this.o=0,it(13)),Rt(this),Pt(this)}}}catch(h){}},t.pb=function(){if(this.g){var e=Ln(this.g),t=this.g.ma();this.C<t.length&&(Tt(this),At(this,e,t),this.i&&4!=e&&_t(this))}},t.cancel=function(){this.J=!0,Rt(this)},t.ob=function(){this.B=null;var e=Date.now();0<=e-this.aa?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.M&&(st(3),it(17)),Rt(this),this.o=2,Pt(this)):It(this,this.aa-e)};var Lt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ot(e){var t;this.g=this.s=this.j="",this.o=null,this.m=this.h="",this.l=!1,e instanceof Ot?(this.l=e.l,Bt(this,e.j),this.s=e.s,this.g=e.g,Ut(this,e.o),this.h=e.h,zt(this,rn(e.i)),this.m=e.m):e&&(t=String(e).match(Lt))?(this.l=!1,Bt(this,t[1]||"",!0),this.s=Wt(t[2]||""),this.g=Wt(t[3]||"",!0),Ut(this,t[4]),this.h=Wt(t[5]||"",!0),zt(this,t[6]||"",!0),this.m=Wt(t[7]||"")):(this.l=!1,this.i=new Xt(null,this.l))}function Ft(e){return new Ot(e)}function Bt(e,t,n){e.j=n?Wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ut(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.o=t}else e.o=null}function zt(e,t,n){t instanceof Xt?(e.i=t,function(e,t){t&&!e.j&&(Zt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(en(this,t),nn(this,n,e))}),e)),e.j=t}(e.i,e.l)):(n||(t=Ht(t,$t)),e.i=new Xt(t,e.l))}function Vt(e,t,n){e.i.set(t,n)}function qt(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ht(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ht(t,Kt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ht(t,Kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.o)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ht(n,"/"==n.charAt(0)?Qt:Yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Ht(n,Jt)),e.join("")},Ot.prototype.resolve=function(e){var t=Ft(this),n=!!e.j;n?Bt(t,e.j):n=!!e.s,n?t.s=e.s:n=!!e.g,n?t.g=e.g:n=null!=e.o;var r=e.h;if(n)Ut(t,e.o);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");for(var o=[],i=0;i<s.length;){var a=s[i++];"."==a?r&&i==s.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&i==s.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?zt(t,rn(e.i)):n=!!e.m,n&&(t.m=e.m),t};var Kt=/[#\/\?@]/g,Yt=/[#\?:]/g,Qt=/[#\?]/g,$t=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var o=e[n].substring(0,r);s=e[n].substring(r+1)}else o=e[n];t(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function en(e,t){Zt(e),t=sn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tn(e,t){return Zt(e),t=sn(e,t),e.g.has(t)}function nn(e,t,n){en(e,t),0<n.length&&(e.i=null,e.g.set(sn(e,t),P(n)),e.h+=n.length)}function rn(e){var t=new Xt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function sn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function on(e,t){this.g=e,this.map=t}function an(e){this.l=e||cn,y.PerformanceNavigationTiming?e=0<(e=y.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(y.g&&y.g.Na&&y.g.Na()&&y.g.Na().ic),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(t=Xt.prototype).add=function(e,t){Zt(this),this.i=null,e=sn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},t.forEach=function(e,t){Zt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},t.wa=function(){Zt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var s=e[r],o=0;o<s.length;o++)n.push(t[r]);return n},t.ba=function(e){Zt(this);var t=[];if("string"===typeof e)tn(this,e)&&(t=t.concat(this.g.get(sn(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},t.set=function(e,t){return Zt(this),this.i=null,tn(this,e=sn(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&0<(e=this.ba(e)).length?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],s=encodeURIComponent(String(r));r=this.ba(r);for(var o=0;o<r.length;o++){var i=s;""!==r[o]&&(i+="="+encodeURIComponent(String(r[o]))),e.push(i)}}return this.i=e.join("&")};var ln,cn=10;function un(e){return!!e.h||!!e.g&&e.g.size>=e.j}function dn(e){return e.h?1:e.g?e.g.size:0}function hn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function mn(e,t){e.g?e.g.add(t):e.h=t}function pn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){for(var t=e.i,n=(e=s(e.g.values())).next();!n.done;n=e.next())t=t.concat(n.value.D);return t}return P(e.i)}function gn(){}function yn(){this.g=new gn}function vn(e,t,n){var r=n||"";try{Mt(e,(function(e,n){var s=e;x(e)&&(s=Ee(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function xn(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(o){}}function bn(e){this.l=e.jc||null,this.j=e.rb||!1}function wn(e,t){Ce.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Nn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(var e=s(this.g.values()),t=e.next();!t.done;t=e.next())t.value.cancel();this.g.clear()}},gn.prototype.stringify=function(e){return y.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return y.JSON.parse(e,void 0)},A(bn,dt),bn.prototype.g=function(){return new wn(this.l,this.j)},bn.prototype.i=(ln={},function(){return ln}),A(wn,Ce);var Nn=0;function jn(e){e.j.read().then(e.$a.bind(e)).catch(e.na.bind(e))}function kn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Cn(e)}function Cn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(t=wn.prototype).open=function(e,t){if(this.readyState!=Nn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Cn(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||y).fetch(new Request(this.B,t)).then(this.cb.bind(this),this.na.bind(this))},t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kn(this)),this.readyState=Nn},t.cb=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.ab.bind(this),this.na.bind(this));else if("undefined"!==typeof y.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jn(this)}else e.text().then(this.bb.bind(this),this.na.bind(this))},t.$a=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kn(this):Cn(this),3==this.readyState&&jn(this)}},t.bb=function(e){this.g&&(this.response=this.responseText=e,kn(this))},t.ab=function(e){this.g&&(this.response=e,kn(this))},t.na=function(){this.g&&kn(this)},t.setRequestHeader=function(e,t){this.v.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Sn=y.JSON.parse;function An(e){Ce.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.D=!1,this.B=0,this.A=null,this.L=En,this.M=this.N=!1}A(An,Ce);var En="",_n=/^https?$/i,In=["POST","PUT"];function Tn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pn(e),Dn(e)}function Pn(e){e.D||(e.D=!0,Se(e,"complete"),Se(e,"error"))}function Rn(e){if(e.h&&"undefined"!=typeof g&&(!e.C[1]||4!=Ln(e)||2!=e.fa()))if(e.v&&4==Ln(e))qe(e.Oa,0,e);else if(Se(e,"readystatechange"),4==Ln(e)){e.h=!1;try{var t,n=e.fa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var s;if(s=0===n){var o=String(e.I).match(Lt)[1]||null;!o&&y.self&&y.self.location&&(o=y.self.location.protocol.slice(0,-1)),s=!_n.test(o?o.toLowerCase():"")}t=s}if(t)Se(e,"complete"),Se(e,"success");else{e.m=6;try{var i=2<Ln(e)?e.g.statusText:""}catch(a){i=""}e.j=i+" ["+e.fa()+"]",Pn(e)}}finally{Dn(e)}}}function Dn(e,t){if(e.g){Mn(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Se(e,"ready");try{n.onreadystatechange=r}catch(s){}}}function Mn(e){e.g&&e.M&&(e.g.ontimeout=null),e.A&&(y.clearTimeout(e.A),e.A=null)}function Ln(e){return e.g?e.g.readyState:0}function On(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.L){case En:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fn(e){var t="";return ie(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Bn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fn(n),"string"===typeof e?(encodeURIComponent(String(t)),null!=n&&encodeURIComponent(String(n))):Vt(e,t,n))}function Un(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zn(e){this.Ja=0,this.j=[],this.l=new Xe,this.sa=this.za=this.I=this.aa=this.g=this.Ga=this.D=this.qa=this.o=this.W=this.s=null,this.ib=this.Y=0,this.gb=Un("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.ca=!0,this.Ia=this.X=-1,this.da=this.A=this.C=0,this.eb=Un("baseRetryDelayMs",5e3,e),this.kb=Un("retryDelaySeedMs",1e4,e),this.hb=Un("forwardChannelMaxRetries",2,e),this.Aa=Un("forwardChannelRequestTimeoutMs",2e4,e),this.ya=e&&e.xmlHttpFactory||void 0,this.Ka=e&&e.hc||!1,this.M=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.L="",this.i=new an(e&&e.concurrentRequestLimit),this.Ma=new yn,this.R=e&&e.fastHandshake||!1,this.P=e&&e.encodeInitMessageHeaders||!1,this.R&&this.P&&(this.P=!1),this.fb=e&&e.ec||!1,e&&e.Ha&&this.l.Ha(),e&&e.forceLongPolling&&(this.ca=!1),this.ea=!this.R&&this.ca&&e&&e.detectBufferingProxy||!1,this.ta=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ta=e.longPollingTimeout),this.ra=void 0,this.T=0,this.N=!1,this.pa=this.B=null}function Vn(e){if(Wn(e),3==e.H){var t=e.Y++,n=Ft(e.I);if(Vt(n,"SID",e.L),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),Kn(e,n),(t=new xt(e,e.l,t)).M=2,t.v=qt(Ft(n)),n=!1,y.navigator&&y.navigator.sendBeacon)try{n=y.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&y.Image&&((new Image).src=t.v,n=!0),n||(t.g=or(t.l,null),t.g.ja(t.v)),t.G=Date.now(),_t(t)}rr(e)}function qn(e){e.g&&(Jn(e),e.g.cancel(),e.g=null)}function Wn(e){qn(e),e.u&&(y.clearTimeout(e.u),e.u=null),Zn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&y.clearTimeout(e.m),e.m=null)}function Hn(e){un(e.i)||e.m||(e.m=!0,Be(e.Qa,e),e.C=0)}function Gn(e,t){var n;n=t?t.m:e.Y++;var r=Ft(e.I);Vt(r,"SID",e.L),Vt(r,"RID",n),Vt(r,"AID",e.X),Kn(e,r),e.o&&e.s&&Bn(r,e.o,e.s),n=new xt(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.D.concat(e.j)),t=Yn(e,n,1e3),n.setTimeout(Math.round(.5*e.Aa)+Math.round(.5*e.Aa*Math.random())),mn(e.i,n),kt(n,r,t)}function Kn(e,t){e.qa&&ie(e.qa,(function(e,n){Vt(t,n,e)})),e.h&&Mt({},(function(e,n){Vt(t,n,e)}))}function Yn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?C(e.h.Ya,e.h,e):null;e:for(var s=e.j,o=-1;;){var i=["count="+n];-1==o?0<n?(o=s[0].g,i.push("ofs="+o)):o=0:i.push("ofs="+o);for(var a=!0,l=0;l<n;l++){var c=s[l].g,u=s[l].map;if(0>(c-=o))o=Math.max(0,s[l].g-100),a=!1;else try{vn(u,i,"req"+c+"_")}catch(d){r&&r(u)}}if(a){r=i.join("&");break e}}return e=e.j.splice(0,n),t.D=e,r}function Qn(e){e.g||e.u||(e.da=1,Be(e.Pa,e),e.A=0)}function $n(e){return!(e.g||e.u||3<=e.A)&&(e.da++,e.u=lt(C(e.Pa,e),tr(e,e.A)),e.A++,!0)}function Jn(e){null!=e.B&&(y.clearTimeout(e.B),e.B=null)}function Xn(e){e.g=new xt(e,e.l,"rpc",e.da),null===e.o&&(e.g.I=e.s),e.g.P=0;var t=Ft(e.za);Vt(t,"RID","rpc"),Vt(t,"SID",e.L),Vt(t,"AID",e.X),Vt(t,"CI",e.G?"0":"1"),!e.G&&e.ta&&Vt(t,"TO",e.ta),Vt(t,"TYPE","xmlhttp"),Kn(e,t),e.o&&e.s&&Bn(t,e.o,e.s),e.M&&e.g.setTimeout(e.M);var n=e.g;e=e.sa,n.M=1,n.v=qt(Ft(t)),n.s=null,n.T=!0,Ct(n,e)}function Zn(e){null!=e.v&&(y.clearTimeout(e.v),e.v=null)}function er(e,t){var n=null;if(e.g==t){Zn(e),Jn(e),e.g=null;var r=2}else{if(!hn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;Se(r=nt(),new at(r,n,t,s)),Hn(e)}else Qn(e);else if(3==(s=t.o)||0==s&&0<t.ea||!(1==r&&function(e,t){return!(dn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.D.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.gb?0:e.hb))&&(e.m=lt(C(e.Qa,e,t),tr(e,e.C)),e.C++,!0))}(e,t)||2==r&&$n(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:nr(e,5);break;case 4:nr(e,10);break;case 3:nr(e,6);break;default:nr(e,2)}}function tr(e,t){var n=e.eb+Math.floor(Math.random()*e.kb);return e.isActive()||(n*=2),n*t}function nr(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=C(e.sb,e);n||(n=new Ot("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||Bt(n,"https"),qt(n)),function(e,t){var n=new Xe;if(y.Image){var r=new Image;r.onload=S(xn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=S(xn,n,r,"TestLoadImage: error",!1,t),r.onabort=S(xn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=S(xn,n,r,"TestLoadImage: timeout",!1,t),y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else it(2);e.H=0,e.h&&e.h.Ca(t),rr(e),Wn(e)}function rr(e){if(e.H=0,e.pa=[],e.h){var t=fn(e.i);0==t.length&&0==e.j.length||(R(e.pa,t),R(e.pa,e.j),e.i.i.length=0,P(e.j),e.j.length=0),e.h.Ba()}}function sr(e,t,n){var r=n instanceof Ot?Ft(n):new Ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ut(r,r.o);else{var s=y.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new Ot(null);r&&Bt(o,r),t&&(o.g=t),s&&Ut(o,s),n&&(o.h=n),r=o}return n=e.D,t=e.Ga,n&&t&&Vt(r,n,t),Vt(r,"VER",e.ua),Kn(e,r),r}function or(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ka&&!e.ya?new An(new bn({rb:!0})):new An(e.ya)).Ra(e.J),t}function ir(){}function ar(){if(q&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function lr(e,t){Ce.call(this),this.g=new zn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Fa&&(e?e["X-WebChannel-Client-Profile"]=t.Fa:e={"X-WebChannel-Client-Profile":t.Fa}),this.g.W=e,(e=t&&t.fc)&&!L(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!L(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dr(this)}function cr(e){gt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ur(){yt.call(this),this.status=1}function dr(e){this.g=e}function hr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function mr(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var o=e.g[3],i=t+(o^n&(s^o))+r[0]+3614090360&4294967295;i=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=(n=(s=(o=(t=n+(i<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(o^n&(s^o))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=o+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^o&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^o&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=o+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(o^t&(s^o))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^o)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^o)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=o+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(o^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((o=(t=n+((i=t+(s^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=o+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=o+((i=s+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+o&4294967295}function pr(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var o=0|e[s];r&&o==t||(n[s]=o,r=!1)}this.g=n}(t=An.prototype).Ra=function(e){this.N=e},t.ja=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pt.g(),this.C=this.u?ht(this.u):ht(pt),this.g.onreadystatechange=C(this.Oa,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(a){return void Tn(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(var i=(o=s(r.keys())).next();!i.done;i=o.next())i=i.value,n.set(i,r.get(i))}for(r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),o=y.FormData&&e instanceof y.FormData,!(0<=T(In,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r=(t=s(n)).next();!r.done;r=t.next())r=(n=s(r.value)).next().value,n=n.next().value,this.g.setRequestHeader(r,n);this.L&&(this.g.responseType=this.L),"withCredentials"in this.g&&this.g.withCredentials!==this.N&&(this.g.withCredentials=this.N);try{Mn(this),0<this.B&&((this.M=function(e){return q&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=C(this.xa,this)):this.A=qe(this.xa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Tn(this,a)}},t.xa=function(){"undefined"!=typeof g&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Se(this,"timeout"),this.abort(8))},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Se(this,"complete"),Se(this,"abort"),Dn(this))},t.O=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dn(this,!0)),An.Z.O.call(this)},t.Oa=function(){this.s||(this.G||this.v||this.l?Rn(this):this.nb())},t.nb=function(){Rn(this)},t.isActive=function(){return!!this.g},t.fa=function(){try{return 2<Ln(this)?this.g.status:-1}catch(ln){return-1}},t.ma=function(){try{return this.g?this.g.responseText:""}catch(ln){return""}},t.Za=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Sn(t)}},t.La=function(){return this.m},t.Va=function(){return"string"===typeof this.j?this.j:String(this.j)},(t=zn.prototype).ua=8,t.H=1,t.Qa=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.Y=Math.floor(1e5*Math.random()),e=this.Y++;var t,n=new xt(this,this.l,e),r=this.s;if(this.W&&(r?ce(r=ae(r),this.W):r=this.W),null!==this.o||this.P||(n.I=r,r=null),this.R)e:{for(var s=t=0;s<this.j.length;s++){var o=this.j[s];if(void 0===(o="__data__"in o.map&&"string"===typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=s;break e}if(4096===t||s===this.j.length-1){t=s+1;break e}}t=1e3}else t=1e3;t=Yn(this,n,t),Vt(s=Ft(this.I),"RID",e),Vt(s,"CVER",22),this.D&&Vt(s,"X-HTTP-Session-Id",this.D),Kn(this,s),r&&(this.P?t="headers="+encodeURIComponent(String(Fn(r)))+"&"+t:this.o&&Bn(s,this.o,r)),mn(this.i,n),this.fb&&Vt(s,"TYPE","init"),this.R?(Vt(s,"$req",t),Vt(s,"SID","null"),n.ca=!0,kt(n,s,null)):kt(n,s,t),this.H=2}}else 3==this.H&&(e?Gn(this,e):0==this.j.length||un(this.i)||Gn(this))},t.Pa=function(){if(this.u=null,Xn(this),this.ea&&!(this.N||null==this.g||0>=this.T)){var e=2*this.T;this.l.info("BP detection timer enabled: "+e),this.B=lt(C(this.mb,this),e)}},t.mb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.N=!0,it(10),qn(this),Xn(this))},t.lb=function(){null!=this.v&&(this.v=null,qn(this),$n(this),it(19))},t.sb=function(e){e?(this.l.info("Successfully pinged google.com"),it(2)):(this.l.info("Failed to ping google.com"),it(1))},t.isActive=function(){return!!this.h&&this.h.isActive(this)},(t=ir.prototype).Ea=function(){},t.Da=function(){},t.Ca=function(){},t.Ba=function(){},t.isActive=function(){return!0},t.Ya=function(){},ar.prototype.g=function(e,t){return new lr(e,t)},A(lr,Ce),lr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;it(0),e.aa=t,e.qa=n||{},e.G=e.ca,e.I=sr(e,null,e.aa),Hn(e)},lr.prototype.close=function(){Vn(this.g)},lr.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ee(e),e=n);t.j.push(new on(t.ib++,e)),3==t.H&&Hn(t)},lr.prototype.O=function(){this.g.h=null,delete this.j,Vn(this.g),delete this.g,lr.Z.O.call(this)},A(cr,gt),A(ur,yt),A(dr,ir),dr.prototype.Ea=function(){Se(this.g,"a")},dr.prototype.Da=function(e){Se(this.g,new cr(e))},dr.prototype.Ca=function(e){Se(this.g,new ur(e))},dr.prototype.Ba=function(){Se(this.g,"b")},A(hr,(function(){this.blockSize=-1})),hr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hr.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,o=0;o<t;){if(0==s)for(;o<=n;)mr(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){mr(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){mr(this,r),s=0;break}}this.h=s,this.i+=t},hr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var fr={};function gr(e){return-128<=e&&128>e?function(e,t){var n=fr;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new pr([0|e],0>e?-1:0)})):new pr([0|e],0>e?-1:0)}function yr(e){if(isNaN(e)||!isFinite(e))return xr;if(0>e)return kr(yr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=vr;return new pr(t,0)}var vr=4294967296,xr=gr(0),br=gr(1),wr=gr(16777216);function Nr(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function jr(e){return-1==e.h}function kr(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new pr(n,~e.h).add(br)}function Cr(e,t){return e.add(kr(t))}function Sr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ar(e,t){this.g=e,this.h=t}function Er(e,t){if(Nr(t))throw Error("division by zero");if(Nr(e))return new Ar(xr,xr);if(jr(e))return t=Er(kr(e),t),new Ar(kr(t.g),kr(t.h));if(jr(t))return t=Er(e,kr(t)),new Ar(kr(t.g),t.h);if(30<e.g.length){if(jr(e)||jr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=br,r=t;0>=r.$(e);)n=_r(n),r=_r(r);var s=Ir(n,1),o=Ir(r,1);for(r=Ir(r,2),n=Ir(n,2);!Nr(r);){var i=o.add(r);0>=i.$(e)&&(s=s.add(n),o=i),r=Ir(r,1),n=Ir(n,1)}return t=Cr(e,s.S(t)),new Ar(s,t)}for(s=xr;0<=e.$(t);){for(n=Math.max(1,Math.floor(e.ga()/t.ga())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),i=(o=yr(n)).S(t);jr(i)||0<i.$(e);)i=(o=yr(n-=r)).S(t);Nr(o)&&(o=br),s=s.add(o),e=Cr(e,i)}return new Ar(s,e)}function _r(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.F(r)<<1|e.F(r-1)>>>31;return new pr(n,e.h)}function Ir(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.F(o+n)>>>t|e.F(o+n+1)<<32-t:e.F(o+n);return new pr(s,e.h)}(t=pr.prototype).ga=function(){if(jr(this))return-kr(this).ga();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.F(n);e+=(0<=r?r:vr+r)*t,t*=vr}return e},t.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Nr(this))return"0";if(jr(this))return"-"+kr(this).toString(e);for(var t=yr(Math.pow(e,6)),n=this,r="";;){var s=Er(n,t).g,o=((0<(n=Cr(n,s.S(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Nr(n=s))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},t.F=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},t.$=function(e){return jr(e=Cr(this,e))?-1:Nr(e)?0:1},t.abs=function(){return jr(this)?kr(this):this},t.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.F(s))+(65535&e.F(s)),i=(o>>>16)+(this.F(s)>>>16)+(e.F(s)>>>16);r=i>>>16,o&=65535,i&=65535,n[s]=i<<16|o}return new pr(n,-2147483648&n[n.length-1]?-1:0)},t.S=function(e){if(Nr(this)||Nr(e))return xr;if(jr(this))return jr(e)?kr(this).S(kr(e)):kr(kr(this).S(e));if(jr(e))return kr(this.S(kr(e)));if(0>this.$(wr)&&0>e.$(wr))return yr(this.ga()*e.ga());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var o=this.F(r)>>>16,i=65535&this.F(r),a=e.F(s)>>>16,l=65535&e.F(s);n[2*r+2*s]+=i*l,Sr(n,2*r+2*s),n[2*r+2*s+1]+=o*l,Sr(n,2*r+2*s+1),n[2*r+2*s+1]+=i*a,Sr(n,2*r+2*s+1),n[2*r+2*s+2]+=o*a,Sr(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new pr(n,0)},t.jb=function(e){return Er(this,e).h},t.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)&e.F(r);return new pr(n,this.h&e.h)},t.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)|e.F(r);return new pr(n,this.h|e.h)},t.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)^e.F(r);return new pr(n,this.h^e.h)},ar.prototype.createWebChannel=ar.prototype.g,lr.prototype.send=lr.prototype.u,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,ut.COMPLETE="complete",mt.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",Ce.prototype.listen=Ce.prototype.P,An.prototype.listenOnce=An.prototype.R,An.prototype.getLastError=An.prototype.Va,An.prototype.getLastErrorCode=An.prototype.La,An.prototype.getStatus=An.prototype.fa,An.prototype.getResponseJson=An.prototype.Za,An.prototype.getResponseText=An.prototype.ma,An.prototype.send=An.prototype.ja,An.prototype.setWithCredentials=An.prototype.Ra,hr.prototype.digest=hr.prototype.l,hr.prototype.reset=hr.prototype.reset,hr.prototype.update=hr.prototype.j,pr.prototype.add=pr.prototype.add,pr.prototype.multiply=pr.prototype.S,pr.prototype.modulo=pr.prototype.jb,pr.prototype.compare=pr.prototype.$,pr.prototype.toNumber=pr.prototype.ga,pr.prototype.toString=pr.prototype.toString,pr.prototype.getBits=pr.prototype.F,pr.fromNumber=yr,pr.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return kr(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=yr(Math.pow(n,8)),s=xr,o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+i),n);8>i?(i=yr(Math.pow(n,i)),s=s.S(i).add(yr(a))):s=(s=s.S(r)).add(yr(a))}return s},e.exports.createWebChannelTransport=function(){return new ar},e.exports.getStatEventTarget=function(){return nt()},e.exports.ErrorCode=ct,e.exports.EventType=ut,e.exports.Event=et,e.exports.Stat={Ab:0,Db:1,Eb:2,Xb:3,bc:4,Zb:5,$b:6,Yb:7,Wb:8,ac:9,PROXY:10,NOPROXY:11,Ub:12,Qb:13,Rb:14,Pb:15,Sb:16,Tb:17,wb:18,vb:19,xb:20},e.exports.FetchXmlHttpFactory=bn,e.exports.WebChannel=mt,e.exports.XhrIo=An,e.exports.Md5=hr,e.exports.Integer=pr}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},7511:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5097),s=n(2045),o=n(1042),i=n(1494),a=n(7467);const l="@firebase/firestore";class c{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}c.UNAUTHENTICATED=new c(null),c.GOOGLE_CREDENTIALS=new c("google-credentials-uid"),c.FIRST_PARTY=new c("first-party-uid"),c.MOCK_USER=new c("mock-user");let u="9.23.0";const d=new o.Logger("@firebase/firestore");function h(){return d.logLevel}function m(e){if(d.logLevel<=o.LogLevel.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(g);d.debug("Firestore (".concat(u,"): ").concat(e),...s)}}function p(e){if(d.logLevel<=o.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(g);d.error("Firestore (".concat(u,"): ").concat(e),...s)}}function f(e){if(d.logLevel<=o.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(g);d.warn("Firestore (".concat(u,"): ").concat(e),...s)}}function g(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(u,") INTERNAL ASSERTION FAILED: ")+e;throw p(t),new Error(t)}function v(e,t){e||y()}function x(e,t){return e}const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class w extends i.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class N{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class j{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(c.UNAUTHENTICATED)))}shutdown(){}}class C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S{constructor(e){this.t=e,this.currentUser=c.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new N;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new N,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{m("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(m("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new N)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(m("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(v("string"==typeof t.accessToken),new j(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return v(null===e||"string"==typeof e),new c(e)}}class A{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=c.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class E{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new A(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(c.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&m("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,m("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{m("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):m("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(v("string"==typeof e.token),this.T=e.token,new _(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function T(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class P{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=T(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function R(e,t){return e<t?-1:e>t?1:0}function D(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function M(e){return e+"\0"}class L{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return L.fromMillis(Date.now())}static fromDate(e){return L.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new L(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class O{constructor(e){this.timestamp=e}static fromTimestamp(e){return new O(e)}static min(){return new O(new L(0,0))}static max(){return new O(new L(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class F{constructor(e,t,n){void 0===t?t=0:t>e.length&&y(),void 0===n?n=e.length-t:n>e.length-t&&y(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===F.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof F?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class B extends F{construct(e,t,n){return new B(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new w(b.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter((e=>e.length>0)))}return new B(e)}static emptyPath(){return new B([])}}const U=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class z extends F{construct(e,t,n){return new z(e,t,n)}static isValidIdentifier(e){return U.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),z.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new z(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new w(b.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new w(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new w(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(s(),r++)}if(s(),o)throw new w(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new z(t)}static emptyPath(){return new z([])}}class V{constructor(e){this.path=e}static fromPath(e){return new V(B.fromString(e))}static fromName(e){return new V(B.fromString(e).popFirst(5))}static empty(){return new V(B.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===B.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return B.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new B(e.slice()))}}class q{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function W(e){return e.fields.find((e=>2===e.kind))}function H(e){return e.fields.filter((e=>2!==e.kind))}function G(e,t){let n=R(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=Y(e.fields[r],t.fields[r]),0!==n)return n;return R(e.fields.length,t.fields.length)}q.UNKNOWN_ID=-1;class K{constructor(e,t){this.fieldPath=e,this.kind=t}}function Y(e,t){const n=z.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:R(e.kind,t.kind)}class Q{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Q(0,X.min())}}function $(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=O.fromTimestamp(1e9===r?new L(n+1,0):new L(n,r));return new X(s,V.empty(),t)}function J(e){return new X(e.readTime,e.key,-1)}class X{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new X(O.min(),V.empty(),-1)}static max(){return new X(O.max(),V.empty(),-1)}}function Z(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=V.comparator(e.documentKey,t.documentKey),0!==n?n:R(e.largestBatchId,t.largestBatchId))}const ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class te{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ne(e){if(e.code!==b.FAILED_PRECONDITION||e.message!==ee)throw e;m("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(e){return re.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,n)=>{t(e)}))}static reject(e){return new re(((t,n)=>{n(e)}))}static waitFor(e){return new re(((t,n)=>{let r=0,s=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++s,o&&s===r&&t()}),(e=>n(e)))})),o=!0,s===r&&t()}))}static or(e){let t=re.resolve(!1);for(const n of e)t=t.next((e=>e?re.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new re(((n,r)=>{const s=e.length,o=new Array(s);let i=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++i,i===s&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new re(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}class se{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new N,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ae(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=he(t.target.error);this.v.reject(new ae(e,n))}}static open(e,t,n,r){try{return new se(t,e.transaction(r,n))}catch(e){throw new ae(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(m("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ce(t)}}class oe{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===oe.S(i.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return m("SimpleDb","Removing database:",e),ue(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!i.isIndexedDBAvailable())return!1;if(oe.C())return!0;const e=i.getUA(),t=oe.S(e),n=0<t&&t<10,r=oe.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(m("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ae(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new w(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new w(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ae(e,r))},r.onupgradeneeded=e=>{m("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{m("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.$(e);const t=se.open(this.db,e,s?"readonly":"readwrite",n),o=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),re.reject(e)))).toPromise();return o.catch((()=>{})),await t.R,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(m("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ie{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ue(this.L.delete())}}class ae extends w{constructor(e,t){super(b.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function le(e){return"IndexedDbTransactionError"===e.name}class ce{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(m("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(m("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ue(n)}add(e){return m("SimpleDb","ADD",this.store.name,e,e),ue(this.store.add(e))}get(e){return ue(this.store.get(e)).next((t=>(void 0===t&&(t=null),m("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return m("SimpleDb","DELETE",this.store.name,e),ue(this.store.delete(e))}count(){return m("SimpleDb","COUNT",this.store.name),ue(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new re(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new re(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){m("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new re(((n,r)=>{t.onerror=e=>{const t=he(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new re(((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const o=new ie(s),i=t(s.primaryKey,s.value,o);if(i instanceof re){const e=i.catch((e=>(o.done(),re.reject(e))));n.push(e)}o.isDone?r():null===o.K?s.continue():s.continue(o.K)}})).next((()=>re.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ue(e){return new re(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=he(e.target.error);n(t)}}))}let de=!1;function he(e){const t=oe.S(i.getUA());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new w("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return de||(de=!0,setTimeout((()=>{throw e}),0)),e}}return e}class me{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){m("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{m("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){le(e)?m("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await ne(e)}await this.et(6e4)}))}}class pe{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,s=!0;return re.doWhile((()=>!0===s&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return m("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));s=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.rt(r,n))).next((n=>(m("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>s.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=J(t);Z(r,n)>0&&(n=r)})),new X(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class fe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function ge(e){return null==e}function ye(e){return 0===e&&1/e==-1/0}function ve(e){return"number"==typeof e&&Number.isInteger(e)&&!ye(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function xe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=we(t)),t=be(e.get(n),t);return we(t)}function be(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function we(e){return e+"\x01\x01"}function Ne(e){const t=e.length;if(v(t>=2),2===t)return v("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),B.emptyPath();const n=t-2,r=[];let s="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&y(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let i;0===s.length?i=n:(s+=n,i=s,s=""),r.push(i);break;case"\x10":s+=e.substring(o,t),s+="\0";break;case"\x11":s+=e.substring(o,t+1);break;default:y()}o=t+2}return new B(r)}fe.ct=-1;const je=["userId","batchId"];function ke(e,t){return[e,xe(t)]}function Ce(e,t,n){return[e,xe(t),n]}const Se={},Ae=["prefixPath","collectionGroup","readTime","documentId"],Ee=["prefixPath","collectionGroup","documentId"],_e=["collectionGroup","readTime","prefixPath","documentId"],Ie=["canonicalId","targetId"],Te=["targetId","path"],Pe=["path","targetId"],Re=["collectionId","parent"],De=["indexId","uid"],Me=["uid","sequenceNumber"],Le=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Oe=["indexId","uid","orderedDocumentKey"],Fe=["userId","collectionPath","documentId"],Be=["userId","collectionPath","largestBatchId"],Ue=["userId","collectionGroup","largestBatchId"],ze=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ve=[...ze,"documentOverlays"],qe=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],We=qe,He=[...We,"indexConfiguration","indexState","indexEntries"];class Ge extends te{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ke(e,t){const n=x(e);return oe.M(n.ht,t)}function Ye(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qe(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Je{constructor(e,t){this.comparator=e,this.root=t||Ze.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xe(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xe(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xe(this.root,e,this.comparator,!0)}}class Xe{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ze.RED,this.left=null!=r?r:Ze.EMPTY,this.right=null!=s?s:Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ze(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ze.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw y();if(this.right.isRed())throw y();const e=this.left.check();if(e!==this.right.check())throw y();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1,Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw y()}get value(){throw y()}get color(){throw y()}get left(){throw y()}get right(){throw y()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ze(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tt(this.data.getIterator())}getIteratorFrom(e){return new tt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof et))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class tt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nt(e){return e.hasNext()?e.getNext():void 0}class rt{constructor(e){this.fields=e,e.sort(z.comparator)}static empty(){return new rt([])}unionWith(e){let t=new et(z.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new rt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return D(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class st extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new st("Invalid base64 string: "+e):e}}(e);return new ot(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const it=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function at(e){if(v(!!e),"string"==typeof e){let t=0;const n=it.exec(e);if(v(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lt(e.seconds),nanos:lt(e.nanos)}}function lt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ct(e){return"string"==typeof e?ot.fromBase64String(e):ot.fromUint8Array(e)}function ut(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dt(e){const t=e.mapValue.fields.__previous_value__;return ut(t)?dt(t):t}function ht(e){const t=at(e.mapValue.fields.__local_write_time__.timestampValue);return new L(t.seconds,t.nanos)}class mt{constructor(e,t,n,r,s,o,i,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=i,this.longPollingOptions=a,this.useFetchStreams=l}}class pt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pt&&e.projectId===this.projectId&&e.database===this.database}}const ft={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gt={nullValue:"NULL_VALUE"};function yt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ut(e)?4:Pt(e)?9007199254740991:10:y()}function vt(e,t){if(e===t)return!0;const n=yt(e);if(n!==yt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ht(e).isEqual(ht(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=at(e.timestampValue),r=at(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ct(e.bytesValue).isEqual(ct(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lt(e.geoPointValue.latitude)===lt(t.geoPointValue.latitude)&&lt(e.geoPointValue.longitude)===lt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lt(e.integerValue)===lt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lt(e.doubleValue),r=lt(t.doubleValue);return n===r?ye(n)===ye(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return D(e.arrayValue.values||[],t.arrayValue.values||[],vt);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ye(n)!==Ye(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!vt(n[s],r[s])))return!1;return!0}(e,t);default:return y()}}function xt(e,t){return void 0!==(e.values||[]).find((e=>vt(e,t)))}function bt(e,t){if(e===t)return 0;const n=yt(e),r=yt(t);if(n!==r)return R(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return R(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lt(e.integerValue||e.doubleValue),r=lt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wt(e.timestampValue,t.timestampValue);case 4:return wt(ht(e),ht(t));case 5:return R(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ct(e),r=ct(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=R(n[s],r[s]);if(0!==e)return e}return R(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=R(lt(e.latitude),lt(t.latitude));return 0!==n?n:R(lt(e.longitude),lt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=bt(n[s],r[s]);if(e)return e}return R(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ft.mapValue&&t===ft.mapValue)return 0;if(e===ft.mapValue)return 1;if(t===ft.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},o=Object.keys(s);r.sort(),o.sort();for(let i=0;i<r.length&&i<o.length;++i){const e=R(r[i],o[i]);if(0!==e)return e;const t=bt(n[r[i]],s[o[i]]);if(0!==t)return t}return R(r.length,o.length)}(e.mapValue,t.mapValue);default:throw y()}}function wt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return R(e,t);const n=at(e),r=at(t),s=R(n.seconds,r.seconds);return 0!==s?s:R(n.nanos,r.nanos)}function Nt(e){return jt(e)}function jt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=at(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ct(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,V.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(jt(e.fields[s]));return n+"}"}(e.mapValue):y();var t,n}function kt(e){switch(yt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=dt(e);return t?16+kt(t):16;case 5:return 2*e.stringValue.length;case 6:return ct(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce(((e,t)=>e+kt(t)),0);case 10:return function(e){let t=0;return Qe(e.fields,((e,n)=>{t+=e.length+kt(n)})),t}(e.mapValue);default:throw y()}}function Ct(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function St(e){return!!e&&"integerValue"in e}function At(e){return!!e&&"arrayValue"in e}function Et(e){return!!e&&"nullValue"in e}function _t(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function It(e){return!!e&&"mapValue"in e}function Tt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qe(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Tt(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Tt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rt(e){return"nullValue"in e?gt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ct(pt.empty(),V.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:y()}function Dt(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ct(pt.empty(),V.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ft:y()}function Mt(e,t){const n=bt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Lt(e,t){const n=bt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!It(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tt(t)}setAll(e){let t=z.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Tt(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());It(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];It(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qe(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ot(Tt(this.value))}}function Ft(e){const t=[];return Qe(e.fields,((e,n)=>{const r=new z([e]);if(It(n)){const e=Ft(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new rt(t)}class Bt{constructor(e,t,n,r,s,o,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=i}static newInvalidDocument(e){return new Bt(e,0,O.min(),O.min(),O.min(),Ot.empty(),0)}static newFoundDocument(e,t,n,r){return new Bt(e,1,t,O.min(),n,r,0)}static newNoDocument(e,t){return new Bt(e,2,t,O.min(),O.min(),Ot.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,O.min(),O.min(),Ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(O.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=O.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ut{constructor(e,t){this.position=e,this.inclusive=t}}function zt(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const o=t[s],i=e.position[s];if(r=o.field.isKeyField()?V.comparator(V.fromName(i.referenceValue),n.key):bt(i,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Vt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vt(e.position[n],t.position[n]))return!1;return!0}class qt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Wt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ht{}class Gt extends Ht{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nn(e,t,n):"array-contains"===t?new an(e,n):"in"===t?new ln(e,n):"not-in"===t?new cn(e,n):"array-contains-any"===t?new un(e,n):new Gt(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new rn(e,n):new sn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bt(t,this.value)):null!==t&&yt(this.value)===yt(t)&&this.matchesComparison(bt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Kt extends Ht{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Kt(e,t)}matches(e){return Yt(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Yt(e){return"and"===e.op}function Qt(e){return"or"===e.op}function $t(e){return Jt(e)&&Yt(e)}function Jt(e){for(const t of e.filters)if(t instanceof Kt)return!1;return!0}function Xt(e){if(e instanceof Gt)return e.field.canonicalString()+e.op.toString()+Nt(e.value);if($t(e))return e.filters.map((e=>Xt(e))).join(",");{const t=e.filters.map((e=>Xt(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Zt(e,t){return e instanceof Gt?function(e,t){return t instanceof Gt&&e.op===t.op&&e.field.isEqual(t.field)&&vt(e.value,t.value)}(e,t):e instanceof Kt?function(e,t){return t instanceof Kt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Zt(n,t.filters[r])),!0)}(e,t):void y()}function en(e,t){const n=e.filters.concat(t);return Kt.create(n,e.op)}function tn(e){return e instanceof Gt?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Nt(e.value))}(e):e instanceof Kt?function(e){return e.op.toString()+" {"+e.getFilters().map(tn).join(" ,")+"}"}(e):"Filter"}class nn extends Gt{constructor(e,t,n){super(e,t,n),this.key=V.fromName(n.referenceValue)}matches(e){const t=V.comparator(e.key,this.key);return this.matchesComparison(t)}}class rn extends Gt{constructor(e,t){super(e,"in",t),this.keys=on("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sn extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=on("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function on(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>V.fromName(e.referenceValue)))}class an extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return At(t)&&xt(t.arrayValue,this.value)}}class ln extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xt(this.value.arrayValue,t)}}class cn extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xt(this.value.arrayValue,t)}}class un extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!At(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>xt(this.value.arrayValue,e)))}}class dn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=i,this.dt=null}}function hn(e){return new dn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function mn(e){const t=x(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Xt(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ge(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Nt(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Nt(e))).join(",")),t.dt=e}return t.dt}function pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Wt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Zt(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vt(e.startAt,t.startAt)&&Vt(e.endAt,t.endAt)}function fn(e){return V.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gn(e,t){return e.filters.filter((e=>e instanceof Gt&&e.field.isEqual(t)))}function yn(e,t,n){let r=gt,s=!0;for(const o of gn(e,t)){let e=gt,t=!0;switch(o.op){case"<":case"<=":e=Rt(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=gt}Mt({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Mt({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function vn(e,t,n){let r=ft,s=!0;for(const o of gn(e,t)){let e=ft,t=!0;switch(o.op){case">=":case">":e=Dt(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=ft}Lt({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Lt({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class xn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=i,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function bn(e,t,n,r,s,o,i,a){return new xn(e,t,n,r,s,o,i,a)}function wn(e){return new xn(e)}function Nn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function jn(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kn(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Cn(e){return null!==e.collectionGroup}function Sn(e){const t=x(e);if(null===t.wt){t.wt=[];const e=kn(t),n=jn(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new qt(e)),t.wt.push(new qt(z.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new qt(z.keyField(),e))}}}return t.wt}function An(e){const t=x(e);if(!t._t)if("F"===t.limitType)t._t=hn(t.path,t.collectionGroup,Sn(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Sn(t)){const t="desc"===s.dir?"asc":"desc";e.push(new qt(s.field,t))}const n=t.endAt?new Ut(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ut(t.startAt.position,t.startAt.inclusive):null;t._t=hn(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function En(e,t){t.getFirstInequalityField(),kn(e);const n=e.filters.concat([t]);return new xn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _n(e,t,n){return new xn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function In(e,t){return pn(An(e),An(t))&&e.limitType===t.limitType}function Tn(e){return"".concat(mn(An(e)),"|lt:").concat(e.limitType)}function Pn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>tn(e))).join(", "),"]")),ge(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Nt(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Nt(e))).join(",")),"Target(".concat(t,")")}(An(e)),"; limitType=").concat(e.limitType,")")}function Rn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):V.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Sn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=zt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Sn(e),t))&&!(e.endAt&&!function(e,t,n){const r=zt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Sn(e),t))}(e,t)}function Dn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mn(e){return(t,n)=>{let r=!1;for(const s of Sn(e)){const e=Ln(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ln(e,t,n){const r=e.field.isKeyField()?V.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?bt(r,s):y()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}class On{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qe(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return $e(this.inner)}size(){return this.innerSize}}const Fn=new Je(V.comparator);function Bn(){return Fn}const Un=new Je(V.comparator);function zn(){let e=Un;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Vn(e){let t=Un;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function qn(){return Hn()}function Wn(){return Hn()}function Hn(){return new On((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Gn=new Je(V.comparator),Kn=new et(V.comparator);function Yn(){let e=Kn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Qn=new et(R);function $n(){return Qn}function Jn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ye(t)?"-0":t}}function Xn(e){return{integerValue:""+e}}function Zn(e,t){return ve(t)?Xn(t):Jn(e,t)}class er{constructor(){this._=void 0}}function tr(e,t,n){return e instanceof sr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ut(t)&&(t=dt(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof or?ir(e,t):e instanceof ar?lr(e,t):function(e,t){const n=rr(e,t),r=ur(n)+ur(e.gt);return St(n)&&St(e.gt)?Xn(r):Jn(e.serializer,r)}(e,t)}function nr(e,t,n){return e instanceof or?ir(e,t):e instanceof ar?lr(e,t):n}function rr(e,t){return e instanceof cr?St(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class sr extends er{}class or extends er{constructor(e){super(),this.elements=e}}function ir(e,t){const n=dr(t);for(const r of e.elements)n.some((e=>vt(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ar extends er{constructor(e){super(),this.elements=e}}function lr(e,t){let n=dr(t);for(const r of e.elements)n=n.filter((e=>!vt(e,r)));return{arrayValue:{values:n}}}class cr extends er{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ur(e){return lt(e.integerValue||e.doubleValue)}function dr(e){return At(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class hr{constructor(e,t){this.field=e,this.transform=t}}class mr{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gr{}function yr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ar(e.key,pr.none()):new Nr(e.key,e.data,pr.none());{const n=e.data,r=Ot.empty();let s=new et(z.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new jr(e.key,r,new rt(s.toArray()),pr.none())}}function vr(e,t,n){e instanceof Nr?function(e,t,n){const r=e.value.clone(),s=Cr(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof jr?function(e,t,n){if(!fr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cr(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(kr(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xr(e,t,n,r){return e instanceof Nr?function(e,t,n,r){if(!fr(e.precondition,t))return n;const s=e.value.clone(),o=Sr(e.fieldTransforms,r,t);return s.setAll(o),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof jr?function(e,t,n,r){if(!fr(e.precondition,t))return n;const s=Sr(e.fieldTransforms,r,t),o=t.data;return o.setAll(kr(e)),o.setAll(s),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return fr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function br(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=rr(r.transform,e||null);null!=s&&(null===n&&(n=Ot.empty()),n.set(r.field,s))}return n||null}function wr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&D(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof or&&t instanceof or||e instanceof ar&&t instanceof ar?D(e.elements,t.elements,vt):e instanceof cr&&t instanceof cr?vt(e.gt,t.gt):e instanceof sr&&t instanceof sr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nr extends gr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jr extends gr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cr(e,t,n){const r=new Map;v(e.length===n.length);for(let s=0;s<n.length;s++){const o=e[s],i=o.transform,a=t.data.field(o.field);r.set(o.field,nr(i,a,n[s]))}return r}function Sr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,o=n.data.field(s.field);r.set(s.field,tr(e,o,t))}return r}class Ar extends gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Er extends gr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _r{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=xr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=xr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Wn();return this.mutations.forEach((r=>{const s=e.get(r.key),o=s.overlayedDocument;let i=this.applyToLocalView(o,s.mutatedFields);i=t.has(r.key)?null:i;const a=yr(o,i);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(O.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Yn())}isEqual(e){return this.batchId===e.batchId&&D(this.mutations,e.mutations,((e,t)=>wr(e,t)))&&D(this.baseMutations,e.baseMutations,((e,t)=>wr(e,t)))}}class Ir{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){v(e.mutations.length===n.length);let r=Gn;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new Ir(e,t,n,r)}}class Tr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Pr{constructor(e,t,n){this.alias=e,this.yt=t,this.fieldPath=n}}class Rr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dr,Mr;function Lr(e){switch(e){default:return y();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function Or(e){if(void 0===e)return p("GRPC error has no .code"),b.UNKNOWN;switch(e){case Dr.OK:return b.OK;case Dr.CANCELLED:return b.CANCELLED;case Dr.UNKNOWN:return b.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return b.INTERNAL;case Dr.UNAVAILABLE:return b.UNAVAILABLE;case Dr.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Dr.NOT_FOUND:return b.NOT_FOUND;case Dr.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Dr.ABORTED:return b.ABORTED;case Dr.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Dr.DATA_LOSS:return b.DATA_LOSS;default:return y()}}(Mr=Dr||(Dr={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";class Fr{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Br}static getOrCreateInstance(){return null===Br&&(Br=new Fr),Br}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Br=null;function Ur(){return new TextEncoder}const zr=new a.Integer([4294967295,4294967295],0);function Vr(e){const t=Ur().encode(e),n=new a.Md5;return n.update(t),new Uint8Array(n.digest())}function qr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new a.Integer([n,r],0),new a.Integer([s,o],0)]}class Wr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hr("Invalid padding: ".concat(t));if(n<0)throw new Hr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Hr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Hr("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=a.Integer.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(a.Integer.fromNumber(n)));return 1===r.compare(zr)&&(r=new a.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Vr(e),[n,r]=qr(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Wr(s,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.It)return;const t=Vr(e),[n,r]=qr(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gr{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Kr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gr(O.min(),r,new Je(R),Bn(),Yn())}}class Kr{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Kr(n,t,Yn(),Yn(),Yn())}}class Yr{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Qr{constructor(e,t){this.targetId=e,this.Vt=t}}class $r{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Jr{constructor(){this.St=0,this.Dt=es(),this.Ct=ot.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Yn(),t=Yn(),n=Yn();return this.Dt.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:y()}})),new Kr(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=es()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Xr{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Bn(),this.zt=Zr(),this.Wt=new Je(R)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:y()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const o=s.target;if(fn(o))if(0===r){const e=new V(o.path);this.Yt(n,e,Bt.newNoDocument(e,O.min()))}else v(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Fr.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,o,i,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(i=null===(o=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==i?i:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:i=0}=n;let a,l;try{a=ct(s).toUint8Array()}catch(e){if(e instanceof st)return f("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Wr(a,o,i)}catch(e){return f(e instanceof Hr?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const s=this.Gt.ue(),o="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());t.vt(o)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const s=this.se(r);if(s){if(n.current&&fn(s.target)){const t=new V(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Bt.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Yn();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Gr(e,t,this.Wt,this.jt,n);return this.jt=Bn(),this.zt=Zr(),this.Wt=new Je(R),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Jr,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new et(R),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Jr),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Zr(){return new Je(V.comparator)}function es(){return new Je(V.comparator)}const ts={asc:"ASCENDING",desc:"DESCENDING"},ns={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rs={and:"AND",or:"OR"};class ss{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function os(e,t){return e.useProto3Json||ge(t)?t:{value:t}}function is(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function as(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ls(e,t){return is(e,t.toTimestamp())}function cs(e){return v(!!e),O.fromTimestamp(function(e){const t=at(e);return new L(t.seconds,t.nanos)}(e))}function us(e,t){return function(e){return new B(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ds(e){const t=B.fromString(e);return v(Rs(t)),t}function hs(e,t){return us(e.databaseId,t.path)}function ms(e,t){const n=ds(t);if(n.get(1)!==e.databaseId.projectId)throw new w(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new w(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new V(ys(n))}function ps(e,t){return us(e.databaseId,t)}function fs(e){const t=ds(e);return 4===t.length?B.emptyPath():ys(t)}function gs(e){return new B(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ys(e){return v(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vs(e,t,n){return{name:hs(e,t),fields:n.value.mapValue.fields}}function xs(e,t,n){const r=ms(e,t.name),s=cs(t.updateTime),o=t.createTime?cs(t.createTime):O.min(),i=new Ot({mapValue:{fields:t.fields}}),a=Bt.newFoundDocument(r,s,o,i);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function bs(e,t){let n;if(t instanceof Nr)n={update:vs(e,t.key,t.value)};else if(t instanceof Ar)n={delete:hs(e,t.key)};else if(t instanceof jr)n={update:vs(e,t.key,t.data),updateMask:Ps(t.fieldMask)};else{if(!(t instanceof Er))return y();n={verify:hs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof sr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof or)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ar)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cr)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw y()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ls(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y()}(e,t.precondition)),n}function ws(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?pr.updateTime(cs(e.updateTime)):void 0!==e.exists?pr.exists(e.exists):pr.none()}(t.currentDocument):pr.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue),n=new sr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new or(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ar(e)}else"increment"in t?n=new cr(e,t.increment):y();const r=z.fromServerFormat(t.fieldPath);return new hr(r,n)}(e,t))):[];if(t.update){t.update.name;const s=ms(e,t.update.name),o=new Ot({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new rt(t.map((e=>z.fromServerFormat(e))))}(t.updateMask);return new jr(s,o,e,n,r)}return new Nr(s,o,n,r)}if(t.delete){const r=ms(e,t.delete);return new Ar(r,n)}if(t.verify){const r=ms(e,t.verify);return new Er(r,n)}return y()}function Ns(e,t){return{documents:[ps(e,t.path)]}}function js(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ps(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ps(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return Ts(Kt.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:_s(e.field),direction:Ss(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const i=os(e,t.limit);var a;return null!==i&&(n.structuredQuery.limit=i),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ks(e){let t=fs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){v(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Cs(e);return t instanceof Kt&&$t(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=n.orderBy.map((e=>function(e){return new qt(Is(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ge(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ut(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ut(n,t)}(n.endAt)),bn(t,s,i,o,a,"F",l,c)}function Cs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Is(e.unaryFilter.field);return Gt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Is(e.unaryFilter.field);return Gt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Is(e.unaryFilter.field);return Gt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Is(e.unaryFilter.field);return Gt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return y()}}(e):void 0!==e.fieldFilter?function(e){return Gt.create(Is(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Kt.create(e.compositeFilter.filters.map((e=>Cs(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return y()}}(e.compositeFilter.op))}(e):y()}function Ss(e){return ts[e]}function As(e){return ns[e]}function Es(e){return rs[e]}function _s(e){return{fieldPath:e.canonicalString()}}function Is(e){return z.fromServerFormat(e.fieldPath)}function Ts(e){return e instanceof Gt?function(e){if("=="===e.op){if(_t(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NAN"}};if(Et(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_t(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NOT_NAN"}};if(Et(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(e.field),op:As(e.op),value:e.value}}}(e):e instanceof Kt?function(e){const t=e.getFilters().map((e=>Ts(e)));return 1===t.length?t[0]:{compositeFilter:{op:Es(e.op),filters:t}}}(e):y()}function Ps(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Rs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ds{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:O.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ot.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=i,this.expectedCount=a}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ms{constructor(e){this.fe=e}}function Ls(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Os(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:hs(e,t.key),fields:t.data.value.mapValue.fields,updateTime:is(e,t.version.toTimestamp()),createTime:is(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fs(t.version)};else{if(!t.isUnknownDocument())return y();r.unknownDocument={path:n.path.toArray(),version:Fs(t.version)}}return r}function Os(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fs(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Bs(e){const t=new L(e.seconds,e.nanoseconds);return O.fromTimestamp(t)}function Us(e,t){const n=(t.baseMutations||[]).map((t=>ws(e.fe,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>ws(e.fe,t))),s=L.fromMillis(t.localWriteTimeMs);return new _r(t.batchId,s,n,r)}function zs(e){const t=Bs(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Bs(e.lastLimboFreeSnapshotVersion):O.min();let r;var s;return void 0!==e.query.documents?(v(1===(s=e.query).documents.length),r=An(wn(fs(s.documents[0])))):r=function(e){return An(ks(e))}(e.query),new Ds(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ot.fromBase64String(e.resumeToken))}function Vs(e,t){const n=Fs(t.snapshotVersion),r=Fs(t.lastLimboFreeSnapshotVersion);let s;s=fn(t.target)?Ns(e.fe,t.target):js(e.fe,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:mn(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function qs(e){const t=ks({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_n(t,t.limit,"L"):t}function Ws(e,t){return new Tr(t.largestBatchId,ws(e.fe,t.overlayMutation))}function Hs(e,t){const n=t.path.lastSegment();return[e,xe(t.path.popLast()),n]}function Gs(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fs(r.readTime),documentKey:xe(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ks{getBundleMetadata(e,t){return Ys(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Bs(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return Ys(e).put({bundleId:(n=t).id,createTime:Fs(cs(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Qs(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:qs(t.bundledQuery),readTime:Bs(t.readTime)};var t}))}saveNamedQuery(e,t){return Qs(e).put(function(e){return{name:e.name,readTime:Fs(cs(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ys(e){return Ke(e,"bundles")}function Qs(e){return Ke(e,"namedQueries")}class $s{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new $s(e,n)}getOverlay(e,t){return Js(e).get(Hs(this.userId,t)).next((e=>e?Ws(this.serializer,e):null))}getOverlays(e,t){const n=qn();return re.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,s)=>{const o=new Tr(t,s);r.push(this.we(e,o))})),re.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(xe(e.getCollectionPath()))));const s=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(Js(e).J("collectionPathOverlayIndex",r))})),re.waitFor(s)}getOverlaysForCollection(e,t,n){const r=qn(),s=xe(t),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Js(e).j("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Ws(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const s=qn();let o;const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Js(e).X({index:"collectionGroupOverlayIndex",range:i},((e,t,n)=>{const i=Ws(this.serializer,t);s.size()<r||i.largestBatchId===o?(s.set(i.getKey(),i),o=i.largestBatchId):n.done()})).next((()=>s))}we(e,t){return Js(e).put(function(e,t,n){const[r,s,o]=Hs(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:bs(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Js(e){return Ke(e,"documentOverlays")}class Xs{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(lt(e.integerValue));else if("doubleValue"in e){const n=lt(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),ye(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ct(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Pt(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):y()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),V.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Zs(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function eo(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Zs(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xs.Ve=new Xs;class to{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=eo(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=eo(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class no{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class ro{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class so{constructor(){this.je=new to,this.ze=new no(this.je),this.We=new ro(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class oo{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new oo(this.indexId,this.documentKey,this.arrayValue,n)}}function io(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ao(e.arrayValue,t.arrayValue),0!==n?n:(n=ao(e.directionalValue,t.directionalValue),0!==n?n:V.comparator(e.documentKey,t.documentKey)))}function ao(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class lo{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){v(e.collectionGroup===this.collectionId);const t=W(e);if(void 0!==t&&!this.en(t))return!1;const n=H(e);let r=new Set,s=0,o=0;for(;s<n.length&&this.en(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[s];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[o++],e))return!1}++s}for(;s<n.length;++s){const e=n[s];if(o>=this.Ye.length||!this.sn(this.Ye[o++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function co(e){var t,n;if(v(e instanceof Gt||e instanceof Kt),e instanceof Gt){if(e instanceof ln){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Gt.create(e.field,"==",t))))||[];return Kt.create(r,"or")}return e}const r=e.filters.map((e=>co(e)));return Kt.create(r,e.op)}function uo(e){if(0===e.getFilters().length)return[];const t=fo(co(e));return v(po(t)),ho(t)||mo(t)?[t]:t.getFilters()}function ho(e){return e instanceof Gt}function mo(e){return e instanceof Kt&&$t(e)}function po(e){return ho(e)||mo(e)||function(e){if(e instanceof Kt&&Qt(e)){for(const t of e.getFilters())if(!ho(t)&&!mo(t))return!1;return!0}return!1}(e)}function fo(e){if(v(e instanceof Gt||e instanceof Kt),e instanceof Gt)return e;if(1===e.filters.length)return fo(e.filters[0]);const t=e.filters.map((e=>fo(e)));let n=Kt.create(t,e.op);return n=vo(n),po(n)?n:(v(n instanceof Kt),v(Yt(n)),v(n.filters.length>1),n.filters.reduce(((e,t)=>go(e,t))))}function go(e,t){let n;return v(e instanceof Gt||e instanceof Kt),v(t instanceof Gt||t instanceof Kt),n=e instanceof Gt?t instanceof Gt?function(e,t){return Kt.create([e,t],"and")}(e,t):yo(e,t):t instanceof Gt?yo(t,e):function(e,t){if(v(e.filters.length>0&&t.filters.length>0),Yt(e)&&Yt(t))return en(e,t.getFilters());const n=Qt(e)?e:t,r=Qt(e)?t:e,s=n.filters.map((e=>go(e,r)));return Kt.create(s,"or")}(e,t),vo(n)}function yo(e,t){if(Yt(t))return en(t,e.getFilters());{const n=t.filters.map((t=>go(e,t)));return Kt.create(n,"or")}}function vo(e){if(v(e instanceof Gt||e instanceof Kt),e instanceof Gt)return e;const t=e.getFilters();if(1===t.length)return vo(t[0]);if(Jt(e))return e;const n=t.map((e=>vo(e))),r=[];return n.forEach((t=>{t instanceof Gt?r.push(t):t instanceof Kt&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Kt.create(r,e.op)}class xo{constructor(){this.rn=new bo}addToCollectionParentIndex(e,t){return this.rn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(X.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(X.min())}updateCollectionGroup(e,t,n){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class bo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new et(B.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new et(B.comparator)).toArray()}}const wo=new Uint8Array(0);class No{constructor(e,t){this.user=e,this.databaseId=t,this.on=new bo,this.un=new On((e=>mn(e)),((e,t)=>pn(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const s={collectionId:n,parent:xe(r)};return jo(e).put(s)}return re.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[M(t),""],!1,!0);return jo(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ne(r.parent))}return n}))}addFieldIndex(e,t){const n=Co(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=So(e);return s.next((e=>{n.put(Gs(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=Co(e),r=So(e),s=ko(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=ko(e);let r=!0;const s=new Map;return re.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),s.set(t,e)})))).next((()=>{if(r){let e=Yn();const r=[];return re.forEach(s,((s,o)=>{var i;m("IndexedDbIndexManager","Using index ".concat((i=s,"id=".concat(i.indexId,"|cg=").concat(i.collectionGroup,"|f=").concat(i.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(mn(t)));const a=function(e,t){const n=W(t);if(void 0===n)return null;for(const r of gn(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,s),l=function(e,t){const n=new Map;for(const r of H(t))for(const t of gn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,s),c=function(e,t){const n=[];let r=!0;for(const s of H(t)){const t=0===s.kind?yn(e,s.fieldPath,e.startAt):vn(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ut(n,r)}(o,s),u=function(e,t){const n=[];let r=!0;for(const s of H(t)){const t=0===s.kind?vn(e,s.fieldPath,e.endAt):yn(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ut(n,r)}(o,s),d=this.hn(s,o,c),h=this.hn(s,o,u),p=this.ln(s,o,l),f=this.fn(s.indexId,a,d,c.inclusive,h,u.inclusive,p);return re.forEach(f,(s=>n.H(s,t.limit).next((t=>{t.forEach((t=>{const n=V.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return re.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:uo(Kt.create(e.filters,"and")).map((t=>hn(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,s,o,i){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/l]):wo,d=this.wn(e,a,n[u%l],r),h=this._n(e,a,s[u%l],o),m=i.map((t=>this.wn(e,a,t,!0)));c.push(...this.createRange(d,h,m))}return c}wn(e,t,n,r){const s=new oo(e,V.empty(),t,n);return r?s:s.Je()}_n(e,t,n,r){const s=new oo(e,V.empty(),t,n);return r?s.Je():s}an(e,t){const n=new lo(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return re.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new et(z.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new so;for(const r of H(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.He(r.kind);Xs.Ve._e(e,s)}return n.Qe()}dn(e){const t=new so;return Xs.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new so;return Xs.Ve._e(Ct(this.databaseId,t),n.He(function(e){const t=H(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new so);let s=0;for(const o of H(e)){const e=n[s++];for(const n of r)if(this.yn(t,o.fieldPath)&&At(e))r=this.pn(r,o,e);else{const t=n.He(o.kind);Xs.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],s=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new so;n.seed(e.Qe()),Xs.Ve._e(o,n.He(t.kind)),s.push(n)}return s}yn(e,t){return!!e.filters.find((e=>e instanceof Gt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Co(e),r=So(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return re.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Q(t.sequenceNumber,new X(Bs(t.readTime),new V(Ne(t.documentKey)),t.largestBatchId)):Q.empty(),r=e.fields.map((e=>{let[t,n]=e;return new K(z.fromServerFormat(t),n)}));return new q(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:R(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Co(e),s=So(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>re.forEach(t,(t=>s.put(Gs(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return re.forEach(t,((t,r)=>{const s=n.get(t.collectionGroup);return(s?re.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next((s=>(n.set(t.collectionGroup,s),re.forEach(s,(n=>this.En(e,t,n).next((t=>{const s=this.An(r,n);return t.isEqual(s)?re.resolve():this.vn(e,r,n,t,s)})))))))}))}Rn(e,t,n,r){return ko(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return ko(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=ko(e);let s=new et(io);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{s=s.add(new oo(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>s))}An(e,t){let n=new et(io);const r=this.mn(t,e);if(null==r)return n;const s=W(t);if(null!=s){const o=e.data.field(s.fieldPath);if(At(o))for(const s of o.arrayValue.values||[])n=n.add(new oo(t.indexId,e.key,this.dn(s),r))}else n=n.add(new oo(t.indexId,e.key,wo,r));return n}vn(e,t,n,r,s){m("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,s){const o=e.getIterator(),i=t.getIterator();let a=nt(o),l=nt(i);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=nt(i)):t?(s(a),a=nt(o)):(a=nt(o),l=nt(i))}}(r,s,io,(r=>{o.push(this.Rn(e,t,n,r))}),(r=>{o.push(this.Pn(e,t,n,r))})),re.waitFor(o)}Tn(e){let t=1;return So(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>io(e,t))).filter(((e,t,n)=>!t||0!==io(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=io(o,e),s=io(o,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,wo,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,wo,[]];s.push(IDBKeyRange.bound(e,t))}return s}bn(e,t){return io(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ao)}getMinOffset(e,t){return re.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||y())))).next(Ao)}}function jo(e){return Ke(e,"collectionParents")}function ko(e){return Ke(e,"indexEntries")}function Co(e){return Ke(e,"indexConfiguration")}function So(e){return Ke(e,"indexState")}function Ao(e){v(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Z(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new X(t.readTime,t.documentKey,n)}const Eo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _o{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new _o(e,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Io(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),o=[],i=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:i},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{v(1===a)})));const c=[];for(const u of n.mutations){const e=Ce(t,u.key.path,n.batchId);o.push(s.delete(e)),c.push(u.key)}return re.waitFor(o).next((()=>c))}function To(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y();t=e.noDocument}return JSON.stringify(t).length}_o.DEFAULT_COLLECTION_PERCENTILE=10,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_o.DEFAULT=new _o(41943040,_o.DEFAULT_COLLECTION_PERCENTILE,_o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_o.DISABLED=new _o(-1,0,0);class Po{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){v(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Po(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Do(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const s=Mo(e),o=Do(e);return o.add({}).next((i=>{v("number"==typeof i);const a=new _r(i,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>bs(e.fe,t))),s=n.mutations.map((t=>bs(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,a),c=[];let u=new et(((e,t)=>R(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ce(this.userId,e.key.path,i);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(s.put(t,Se))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[i]=a.keys()})),re.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Do(e).get(t).next((e=>e?(v(e.userId===this.userId),Us(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?re.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Do(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(v(t.batchId>=n),s=Us(this.serializer,t)),r.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Do(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Do(e).j("userMutationsIndex",t).next((e=>e.map((e=>Us(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ke(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Mo(e).X({range:r},((n,r,o)=>{const[i,a,l]=n,c=Ne(a);if(i===this.userId&&t.path.isEqual(c))return Do(e).get(l).next((e=>{if(!e)throw y();v(e.userId===this.userId),s.push(Us(this.serializer,e))}));o.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new et(R);const r=[];return t.forEach((t=>{const s=ke(this.userId,t.path),o=IDBKeyRange.lowerBound(s),i=Mo(e).X({range:o},((e,r,s)=>{const[o,i,a]=e,l=Ne(i);o===this.userId&&t.path.isEqual(l)?n=n.add(a):s.done()}));r.push(i)})),re.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=ke(this.userId,n),o=IDBKeyRange.lowerBound(s);let i=new et(R);return Mo(e).X({range:o},((e,t,s)=>{const[o,a,l]=e,c=Ne(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(i=i.add(l)):s.done()})).next((()=>this.Dn(e,i)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Do(e).get(t).next((e=>{if(null===e)throw y();v(e.userId===this.userId),n.push(Us(this.serializer,e))})))})),re.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Io(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),re.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return re.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Mo(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ne(e[1]);r.push(t)}else n.done()})).next((()=>{v(0===r.length)}))}))}containsKey(e,t){return Ro(e,this.userId,t)}xn(e){return Lo(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ro(e,t,n){const r=ke(t,n.path),s=r[1],o=IDBKeyRange.lowerBound(r);let i=!1;return Mo(e).X({range:o,Y:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===s&&(i=!0),r.done()})).next((()=>i))}function Do(e){return Ke(e,"mutations")}function Mo(e){return Ke(e,"documentMutations")}function Lo(e){return Ke(e,"mutationQueues")}class Oo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Oo(0)}static Mn(){return new Oo(-1)}}class Fo{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new Oo(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>O.fromTimestamp(new L(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bo(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(v(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const s=[];return Bo(e).X(((o,i)=>{const a=zs(i);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))})).next((()=>re.waitFor(s))).next((()=>r))}forEachTarget(e,t){return Bo(e).X(((e,n)=>{const r=zs(n);t(r)}))}$n(e){return Uo(e).get("targetGlobalKey").next((e=>(v(null!==e),e)))}On(e,t){return Uo(e).put("targetGlobalKey",t)}Fn(e,t){return Bo(e).put(Vs(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=mn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Bo(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=zs(n);pn(t,o.target)&&(s=o,r.done())})).next((()=>s))}addMatchingKeys(e,t,n){const r=[],s=zo(e);return t.forEach((t=>{const o=xe(t.path);r.push(s.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),re.waitFor(r)}removeMatchingKeys(e,t,n){const r=zo(e);return re.forEach(t,(t=>{const s=xe(t.path);return re.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=zo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=zo(e);let s=Yn();return r.X({range:n,Y:!0},((e,t,n)=>{const r=Ne(e[1]),o=new V(r);s=s.add(o)})).next((()=>s))}containsKey(e,t){const n=xe(t.path),r=IDBKeyRange.bound([n],[M(n)],!1,!0);let s=0;return zo(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(s++,n.done())})).next((()=>s>0))}le(e,t){return Bo(e).get(t).next((e=>e?zs(e):null))}}function Bo(e){return Ke(e,"targets")}function Uo(e){return Ke(e,"targetGlobal")}function zo(e){return Ke(e,"targetDocuments")}function Vo(e,t){let[n,r]=e,[s,o]=t;const i=R(n,s);return 0===i?R(r,o):i}class qo{constructor(e){this.Ln=e,this.buffer=new et(Vo),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){m("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){le(e)?m("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ne(e)}await this.Qn(3e5)}))}}class Ho{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return re.resolve(fe.ct);const n=new qo(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Eo)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Eo):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,s,i,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),h()<=o.LogLevel.DEBUG&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(l-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Go(e,t){return new Ho(e,t)}class Ko{constructor(e,t){this.db=e,this.garbageCollector=Go(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Yo(e,n)}removeReference(e,t,n){return Yo(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Yo(e,t)}Xn(e,t){return function(e,t){let n=!1;return Lo(e).Z((r=>Ro(e,r,t).next((e=>(e&&(n=!0),re.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,((o,i)=>{if(i<=t){const t=this.Xn(e,o).next((t=>{if(!t)return s++,n.getEntry(e,o).next((()=>(n.removeEntry(o,O.min()),zo(e).delete([0,xe(o.path)]))))}));r.push(t)}})).next((()=>re.waitFor(r))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Yo(e,t)}Yn(e,t){const n=zo(e);let r,s=fe.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[o,i]=e,{path:a,sequenceNumber:l}=n;0===o?(s!==fe.ct&&t(new V(Ne(r)),s),s=l,r=a):s=fe.ct})).next((()=>{s!==fe.ct&&t(new V(Ne(r)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yo(e,t){return zo(e).put(function(e,t){return{targetId:0,path:xe(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Qo{constructor(){this.changes=new On((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $o{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ei(e).put(n)}removeEntry(e,t,n){return ei(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Os(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Bt.newInvalidDocument(t);return ei(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ti(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Bt.newInvalidDocument(t)};return ei(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ti(t))},((e,r)=>{n={document:this.ts(t,r),size:To(r)}})).next((()=>n))}getEntries(e,t){let n=Bn();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=Bn(),r=new Je(V.comparator);return this.ns(e,t,((e,t)=>{const s=this.ts(e,t);n=n.insert(e,s),r=r.insert(e,To(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return re.resolve();let r=new et(ri);t.forEach((e=>r=r.add(e)));const s=IDBKeyRange.bound(ti(r.first()),ti(r.last())),o=r.getIterator();let i=o.getNext();return ei(e).X({index:"documentKeyIndex",range:s},((e,t,r)=>{const s=V.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;i&&ri(i,s)<0;)n(i,null),i=o.getNext();i&&i.isEqual(s)&&(n(i,t),i=o.hasNext()?o.getNext():null),i?r.G(ti(i)):r.done()})).next((()=>{for(;i;)n(i,null),i=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Os(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ei(e).j(IDBKeyRange.bound(o,i,!0)).next((e=>{let n=Bn();for(const s of e){const e=this.ts(V.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(Rn(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let s=Bn();const o=ni(t,n),i=ni(t,X.max());return ei(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,i,!0)},((e,t,n)=>{const o=this.ts(V.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(o.key,o),s.size===r&&n.done()})).next((()=>s))}newChangeBuffer(e){return new Xo(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Zo(e).get("remoteDocumentGlobalKey").next((e=>(v(!!e),e)))}Zn(e,t){return Zo(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=xs(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=V.fromSegments(t.noDocument.path),r=Bs(t.noDocument.readTime);n=Bt.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return y();{const e=V.fromSegments(t.unknownDocument.path),r=Bs(t.unknownDocument.version);n=Bt.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new L(e[0],e[1]);return O.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(O.min()))return e}return Bt.newInvalidDocument(e)}}function Jo(e){return new $o(e)}class Xo extends Qo{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new On((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new et(((e,t)=>R(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((s,o)=>{const i=this.us.get(s);if(t.push(this.os.removeEntry(e,s,i.readTime)),o.isValidDocument()){const a=Ls(this.os.serializer,o);r=r.add(s.path.popLast());const l=To(a);n+=l-i.size,t.push(this.os.addEntry(e,s,a))}else if(n-=i.size,this.trackRemovals){const n=Ls(this.os.serializer,o.convertToNoDocument(O.min()));t.push(this.os.addEntry(e,s,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),re.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Zo(e){return Ke(e,"remoteDocumentGlobal")}function ei(e){return Ke(e,"remoteDocumentsV14")}function ti(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ni(e,t){const n=t.documentKey.path.toArray();return[e,Os(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ri(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(s=R(n[o],r[o]),s)return s;return s=R(n.length,r.length),s||(s=R(n[n.length-2],r[r.length-2]),s||R(n[n.length-1],r[r.length-1]))}class si{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oi{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&xr(n.mutation,e,rt.empty(),L.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Yn()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yn();const r=qn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=zn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=qn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Yn())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Bn();const o=Hn(),i=Hn();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof jr)?s=s.insert(t.key,t):void 0!==i?(o.set(t.key,i.mutation.getFieldMask()),xr(i.mutation,t,i.mutation.getFieldMask(),L.now())):o.set(t.key,rt.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new si(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=Hn();let r=new Je(((e,t)=>e-t)),s=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let i=n.get(e)||rt.empty();i=s.applyToLocalView(o,i),n.set(e,i);const a=(r.get(s.batchId)||Yn()).add(e);r=r.insert(s.batchId,a)}))})).next((()=>{const o=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),a=r.key,l=r.value,c=Wn();l.forEach((e=>{if(!s.has(e)){const r=yr(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return re.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return V.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):re.resolve(qn());let i=-1,a=s;return o.next((t=>re.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?re.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,a,t,Yn()))).next((e=>({batchId:i,changes:Vn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next((e=>{let t=zn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=zn();return this.indexManager.getCollectionParents(e,r).next((o=>re.forEach(o,(o=>{const i=function(e,t){return new xn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,i,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Bt.newInvalidDocument(r)))}));let n=zn();return e.forEach(((e,s)=>{const o=r.get(e);void 0!==o&&xr(o.mutation,s,rt.empty(),L.now()),Rn(t,s)&&(n=n.insert(e,s))})),n}))}}class ii{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return re.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:cs(n.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:qs(e.bundledQuery),readTime:cs(e.readTime)}}(t)),re.resolve()}}class ai{constructor(){this.overlays=new Je(V.comparator),this.ls=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=qn();return re.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),re.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),re.resolve()}getOverlaysForCollection(e,t,n){const r=qn(),s=t.length+1,o=new V(t.child("")),i=this.overlays.getIteratorFrom(o);for(;i.hasNext();){const e=i.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Je(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=qn(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=qn(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return re.resolve(i)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Tr(t,n));let s=this.ls.get(t);void 0===s&&(s=Yn(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class li{constructor(){this.fs=new et(ci.ds),this.ws=new et(ci._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new ci(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new ci(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new V(new B([])),n=new ci(t,e),r=new ci(t,e+1),s=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),s.push(e.key)})),s}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new V(new B([])),n=new ci(t,e),r=new ci(t,e+1);let s=Yn();return this.ws.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new ci(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ci{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return V.comparator(e.key,t.key)||R(e.As,t.As)}static _s(e,t){return R(e.As,t.As)||V.comparator(e.key,t.key)}}class ui{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new et(ci.ds)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _r(s,t,n,r);this.mutationQueue.push(o);for(const i of r)this.Rs=this.Rs.add(new ci(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,t){return re.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ci(t,0),r=new ci(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);s.push(t)})),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new et(R);return t.forEach((e=>{const t=new ci(e,0),r=new ci(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),re.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;V.isDocumentKey(s)||(s=s.child(""));const o=new ci(new V(s),0);let i=new et(R);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.As)),!0)}),o),re.resolve(this.Vs(i))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){v(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return re.forEach(t.mutations,(r=>{const s=new ci(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new ci(t,0),r=this.Rs.firstAfterOrEqual(n);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class di{constructor(e){this.Ds=e,this.docs=new Je(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,o=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return re.resolve(n?n.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let n=Bn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Bt.newInvalidDocument(e))})),re.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Bn();const o=t.path,i=new V(o.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:e,value:{document:i}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Z(J(i),n)<=0||(r.has(i.key)||Rn(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,t,n,r){y()}Cs(e,t){return re.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hi(this)}getSize(e){return re.resolve(this.size)}}class hi extends Qo{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),re.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class mi{constructor(e){this.persistence=e,this.xs=new On((e=>mn(e)),pn),this.lastRemoteSnapshotVersion=O.min(),this.highestTargetId=0,this.Ns=0,this.ks=new li,this.targetCount=0,this.Ms=Oo.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),re.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Fn(t),re.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach(((o,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),re.waitFor(s).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return re.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),re.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),re.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return re.resolve(n)}containsKey(e,t){return re.resolve(this.ks.containsKey(t))}}class pi{constructor(e,t){this.$s={},this.overlays={},this.Os=new fe(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new mi(this),this.indexManager=new xo,this.remoteDocumentCache=function(e){return new di(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Ms(t),this.qs=new ii(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ai,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new ui(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){m("MemoryPersistence","Starting transaction:",e);const r=new fi(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return re.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class fi extends te{constructor(e){super(),this.currentSequenceNumber=e}}class gi{constructor(e){this.persistence=e,this.Qs=new li,this.js=null}static zs(e){return new gi(e)}get Ws(){if(this.js)return this.js;throw y()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),re.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),re.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ws,(n=>{const r=V.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,O.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return re.or([()=>re.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class yi{constructor(e,t){this.persistence=e,this.Js=new On((e=>xe(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Go(this,t)}static zs(e,t){return new yi(e,t)}Us(){}Ks(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}zn(e){const t=this.Jn(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}Wn(e,t){return re.forEach(this.Js,((n,r)=>this.Xn(e,n,r).next((e=>e?re.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Cs(e,(r=>this.Xn(e,r,t).next((e=>{e||(n++,s.removeEntry(r,O.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Js.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Js.set(n,e.currentSequenceNumber),re.resolve()}removeReference(e,t,n){return this.Js.set(n,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.Js.set(t,e.currentSequenceNumber),re.resolve()}Ls(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kt(e.data.value)),t}Xn(e,t,n){return re.or([()=>this.persistence.Gs(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Js.get(t);return re.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vi{constructor(e){this.serializer=e}O(e,t,n,r){const s=new se("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",je,{unique:!0}),e.createObjectStore("documentMutations")}(e),xi(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=re.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xi(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:O.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",je,{unique:!0});const r=t.store("mutations"),s=n.map((e=>r.put(e)));return re.waitFor(s)}))}(e,s)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Ys(s)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s))))),n<7&&r>=7&&(o=o.next((()=>this.Zs(s)))),n<8&&r>=8&&(o=o.next((()=>this.ti(e,s)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ei(s)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Fe});t.createIndex("collectionPathOverlayIndex",Be,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ue,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ae});t.createIndex("documentKeyIndex",Ee),t.createIndex("collectionGroupIndex",_e)}(e))).next((()=>this.ni(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,s)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:De}).createIndex("sequenceNumberIndex",Me,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Le}).createIndex("documentKeyIndex",Oe,{unique:!1})}(e)))),o}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=To(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>re.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>re.forEach(n,(n=>{v(n.userId===t.userId);const r=Us(this.serializer,n);return Io(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,s)=>{const o=new B(n),i=function(e){return[0,xe(e)]}(o);r.push(t.get(i).next((n=>n?re.resolve():(n=>t.put({targetId:0,path:xe(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>re.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Re});const n=t.store("collectionParents"),r=new bo,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:xe(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new B(e);return s(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,o]=e;const i=Ne(r);return s(i.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=zs(n),s=Vs(this.serializer,r);return t.put(s)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const s=t.store("remoteDocumentsV14"),o=(i=n,i.document?new V(B.fromString(i.document.name).popFirst(5)):i.noDocument?V.fromSegments(i.noDocument.path):i.unknownDocument?V.fromSegments(i.unknownDocument.path):y()).path.toArray();var i;const a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(a))})).next((()=>re.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Jo(this.serializer),s=new pi(gi.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Yn();Us(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),re.forEach(n,((e,n)=>{const o=new c(n),i=$s.de(this.serializer,o),a=s.getIndexManager(o),l=Po.de(o,this.serializer,a,s.referenceDelegate);return new oi(r,l,i,a).recalculateAndSaveOverlaysForDocumentKeys(new Ge(t,fe.ct),e).next()}))}))}}function xi(e){e.createObjectStore("targetDocuments",{keyPath:Te}).createIndex("documentTargetsIndex",Pe,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ie,{unique:!0}),e.createObjectStore("targetGlobal")}const bi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wi{constructor(e,t,n,r,s,o,i,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=s,this.window=o,this.document=i,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!wi.D())throw new w(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ko(this,r),this.di=t+"main",this.serializer=new Ms(a),this.wi=new oe(this.di,this.ui,new vi(this.serializer)),this.Bs=new Fo(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jo(this.serializer),this.qs=new Ks,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,bi);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new fe(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ji(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(le(e))return m("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return m("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return Ni(e).get("owner").next((e=>re.resolve(this.Ri(e))))}Pi(e){return ji(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ke(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return re.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?re.resolve(!0):Ni(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,bi);return!1}}return!(!this.networkEnabled||!this.inForeground)||ji(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&m("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ge(e,fe.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>ji(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return Po.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new No(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return $s.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){m("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(o=this.ui)?He:14===o?We:13===o?qe:12===o?Ve:11===o?ze:void y();var o;let i;return this.wi.runTransaction(e,r,s,(r=>(i=new Ge(r,this.Os?this.Os.next():fe.ct),"readwrite-primary"===t?this.Ti(i).next((e=>!!e||this.Ei(i))).next((t=>{if(!t)throw p("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new w(b.FAILED_PRECONDITION,ee);return n(i)})).next((e=>this.vi(i).next((()=>e)))):this.Oi(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}Oi(e){return Ni(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new w(b.FAILED_PRECONDITION,bi)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ni(e).put("owner",t)}static D(){return oe.D()}Ai(e){const t=Ni(e);return t.get("owner").next((e=>this.Ri(e)?(m("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(p("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;i.isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return m("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return p("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){p("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ni(e){return Ke(e,"owner")}function ji(e){return Ke(e,"clientMetadata")}function ki(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ci{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Yn(),r=Yn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ci(e,t.fromCache,n,r)}}class Si{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((s=>s||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Nn(t))return re.resolve(null);let n=An(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=_n(t,null,"F"),n=An(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Yn(...r);return this.Ui.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ji(t,r);return this.zi(t,o,s,n.readTime)?this.Ki(e,_n(t,null,"F")):this.Wi(e,o,t,n)}))))})))))}Gi(e,t,n,r){return Nn(t)||r.isEqual(O.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(h()<=o.LogLevel.DEBUG&&m("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pn(t)),this.Wi(e,i,t,$(r,-1)))}))}ji(e,t){let n=new et(Mn(e));return t.forEach(((t,r)=>{Rn(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return h()<=o.LogLevel.DEBUG&&m("QueryEngine","Using full collection scan to execute query:",Pn(t)),this.Ui.getDocumentsMatchingQuery(e,t,X.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ai{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Je(R),this.Yi=new On((e=>mn(e)),pn),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oi(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Ei(e,t,n,r){return new Ai(e,t,n,r)}async function _i(e,t){const n=x(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],o=[];let i=Yn();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({er:e,removedBatchIds:s,addedBatchIds:o})))}))}))}function Ii(e){const t=x(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Ti(e,t,n){let r=Yn(),s=Yn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Bn();return n.forEach(((n,o)=>{const i=e.get(n);o.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),o.isNoDocument()&&o.version.isEqual(O.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!i.isValidDocument()||o.version.compareTo(i.version)>0||0===o.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):m("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",o.version)})),{nr:r,sr:s}}))}function Pi(e,t){const n=x(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ri(e,t){const n=x(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((s=>s?(r=s,re.resolve(r)):n.Bs.allocateTargetId(e).next((s=>(r=new Ds(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Di(e,t,n){const r=x(e),s=r.Ji.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!le(e))throw e;m("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function Mi(e,t,n){const r=x(e);let s=O.min(),o=Yn();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=x(e),s=r.Yi.get(n);return void 0!==s?re.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,An(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:O.min(),n?o:Yn()))).next((e=>(Fi(r,Dn(t),e),{documents:e,ir:o})))))}function Li(e,t){const n=x(e),r=x(n.Bs),s=n.Ji.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function Oi(e,t){const n=x(e),r=n.Xi.get(t)||O.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,$(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Fi(n,t,e),e)))}function Fi(e,t,n){let r=e.Xi.get(t)||O.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function Bi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yn();const r=await Ri(e,An(qs(t.bundledQuery))),s=x(e);return s.persistence.runTransaction("Save named query","readwrite",(e=>{const o=cs(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.qs.saveNamedQuery(e,t);const i=r.withResumeToken(ot.EMPTY_BYTE_STRING,o);return s.Ji=s.Ji.insert(i.targetId,i),s.Bs.updateTargetData(e,i).next((()=>s.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>s.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>s.qs.saveNamedQuery(e,t)))}))}function Ui(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zi(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Vi(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class qi{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new w(r.error.code,r.error.message))),o?new qi(e,t,r.state,s):(p("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wi{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new w(n.error.code,n.error.message))),s?new Wi(e,n.state,r):(p("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hi{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=$n();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=ve(n.activeTargetIds[o]),s=s.add(n.activeTargetIds[o]);return r?new Hi(e,s):(p("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Gi{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Gi(t.clientId,t.onlineState):(p("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Ki{constructor(){this.activeTargetIds=$n()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yi{constructor(e,t,n,r,s){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Je(R),this.started=!1,this.yr=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Ui(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Ki),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(Ui(this.persistenceKey,n));if(e){const t=Hi.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Vi(this.persistenceKey,e));if(n){const r=Wi.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vi(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return m("SharedClientState","READ",e,t),t}setItem(e,t){m("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){m("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(m("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=fe.ct;if(null!=e)try{const n=JSON.parse(e);v("number"==typeof n),t=n}catch(e){p("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==fe.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new qi(this.currentUser,e,t,n),s=zi(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=zi(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=Vi(this.persistenceKey,e),s=new Wi(e,t,n);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return Hi.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),s=void 0!==n[2]?n[2]:null;return qi.ar(new c(s),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return Wi.ar(r,t)}br(e){return Gi.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);m("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(n),o=[],i=[];return s.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{s.has(e)||i.push(e)})),this.syncEngine.Wr(o,i).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=$n();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Qi{constructor(){this.Hr=new Ki,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Ki,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $i{Yr(e){}shutdown(){}}class Ji{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xi=null;function Zi(){return null===Xi?Xi=268435456+Math.round(2147483648*Math.random()):Xi++,"0x"+Xi.toString(16)}const ea={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ta{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const na="WebChannelConnection";class ra extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const o=Zi(),i=this.To(e,t);m("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),i,n);const a={};return this.Eo(a,r,s),this.Ao(e,i,a,n).then((t=>(m("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw f("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",i,"request:",n),t}))}vo(e,t,n,r,s,o){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=ea[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=Zi();return new Promise(((o,i)=>{const l=new a.XhrIo;l.setWithCredentials(!0),l.listenOnce(a.EventType.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case a.ErrorCode.NO_ERROR:const t=l.getResponseJson();m(na,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),o(t);break;case a.ErrorCode.TIMEOUT:m(na,"RPC '".concat(e,"' ").concat(s," timed out")),i(new w(b.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:const n=l.getStatus();if(m(na,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",l.getResponseText()),n>0){let e=l.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(t)>=0?t:b.UNKNOWN}(t.status);i(new w(e,t.message))}else i(new w(b.UNKNOWN,"Server responded with status "+l.getStatus()))}else i(new w(b.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{m(na,"RPC '".concat(e,"' ").concat(s," completed."))}}));const c=JSON.stringify(r);m(na,"RPC '".concat(e,"' ").concat(s," sending request:"),r),l.send(t,"POST",c,n,15)}))}Ro(e,t,n){const r=Zi(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a.createWebChannelTransport(),i=a.getStatEventTarget(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new a.FetchXmlHttpFactory({})),this.Eo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const u=s.join("");m(na,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),l);const d=o.createWebChannel(u,l);let h=!1,p=!1;const g=new ta({ro:t=>{p?m(na,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(m(na,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),d.open(),h=!0),m(na,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),d.send(t))},oo:()=>d.close()}),y=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return y(d,a.WebChannel.EventType.OPEN,(()=>{p||m(na,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),y(d,a.WebChannel.EventType.CLOSE,(()=>{p||(p=!0,m(na,"RPC '".concat(e,"' stream ").concat(r," transport closed")),g.wo())})),y(d,a.WebChannel.EventType.ERROR,(t=>{p||(p=!0,f(na,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),g.wo(new w(b.UNAVAILABLE,"The operation could not be completed")))})),y(d,a.WebChannel.EventType.MESSAGE,(t=>{var n;if(!p){const s=t.data[0];v(!!s);const o=s,i=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(i){m(na,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=Dr[e];if(void 0!==t)return Or(t)}(t),s=i.message;void 0===n&&(n=b.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),p=!0,g.wo(new w(n,s)),d.close()}else m(na,"RPC '".concat(e,"' stream ").concat(r," received:"),s),g._o(s)}})),y(i,a.Event.STAT_EVENT,(t=>{t.stat===a.Stat.PROXY?m(na,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===a.Stat.NOPROXY&&m(na,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{g.fo()}),0),g}}function sa(){return"undefined"!=typeof window?window:null}function oa(){return"undefined"!=typeof document?document:null}function ia(e){return new ss(e,!0)}class aa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&m("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class la{constructor(e,t,n,r,s,o,i,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=i,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aa(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===b.RESOURCE_EXHAUSTED?(p(t.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===b.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new w(b.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return m("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ca extends la{constructor(e,t,n,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:y()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(v(void 0===t||"string"==typeof t),ot.fromBase64String(t||"")):(v(void 0===t||t instanceof Uint8Array),ot.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,a=i&&function(e){const t=void 0===e.code?b.UNKNOWN:Or(e.code);return new w(t,e.message||"")}(i);n=new $r(r,s,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ms(e,r.document.name),o=cs(r.document.updateTime),i=r.document.createTime?cs(r.document.createTime):O.min(),a=new Ot({mapValue:{fields:r.document.fields}}),l=Bt.newFoundDocument(s,o,i,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ms(e,r.document),o=r.readTime?cs(r.readTime):O.min(),i=Bt.newNoDocument(s,o),a=r.removedTargetIds||[];n=new Yr([],a,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ms(e,r.document),o=r.removedTargetIds||[];n=new Yr([],o,s,null)}else{if(!("filter"in t))return y();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,o=new Rr(r,s),i=e.targetId;n=new Qr(i,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return O.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?O.min():t.readTime?cs(t.readTime):O.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=gs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=fn(r)?{documents:Ns(e,r)}:{query:js(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=as(e,t.resumeToken);const r=os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(O.min())>0){n.readTime=is(e,t.snapshotVersion.toTimestamp());const r=os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return y()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=gs(this.serializer),t.removeTarget=e,this.Wo(t)}}class ua extends la{constructor(e,t,n,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(v(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(v(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?cs(e.updateTime):cs(t);return n.isEqual(O.min())&&(n=cs(t)),new mr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=cs(e.commitTime);return this.listener.cu(n,t)}return v(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=gs(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>bs(this.serializer,e)))};this.Wo(t)}}class da extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new w(b.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.Io(e,t,n,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new w(b.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,i]=s;return this.connection.vo(e,t,n,o,i,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new w(b.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class ha{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(p(t),this.mu=!1):m("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ma{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Na(this)&&(m("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=x(e);t.vu.add(4),await fa(t),t.bu.set("Unknown"),t.vu.delete(4),await pa(t)}(this))}))})),this.bu=new ha(n,r)}}async function pa(e){if(Na(e))for(const t of e.Ru)await t(!0)}async function fa(e){for(const t of e.Ru)await t(!1)}function ga(e,t){const n=x(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),wa(n)?ba(n):Ua(n).Ko()&&va(n,t))}function ya(e,t){const n=x(e),r=Ua(n);n.Au.delete(t),r.Ko()&&xa(n,t),0===n.Au.size&&(r.Ko()?r.jo():Na(n)&&n.bu.set("Unknown"))}function va(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(O.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ua(e).su(t)}function xa(e,t){e.Vu.qt(t),Ua(e).iu(t)}function ba(e){e.Vu=new Xr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Ua(e).start(),e.bu.gu()}function wa(e){return Na(e)&&!Ua(e).Uo()&&e.Au.size>0}function Na(e){return 0===x(e).vu.size}function ja(e){e.Vu=void 0}async function ka(e){e.Au.forEach(((t,n)=>{va(e,t)}))}async function Ca(e,t){ja(e),wa(e)?(e.bu.Iu(t),ba(e)):e.bu.set("Unknown")}async function Sa(e,t,n){if(e.bu.set("Online"),t instanceof $r&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){m("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Aa(e,n)}else if(t instanceof Yr?e.Vu.Ht(t):t instanceof Qr?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(O.min()))try{const t=await Ii(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(ot.EMPTY_BYTE_STRING,r.snapshotVersion)),xa(e,t);const s=new Ds(r.target,t,n,r.sequenceNumber);va(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){m("RemoteStore","Failed to raise snapshot:",t),await Aa(e,t)}}async function Aa(e,t,n){if(!le(t))throw t;e.vu.add(1),await fa(e),e.bu.set("Offline"),n||(n=()=>Ii(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{m("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await pa(e)}))}function Ea(e,t){return t().catch((n=>Aa(e,n,t)))}async function _a(e){const t=x(e),n=za(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Ia(t);)try{const e=await Pi(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Ta(t,e)}catch(e){await Aa(t,e)}Pa(t)&&Ra(t)}function Ia(e){return Na(e)&&e.Eu.length<10}function Ta(e,t){e.Eu.push(t);const n=za(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Pa(e){return Na(e)&&!za(e).Uo()&&e.Eu.length>0}function Ra(e){za(e).start()}async function Da(e){za(e).hu()}async function Ma(e){const t=za(e);for(const n of e.Eu)t.uu(n.mutations)}async function La(e,t,n){const r=e.Eu.shift(),s=Ir.from(r,t,n);await Ea(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await _a(e)}async function Oa(e,t){t&&za(e).ou&&await async function(e,t){if(Lr(n=t.code)&&n!==b.ABORTED){const n=e.Eu.shift();za(e).Qo(),await Ea(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await _a(e)}var n}(e,t),Pa(e)&&Ra(e)}async function Fa(e,t){const n=x(e);n.asyncQueue.verifyOperationInProgress(),m("RemoteStore","RemoteStore received new credentials");const r=Na(n);n.vu.add(3),await fa(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await pa(n)}async function Ba(e,t){const n=x(e);t?(n.vu.delete(2),await pa(n)):t||(n.vu.add(2),await fa(n),n.bu.set("Unknown"))}function Ua(e){return e.Su||(e.Su=function(e,t,n){const r=x(e);return r.fu(),new ca(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ka.bind(null,e),ao:Ca.bind(null,e),nu:Sa.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),wa(e)?ba(e):e.bu.set("Unknown")):(await e.Su.stop(),ja(e))}))),e.Su}function za(e){return e.Du||(e.Du=function(e,t,n){const r=x(e);return r.fu(),new ua(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Da.bind(null,e),ao:Oa.bind(null,e),au:Ma.bind(null,e),cu:La.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await _a(e)):(await e.Du.stop(),e.Eu.length>0&&(m("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class Va{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new N,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,s){const o=Date.now()+n,i=new Va(e,t,o,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new w(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(e,t){if(p("AsyncQueue","".concat(t,": ").concat(e)),le(e))return new w(b.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Wa{constructor(e){this.comparator=e?(t,n)=>e(t,n)||V.comparator(t.key,n.key):(e,t)=>V.comparator(e.key,t.key),this.keyedMap=zn(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Wa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Wa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ha{constructor(){this.Cu=new Je(V.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):y():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ga{constructor(e,t,n,r,s,o,i,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=i,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Ga(e,t,Wa.emptySet(t),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&In(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ka{constructor(){this.Nu=void 0,this.listeners=[]}}class Ya{constructor(){this.queries=new On((e=>Tn(e)),In),this.onlineState="Unknown",this.ku=new Set}}async function Qa(e,t){const n=x(e),r=t.query;let s=!1,o=n.queries.get(r);if(o||(s=!0,o=new Ka),s)try{o.Nu=await n.onListen(r)}catch(e){const n=qa(e,"Initialization of query '".concat(Pn(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Mu(n.onlineState),o.Nu&&t.$u(o.Nu)&&Za(n)}async function $a(e,t){const n=x(e),r=t.query;let s=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),s=0===o.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function Ja(e,t){const n=x(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&Za(n)}function Xa(e,t,n){const r=x(e),s=r.queries.get(t);if(s)for(const o of s.listeners)o.onError(n);r.queries.delete(t)}function Za(e){e.ku.forEach((e=>{e.next()}))}class el{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ga(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class tl{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class nl{constructor(e){this.serializer=e}rr(e){return ms(this.serializer,e)}ur(e){return e.metadata.exists?xs(this.serializer,e.document,!1):Bt.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return cs(e)}}class rl{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sl(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=B.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new nl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Yn()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const s=x(e);let o=Yn(),i=Bn();for(const c of n){const e=t.rr(c.metadata.name);c.document&&(o=o.add(e));const n=t.ur(c);n.setReadTime(t.cr(c.metadata.readTime)),i=i.insert(e,n)}const a=s.Zi.newChangeBuffer({trackRemovals:!0}),l=await Ri(s,function(e){return An(wn(B.fromString("__bundle__/docs/".concat(e))))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Ti(e,a,i).next((t=>(a.apply(e),t))).next((t=>s.Bs.removeMatchingKeysForTargetId(e,l.targetId).next((()=>s.Bs.addMatchingKeys(e,o,l.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new nl(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await Bi(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function sl(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ol{constructor(e){this.key=e}}class il{constructor(e){this.key=e}}class al{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Yn(),this.mutatedKeys=Yn(),this.tc=Mn(e),this.ec=new Wa(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Ha,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,i=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Rn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),m=!0):this.rc(c,u)||(n.track({type:2,doc:u}),m=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(a||l)&&(i=!0)),m&&(u?(o=o.add(u),s=h?s.add(e):s.delete(e)):(o=o.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:o,ic:n,zi:i,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const o=t?this.uc():[],i=0===this.Zu.size&&this.current?1:0,a=i!==this.Xu;return this.Xu=i,0!==s.length||a?{snapshot:new Ga(this.query,e.ec,r,s,e.mutatedKeys,0===i,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ha,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Yn(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new il(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new ol(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Yn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ga.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ll{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cl{constructor(e){this.key=e,this.fc=!1}}class ul{constructor(e,t,n,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new On((e=>Tn(e)),In),this._c=new Map,this.mc=new Set,this.gc=new Je(V.comparator),this.yc=new Map,this.Ic=new li,this.Tc={},this.Ec=new Map,this.Ac=Oo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function dl(e,t){const n=Ol(e);let r,s;const o=n.wc.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),s=o.view.lc();else{const e=await Ri(n.localStore,An(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await hl(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&ga(n.remoteStore,e)}return s}async function hl(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await Mi(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,s)})));const o=r&&r.targetChanges.get(t.targetId),i=t.view.applyChanges(s,e.isPrimaryClient,o);return jl(e,t.targetId,i.cc),i.snapshot}(e,t,n,r);const o=await Mi(e.localStore,t,!0),i=new al(t,o.ir),a=i.sc(o.documents),l=Kr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(a,e.isPrimaryClient,l);jl(e,n,c.cc);const u=new ll(t,n,i);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function ml(e,t){const n=x(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter((e=>!In(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Di(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),ya(n.remoteStore,r.targetId),wl(n,r.targetId)})).catch(ne)):(wl(n,r.targetId),await Di(n.localStore,r.targetId,!0))}async function pl(e,t){const n=x(e);try{const e=await function(e,t){const n=x(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const i=[];t.targetChanges.forEach(((o,a)=>{const l=s.get(a);if(!l)return;i.push(n.Bs.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ot.EMPTY_BYTE_STRING,O.min()).withLastLimboFreeSnapshotVersion(O.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&i.push(n.Bs.updateTargetData(e,c))}));let a=Bn(),l=Yn();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(Ti(e,o,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(O.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return re.waitFor(i).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?v(r.fc):e.removedDocuments.size>0&&(v(r.fc),r.fc=!1))})),await Sl(n,e,t)}catch(e){await ne(e)}}function fl(e,t,n){const r=x(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=x(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)})),r&&Za(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gl(e,t,n){const r=x(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),o=s&&s.key;if(o){let e=new Je(V.comparator);e=e.insert(o,Bt.newNoDocument(o,O.min()));const n=Yn().add(o),s=new Gr(O.min(),new Map,new Je(R),e,n);await pl(r,s),r.gc=r.gc.remove(o),r.yc.delete(t),Cl(r)}else await Di(r.localStore,t,!1).then((()=>wl(r,t,n))).catch(ne)}async function yl(e,t){const n=x(e),r=t.batch.batchId;try{const e=await function(e,t){const n=x(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,o=s.keys();let i=re.resolve();return o.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);v(null!==o),t.version.compareTo(o)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);bl(n,r,null),xl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sl(n,e)}catch(e){await ne(e)}}async function vl(e,t,n){const r=x(e);try{const e=await function(e,t){const n=x(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(v(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);bl(r,t,n),xl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sl(r,e)}catch(n){await ne(n)}}function xl(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function bl(e,t,n){const r=x(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function wl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Nl(e,t)}))}function Nl(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(ya(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Cl(e))}function jl(e,t,n){for(const r of n)r instanceof ol?(e.Ic.addReference(r.key,t),kl(e,r)):r instanceof il?(m("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Nl(e,r.key)):y()}function kl(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(m("SyncEngine","New document in limbo: "+n),e.mc.add(r),Cl(e))}function Cl(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new V(B.fromString(t)),r=e.Ac.next();e.yc.set(r,new cl(n)),e.gc=e.gc.insert(n,r),ga(e.remoteStore,new Ds(An(wn(n.path)),r,"TargetPurposeLimboResolution",fe.ct))}}async function Sl(e,t,n){const r=x(e),s=[],o=[],i=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{i.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=Ci.Li(a.targetId,e);o.push(t)}})))})),await Promise.all(i),r.dc.nu(s),await async function(e,t){const n=x(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>re.forEach(t,(t=>re.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>re.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!le(e))throw e;m("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,o))}async function Al(e,t){const n=x(e);if(!n.currentUser.isEqual(t)){m("SyncEngine","User change. New user:",t.toKey());const e=await _i(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new w(b.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sl(n,e.er)}}function El(e,t){const n=x(e),r=n.yc.get(t);if(r&&r.fc)return Yn().add(r.key);{let e=Yn();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function _l(e,t){const n=x(e),r=await Mi(n.localStore,t.query,!0),s=t.view.hc(r);return n.isPrimaryClient&&jl(n,t.targetId,s.cc),s}async function Il(e,t){const n=x(e);return Oi(n.localStore,t).then((e=>Sl(n,e)))}async function Tl(e,t,n,r){const s=x(e),o=await function(e,t){const n=x(e),r=x(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):re.resolve(null)))))}(s.localStore,t);null!==o?("pending"===n?await _a(s.remoteStore):"acknowledged"===n||"rejected"===n?(bl(s,t,r||null),xl(s,t),function(e,t){x(x(e).mutationQueue).Cn(t)}(s.localStore,t)):y(),await Sl(s,o)):m("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Pl(e,t,n){const r=x(e),s=[],o=[];for(const i of t){let e;const t=r._c.get(i);if(t&&0!==t.length){e=await Ri(r.localStore,An(t[0]));for(const e of t){const t=r.wc.get(e),n=await _l(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Li(r.localStore,i);e=await Ri(r.localStore,t),await hl(r,Rl(t),i,!1,e.resumeToken)}s.push(e)}return r.dc.nu(o),s}function Rl(e){return bn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Dl(e){const t=x(e);return x(x(t.localStore).persistence).$i()}async function Ml(e,t,n,r){const s=x(e);if(s.vc)return void m("SyncEngine","Ignoring unexpected query state notification.");const o=s._c.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Oi(s.localStore,Dn(o[0])),r=Gr.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ot.EMPTY_BYTE_STRING);await Sl(s,e,r);break}case"rejected":await Di(s.localStore,t,!0),wl(s,t,r);break;default:y()}}async function Ll(e,t,n){const r=Ol(e);if(r.vc){for(const e of t){if(r._c.has(e)){m("SyncEngine","Adding an already active target "+e);continue}const t=await Li(r.localStore,e),n=await Ri(r.localStore,t);await hl(r,Rl(t),n.targetId,!1,n.resumeToken),ga(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await Di(r.localStore,e,!1).then((()=>{ya(r.remoteStore,e),wl(r,e)})).catch(ne)}}function Ol(e){const t=x(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=El.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gl.bind(null,t),t.dc.nu=Ja.bind(null,t.eventManager),t.dc.Pc=Xa.bind(null,t.eventManager),t}function Fl(e){const t=x(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vl.bind(null,t),t}class Bl{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ia(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ei(this.persistence,new Si,e.initialUser,this.serializer)}createPersistence(e){return new pi(gi.zs,this.serializer)}createSharedClientState(e){return new Qi}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ul extends Bl{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){v(this.persistence.referenceDelegate instanceof yi);const n=this.persistence.referenceDelegate.garbageCollector;return new Wo(n,e.asyncQueue,t)}createPersistence(e){const t=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new pi((e=>yi.zs(e,t)),this.serializer)}}class zl extends Bl{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Fl(this.Vc.syncEngine),await _a(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Ei(this.persistence,new Si,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Wo(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new pe(t,this.persistence);return new me(e.asyncQueue,n)}createPersistence(e){const t=ki(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_o.withCacheSize(this.cacheSizeBytes):_o.DEFAULT;return new wi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,sa(),oa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Qi}}class Vl extends zl{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof Yi&&(this.sharedClientState.syncEngine={jr:Tl.bind(null,t),zr:Ml.bind(null,t),Wr:Ll.bind(null,t),$i:Dl.bind(null,t),Qr:Il.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=x(e);if(Ol(n),Fl(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Pl(n,e.toArray());n.vc=!0,await Ba(n.remoteStore,!0);for(const r of t)ga(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then((()=>(wl(n,s),Di(n.localStore,s,!0)))),ya(n.remoteStore,s)})),await t,await Pl(n,e),function(e){const t=x(e);t.yc.forEach(((e,n)=>{ya(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Je(V.comparator)}(n),n.vc=!1,await Ba(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=sa();if(!Yi.D(t))throw new w(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ki(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yi(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ql{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>fl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Al.bind(null,this.syncEngine),await Ba(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ya}createDatastore(e){const t=ia(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new ra(r));var r;return function(e,t,n,r){return new da(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>fl(this.syncEngine,e,0),o=Ji.D()?new Ji:new $i,new ma(t,n,r,s,o);var t,n,r,s,o}createSyncEngine(e,t){return function(e,t,n,r,s,o,i){const a=new ul(e,t,n,r,s,o);return i&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=x(e);m("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await fa(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function Wl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Hl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):p("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Gl{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new N,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new tl(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Kl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new w(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=x(e),r=gs(n.serializer)+"/documents",s={documents:t.map((e=>hs(n.serializer,e)))},o=await n.vo("BatchGetDocuments",r,s,t.length),i=new Map;o.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){v(!!t.found),t.found.name,t.found.updateTime;const n=ms(e,t.found.name),r=cs(t.found.updateTime),s=t.found.createTime?cs(t.found.createTime):O.min(),o=new Ot({mapValue:{fields:t.found.fields}});return Bt.newFoundDocument(n,r,s,o)}(e,t):"missing"in t?function(e,t){v(!!t.missing),v(!!t.readTime);const n=ms(e,t.missing),r=cs(t.readTime);return Bt.newNoDocument(n,r)}(e,t):y()}(n.serializer,e);i.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=i.get(e.toString());v(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ar(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=V.fromPath(t);this.mutations.push(new Er(n,this.precondition(n)))})),await async function(e,t){const n=x(e),r=gs(n.serializer)+"/documents",s={writes:t.map((e=>bs(n.serializer,e)))};await n.Io("Commit",r,s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw y();t=O.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new w(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(O.min())?pr.exists(!1):pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(O.min()))throw new w(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yl{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this.Bc=n.maxAttempts,this.qo=new aa(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new Kl(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!ge(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lr(t)}return!1}}class Ql{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=c.UNAUTHENTICATED,this.clientId=P.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{m("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(m("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new N;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qa(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function $l(e,t){e.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await _i(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zl(e);m("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Fa(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Fa(t.remoteStore,n))),e._onlineComponents=t}function Xl(e){return"FirebaseError"===e.name?e.code===b.FAILED_PRECONDITION||e.code===b.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Zl(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){m("FirestoreClient","Using user provided OfflineComponentProvider");try{await $l(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Xl(n))throw n;f("Error using user provided cache. Falling back to memory cache: "+n),await $l(e,new Bl)}}else m("FirestoreClient","Using default OfflineComponentProvider"),await $l(e,new Bl);return e._offlineComponents}async function ec(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(m("FirestoreClient","Using user provided OnlineComponentProvider"),await Jl(e,e._uninitializedComponentsProvider._online)):(m("FirestoreClient","Using default OnlineComponentProvider"),await Jl(e,new ql))),e._onlineComponents}function tc(e){return Zl(e).then((e=>e.persistence))}function nc(e){return Zl(e).then((e=>e.localStore))}function rc(e){return ec(e).then((e=>e.remoteStore))}function sc(e){return ec(e).then((e=>e.syncEngine))}function oc(e){return ec(e).then((e=>e.datastore))}async function ic(e){const t=await ec(e),n=t.eventManager;return n.onListen=dl.bind(null,t.syncEngine),n.onUnlisten=ml.bind(null,t.syncEngine),n}function ac(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new N;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const o=new Hl({next:o=>{t.enqueueAndForget((()=>$a(e,i)));const a=o.docs.has(n);!a&&o.fromCache?s.reject(new w(b.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?s.reject(new w(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new el(wn(n.path),o,{includeMetadataChanges:!0,Ku:!0});return Qa(e,i)}(await ic(e),e.asyncQueue,t,n,r))),r.promise}function lc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new N;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const o=new Hl({next:n=>{t.enqueueAndForget((()=>$a(e,i))),n.fromCache&&"server"===r.source?s.reject(new w(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new el(n,o,{includeMetadataChanges:!0,Ku:!0});return Qa(e,i)}(await ic(e),e.asyncQueue,t,n,r))),r.promise}function cc(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?Ur().encode(e):e,function(e,t){return new Gl(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wl(e,t);if(e instanceof ArrayBuffer)return Wl(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ia(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=x(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=x(e),r=cs(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(sl(r));const s=new rl(r,e.localStore,t.serializer);let o=await t.bc();for(;o;){const e=await s.zu(o);e&&n._updateProgress(e),o=await t.bc()}const i=await s.complete();return await Sl(e,i.Ju,void 0),await function(e,t){const n=x(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(i.progress),Promise.resolve(i.Hu)}catch(e){return f("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await sc(e),s,r)}))}function uc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const dc=new Map;function hc(e,t,n){if(!n)throw new w(b.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function mc(e,t,n,r){if(!0===t&&!0===r)throw new w(b.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pc(e){if(!V.isDocumentKey(e))throw new w(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function fc(e){if(V.isDocumentKey(e))throw new w(b.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":y()}function yc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new w(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gc(e);throw new w(b.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function vc(e,t){if(t<=0)throw new w(b.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class xc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new w(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new w(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new w(b.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new w(b.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new w(b.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class bc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new k;switch(e.type){case"firstParty":return new E(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new w(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dc.get(e);t&&(m("ComponentProvider","Removing Datastore"),dc.delete(e),t.terminate())}(this),Promise.resolve()}}function wc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const o=(e=yc(e,bc))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&f("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=c.MOCK_USER;else{t=i.createMockUserToken(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new w(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new c(o)}e._authCredentials=new C(new j(t,n))}}class Nc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nc(this.firestore,e,this._key)}}class jc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jc(this.firestore,e,this._query)}}class kc extends jc{constructor(e,t,n){super(e,t,wn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nc(this.firestore,null,new V(e))}withConverter(e){return new kc(this.firestore,e,this._path)}}function Cc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=i.getModularInstance(e),1===arguments.length&&(t=P.A()),hc("doc","path",t),e instanceof bc){const n=B.fromString(t,...r);return pc(n),new Nc(e,null,new V(n))}{if(!(e instanceof Nc||e instanceof kc))throw new w(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(B.fromString(t,...r));return pc(n),new Nc(e.firestore,e instanceof kc?e.converter:null,new V(n))}}function Sc(e,t){return e=i.getModularInstance(e),t=i.getModularInstance(t),e instanceof jc&&t instanceof jc&&e.firestore===t.firestore&&In(e._query,t._query)&&e.converter===t.converter}class Ac{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aa(this,"async_queue_retry"),this.Xc=()=>{const e=oa();e&&m("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=oa();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=oa();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new N;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!le(e))throw e;m("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw p("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Va.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&y()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Ec(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class _c{constructor(){this._progressObserver={},this._taskCompletionResolver=new N,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ic extends bc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ac,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pc(this),this._firestoreClient.terminate()}}function Tc(e){return e._firestoreClient||Pc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Pc(e){var t,n,r;const s=e._freezeSettings(),o=function(e,t,n,r){return new mt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new Ql(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function Rc(e,t,n){const r=new N;return e.asyncQueue.enqueue((async()=>{try{await $l(e,n),await Jl(e,t),r.resolve()}catch(e){const n=e;if(!Xl(n))throw n;f("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Dc(e){if(e._initialized||e._terminated)throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._aggregateType=e,this._internalFieldPath=t,this.type="AggregateField"}}class Lc{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(ot.fromBase64String(e))}catch(e){throw new w(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Oc(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new w(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new z(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bc{constructor(e){this._methodName=e}}class Uc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new w(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new w(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}}const zc=/^__.*__$/;class Vc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nr(e,this.data,t,this.fieldTransforms)}}class qc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}class Hc{constructor(e,t,n,r,s,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Hc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return du(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Wc(this.ca)&&zc.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Gc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ia(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Hc({ca:e,methodName:t,ga:n,path:z.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kc(e){const t=e._freezeSettings(),n=ia(e._databaseId);return new Gc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yc(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.ya(o.merge||o.mergeFields?2:0,t,n,s);au("Data must be an object, but it was:",i,r);const a=ou(r,i);let l,c;if(o.merge)l=new rt(i.fieldMask),c=i.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const s=lu(t,r,n);if(!i.contains(s))throw new w(b.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));hu(e,s)||e.push(s)}l=new rt(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new Vc(new Ot(a),l,c)}class Qc extends Bc{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qc}}function $c(e,t,n){return new Hc({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Jc extends Bc{_toFieldTransform(e){return new hr(e.path,new sr)}isEqual(e){return e instanceof Jc}}class Xc extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=$c(this,e,!0),n=this.pa.map((e=>su(e,t))),r=new or(n);return new hr(e.path,r)}isEqual(e){return this===e}}class Zc extends Bc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=$c(this,e,!0),n=this.pa.map((e=>su(e,t))),r=new ar(n);return new hr(e.path,r)}isEqual(e){return this===e}}class eu extends Bc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new cr(e.serializer,Zn(e.serializer,this.Ia));return new hr(e.path,t)}isEqual(e){return this===e}}function tu(e,t,n,r){const s=e.ya(1,t,n);au("Data must be an object, but it was:",s,r);const o=[],a=Ot.empty();Qe(r,((e,r)=>{const l=uu(t,e,n);r=i.getModularInstance(r);const c=s.da(l);if(r instanceof Qc)o.push(l);else{const e=su(r,c);null!=e&&(o.push(l),a.set(l,e))}}));const l=new rt(o);return new qc(a,l,s.fieldTransforms)}function nu(e,t,n,r,s,o){const a=e.ya(1,t,n),l=[lu(t,r,n)],c=[s];if(o.length%2!=0)throw new w(b.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let i=0;i<o.length;i+=2)l.push(lu(t,o[i])),c.push(o[i+1]);const u=[],d=Ot.empty();for(let m=l.length-1;m>=0;--m)if(!hu(u,l[m])){const e=l[m];let t=c[m];t=i.getModularInstance(t);const n=a.da(e);if(t instanceof Qc)u.push(e);else{const r=su(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new rt(u);return new qc(d,h,a.fieldTransforms)}function ru(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return su(n,e.ya(r?4:3,t))}function su(e,t){if(iu(e=i.getModularInstance(e)))return au("Unsupported field value:",t,e),ou(e,t);if(e instanceof Bc)return function(e,t){if(!Wc(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=su(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=i.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zn(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=L.fromDate(e);return{timestampValue:is(t.serializer,n)}}if(e instanceof L){const n=new L(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:is(t.serializer,n)}}if(e instanceof Uc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Oc)return{bytesValue:as(t.serializer,e._byteString)};if(e instanceof Nc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:us(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(gc(e)))}(e,t)}function ou(e,t){const n={};return $e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qe(e,((e,r)=>{const s=su(r,t.ha(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function iu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof L||e instanceof Uc||e instanceof Oc||e instanceof Nc||e instanceof Bc)}function au(e,t,n){if(!iu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=gc(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function lu(e,t,n){if((t=i.getModularInstance(t))instanceof Fc)return t._internalPath;if("string"==typeof t)return uu(e,t);throw du("Field path arguments must be of type string or ",e,!1,void 0,n)}const cu=new RegExp("[~\\*/\\[\\]]");function uu(e,t,n){if(t.search(cu)>=0)throw du("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Fc(...t.split("."))._internalPath}catch(r){throw du("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function du(e,t,n,r,s){const o=r&&!r.isEmpty(),i=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||i)&&(l+=" (found",o&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(s)),l+=")"),new w(b.INVALID_ARGUMENT,a+e+l)}function hu(e,t){return e.some((e=>e.isEqual(t)))}class mu{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pu extends mu{data(){return super.data()}}function fu(e,t){return"string"==typeof t?uu(e,t):t instanceof Fc?t._internalPath:t._delegate._internalPath}function gu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new w(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yu{}class vu extends yu{}class xu extends vu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new xu(e,t,n)}_apply(e){const t=this._parse(e);return Eu(e._query,t),new jc(e.firestore,e.converter,En(e._query,t))}_parse(e){const t=Kc(e.firestore),n=function(e,t,n,r,s,o,i){let a;if(s.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new w(b.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Au(i,o);const t=[];for(const n of i)t.push(Su(r,e,n));a={arrayValue:{values:t}}}else a=Su(r,e,i)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Au(i,o),a=ru(n,"where",i,"in"===o||"not-in"===o);return Gt.create(s,o,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class bu extends yu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bu(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Kt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Eu(n,s),n=En(n,s)}(e._query,t),new jc(e.firestore,e.converter,En(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class wu extends vu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new qt(t,n);return function(e,t){if(null===jn(e)){const n=kn(e);null!==n&&_u(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new jc(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new xn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Nu extends vu{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Nu(e,t,n)}_apply(e){return new jc(e.firestore,e.converter,_n(e._query,this._limit,this._limitType))}}class ju extends vu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ju(e,t,n)}_apply(e){const t=Cu(e,this.type,this._docOrFields,this._inclusive);return new jc(e.firestore,e.converter,function(e,t){return new xn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ku extends vu{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ku(e,t,n)}_apply(e){const t=Cu(e,this.type,this._docOrFields,this._inclusive);return new jc(e.firestore,e.converter,function(e,t){return new xn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Cu(e,t,n,r){if(n[0]=i.getModularInstance(n[0]),n[0]instanceof mu)return function(e,t,n,r,s){if(!r)throw new w(b.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const i of Sn(e))if(i.field.isKeyField())o.push(Ct(t,r.key));else{const e=r.data.field(i.field);if(ut(e))throw new w(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+i.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=i.field.canonicalString();throw new w(b.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Ut(o,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Kc(e.firestore);return function(e,t,n,r,s,o){const i=e.explicitOrderBy;if(s.length>i.length)throw new w(b.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<s.length;l++){const o=s[l];if(i[l].field.isKeyField()){if("string"!=typeof o)throw new w(b.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Cn(e)&&-1!==o.indexOf("/"))throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(B.fromString(o));if(!V.isDocumentKey(n))throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new V(n);a.push(Ct(t,s))}else{const e=ru(n,r,o);a.push(e)}}return new Ut(a,o)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Su(e,t,n){if("string"==typeof(n=i.getModularInstance(n))){if(""===n)throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cn(t)&&-1!==n.indexOf("/"))throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(B.fromString(n));if(!V.isDocumentKey(r))throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ct(e,new V(r))}if(n instanceof Nc)return Ct(e,n._key);throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gc(n),"."))}function Au(e,t){if(!Array.isArray(e)||0===e.length)throw new w(b.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Eu(e,t){if(t.isInequality()){const n=kn(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new w(b.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const s=jn(e);null!==s&&_u(e,r,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new w(b.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new w(b.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function _u(e,t,n){if(!n.isEqual(t))throw new w(b.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}function Iu(e,t){if(!(t instanceof xu||t instanceof bu))throw new w(b.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Tu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ct(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Qe(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Uc(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ht(e));default:return null}}convertTimestamp(e){const t=at(e);return new L(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=B.fromString(e);v(Rs(n));const r=new pt(n.get(1),n.get(3)),s=new V(n.popFirst(5));return r.isEqual(t)||p("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Pu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ru extends Tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nc(this.firestore,null,t)}}function Du(){return new Mc("count")}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lu extends mu{constructor(e,t,n,r,s,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ou extends Lu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ou(this._firestore,this._userDataWriter,n.key,n,new Mu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new w(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ou(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Mu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ou(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Mu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,o=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Bu(t.type),doc:r,oldIndex:s,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Bu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}class Uu extends Tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nc(this.firestore,null,t)}}function zu(e,t){return function(e,t){const n=new N;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Fl(e);try{const e=await function(e,t){const n=x(e),r=L.now(),s=t.reduce(((e,t)=>e.add(t.key)),Yn());let o,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Bn(),l=Yn();return n.Zi.getEntries(e,s).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((s=>{o=s;const i=[];for(const e of t){const t=br(e,o.get(e.key).overlayedDocument);null!=t&&i.push(new jr(e.key,t,Ft(t.value.mapValue),pr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Vn(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Je(R)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sl(r,e.changes),await _a(r.remoteStore)}catch(e){const t=qa(e,"Failed to persist write");n.reject(t)}}(await sc(e),t,n))),n.promise}(Tc(e),t)}function Vu(e,t,n){const r=n.docs.get(t._key),s=new Uu(e);return new Lu(e,s,t._key,r,new Mu(n.hasPendingWrites,n.fromCache),t.converter)}function qu(e,t){const n=yc(e.firestore,Ic),r=Tc(n),s=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r));return n}(t,((e,t)=>new Pr(t,e._aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new N;return e.asyncQueue.enqueueAndForget((async()=>{try{const s=await oc(e);r.resolve(async function(e,t,n){var r;const s=x(e),{request:o,du:i}=function(e,t,n){const r=js(e,t),s={},o=[];let i=0;return n.forEach((e=>{const t="aggregate_"+i++;s[t]=e.alias,"count"===e.yt?o.push({alias:t,count:{}}):"avg"===e.yt?o.push({alias:t,avg:{field:_s(e.fieldPath)}}):"sum"===e.yt&&o.push({alias:t,sum:{field:_s(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},du:s}}(s.serializer,An(t),n),a=o.parent;s.connection.po||delete o.parent;const l=(await s.vo("RunAggregationQuery",a,o,1)).filter((e=>!!e.result));v(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[i[t]]=c[t],e)),{})}(s,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,s).then((t=>function(e,t,n){const r=new Uu(e);return new Lc(t,r,n)}(n,e,t)))}class Wu{constructor(e){this.kind="memory",this._onlineComponentProvider=new ql,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new Bl}toJSON(){return{kind:this.kind}}}class Hu{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=$u(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Gu{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new Bl}toJSON(){return{kind:this.kind}}}class Ku{constructor(e){this.kind="memoryLru",this._offlineComponentProvider=new Ul(e)}toJSON(){return{kind:this.kind}}}class Yu{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new ql,this._offlineComponentProvider=new zl(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}class Qu{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new ql,this._offlineComponentProvider=new Vl(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes)}}function $u(e){return new Yu(null==e?void 0:e.forceOwnership)}const Ju={maxAttempts:5};class Xu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kc(e)}set(e,t,n){this._verifyNotCommitted();const r=Zu(e,this._firestore),s=Pu(r.converter,t,n),o=Yc(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,pr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Zu(e,this._firestore);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=i.getModularInstance(t))||t instanceof Fc?nu(this._dataReader,"WriteBatch.update",r._key,t,n,a):tu(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zu(e,this._firestore);return this._mutations=this._mutations.concat(new Ar(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zu(e,t){if((e=i.getModularInstance(e)).firestore!==t)throw new w(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ed extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kc(e)}get(e){const t=Zu(e,this._firestore),n=new Ru(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return y();const r=e[0];if(r.isFoundDocument())return new mu(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new mu(this._firestore,n,t._key,null,t.converter);throw y()}))}set(e,t,n){const r=Zu(e,this._firestore),s=Pu(r.converter,t,n),o=Yc(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Zu(e,this._firestore);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=i.getModularInstance(t))||t instanceof Fc?nu(this._dataReader,"Transaction.update",r._key,t,n,a):tu(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=Zu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zu(e,this._firestore),n=new Uu(this._firestore);return super.get(e).then((e=>new Lu(this._firestore,n,t._key,e._document,new Mu(!1,!1),t.converter)))}}function td(e,t){if("string"!=typeof e[t])throw new w(b.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){u=e}(r.SDK_VERSION),r._registerComponent(new s.Component("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const o=e.getProvider("app").getImmediate(),i=new Ic(new S(e.getProvider("auth-internal")),new I(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new w(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pt(e.options.projectId,t)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),r.registerVersion(l,"3.13.0",e),r.registerVersion(l,"3.13.0","cjs2017")}(),t.AbstractUserDataWriter=Tu,t.AggregateField=Mc,t.AggregateQuerySnapshot=Lc,t.Bytes=Oc,t.CACHE_SIZE_UNLIMITED=-1,t.CollectionReference=kc,t.DocumentReference=Nc,t.DocumentSnapshot=Lu,t.FieldPath=Fc,t.FieldValue=Bc,t.Firestore=Ic,t.FirestoreError=w,t.GeoPoint=Uc,t.LoadBundleTask=_c,t.Query=jc,t.QueryCompositeFilterConstraint=bu,t.QueryConstraint=vu,t.QueryDocumentSnapshot=Ou,t.QueryEndAtConstraint=ku,t.QueryFieldFilterConstraint=xu,t.QueryLimitConstraint=Nu,t.QueryOrderByConstraint=wu,t.QuerySnapshot=Fu,t.QueryStartAtConstraint=ju,t.SnapshotMetadata=Mu,t.Timestamp=L,t.Transaction=ed,t.WriteBatch=Xu,t._DatabaseId=pt,t._DocumentKey=V,t._EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new _(""))}invalidateToken(){}start(e,t){}shutdown(){}},t._EmptyAuthCredentialsProvider=k,t._FieldPath=z,t._TestingHooks=Fr,t._cast=yc,t._debugAssert=function(e,t){e||y()},t._isBase64Available=function(){return"undefined"!=typeof atob},t._logWarn=f,t._validateIsNotUsedTogether=mc,t.addDoc=function(e,t){const n=yc(e.firestore,Ic),r=Cc(e),s=Pu(e.converter,t);return zu(n,[Yc(Kc(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,pr.exists(!1))]).then((()=>r))},t.aggregateFieldEqual=function(e,t){var n,r;return e instanceof Mc&&t instanceof Mc&&e._aggregateType===t._aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())},t.aggregateQuerySnapshotEqual=function(e,t){return Sc(e.query,t.query)&&i.deepEqual(e.data(),t.data())},t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Iu("and",e))),bu._create("and",t)},t.arrayRemove=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zc("arrayRemove",t)},t.arrayUnion=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xc("arrayUnion",t)},t.average=function(e){return new Mc("avg",lu("average",e))},t.clearIndexedDbPersistence=function(e){if(e._initialized&&!e._terminated)throw new w(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new N;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!oe.D())return Promise.resolve();const t=e+"main";await oe.delete(t)}(ki(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise},t.collection=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=i.getModularInstance(e),hc("collection","path",t),e instanceof bc){const n=B.fromString(t,...r);return fc(n),new kc(e,null,n)}{if(!(e instanceof Nc||e instanceof kc))throw new w(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(B.fromString(t,...r));return fc(n),new kc(e.firestore,null,n)}},t.collectionGroup=function(e,t){if(e=yc(e,bc),hc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new w(b.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jc(e,null,function(e){return new xn(B.emptyPath(),e)}(t))},t.connectFirestoreEmulator=wc,t.count=Du,t.deleteDoc=function(e){return zu(yc(e.firestore,Ic),[new Ar(e._key,pr.none())])},t.deleteField=function(){return new Qc("deleteField")},t.disableNetwork=function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await tc(e),n=await rc(e);return t.setNetworkEnabled(!1),async function(e){const t=x(e);t.vu.add(0),await fa(t),t.bu.set("Offline")}(n)}))}(Tc(e=yc(e,Ic)))},t.doc=Cc,t.documentId=function(){return new Fc("__name__")},t.enableIndexedDbPersistence=function(e,t){Dc(e=yc(e,Ic));const n=Tc(e);if(n._uninitializedComponentsProvider)throw new w(b.FAILED_PRECONDITION,"SDK cache is already specified.");f("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),s=new ql;return Rc(n,s,new zl(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))},t.enableMultiTabIndexedDbPersistence=function(e){Dc(e=yc(e,Ic));const t=Tc(e);if(t._uninitializedComponentsProvider)throw new w(b.FAILED_PRECONDITION,"SDK cache is already specified.");f("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ql;return Rc(t,r,new Vl(r,n.cacheSizeBytes))},t.enableNetwork=function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await tc(e),n=await rc(e);return t.setNetworkEnabled(!0),function(e){const t=x(e);return t.vu.delete(0),pa(t)}(n)}))}(Tc(e=yc(e,Ic)))},t.endAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ku._create("endAt",t,!0)},t.endBefore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ku._create("endBefore",t,!1)},t.ensureFirestoreConfigured=Tc,t.executeWrite=zu,t.getAggregateFromServer=qu,t.getCountFromServer=function(e){return qu(e,{count:Du()})},t.getDoc=function(e){e=yc(e,Nc);const t=yc(e.firestore,Ic);return ac(Tc(t),e._key).then((n=>Vu(t,e,n)))},t.getDocFromCache=function(e){e=yc(e,Nc);const t=yc(e.firestore,Ic),n=Tc(t),r=new Uu(t);return function(e,t){const n=new N;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=x(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new w(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=qa(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await nc(e),t,n))),n.promise}(n,e._key).then((n=>new Lu(t,r,e._key,n,new Mu(null!==n&&n.hasLocalMutations,!0),e.converter)))},t.getDocFromServer=function(e){e=yc(e,Nc);const t=yc(e.firestore,Ic);return ac(Tc(t),e._key,{source:"server"}).then((n=>Vu(t,e,n)))},t.getDocs=function(e){e=yc(e,jc);const t=yc(e.firestore,Ic),n=Tc(t),r=new Uu(t);return gu(e._query),lc(n,e._query).then((n=>new Fu(t,r,e,n)))},t.getDocsFromCache=function(e){e=yc(e,jc);const t=yc(e.firestore,Ic),n=Tc(t),r=new Uu(t);return function(e,t){const n=new N;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Mi(e,t,!0),s=new al(t,r.ir),o=s.sc(r.documents),i=s.applyChanges(o,!1);n.resolve(i.snapshot)}catch(e){const r=qa(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await nc(e),t,n))),n.promise}(n,e._query).then((n=>new Fu(t,r,e,n)))},t.getDocsFromServer=function(e){e=yc(e,jc);const t=yc(e.firestore,Ic),n=Tc(t),r=new Uu(t);return lc(n,e._query,{source:"server"}).then((n=>new Fu(t,r,e,n)))},t.getFirestore=function(e,t){const n="object"==typeof e?e:r.getApp(),s="string"==typeof e?e:t||"(default)",o=r._getProvider(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const e=i.getDefaultEmulatorHostnameAndPort("firestore");e&&wc(o,...e)}return o},t.increment=function(e){return new eu("increment",e)},t.initializeFirestore=function(e,t,n){n||(n="(default)");const s=r._getProvider(e,"firestore");if(s.isInitialized(n)){const e=s.getImmediate({identifier:n}),r=s.getOptions(n);if(i.deepEqual(r,t))return e;throw new w(b.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new w(b.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new w(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return s.initialize({options:t,instanceIdentifier:n})},t.limit=function(e){return vc("limit",e),Nu._create("limit",e,"F")},t.limitToLast=function(e){return vc("limitToLast",e),Nu._create("limitToLast",e,"L")},t.loadBundle=function(e,t){const n=Tc(e=yc(e,Ic)),r=new _c;return cc(n,e._databaseId,t,r),r},t.memoryEagerGarbageCollector=function(){return new Gu},t.memoryLocalCache=function(e){return new Wu(e)},t.memoryLruGarbageCollector=function(e){return new Ku(null==e?void 0:e.cacheSizeBytes)},t.namedQuery=function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=x(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await nc(e),t)))}(Tc(e=yc(e,Ic)),t).then((t=>t?new jc(e,null,t.query):null))},t.onSnapshot=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,o,a;e=i.getModularInstance(e);let l={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Ec(n[c])||(l=n[c],c++);const u={includeMetadataChanges:l.includeMetadataChanges};if(Ec(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,m;if(e instanceof Nc)h=yc(e.firestore,Ic),m=wn(e._key.path),d={next:t=>{n[c]&&n[c](Vu(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=yc(e,jc);h=yc(t.firestore,Ic),m=t._query;const r=new Uu(h);d={next:e=>{n[c]&&n[c](new Fu(h,r,t,e))},error:n[c+1],complete:n[c+2]},gu(e._query)}return function(e,t,n,r){const s=new Hl(r),o=new el(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>Qa(await ic(e),o))),()=>{s.Dc(),e.asyncQueue.enqueueAndForget((async()=>$a(await ic(e),o)))}}(Tc(h),m,u,d)},t.onSnapshotsInSync=function(e,t){return function(e,t){const n=new Hl(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){x(e).ku.add(t),t.next()}(await ic(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){x(e).ku.delete(t)}(await ic(e),n)))}}(Tc(e=yc(e,Ic)),Ec(t)?t:{next:t})},t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Iu("or",e))),bu._create("or",t)},t.orderBy=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fu("orderBy",e);return wu._create(n,t)},t.persistentLocalCache=function(e){return new Hu(e)},t.persistentMultipleTabManager=function(){return new Qu},t.persistentSingleTabManager=$u,t.query=function(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];t instanceof yu&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof bu)).length,n=e.filter((e=>e instanceof xu)).length;if(t>1||t>0&&n>0)throw new w(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)e=i._apply(e);return e},t.queryEqual=Sc,t.refEqual=function(e,t){return e=i.getModularInstance(e),t=i.getModularInstance(t),(e instanceof Nc||e instanceof kc)&&(t instanceof Nc||t instanceof kc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},t.runTransaction=function(e,t,n){e=yc(e,Ic);const r=Object.assign(Object.assign({},Ju),n);return function(e){if(e.maxAttempts<1)throw new w(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new N;return e.asyncQueue.enqueueAndForget((async()=>{const s=await oc(e);new Yl(e.asyncQueue,s,n,t,r).run()})),r.promise}(Tc(e),(n=>t(new ed(e,n))),r)},t.serverTimestamp=function(){return new Jc("serverTimestamp")},t.setDoc=function(e,t,n){e=yc(e,Nc);const r=yc(e.firestore,Ic),s=Pu(e.converter,t,n);return zu(r,[Yc(Kc(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,pr.none())])},t.setIndexConfiguration=function(e,t){var n;const r=Tc(e=yc(e,Ic));if(!r._uninitializedComponentsProvider||"memory"===(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return f("Cannot enable indexes when persistence is disabled"),Promise.resolve();const s=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new w(b.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=td(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=uu("setIndexConfiguration",td(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new K(e,2)):"ASCENDING"===n.order?t.push(new K(e,0)):"DESCENDING"===n.order&&t.push(new K(e,1))}n.push(new q(q.UNKNOWN_ID,e,t,Q.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue((async()=>async function(e,t){const n=x(e),r=n.indexManager,s=[];return n.persistence.runTransaction("Configure indexes","readwrite",(e=>r.getFieldIndexes(e).next((n=>function(e,t,n,r,s){e=[...e],t=[...t],e.sort(n),t.sort(n);const o=e.length,i=t.length;let a=0,l=0;for(;a<i&&l<o;){const o=n(e[l],t[a]);o<0?s(e[l++]):o>0?r(t[a++]):(a++,l++)}for(;a<i;)r(t[a++]);for(;l<o;)s(e[l++])}(n,t,G,(t=>{s.push(r.addFieldIndex(e,t))}),(t=>{s.push(r.deleteFieldIndex(e,t))})))).next((()=>re.waitFor(s)))))}(await nc(e),t)))}(r,s)},t.setLogLevel=function(e){d.setLogLevel(e)},t.snapshotEqual=function(e,t){return e instanceof Lu&&t instanceof Lu?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fu&&t instanceof Fu&&e._firestore===t._firestore&&Sc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},t.startAfter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ju._create("startAfter",t,!1)},t.startAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ju._create("startAt",t,!0)},t.sum=function(e){return new Mc("sum",lu("sum",e))},t.terminate=function(e){return r._removeServiceInstance(e.app,"firestore",e._databaseId.database),e._delete()},t.updateDoc=function(e,t,n){e=yc(e,Nc);const r=yc(e.firestore,Ic),s=Kc(r);let o;for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];return o="string"==typeof(t=i.getModularInstance(t))||t instanceof Fc?nu(s,"updateDoc",e._key,t,n,l):tu(s,"updateDoc",e._key,t),zu(r,[o.toMutation(e._key,pr.exists(!0))])},t.waitForPendingWrites=function(e){return function(e){const t=new N;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=x(e);Na(n.remoteStore)||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=x(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=qa(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await sc(e),t))),t.promise}(Tc(e=yc(e,Ic)))},t.where=function(e,t,n){const r=t,s=fu("where",e);return xu._create(s,r,n)},t.writeBatch=function(e){return Tc(e=yc(e,Ic)),new Xu(e,(t=>zu(e,t)))}},7518:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}},7528:(e,t,n)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{A:()=>r})},7704:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ANIMATIONS:()=>o,AchievementNotification:()=>c,CelebrationOverlay:()=>l,Mascot:()=>u,MascotStates:()=>i,useAnimationStyles:()=>a});var r=n(9950),s=n(4414);const o={transition:{fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},hover:{scale:"hover:scale-105",glow:"hover:shadow-lg hover:shadow-primary-200",pulse:"hover:animate-pulse"},celebrate:{confetti:"animate-confetti",bounce:"animate-bounce",tada:"animate-tada"}},i={celebrating:"\ud83c\udf89",encouraging:"\ud83d\udc4d",grateful:"\ud83d\ude4f",welcoming:"\ud83d\udc4b"},a=()=>{(0,r.useEffect)((()=>{const e=document.createElement("style");return e.innerHTML="\n  .confetti-container {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    z-index: 1000;\n    pointer-events: none;\n  }\n  \n  .confetti {\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    opacity: 0.7;\n    animation: fall 3s linear forwards;\n  }\n  \n  @keyframes fall {\n    0% {\n      transform: translateY(-100vh) rotate(0deg);\n      opacity: 1;\n    }\n    100% {\n      transform: translateY(100vh) rotate(720deg);\n      opacity: 0;\n    }\n  }\n  \n  @keyframes tada {\n    0% { transform: scale(1); }\n    10%, 20% { transform: scale(0.9) rotate(-3deg); }\n    30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }\n    40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }\n    100% { transform: scale(1) rotate(0); }\n  }\n  \n  .animate-tada {\n    animation: tada 1s ease-in-out;\n  }\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[])},l=e=>{let{show:t,colors:n}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,s.jsx)("div",{className:"confetti-container",children:[...Array(30)].map(((e,t)=>(0,s.jsx)("div",{className:"confetti",style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(3*Math.random(),"s"),backgroundColor:n[Math.floor(Math.random()*n.length)]}},t)))})}):null},c=e=>{let{show:t,title:n,message:r}=e;return t?(0,s.jsx)("div",{className:"fixed bottom-8 right-8 bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4 rounded-lg shadow-xl z-40 ".concat(o.transition.medium," ").concat(o.celebrate.bounce),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"\ud83c\udfc6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold",children:n}),(0,s.jsx)("p",{children:r})]})]})}):null},u=e=>{let{state:t,interactionCount:n}=e;return(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-30 ".concat(o.transition.medium," ").concat(n>0?o.celebrate.tada:""),children:(0,s.jsx)("div",{className:"bg-white rounded-full p-3 shadow-lg cursor-pointer hover:shadow-xl transition-shadow duration-300",children:(0,s.jsx)("div",{className:"text-3xl",title:"TYCA ".concat(t),children:i[t]})})})}},7827:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>M,__assign:()=>o,__asyncDelegator:()=>C,__asyncGenerator:()=>k,__asyncValues:()=>S,__await:()=>j,__awaiter:()=>p,__classPrivateFieldGet:()=>P,__classPrivateFieldIn:()=>D,__classPrivateFieldSet:()=>R,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>O,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>s,__generator:()=>f,__importDefault:()=>T,__importStar:()=>I,__makeTemplateObject:()=>A,__metadata:()=>m,__param:()=>l,__propKey:()=>d,__read:()=>x,__rest:()=>i,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>b,__spreadArray:()=>N,__spreadArrays:()=>w,__values:()=>v,default:()=>B});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function a(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function l(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,s,o){function i(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var a,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,m=n.length-1;m>=0;m--){var p={};for(var f in r)p[f]="access"===f?{}:r[f];for(var f in r.access)p.access[f]=r.access[f];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(e||null))};var g=(0,n[m])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(a=i(g.get))&&(d.get=a),(a=i(g.set))&&(d.set=a),(a=i(g.init))&&s.unshift(a)}else(a=i(g))&&("field"===l?s.unshift(a):d[c]=a)}u&&Object.defineProperty(u,r.name,d),h=!0}function u(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function m(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function v(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return i}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),s=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,s++)r[s]=o[i];return r}function N(e,t,n){if(n||2===arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}function j(e){return this instanceof j?(this.v=e,this):new j(e)}function k(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(e,t||[]),o=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function i(e,t){s[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=s[e](t)).value instanceof j?Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(r){u(o[0][3],r)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function C(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,s){t[r]=e[r]?function(t){return(n=!n)?{value:j(e[r](t)),done:!1}:s?s(t):t}:s}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=v(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,s){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,s,(t=e[n](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},_=function(e){return _=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},_(e)};function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=_(e),r=0;r<n.length;r++)"default"!==n[r]&&g(t,e,n[r]);return E(t,e),t}function T(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function R(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}function D(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function M(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if("function"!==typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var L="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function O(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function s(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(s,(function(e){return t(e),s()}))}else r|=1}catch(i){t(i)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function F(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,n,r,s,o){return n?t?".jsx":".js":!r||s&&o?r+s+"."+o.toLowerCase()+"js":e})):e}const B={__extends:s,__assign:o,__rest:i,__decorate:a,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:m,__awaiter:p,__generator:f,__createBinding:g,__exportStar:y,__values:v,__read:x,__spread:b,__spreadArrays:w,__spreadArray:N,__await:j,__asyncGenerator:k,__asyncDelegator:C,__asyncValues:S,__makeTemplateObject:A,__importStar:I,__importDefault:T,__classPrivateFieldGet:P,__classPrivateFieldSet:R,__classPrivateFieldIn:D,__addDisposableResource:M,__disposeResources:O,__rewriteRelativeImportExtension:F}},7840:(e,t,n)=>{var r=n(3008),s=n(5776);e.exports=function(e){return null!=e&&s(e.length)&&!r(e)}},7859:(e,t,n)=>{var r=n(7101);e.exports=function(e,t){var n=r(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}},7887:(e,t,n)=>{var r=n(220)(n(4759),"Set");e.exports=r},7889:(e,t,n)=>{var r=n(5099);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7946:(e,t,n)=>{var r=n(52);e.exports=function(e,t,n){var s=null==e?void 0:r(e,t);return void 0===s?n:s}},7949:(e,t,n)=>{var r=n(3008),s=n(3306),o=n(4567),i=n(9131),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(r(e)?h:a).test(i(e))}},8007:e=>{e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},8021:(e,t,n)=>{const r=n(8007),s=n(487),o=n(2237),i=n(4370);function a(e,t,n,o,i){const a=[].slice.call(arguments,1),l=a.length,c="function"===typeof a[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=t,t=o=void 0):2!==l||t.getContext||(o=n,n=t,t=void 0),new Promise((function(r,i){try{const i=s.create(n,o);r(e(i,t,o))}catch(a){i(a)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(i=n,n=t,t=o=void 0):3===l&&(t.getContext&&"undefined"===typeof i?(i=o,o=void 0):(i=o,o=n,n=t,t=void 0));try{const r=s.create(n,o);i(null,e(r,t,o))}catch(u){i(u)}}t.create=s.create,t.toCanvas=a.bind(null,o.render),t.toDataURL=a.bind(null,o.renderToDataURL),t.toString=a.bind(null,(function(e,t,n){return i.render(e,n)}))},8025:(e,t,n)=>{"use strict";n.d(t,{P5:()=>qe,$s:()=>We});var r=n(6493),s=n(4624),o=n(9061),i=n(7253),a=n(9379);let l,c;const u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(x(this),n),v(u.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(x(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const o=e.call(x(this),t,...r);return h.set(o,t.sort?t.sort():[t]),v(o)}}function y(e){return"function"===typeof e?g(e):(e instanceof IDBTransaction&&function(e){if(d.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));d.set(e,t)}(e),t=e,(l||(l=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{t(v(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&u.set(t,e)})).catch((()=>{})),p.set(t,e),t}(e);if(m.has(e))return m.get(e);const t=y(e);return t!==e&&(m.set(e,t),p.set(t,e)),t}const x=e=>p.get(e);const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],N=new Map;function j(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(N.get(t))return N.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!b.includes(n))return;const o=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let o=t.store;for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),s&&t.done]))[0]};return N.set(t,o),o}f=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>j(t,n)||e.get(t,n,r),has:(t,n)=>!!j(t,n)||e.has(t,n)}))(f);const k="@firebase/installations",C="0.6.4",S=1e4,A="w:".concat(C),E="FIS_v2",_=36e5,I={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},T=new o.FA("installations","Installations",I);function P(e){return e instanceof o.g&&e.code.includes("request-failed")}function R(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function D(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function M(e,t){const n=(await t.json()).error;return T.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function L(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function O(e,t){let{refreshToken:n}=t;const r=L(e);return r.append("Authorization",function(e){return"".concat(E," ").concat(e)}(n)),r}async function F(e){const t=await e();return t.status>=500&&t.status<600?e():t}function B(e){return new Promise((t=>{setTimeout(t,e)}))}const U=/^[cdef][\w-]{21}$/;function z(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return U.test(t)?t:""}catch(e){return""}}function V(e){return"".concat(e.appName,"!").concat(e.appId)}const q=new Map;function W(e,t){const n=V(e);H(n,t),function(e,t){const n=K();n&&n.postMessage({key:e,fid:t});Y()}(n,t)}function H(e,t){const n=q.get(e);if(n)for(const r of n)r(t)}let G=null;function K(){return!G&&"BroadcastChannel"in self&&(G=new BroadcastChannel("[Firebase] FID Change"),G.onmessage=e=>{H(e.data.key,e.data.fid)}),G}function Y(){0===q.size&&G&&(G.close(),G=null)}const Q="firebase-installations-store";let $=null;function J(){return $||($=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),a=v(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(v(i.result),e.oldVersion,e.newVersion,v(i.transaction))})),n&&i.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Q)}})),$}async function X(e,t){const n=V(e),r=(await J()).transaction(Q,"readwrite"),s=r.objectStore(Q),o=await s.get(n);return await s.put(t,n),await r.done,o&&o.fid===t.fid||W(e,t.fid),t}async function Z(e){const t=V(e),n=(await J()).transaction(Q,"readwrite");await n.objectStore(Q).delete(t),await n.done}async function ee(e,t){const n=V(e),r=(await J()).transaction(Q,"readwrite"),s=r.objectStore(Q),o=await s.get(n),i=t(o);return void 0===i?await s.delete(n):await s.put(i,n),await r.done,!i||o&&o.fid===i.fid||W(e,i.fid),i}async function te(e){let t;const n=await ee(e.appConfig,(n=>{const r=function(e){const t=e||{fid:z(),registrationStatus:0};return se(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(T.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const o=R(n),i=L(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const l={fid:s,authVersion:E,appId:n.appId,sdkVersion:A},c={method:"POST",headers:i,body:JSON.stringify(l)},u=await F((()=>fetch(o,c)));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:D(e.authToken)}}throw await M("Create Installation",u)}(e,t);return X(e.appConfig,n)}catch(n){throw P(n)&&409===n.customData.serverCode?await Z(e.appConfig):await X(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ne(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ne(e){let t=await re(e.appConfig);for(;1===t.registrationStatus;)await B(100),t=await re(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await te(e);return n||t}return t}function re(e){return ee(e,(e=>{if(!e)throw T.create("installation-not-found");return se(e)}))}function se(e){return 1===(t=e).registrationStatus&&t.registrationTime+S<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function oe(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(R(e),"/").concat(n,"/authTokens:generate")}(n,t),o=O(n,t),i=r.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const a={installation:{sdkVersion:A,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(a)},c=await F((()=>fetch(s,l)));if(c.ok){return D(await c.json())}throw await M("Generate Auth Token",c)}async function ie(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await ee(e.appConfig,(r=>{if(!le(r))throw T.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await ae(e.appConfig);for(;1===n.authToken.requestStatus;)await B(100),n=await ae(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ie(e,t):r}(e,n),r;{if(!navigator.onLine)throw T.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await oe(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await X(e.appConfig,r),n}catch(n){if(!P(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await X(e.appConfig,n)}else await Z(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function ae(e){return ee(e,(e=>{if(!le(e))throw T.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+S<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function le(e){return void 0!==e&&2===e.registrationStatus}async function ce(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await te(e);t&&await t}(n);return(await ie(n,t)).token}function ue(e){return T.create("missing-app-config-values",{valueName:e})}const de="installations",he=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ue("App Configuration");if(!e.name)throw ue("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ue(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},me=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,de).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await te(t);return r?r.catch(console.error):ie(t).catch(console.error),n.fid}(n),getToken:e=>ce(n,e)}};(0,r.om)(new i.uA(de,he,"PUBLIC")),(0,r.om)(new i.uA("installations-internal",me,"PRIVATE")),(0,r.KO)(k,C),(0,r.KO)(k,C,"esm2017");const pe="analytics",fe="https://www.googletagmanager.com/gtag/js",ge=new s.Vy("@firebase/analytics"),ye={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ve=new o.FA("analytics","Analytics",ye);function xe(e){if(!e.startsWith(fe)){const t=ve.create("invalid-gtag-resource",{gtagURL:e});return ge.warn(t.message),""}return e}function be(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function we(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:xe}),r=document.createElement("script"),s="".concat(fe,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Ne(e,t,n,r){return async function(s){try{for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if("event"===s){const[r,s]=i;await async function(e,t,n,r,s){try{let o=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await be(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){o=[];break}o.push(s)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,s||{})}catch(o){ge.error(o)}}(e,t,n,r,s)}else if("config"===s){const[s,o]=i;await async function(e,t,n,r,s,o){const i=r[s];try{if(i)await t[i];else{const e=(await be(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(a){ge.error(a)}e("config",s,o)}(e,t,n,r,s,o)}else if("consent"===s){const[t]=i;e("consent","update",t)}else if("get"===s){const[t,n,r]=i;e("get",t,n,r)}else if("set"===s){const[t]=i;e("set",t)}else e(s,...i)}catch(l){ge.error(l)}}}const je=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ke(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:o}=e.options;if(!r)throw ve.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw ve.create("no-api-key")}const i=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ae;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Se({appId:r,apiKey:s,measurementId:o},i,a,t)}async function Se(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:je;var a;const{appId:l,measurementId:c}=e;try{await function(e,t){return new Promise(((n,r)=>{const s=Math.max(t-Date.now(),0),o=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(o),r(ve.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(u){if(c)return ge.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===u||void 0===u?void 0:u.message,"]")),{appId:l,measurementId:c};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:ke(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),i=await fetch(o,s);if(200!==i.status&&304!==i.status){let e="";try{const n=await i.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw ve.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}(e);return i.deleteThrottleMetadata(l),t}catch(u){const t=u;if(!function(e){if(!(e instanceof o.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(l),c)return ge.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:l,measurementId:c};throw u}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?(0,o.p9)(s,i.intervalMillis,30):(0,o.p9)(s,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:s+1};return i.setThrottleMetadata(l,d),ge.debug("Calling attemptFetch again in ".concat(r," millis")),Se(e,d,n,i)}}class Ae{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ee,_e;function Ie(e){_e=e}function Te(e){Ee=e}async function Pe(e,t,n,r,s,i,a){var l;const c=Ce(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ge.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>ge.error(e))),t.push(c);const u=async function(){if(!(0,o.zW)())return ge.warn(ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,o.eX)()}catch(e){return ge.warn(ve.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(fe)&&n.src.includes(e))return n;return null})(i)||we(i,d.measurementId),_e&&(s("consent","default",_e),Ie(void 0)),s("js",new Date);const m=null!==(l=null===a||void 0===a?void 0:a.config)&&void 0!==l?l:{};return m.origin="firebase",m.update=!0,null!=h&&(m.firebase_id=h),s("config",d.measurementId,m),Ee&&(s("set",Ee),Te(void 0)),d.measurementId}class Re{constructor(e){this.app=e}_delete(){return delete De[this.app.options.appId],Promise.resolve()}}let De={},Me=[];const Le={};let Oe,Fe,Be="dataLayer",Ue="gtag",ze=!1;function Ve(e,t,n){!function(){const e=[];if((0,o.sr)()&&e.push("This is a browser extension environment."),(0,o.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=ve.create("invalid-analytics-context",{errorInfo:t});ge.warn(n.message)}}();const r=e.options.appId;if(!r)throw ve.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ve.create("no-api-key");ge.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=De[r])throw ve.create("already-exists",{id:r});if(!ze){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Be);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(o=window[s]),window[s]=Ne(o,e,t,n),{gtagCore:o,wrappedGtag:window[s]}}(De,Me,Le,Be,Ue);Fe=e,Oe=t,ze=!0}De[r]=Pe(e,Me,Le,t,Oe,Be,n);return new Re(e)}function qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,o.Ku)(e);const t=(0,r.j6)(e,pe);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,pe);if(n.isInitialized()){const e=n.getImmediate();if((0,o.bD)(t,n.getOptions()))return e;throw ve.create("already-initialized")}const s=n.initialize({options:t});return s}(e)}function We(e,t,n,r){e=(0,o.Ku)(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(Fe,De[e.app.options.appId],t,n,r).catch((e=>ge.error(e)))}const He="@firebase/analytics",Ge="0.10.0";(0,r.om)(new i.uA(pe,((e,t)=>{let{options:n}=t;return Ve(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),(0,r.om)(new i.uA("analytics-internal",(function(e){try{const t=e.getProvider(pe).getImmediate();return{logEvent:(e,n,r)=>We(t,e,n,r)}}catch(t){throw ve.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,r.KO)(He,Ge),(0,r.KO)(He,Ge,"esm2017")},8166:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},8183:(e,t,n)=>{var r=n(2022),s=n(5776),o=n(9248),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!i[r(e)]}},8194:(e,t,n)=>{var r=n(6860),s=n(1515),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return o.call(e,t)})))}:s;e.exports=a},8246:(e,t,n)=>{var r=n(4759).Uint8Array;e.exports=r},8300:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},8345:(e,t,n)=>{"use strict";var r=n(9950),s=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,r,s,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),o=r.stack.split("\n"),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(1!==i||1!==a)do{if(i--,0>--a||s[i]!==o[a]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case C:return"Profiler";case k:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(me).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,ke=null;function Ce(e){if(e=xs(e)){if("function"!==typeof Ne)throw Error(o(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function Se(e){je?ke?ke.push(e):ke=[e]:je=e}function Ae(){if(je){var e=je,t=ke;if(ke=je=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function _e(){}var Ie=!1;function Te(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ee(e,t,n)}finally{Ie=!1,(null!==je||null!==ke)&&(_e(),Ae())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Me(e,t,n,r,s,o,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Oe=null,Fe=!1,Be=null,Ue={onError:function(e){Le=!0,Oe=e}};function ze(e,t,n,r,s,o,i,a,l){Le=!1,Oe=null,Me.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return We(s),e;if(i===r)return We(s),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ye=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,$e=s.unstable_requestPaint,Je=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var a=i&~s;0!==a?r=dt(a):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~s)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(o=t&-t)||16===s&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,kt,Ct,St=!1,At=[],Et=null,_t=null,It=null,Tt=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,s,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ot(e){var t=vs(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){jt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==Et&&Ft(Et)&&(Et=null),null!==_t&&Ft(_t)&&(_t=null),null!==It&&Ft(It)&&(It=null),Tt.forEach(Bt),Pt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return zt(t,e)}if(0<At.length){zt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&zt(Et,e),null!==_t&&zt(_t,e),null!==It&&zt(It,e),Tt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var s=xt,o=qt.transition;qt.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=s,qt.transition=o}}function Gt(e,t,n,r){var s=xt,o=qt.transition;qt.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=s,qt.transition=o}}function Kt(e,t,n,r){if(Wt){var s=Qt(e,t,n,r);if(null===s)Wr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,s),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,s),!0;case"mouseover":return It=Lt(It,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Tt.set(o,Lt(Tt.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==s;){var o=xs(s);if(null!==o&&wt(o),null===(o=Qt(e,t,n,r))&&Wr(e,t,r,Yt,n),o===s)break;s=o}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=vs(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,o=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[o-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=O({},cn,{view:0,detail:0}),hn=sn(dn),mn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(mn),fn=sn(O({},mn,{dataTransfer:0})),gn=sn(O({},dn,{relatedTarget:0})),yn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function Cn(){return kn}var Sn=O({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Sn),En=sn(O({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=O({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Tn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,On=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){Fr(e,0)}function Qn(e){if(K(bs(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Te(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function or(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=void 0===r.end?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=ur(n,o);var i=ur(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},kr={};function Cr(e){if(jr[e])return jr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return jr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Sr=Cr("animationend"),Ar=Cr("animationiteration"),Er=Cr("animationstart"),_r=Cr("transitionend"),Ir=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ir.set(e,t),l(t,[e])}for(var Rr=0;Rr<Tr.length;Rr++){var Dr=Tr[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Ar,"onAnimationIteration"),Pr(Er,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Oe;Le=!1,Oe=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;Or(s,a,c),o=l}else for(i=0;i<r.length;i++){if(l=(a=r[i]).instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;Or(s,a,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[zr]){e[zr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var s=Ht;break;case 4:s=Gt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==a;){if(null===(i=vs(a)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}a=a.parentNode}}r=r.return}Te((function(){var r=o,s=we(n),i=[];e:{var a=Ir.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Sr:case Ar:case Er:l=yn;break;case _r:l=In;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var m,p=r;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=Pe(p,h))&&u.push(Hr(p,f,m)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,s),i.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,f="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bs(l),m=null==c?a:bs(c),(a=new u(f,p+"leave",l,n,s)).target=d,a.relatedTarget=m,f=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=m,u.relatedTarget=d,f=u),d=f,l&&c)e:{for(h=c,p=0,m=u=l;m;m=Kr(m))p++;for(m=0,f=h;f;f=Kr(f))m++;for(;0<p-m;)u=Kr(u),p--;for(;0<m-p;)h=Kr(h),m--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Yr(i,a,l,u,!1),null!==c&&null!==d&&Yr(i,d,c,u,!0)}if("select"===(l=(a=r?bs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=ir;else{g=sr;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(i,g,n,s):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bs(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(i,n,s);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(i,n,s)}var v;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(On&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vn&&(v=en()):(Xt="value"in(Jt=s)?Jt.value:Jt.textContent,Vn=!0)),0<(y=Gr(r,x)).length&&(x=new bn(x,e,null,n,s),i.push({event:x,listeners:y}),v?x.data=v:null!==(v=zn(n))&&(x.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=v))}Fr(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,o=s.stateNode;5===s.tag&&null!==o&&(s=o,null!=(o=Pe(e,n))&&r.unshift(Hr(e,o,s)),null!=(o=Pe(e,t))&&r.push(Hr(e,o,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var o=t._reactName,i=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Pe(n,o))&&i.unshift(Hr(n,l,a)):s||null!=(l=Pe(n,o))&&i.push(Hr(n,l,a))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,os="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof os?function(e){return os.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Vt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,ms="__reactProps$"+ds,ps="__reactContainer$"+ds,fs="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ws(e){return e[ms]||null}var Ns=[],js=-1;function ks(e){return{current:e}}function Cs(e){0>js||(e.current=Ns[js],Ns[js]=null,js--)}function Ss(e,t){js++,Ns[js]=e.current,e.current=t}var As={},Es=ks(As),_s=ks(!1),Is=As;function Ts(e,t){var n=e.type.contextTypes;if(!n)return As;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,o={};for(s in n)o[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ps(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){Cs(_s),Cs(Es)}function Ds(e,t,n){if(Es.current!==As)throw Error(o(168));Ss(Es,t),Ss(_s,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(o(108,q(e)||"Unknown",s));return O({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||As,Is=Es.current,Ss(Es,e),Ss(_s,_s.current),!0}function Os(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ms(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Cs(_s),Cs(Es),Ss(Es,e)):Cs(_s),Ss(_s,n)}var Fs=null,Bs=!1,Us=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Vs(){if(!Us&&null!==Fs){Us=!0;var e=0,t=xt;try{var n=Fs;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Bs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Ze,Vs),s}finally{xt=t,Us=!1}}return null}var qs=[],Ws=0,Hs=null,Gs=0,Ks=[],Ys=0,Qs=null,$s=1,Js="";function Xs(e,t){qs[Ws++]=Gs,qs[Ws++]=Hs,Hs=e,Gs=t}function Zs(e,t,n){Ks[Ys++]=$s,Ks[Ys++]=Js,Ks[Ys++]=Qs,Qs=e;var r=$s;e=Js;var s=32-it(r)-1;r&=~(1<<s),n+=1;var o=32-it(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,$s=1<<32-it(t)+s|n<<s|r,Js=o+e}else $s=1<<o|n<<s|r,Js=e}function eo(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function to(e){for(;e===Hs;)Hs=qs[--Ws],qs[Ws]=null,Gs=qs[--Ws],qs[Ws]=null;for(;e===Qs;)Qs=Ks[--Ys],Ks[Ys]=null,Js=Ks[--Ys],Ks[Ys]=null,$s=Ks[--Ys],Ks[Ys]=null}var no=null,ro=null,so=!1,oo=null;function io(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:$s,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(so){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cs(n.nextSibling);var r=no;t&&ao(e,t)?io(r,n):(e.flags=-4097&e.flags|2,so=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,so=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!so)return uo(e),so=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw mo(),Error(o(418));for(;t;)io(e,t),t=cs(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?cs(e.stateNode.nextSibling):null;return!0}function mo(){for(var e=ro;e;)e=cs(e.nextSibling)}function po(){ro=no=null,so=!1}function fo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&xo(o)===t.type)?((r=s(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case N:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function m(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case P:return m(e,t,(s=n._init)(n._payload),r)}if(te(n)||M(n))return null!==s?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case P:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,s,null);vo(t,r)}return null}function f(s,o,a,l){for(var c=null,u=null,d=o,f=o=0,g=null;null!==d&&f<a.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var y=m(s,d,a[f],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),o=i(y,o,f),null===u?c=y:u.sibling=y,u=y,d=g}if(f===a.length)return n(s,d),so&&Xs(s,f),c;if(null===d){for(;f<a.length;f++)null!==(d=h(s,a[f],l))&&(o=i(d,o,f),null===u?c=d:u.sibling=d,u=d);return so&&Xs(s,f),c}for(d=r(s,d);f<a.length;f++)null!==(g=p(d,s,f,a[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),o=i(g,o,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),so&&Xs(s,f),c}function g(s,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,f=a,g=a=0,y=null,v=l.next();null!==f&&!v.done;g++,v=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var x=m(s,f,v.value,c);if(null===x){null===f&&(f=y);break}e&&f&&null===x.alternate&&t(s,f),a=i(x,a,g),null===d?u=x:d.sibling=x,d=x,f=y}if(v.done)return n(s,f),so&&Xs(s,g),u;if(null===f){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(a=i(v,a,g),null===d?u=v:d.sibling=v,d=v);return so&&Xs(s,g),u}for(f=r(s,f);!v.done;g++,v=l.next())null!==(v=p(f,s,g,v.value,c))&&(e&&null!==v.alternate&&f.delete(null===v.key?g:v.key),a=i(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&f.forEach((function(e){return t(s,e)})),so&&Xs(s,g),u}return function e(r,o,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=o;null!==u;){if(u.key===c){if((c=i.type)===j){if(7===u.tag){n(r,u.sibling),(o=s(u,i.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&xo(c)===u.type){n(r,u.sibling),(o=s(u,i.props)).ref=yo(r,u,i),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===j?((o=Mc(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=Dc(i.type,i.key,i.props,null,r.mode,l)).ref=yo(r,o,i),l.return=r,r=l)}return a(r);case N:e:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=s(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(i,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=i._init)(i._payload),l)}if(te(i))return f(r,o,i,l);if(M(i))return g(r,o,i,l);vo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=s(o,i)).return=r,r=o):(n(r,o),(o=Oc(i,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var wo=bo(!0),No=bo(!1),jo=ks(null),ko=null,Co=null,So=null;function Ao(){So=Co=ko=null}function Eo(e){var t=jo.current;Cs(jo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){ko=e,So=Co=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===Co){if(null===ko)throw Error(o(308));Co=e,ko.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return t}var Po=null;function Ro(e){null===Po?Po=[e]:Po.push(e)}function Do(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ro(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mo(e,n)}return null===(s=r.interleaved)?(t.next=t,Ro(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mo(e,n)}function zo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?s=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?s=o=t:o=o.next=t}else s=o=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var s=e.updateQueue;Lo=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=s.baseState;for(i=0,u=c=l=null,a=o;;){var h=a.lane,m=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,f=a;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){d=p.call(m,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,d,h):p)||void 0===h)break e;d=O({},d,h);break e;case 2:Lo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,i|=h;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(h=a).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===o&&(s.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Wo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(o(191,s));s.call(r)}}}var Ho={},Go=ks(Ho),Ko=ks(Ho),Yo=ks(Ho);function Qo(e){if(e===Ho)throw Error(o(174));return e}function $o(e,t){switch(Ss(Yo,t),Ss(Ko,e),Ss(Go,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Go),Ss(Go,t)}function Jo(){Cs(Go),Cs(Ko),Cs(Yo)}function Xo(e){Qo(Yo.current);var t=Qo(Go.current),n=le(t,e.type);t!==n&&(Ss(Ko,e),Ss(Go,n))}function Zo(e){Ko.current===e&&(Cs(Go),Cs(Ko))}var ei=ks(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var si=b.ReactCurrentDispatcher,oi=b.ReactCurrentBatchConfig,ii=0,ai=null,li=null,ci=null,ui=!1,di=!1,hi=0,mi=0;function pi(){throw Error(o(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,s,i){if(ii=i,ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Zi:ea,e=n(r,s),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(o(301));i+=1,ci=li=null,t.updateQueue=null,si.current=ta,e=n(r,s)}while(di)}if(si.current=Xi,t=null!==li&&null!==li.next,ii=0,ci=li=ai=null,ui=!1,t)throw Error(o(300));return e}function yi(){var e=0!==hi;return hi=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?ai.memoizedState=ci=e:ci=ci.next=e,ci}function xi(){if(null===li){var e=ai.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?ai.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(o(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?ai.memoizedState=ci=e:ci=ci.next=e}return ci}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=li,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ai.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ai.lanes|=i,Ll|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ni(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);ar(i,t.memoizedState)||(xa=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ji(){}function ki(e,t){var n=ai,r=xi(),s=t(),i=!ar(r.memoizedState,s);if(i&&(r.memoizedState=s,xa=!0),r=r.queue,Li(Ai.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Ti(9,Si.bind(null,n,r,s,t),void 0,null),null===_l)throw Error(o(349));0!==(30&ii)||Ci(n,t,s)}return s}function Ci(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ai.updateQueue)?(t={lastEffect:null,stores:null},ai.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&_i(e)}function Ai(e,t,n){return n((function(){Ei(t)&&_i(e)}))}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function _i(e){var t=Mo(e,1);null!==t&&nc(t,e,1,-1)}function Ii(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ai,e),[t.memoizedState,e]}function Ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ai.updateQueue)?(t={lastEffect:null,stores:null},ai.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pi(){return xi().memoizedState}function Ri(e,t,n,r){var s=vi();ai.flags|=e,s.memoizedState=Ti(1|t,n,void 0,void 0===r?null:r)}function Di(e,t,n,r){var s=xi();r=void 0===r?null:r;var o=void 0;if(null!==li){var i=li.memoizedState;if(o=i.destroy,null!==r&&fi(r,i.deps))return void(s.memoizedState=Ti(t,n,o,r))}ai.flags|=e,s.memoizedState=Ti(1|t,n,o,r)}function Mi(e,t){return Ri(8390656,8,e,t)}function Li(e,t){return Di(2048,8,e,t)}function Oi(e,t){return Di(4,2,e,t)}function Fi(e,t){return Di(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Bi.bind(null,t,e),n)}function zi(){}function Vi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=ft(),ai.lanes|=n,Ll|=n,e.baseState=!0),t)}function Hi(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{xt=n,oi.transition=r}}function Gi(){return xi().memoizedState}function Ki(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qi(e))$i(t,n);else if(null!==(n=Do(e,t,n,r))){nc(n,e,r,ec()),Ji(n,t,r)}}function Yi(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))$i(t,s);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,i)){var l=t.interleaved;return null===l?(s.next=s,Ro(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Do(e,t,s,r))&&(nc(n,e,r,s=ec()),Ji(n,t,r))}}function Qi(e){var t=e.alternate;return e===ai||null!==t&&t===ai}function $i(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xi={readContext:To,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:To,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ri(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,ai,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Ii,useDebugValue:zi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Hi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ai,s=vi();if(so){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===_l)throw Error(o(349));0!==(30&ii)||Ci(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Mi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Ti(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=_l.identifierPrefix;if(so){var n=Js;t=":"+t+"R"+(n=($s&~(1<<32-it($s)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:To,useCallback:Vi,useContext:To,useEffect:Li,useImperativeHandle:Ui,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:qi,useReducer:wi,useRef:Pi,useState:function(){return wi(bi)},useDebugValue:zi,useDeferredValue:function(e){return Wi(xi(),li.memoizedState,e)},useTransition:function(){return[wi(bi)[0],xi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Gi,unstable_isNewReconciler:!1},ta={readContext:To,useCallback:Vi,useContext:To,useEffect:Li,useImperativeHandle:Ui,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:qi,useReducer:Ni,useRef:Pi,useState:function(){return Ni(bi)},useDebugValue:zi,useDeferredValue:function(e){var t=xi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[Ni(bi)[0],xi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Gi,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),o=Bo(r,s);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,s))&&(nc(t,e,s,r),zo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),o=Bo(r,s);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,s))&&(nc(t,e,s,r),zo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Bo(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Uo(e,s,r))&&(nc(t,e,r,n),zo(t,e,r))}};function oa(e,t,n,r,s,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,o))}function ia(e,t,n){var r=!1,s=As,o=t.contextType;return"object"===typeof o&&null!==o?o=To(o):(s=Ps(t)?Is:Es.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ts(e,s):As),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?s.context=To(o):(o=Ps(t)?Is:Es.current,s.context=Ts(e,o)),s.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),qo(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(o){s="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:s,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),da(0,t)},n}function pa(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=b.ReactCurrentOwner,xa=!1;function ba(e,t,n,r){t.child=null===e?No(t,null,n,r):wo(t,e.child,n,r)}function wa(e,t,n,r,s){n=n.render;var o=t.ref;return Io(t,s),r=gi(e,t,n,r,o,s),n=yi(),null===e||xa?(so&&n&&eo(t),t.flags|=1,ba(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wa(e,t,s))}function Na(e,t,n,r,s){if(null===e){var o=n.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ja(e,t,o,r,s))}if(o=e.child,0===(e.lanes&s)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Wa(e,t,s)}return t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e}function ja(e,t,n,r,s){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=o,0===(e.lanes&s))return t.lanes=e.lanes,Wa(e,t,s);0!==(131072&e.flags)&&(xa=!0)}}return Sa(e,t,n,r,s)}function ka(e,t,n){var r=t.pendingProps,s=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Rl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Rl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ss(Rl,Pl),Pl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ss(Rl,Pl),Pl|=r;return ba(e,t,s,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,n,r,s){var o=Ps(n)?Is:Es.current;return o=Ts(t,o),Io(t,s),n=gi(e,t,n,r,o,s),r=yi(),null===e||xa?(so&&r&&eo(t),t.flags|=1,ba(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wa(e,t,s))}function Aa(e,t,n,r,s){if(Ps(n)){var o=!0;Ls(t)}else o=!1;if(Io(t,s),null===t.stateNode)qa(e,t),ia(t,n,r),la(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Ts(t,c=Ps(n)?Is:Es.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,i,r,c),Lo=!1;var h=t.memoizedState;i.state=h,qo(t,r,i,s),l=t.memoizedState,a!==r||h!==l||_s.current||Lo?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Lo||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Ts(t,l=Ps(n)?Is:Es.current);var m=n.getDerivedStateFromProps;(u="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,i,r,l),Lo=!1,h=t.memoizedState,i.state=h,qo(t,r,i,s);var p=t.memoizedState;a!==d||h!==p||_s.current||Lo?("function"===typeof m&&(ra(t,n,m,r),p=t.memoizedState),(c=Lo||oa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ea(e,t,n,r,o,s)}function Ea(e,t,n,r,s,o){Ca(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Os(t,n,!1),Wa(e,t,o);r=t.stateNode,va.current=t;var a=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,a,o)):ba(e,t,a,o),t.memoizedState=r.state,s&&Os(t,n,!0),t.child}function _a(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),$o(e,t.containerInfo)}function Ia(e,t,n,r,s){return po(),fo(s),t.flags|=256,ba(e,t,n,r),t.child}var Ta,Pa,Ra,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oa(e,t,n){var r,s=t.pendingProps,i=ei.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ss(ei,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,s,0,null),e=Mc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ma,e):Fa(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(i=Mc(i,s,a,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ma,i);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(i=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=_l)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Mo(e,s),nc(r,e,s,-1))}return fc(),Ba(e,t,a,r=ua(Error(o(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ro=cs(s.nextSibling),no=t,so=!0,oo=null,null!==e&&(Ks[Ys++]=$s,Ks[Ys++]=Js,Ks[Ys++]=Qs,$s=e.id,Js=e.overflow,Qs=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(a){a=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?a=Rc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,s}return e=(a=e.child).sibling,s=Rc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fa(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&fo(r),wo(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function za(e,t,n,r,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Va(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ss(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),za(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ti(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ps(t.type)&&Rs(),Ga(t),null;case 3:return r=t.stateNode,Jo(),Cs(_s),Cs(Es),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),Pa(e,t),Ga(t),null;case 5:Zo(t);var s=Qo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ga(t),null}if(e=Qo(Go.current),ho(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[hs]=t,r[ms]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)Br(Mr[s],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":$(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":se(r,i),Br("invalid",r)}for(var l in ve(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),Z(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ms]=r,Ta(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Br("cancel",e),Br("close",e),s=r;break;case"iframe":case"object":case"embed":Br("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)Br(Mr[s],e);s=r;break;case"source":Br("error",e),s=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),s=r;break;case"details":Br("toggle",e),s=r;break;case"input":$(e,r),s=Q(e,r),Br("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=O({},r,{value:void 0}),Br("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Br("invalid",e)}for(i in ve(n,s),c=s)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(a.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Br("scroll",e):null!=u&&x(e,i,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Qo(Yo.current),Qo(Go.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ga(t),null;case 13:if(Cs(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(so&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))mo(),po(),t.flags|=98560,i=!1;else if(i=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[hs]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Jo(),Pa(e,t),null===e&&Vr(t.stateNode.containerInfo),Ga(t),null;case 10:return Eo(t.type._context),Ga(t),null;case 19:if(Cs(ei),null===(i=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ha(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Ha(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Vl&&(t.flags|=128,r=!0,Ha(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!so)return Ga(t),null}else 2*Je()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ha(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,Ss(ei,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Ps(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Cs(_s),Cs(Es),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Cs(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(ei),null;case 4:return Jo(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ta=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Ra=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qo(Go.current);var o,i=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),i=[];break;case"select":s=O({},s,{value:void 0}),r=O({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,void 0!==o&&el(t,n,o)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[fs],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Vt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&el(n,t,i),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,hl(e,t,n),$a=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));ml(i,a,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){kc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(fl(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(s,i),xe(l,a);var u=xe(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):x(s,d,h,u)}switch(l){case"input":X(s,i);break;case"textarea":oe(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(s,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[ms]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),yl(e);break;case 13:fl(t,e),yl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||d,fl(t,e),$a=u):fl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(m=Xa).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Za(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){r=m,n=m.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Za(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==p?(p.return=m,Xa=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,al(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,al(e),i);break;default:throw Error(o(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var s=Xa,o=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Qa;if(!i){var a=s.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Qa;var c=$a;if(Qa=i,($a=l)&&!c)for(Xa=s;null!==Xa;)l=(i=Xa).child,22===i.tag&&null!==i.memoizedState?Nl(s):null!==l?(l.return=i,Xa=l):Nl(s);for(;null!==o;)Xa=o,xl(o,t,n),o=o.sibling;Xa=s,Qa=a,$a=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==o?(o.return=s,Xa=o):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wo(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}$a||512&t.flags&&sl(t)}catch(m){kc(t,t.return,m)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function wl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Nl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){kc(t,s,l)}}var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var jl,kl=Math.ceil,Cl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,El=0,_l=null,Il=null,Tl=0,Pl=0,Rl=ks(0),Dl=0,Ml=null,Ll=0,Ol=0,Fl=0,Bl=null,Ul=null,zl=0,Vl=1/0,ql=null,Wl=!1,Hl=null,Gl=null,Kl=!1,Yl=null,Ql=0,$l=0,Jl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Je():-1!==Xl?Xl:Xl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==go.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(o(185));yt(e,n,r),0!==(2&El)&&e===_l||(e===_l&&(0===(2&El)&&(Ol|=n),4===Dl&&ac(e,Tl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Vl=Je()+500,Bs&&Vs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),a=1<<i,l=s[i];-1===l?0!==(a&n)&&0===(a&r)||(s[i]=mt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===_l?Tl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bs=!0,zs(e)}(lc.bind(null,e)):zs(lc.bind(null,e)),is((function(){0===(6&El)&&Vs()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(o(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===_l?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=El;El|=2;var i=pc();for(_l===e&&Tl===t||(ql=null,Vl=Je()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Ao(),Cl.current=i,El=s,null!==Il?t=0:(_l=null,Tl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t)throw n=Ml,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!ar(o(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t))throw n=Ml,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Ul,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Ul,ql),t);break}wc(e,Ul,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-it(r);i=1<<a,(a=t[a])>s&&(s=a),r&=~i}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Ul,ql),r);break}wc(e,Ul,ql);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(o(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,ql),rc(e,Je()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Je()+500,Bs&&Vs())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&Nc();var t=El;El|=1;var n=Al.transition,r=xt;try{if(Al.transition=null,xt=1,e)return e()}finally{xt=r,Al.transition=n,0===(6&(El=t))&&Vs()}}function dc(){Pl=Rl.current,Cs(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Rs();break;case 3:Jo(),Cs(_s),Cs(Es),ri();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Cs(ei);break;case 10:Eo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(_l=e,Il=e=Rc(e.current,null),Tl=Pl=t,Dl=0,Ml=null,Fl=Ol=Ll=0,Ul=Bl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var s=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=s,r.next=i}n.pending=r}Po=null}return e}function mc(e,t){for(;;){var n=Il;try{if(Ao(),si.current=Xi,ui){for(var r=ai.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=ai=null,di=!1,hi=0,Sl.current=null,null===n||null===n.return){Dl=1,Ml=t,Il=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&fa(i,u,t),c=u;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fa(i,u,t),fc();break e}c=Error(o(426))}else if(so&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),fo(ca(c,l));break e}}i=c=ca(c,l),4!==Dl&&(Dl=2),null===Bl?Bl=[i]:Bl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,ma(0,c,t));break e;case 1:l=c;var v=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Gl||!Gl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,pa(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Xi,null===e?Xi:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===_l||0===(268435455&Ll)&&0===(268435455&Ol)||ac(_l,Tl)}function gc(e,t){var n=El;El|=2;var r=pc();for(_l===e&&Tl===t||(ql=null,hc(e,t));;)try{yc();break}catch(s){mc(e,s)}if(Ao(),El=n,Cl.current=r,null!==Il)throw Error(o(261));return _l=null,Tl=0,Dl}function yc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!Qe();)xc(Il)}function xc(e){var t=jl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Pl)))return void(Il=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=xt,s=Al.transition;try{Al.transition=null,xt=1,function(e,t,n,r){do{Nc()}while(null!==Yl);if(0!==(6&El))throw Error(o(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}(e,i),e===_l&&(Il=_l=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,_c(tt,(function(){return Nc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Al.transition,Al.transition=null;var a=xt;xt=1;var l=El;El|=4,Sl.current=null,function(e,t){if(es=Wt,mr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==i||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++d===r&&(c=a),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Wt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}f=tl,tl=!1}(e,n),gl(n,e),pr(ts),Wt=!!es,ts=es=null,e.current=n,vl(n,e,s),$e(),El=l,xt=a,Al.transition=i}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Ql=s),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Jl?$l++:($l=0,Jl=e):$l=0,Vs()}(e,t,n,r)}finally{Al.transition=s,xt=r}return null}function Nc(){if(null!==Yl){var e=bt(Ql),t=Al.transition,n=xt;try{if(Al.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&El))throw Error(o(331));var s=El;for(El|=4,Xa=e.current;null!==Xa;){var i=Xa,a=i.child;if(0!==(16&Xa.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var m=(d=Xa).sibling,p=d.return;if(ol(d),d===u){Xa=null;break}if(null!==m){m.return=p,Xa=m;break}Xa=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=i}}if(0!==(2064&i.subtreeFlags)&&null!==a)a.return=i,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(i=Xa).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xa=v;break e}Xa=i.return}}var x=e.current;for(Xa=x;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=x;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){kc(l,l.return,N)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(El=s,Vs(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{xt=n,Al.transition=t}}return!1}function jc(e,t,n){e=Uo(e,t=ma(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Uo(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Tl&n)===n&&(4===Dl||3===Dl&&(130023424&Tl)===Tl&&500>Je()-zl?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Mo(e,t))&&(yt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sc(e,n)}function _c(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Ic(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,s,i){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case j:return Mc(n.children,s,i,t);case k:a=8,s|=8;break;case C:return(e=Tc(12,n,t,2|s)).elementType=C,e.lanes=i,e;case _:return(e=Tc(13,n,t,s)).elementType=_,e.lanes=i,e;case I:return(e=Tc(19,n,t,s)).elementType=I,e.lanes=i,e;case R:return Lc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:a=10;break e;case A:a=9;break e;case E:a=11;break e;case T:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Tc(a,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Mc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,o,i,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Tc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function zc(e){if(!e)return As;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Ms(e,n,t)}return t}function Vc(e,t,n,r,s,o,i,a,l){return(e=Uc(n,r,!0,e,0,o,0,a,l)).context=zc(null),n=e.current,(o=Bo(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function qc(e,t,n,r){var s=t.current,o=ec(),i=tc(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(s,t,i))&&(nc(e,s,i,o),zo(e,s,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:_a(t),po();break;case 5:Xo(t);break;case 1:Ps(t.type)&&Ls(t);break;case 4:$o(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ss(jo,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ss(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oa(e,t,n):(Ss(ei,1&ei.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ss(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Wa(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,so&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var s=Ts(t,Es.current);Io(t,n),s=gi(null,t,r,e,s,n);var i=yi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(r)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Oo(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,la(t,r,e,n),t=Ea(null,t,r,!0,i,n)):(t.tag=0,so&&i&&eo(t),ba(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=na(r,e),s){case 0:t=Sa(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=Na(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Sa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 1:return r=t.type,s=t.pendingProps,Aa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 3:e:{if(_a(t),null===e)throw Error(o(387));r=t.pendingProps,s=(i=t.memoizedState).element,Fo(e,t),qo(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ia(e,t,r,n,s=ca(Error(o(423)),t));break e}if(r!==s){t=Ia(e,t,r,n,s=ca(Error(o(424)),t));break e}for(ro=cs(t.stateNode.containerInfo.firstChild),no=t,so=!0,oo=null,n=No(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===s){t=Wa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==i&&ns(r,i)&&(t.flags|=32),Ca(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Oa(e,t,n);case 4:return $o(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Ss(jo,r._currentValue),r._currentValue=a,null!==i)if(ar(i.value,a)){if(i.children===s.children&&!_s.current){t=Wa(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){a=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Bo(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),_o(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_o(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}ba(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Io(t,n),r=r(s=To(s)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return s=na(r=t.type,t.pendingProps),Na(e,t,r,s=na(r.type,s),n);case 15:return ja(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:na(r,s),qa(e,t),t.tag=1,Ps(r)?(e=!0,Ls(t)):e=!1,Io(t,n),ia(t,r,s),la(t,r,s,n),Ea(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return ka(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof s){var a=s;s=function(){var e=Wc(i);a.call(e)}}qc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var o=r;r=function(){var e=Wc(i);o.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ps]=i.current,Vr(8===e.nodeType?e.parentNode:e),uc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ps]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,s,r);return Wc(i)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[ps]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&El)&&(Vl=Je()+500,Vs()))}break;case 13:uc((function(){var t=Mo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},Nt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Mo(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},kt=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Ne=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(o(90));K(r),X(r,s)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,_e=uc;var eu={usingClientEntryPoint:!1,Events:[xs,bs,ws,Se,Ae,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(o(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,s,0,i,a),e[ps]=t.current,Vr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ps]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8361:(e,t)=>{const n=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},8384:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},8415:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}},8429:(e,t,n)=>{"use strict";var r;n.d(t,{$P:()=>m,BV:()=>U,C5:()=>L,Ix:()=>B,KC:()=>x,Rq:()=>l,V8:()=>M,Zp:()=>y,g:()=>b,jb:()=>c,qh:()=>F,sp:()=>a,sv:()=>O,x$:()=>w,zy:()=>f});var s=n(9950),o=n(1018);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const a=s.createContext(null);const l=s.createContext(null);const c=s.createContext(null);const u=s.createContext(null);const d=s.createContext({outlet:null,matches:[],isDataRoute:!1});const h=s.createContext(null);function m(e,t){let{relative:n}=void 0===t?{}:t;p()||(0,o.Oi)(!1);let{basename:r,navigator:i}=s.useContext(c),{hash:a,pathname:l,search:u}=w(e,{relative:n}),d=l;return"/"!==r&&(d="/"===l?r:(0,o.HS)([r,l])),i.createHref({pathname:d,search:u,hash:a})}function p(){return null!=s.useContext(u)}function f(){return p()||(0,o.Oi)(!1),s.useContext(u).location}function g(e){s.useContext(c).static||s.useLayoutEffect(e)}function y(){let{isDataRoute:e}=s.useContext(d);return e?function(){let{router:e}=I(E.UseNavigateStable),t=P(_.UseNavigateStable),n=s.useRef(!1);return g((()=>{n.current=!0})),s.useCallback((function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,i({fromRouteId:t},s)))}),[e,t])}():function(){p()||(0,o.Oi)(!1);let e=s.useContext(a),{basename:t,future:n,navigator:r}=s.useContext(c),{matches:i}=s.useContext(d),{pathname:l}=f(),u=JSON.stringify((0,o.yD)(i,n.v7_relativeSplatPath)),h=s.useRef(!1);return g((()=>{h.current=!0})),s.useCallback((function(n,s){if(void 0===s&&(s={}),!h.current)return;if("number"===typeof n)return void r.go(n);let i=(0,o.Gh)(n,JSON.parse(u),l,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:(0,o.HS)([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)}),[t,r,u,l,e])}()}const v=s.createContext(null);function x(){return s.useContext(v)}function b(){let{matches:e}=s.useContext(d),t=e[e.length-1];return t?t.params:{}}function w(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(c),{matches:i}=s.useContext(d),{pathname:a}=f(),l=JSON.stringify((0,o.yD)(i,r.v7_relativeSplatPath));return s.useMemo((()=>(0,o.Gh)(e,JSON.parse(l),a,"path"===n)),[e,l,a,n])}function N(e,t,n,r){p()||(0,o.Oi)(!1);let{navigator:a}=s.useContext(c),{matches:l}=s.useContext(d),h=l[l.length-1],m=h?h.params:{},g=(h&&h.pathname,h?h.pathnameBase:"/");h&&h.route;let y,v=f();if(t){var x;let e="string"===typeof t?(0,o.Rr)(t):t;"/"===g||(null==(x=e.pathname)?void 0:x.startsWith(g))||(0,o.Oi)(!1),y=e}else y=v;let b=y.pathname||"/",w=b;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let N=(0,o.ue)(e,{pathname:w});let j=A(N&&N.map((e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:(0,o.HS)([g,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:(0,o.HS)([g,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,r);return t&&j?s.createElement(u.Provider,{value:{location:i({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:o.rc.Pop}},j):j}function j(){let e=function(){var e;let t=s.useContext(h),n=T(_.UseRouteError),r=P(_.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,o.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const k=s.createElement(j,null);class C extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(d.Provider,{value:this.props.routeContext},s.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S(e){let{routeContext:t,match:n,children:r}=e,o=s.useContext(a);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(d.Provider,{value:t},r)}function A(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||(0,o.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<l.length;s++){let e=l[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,r,o)=>{let i,a=!1,h=null,m=null;var p;n&&(i=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||k,u&&(d<0&&0===o?(p="route-fallback",!1||R[p]||(R[p]=!0),a=!0,m=null):d===o&&(a=!0,m=r.route.hydrateFallbackElement||null)));let f=t.concat(l.slice(0,o+1)),g=()=>{let t;return t=i?h:a?m:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(S,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?s.createElement(C,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()}),null)}var E=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(E||{}),_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_||{});function I(e){let t=s.useContext(a);return t||(0,o.Oi)(!1),t}function T(e){let t=s.useContext(l);return t||(0,o.Oi)(!1),t}function P(e){let t=function(){let e=s.useContext(d);return e||(0,o.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,o.Oi)(!1),n.route.id}const R={};const D=(e,t,n)=>{};function M(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&D("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||D("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&D("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&D("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&D("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&D("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=n.t(s,2))).startTransition;function L(e){let{to:t,replace:n,state:r,relative:i}=e;p()||(0,o.Oi)(!1);let{future:a,static:l}=s.useContext(c),{matches:u}=s.useContext(d),{pathname:h}=f(),m=y(),g=(0,o.Gh)(t,(0,o.yD)(u,a.v7_relativeSplatPath),h,"path"===i),v=JSON.stringify(g);return s.useEffect((()=>m(JSON.parse(v),{replace:n,state:r,relative:i})),[m,v,i,n,r]),null}function O(e){return function(e){let t=s.useContext(d).outlet;return t?s.createElement(v.Provider,{value:e},t):t}(e.context)}function F(e){(0,o.Oi)(!1)}function B(e){let{basename:t="/",children:n=null,location:r,navigationType:a=o.rc.Pop,navigator:l,static:d=!1,future:h}=e;p()&&(0,o.Oi)(!1);let m=t.replace(/^\/*/,"/"),f=s.useMemo((()=>({basename:m,navigator:l,static:d,future:i({v7_relativeSplatPath:!1},h)})),[m,h,l,d]);"string"===typeof r&&(r=(0,o.Rr)(r));let{pathname:g="/",search:y="",hash:v="",state:x=null,key:b="default"}=r,w=s.useMemo((()=>{let e=(0,o.pb)(g,m);return null==e?null:{location:{pathname:e,search:y,hash:v,state:x,key:b},navigationType:a}}),[m,g,y,v,x,b,a]);return null==w?null:s.createElement(c.Provider,{value:f},s.createElement(u.Provider,{children:n,value:w}))}function U(e){let{children:t,location:n}=e;return N(z(t),n)}new Promise((()=>{}));s.Component;function z(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,z(e.props.children,i));e.type!==F&&(0,o.Oi)(!1),e.props.index&&e.props.children&&(0,o.Oi)(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=z(e.props.children,i)),n.push(a)})),n}},8577:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,m=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,x=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case i:case m:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case f:case l:return e;default:return t}}case s:return t}}}function N(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=f,t.Portal=s,t.Profiler=a,t.StrictMode=i,t.Suspense=m,t.isAsyncMode=function(e){return N(e)||w(e)===u},t.isConcurrentMode=N,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===f},t.isPortal=function(e){return w(e)===s},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===i},t.isSuspense=function(e){return w(e)===m},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===i||e===m||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},8592:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9950);const s={progressContainer:"progress-tracker_progressContainer__Gr6t5",progressRing:"progress-tracker_progressRing__si2yL",celebrate:"progress-tracker_celebrate__igfYI",progressBackground:"progress-tracker_progressBackground__R0+sV",progressForeground:"progress-tracker_progressForeground__Fn-9N",progressPercentage:"progress-tracker_progressPercentage__4bsGp",sectionsList:"progress-tracker_sectionsList__8ufAB",sectionItem:"progress-tracker_sectionItem__tb1w2",checkIcon:"progress-tracker_checkIcon__XAicy",crossIcon:"progress-tracker_crossIcon__Fhesp",encouragingMessage:"progress-tracker_encouragingMessage__w86f9",confetti:"progress-tracker_confetti__4Irdh",confettiPiece:"progress-tracker_confettiPiece__x4Wcl"};var o=n(4414);const i=e=>{let{percentage:t,showCelebration:n=!1,completedSections:i=[],incompleteSections:a=[]}=e;const l=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(l.current){const e=2*Math.PI*40,n=e-t/100*e;l.current.style.transition="stroke-dashoffset 0.8s ease-in-out",l.current.style.strokeDashoffset="".concat(n)}}),[t]);return(0,o.jsxs)("div",{className:s.progressContainer,children:[(0,o.jsxs)("div",{className:"".concat(s.progressRing," ").concat(n?s.celebrate:""),children:[(0,o.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:[(0,o.jsx)("circle",{className:s.progressBackground,cx:"50",cy:"50",r:"40",fill:"none",strokeWidth:"8"}),(0,o.jsx)("circle",{ref:l,className:s.progressForeground,cx:"50",cy:"50",r:"40",fill:"none",strokeWidth:"8",strokeDasharray:2*Math.PI*40,strokeDashoffset:2*Math.PI*40,transform:"rotate(-90 50 50)"})]}),(0,o.jsxs)("div",{className:s.progressPercentage,children:[t,"%"]}),n&&(0,o.jsx)("div",{className:s.confetti,children:[...Array(20)].map(((e,t)=>(0,o.jsx)("div",{className:s.confettiPiece,style:{"--delay":"".concat(.1*t,"s"),"--angle":"".concat(360*Math.random(),"deg"),"--distance":"".concat(50*Math.random()+50,"px")}},t)))})]}),(0,o.jsxs)("div",{className:s.sectionsList,children:[i.map(((e,t)=>(0,o.jsxs)("div",{className:s.sectionItem,children:[(0,o.jsx)("span",{className:s.checkIcon,children:"\u2713"}),(0,o.jsx)("span",{className:s.sectionName,children:e})]},t))),a.map(((e,t)=>(0,o.jsxs)("div",{className:s.sectionItem,children:[(0,o.jsx)("span",{className:s.crossIcon,children:"\u2717"}),(0,o.jsx)("span",{className:s.sectionName,children:e})]},t)))]}),(0,o.jsx)("p",{className:s.encouragingMessage,children:100===t?"Perfect! Your profile is complete! \ud83c\udf89":t>=75?"Almost there! Just a few more steps to go! \ud83d\ude80":t>=50?"You're making great progress! Keep it up! \u2728":t>=25?"Good start! Keep building your profile! \ud83d\udcaa":"Let's start building your brand profile! \ud83c\udfd7\ufe0f"})]})}},8631:(e,t,n)=>{"use strict";n.d(t,{db:()=>a,j:()=>l});var r=n(3849),s=n(700),o=n(8025),i=n(2575);const a=(0,r.aU)(i.yA),l=(0,s.xI)(i.yA);(0,o.P5)(i.yA)},8647:(e,t,n)=>{const r=n(794),s=n(6580);function o(e){this.mode=r.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=s.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=o},8857:(e,t,n)=>{var r=n(9343),s=n(4753),o=n(5916),i=n(2535);e.exports=function(e){return o(e)?r(i(e)):s(e)}},8869:(e,t,n)=>{"use strict";n.d(t,{Ov:()=>i});var r=n(9379),s=n(3849),o=n(2575);const i=async e=>{try{const t=(0,s.rJ)(o.db,"customerPrograms"),n=(0,s.P)(t,(0,s._M)("customerId","==",e),(0,s._M)("status","==","active"));return(await(0,s.GG)(n)).docs.map((e=>(0,r.A)((0,r.A)({},e.data()),{},{id:e.id})))}catch(t){throw console.error("Error getting customer programs:",t),t}}},8925:(e,t,n)=>{var r=n(220),s=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=s},8974:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,s=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,a=new t(512),l=new t(512),c=new t(512);function u(e){return a.get(e)||a.set(e,d(e).map((function(e){return e.replace(i,"$2")})))}function d(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function m(e){return!h(e)&&(function(e){return e.match(s)&&!e.match(r)}(e)||function(e){return o.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:u,setter:function(e){var t=u(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,s=t.length,o=e;r<s-1;){var i=t[r];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;o=o[t[r++]]}o[t[r]]=n}))},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,(function(e){for(var r=0,s=n.length;r<s;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,s,o,i,a=e.length;for(s=0;s<a;s++)(r=e[s])&&(m(r)&&(r='"'+r+'"'),o=!(i=h(r))&&/^\d+$/.test(r),t.call(n,r,i,o,s,e))}(Array.isArray(e)?e:d(e),t,n)}}},8982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1024);Object.keys(r).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},9002:e=>{e.exports=function(e){return e}},9061:(e,t,n)=>{"use strict";n.d(t,{Am:()=>P,FA:()=>A,Fy:()=>f,I9:()=>R,Im:()=>_,Ku:()=>q,Ll:()=>v,T9:()=>h,Tj:()=>u,Uj:()=>i,XA:()=>m,ZQ:()=>g,bD:()=>I,cY:()=>p,dM:()=>C,eX:()=>k,g:()=>S,hp:()=>D,jZ:()=>y,lT:()=>w,lV:()=>b,nr:()=>N,p9:()=>V,sr:()=>x,tD:()=>M,u:()=>a,yU:()=>d,zW:()=>j});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],o=s+1<e.length,i=o?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&o)}else if(s>239&&s<365){const o=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==l)throw new o;const c=t<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function x(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function N(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function C(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new S(n,o,t)}}const E=/\{\$([^}]+)}/g;function _(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function I(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],o=t[s];if(T(n)&&T(o)){if(!I(n,o))return!1}else if(n!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function P(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function M(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function O(){}const F=1e3,B=2,U=144e5,z=.5;function V(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:F)*Math.pow(t,e),r=Math.round(z*n*(Math.random()-.5)*2);return Math.min(U,n+r)}function q(e){return e&&e._delegate?e._delegate:e}},9131:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},9189:(e,t,n)=>{var r=n(1516),s=n(1454),o=n(1047),i=RegExp("['\u2019]","g");e.exports=function(e){return function(t){return r(o(s(t).replace(i,"")),e,"")}}},9248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},9329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7511);Object.keys(r).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},9343:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4467);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},9508:e=>{e.exports=function(e){return e.split("")}},9516:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9950),s=n(4414);const o=e=>{let{text:t,children:n,position:o="top"}=e;const[i,a]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsx)("div",{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onFocus:()=>a(!0),onBlur:()=>a(!1),children:n}),i&&(0,s.jsx)("div",{className:"absolute z-10 ".concat({top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"}[o]),children:(0,s.jsx)("div",{className:"bg-gray-800 text-white text-xs rounded py-1 px-2 max-w-xs",children:t})})]})}},9526:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>s})},9751:(e,t,n)=>{"use strict";n.d(t,{c7:()=>we,KR:()=>be,D:()=>xe});var r=n(6493),s=n(9061),o=n(7253);const i="firebasestorage.googleapis.com",a="storageBucket";class l extends s.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),"Firebase Storage: ".concat(t," (").concat(d(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function m(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p(){return new l(c.CANCELED,"User canceled the upload/download.")}function f(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g(e){return new l(c.INVALID_ARGUMENT,e)}function y(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function v(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function x(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=b.makeFromUrl(e,t)}catch(s){return new b(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),u=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===i?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let i=0;i<u.length;i++){const t=u[i],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new b(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class w{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function N(e){return"string"===typeof e||e instanceof String}function j(e){return k()&&e instanceof Blob}function k(){return"undefined"!==typeof Blob&&!(0,s.Ll)()}function C(e,t,n,r){if(r<t)throw g("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw g("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function S(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function A(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function E(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class _{constructor(e,t,n,r,s,o,i,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=i,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new I(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,s=n.getStatus();if(!t||E(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new I(!1,null,t))}const o=-1!==this.successCodes_.indexOf(s);e(!0,new I(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch(o){r(o)}else if(null!==s){const e=h();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?y():p())}else{r(m())}};this.canceled_?t(0,new I(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,o=null,i=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout((()=>{s=null,e(m,l())}),t)}function h(){o&&clearTimeout(o)}function m(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||i)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function f(e){p||(p=!0,h(),c||(null!==s?(e||(a=2),clearTimeout(s),d(0)):e||(a=1)))}return d(0),o=setTimeout((()=>{i=!0,f(!0)}),n),f}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class I{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function T(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function P(){const e=T();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(k())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function R(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const D="raw",M="base64",L="base64url",O="data_url";class F{constructor(e,t){this.data=e,this.contentType=t||null}}function B(e,t){switch(e){case D:return new F(U(t));case M:case L:return new F(z(e,t));case O:return new F(function(e){const t=new V(e);return t.base64?z(M,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw v(O,"Malformed data URL.")}return U(t)}(t.rest)}(t),new V(t).contentType)}throw h()}function U(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function z(e,t){switch(e){case M:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw v(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case L:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw v(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw v(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class V{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw v(O,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class q{constructor(e,t){let n=0,r="";j(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(j(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new q(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new q(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(k()){const e=t.map((e=>e instanceof q?e.data_:e));return new q(P.apply(null,e))}{const e=t.map((e=>N(e)?B(D,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let s=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]})),new q(r,!0)}}uploadData(){return this.data_}}function W(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function H(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function G(e,t){return t}class K{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||G}}let Y=null;function Q(){if(Y)return Y;const e=[];e.push(new K("bucket")),e.push(new K("generation")),e.push(new K("metageneration")),e.push(new K("name","fullPath",!0));const t=new K("name");t.xform=function(e,t){return function(e){return!N(e)||e.length<2?e:H(e)}(t)},e.push(t);const n=new K("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new K("timeCreated")),e.push(new K("updated")),e.push(new K("md5Hash",null,!0)),e.push(new K("cacheControl",null,!0)),e.push(new K("contentDisposition",null,!0)),e.push(new K("contentEncoding",null,!0)),e.push(new K("contentLanguage",null,!0)),e.push(new K("contentType",null,!0)),e.push(new K("metadata","customMetadata",!0)),Y=e,Y}function $(e,t,n){const r={type:"file"},s=n.length;for(let o=0;o<s;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new b(n,r);return t._makeStorageReference(s)}})}(r,e),r}function J(e,t,n){const r=W(t);if(null===r)return null;return $(e,r,n)}function X(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Z{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ee(e){if(!e)throw h()}function te(e,t){return function(n,r){const s=J(e,r,t);return ee(null!==s),s}}function ne(e){return function(t,n){let r;var s,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function re(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function se(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();i["Content-Type"]="multipart/related; boundary="+a;const l=re(t,r,s),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+X(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=q.getBlob(c,r,u);if(null===d)throw f();const h={name:l.fullPath},m=S(o,e.host,e._protocol),p=e.maxUploadRetryTime,g=new Z(m,"POST",te(e,n),p);return g.urlParams=h,g.headers=i,g.body=d.uploadData(),g.errorHandler=ne(t),g}let oe=null;class ie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=u.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=u.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw x("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw x("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ae extends ie{initXhr(){this.xhr_.responseType="text"}}function le(){return oe?oe():new ae}class ce{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ce(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new ce(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ue(e,t,n){e._throwIfRoot("uploadBytes");const r=se(e.storage,e._location,Q(),new q(t,!0),n);return e.storage.makeRequestWithTokens(r,le).then((t=>({metadata:t,ref:e})))}function de(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new b(e._location.bucket,n);return new ce(e.storage,r)}function he(e,t){if(e instanceof fe){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+a+"' property when initializing the app?");const r=new ce(n,n._bucket);return null!=t?he(r,t):r}return void 0!==t?de(e,t):e}function me(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fe)return new ce(e,t);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return he(e,t)}function pe(e,t){const n=null===t||void 0===t?void 0:t[a];return null==n?null:b.makeFromBucketSpec(n,e)}class fe{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=i,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?b.makeFromBucketSpec(r,this._host):pe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=pe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ce(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new w(y());{const o=function(e,t,n,r,s,o){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=A(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new _(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,i)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const ge="@firebase/storage",ye="0.11.2",ve="storage";function xe(e,t,n){return ue(e=(0,s.Ku)(e),t,n)}function be(e,t){return me(e=(0,s.Ku)(e),t)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,s.Ku)(e);const n=(0,r.j6)(e,ve).getImmediate({identifier:t}),o=(0,s.yU)("storage");return o&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:(0,s.Fy)(o,e.app.options.projectId))}(e,t,n,r)}(n,...o),n}function Ne(e,t){let{instanceIdentifier:n}=t;const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new fe(s,o,i,n,r.MF)}(0,r.om)(new o.uA(ve,Ne,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(ge,ye,""),(0,r.KO)(ge,ye,"esm2017")},9757:(e,t,n)=>{var r=n(6669),s=n(6010),o=n(3445);e.exports=function(e,t,n,i,a,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var p=-1,f=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var y=e[p],v=t[p];if(i)var x=c?i(v,y,p,t,e,l):i(y,v,p,e,t,l);if(void 0!==x){if(x)continue;f=!1;break}if(g){if(!s(t,(function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,i,l)))return g.push(t)}))){f=!1;break}}else if(y!==v&&!a(y,v,n,i,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},9769:(e,t,n)=>{var r=n(4489),s=n(3334),o=n(4243);e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9794:(e,t,n)=>{var r=n(4567);e.exports=function(e){return e===e&&!r(e)}},9892:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+s+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[o,i,a].join("|")+")"+c+l+")*"),d="(?:"+[o+r+"?",r,i,a,n].join("|")+")",h=RegExp(s+"(?="+s+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},9950:(e,t,n)=>{"use strict";e.exports=n(2049)},9987:(e,t,n)=>{"use strict";n.d(t,{$k:()=>r,db:()=>o,qt:()=>s});const r={primary:{50:"#E9F0E9",100:"#D3E1D3",200:"#BDD2BD",300:"#A8C69F",400:"#8FB78F",500:"#6FA86F",600:"#4C8E4C",700:"#2C5530",800:"#1F3E23",900:"#132716"},secondary:{50:"#FFF5EC",100:"#FFE9D3",200:"#FFD9B3",300:"#FFC993",400:"#FFB973",500:"#FFA84D",600:"#FF8C42",700:"#E67A2E",800:"#CC691A",900:"#B35806"},accent:{50:"#F0F7ED",100:"#E1EFDB",200:"#C3DFB7",300:"#A8C69F",400:"#8FB88C",500:"#76AA78",600:"#5D9C65",700:"#447D4E",800:"#2B5E37",900:"#123F20",DEFAULT:"#A8C69F",light:"#E1EFDB",dark:"#447D4E"},success:"#2C5530",warning:"#FF8C42",error:"#E74C3C",gray:{50:"#F9FAFB",100:"#F3F4F6",200:"#E5E7EB",300:"#D1D5DB",400:"#9CA3AF",500:"#6B7280",600:"#4B5563",700:"#374151",800:"#1F2937",900:"#111827"}},s={name:"TYCA",fullName:"Thank You Come Again",tagline:"Value Coming Back",shortTagline:"Value Coming Back"},o={welcome:{standard:"Thank you for choosing us - We value you coming back",dashboard:"Thank you for growing with TYCA - value coming back to your business",login:"Thank you for returning - We value you coming back",register:"Thank you for joining - value coming back to your business"},success:{standard:"Thank you! Your customers will value coming back",couponCreated:"Thank you! May your coupon bring value back",customerAdded:"Thank you! New customers mean value is coming back",settingsUpdated:"Thank you! Your changes bring value"},email:{standard:"Thank you for your business, we value you coming back",welcome:"Thank you for choosing TYCA, we value you coming back",couponSent:"Thank you for sharing value, may your customers come again",reminder:"Thank you for being with us, we value you coming back"},dashboard:{morning:"Good morning! Thank you for starting your day with TYCA - We value you coming back",afternoon:"Good afternoon! Thank you for choosing TYCA - We value you coming back",evening:"Good evening! Thank you for your hard work - We value you coming back tomorrow",standard:"Thank you for growing with TYCA - value coming back to your business"},customer:{standard:"Thank you, come again!",coupon:"Thank you for your business, come again for more value!",loyalty:"Thank you for your loyalty, we value you coming back",welcome:"Thank you for joining, come again for more value!"},value:{standard:"When customers value coming back, your business grows",retention:"Turn every 'Thank You' into 'Thank You, Come Again'",loyalty:"Create experiences where customers thank you, and value coming back",growth:"When customers value coming back, your revenue grows consistently"},southAfrican:{standard:"Thank you, come again!",friendly:"Thank you, come again, friend!",local:"Thank you for supporting local, come again!"},cta:{standard:"Thank you for your interest - discover the value of coming back",register:"Thank you for considering us - start creating value today",upgrade:"Thank you for your loyalty - unlock more value by upgrading",contact:"Thank you for reaching out - we value your inquiry"}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{15:"236b65c0",229:"40fde845",351:"745aba62",704:"96d88c10"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tyca:";n.l=(r,s,o,i)=>{if(e[r])e[r].push(s);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[s];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(m);var s=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var o=new Promise(((n,r)=>s=e[t]=[n,r]));r.push(s[2]=o);var i=n.p+n.u(t),a=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,s[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,o,i=r[0],a=r[1],l=r[2],c=0;if(i.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunktyca=self.webpackChunktyca||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e=n(9950),t=n.t(e,2),r=n(1352),s=n(7119),o=n.t(s,2),i=n(8429),a=n(1018);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const u=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(UZ){}const h=e.createContext({isTransitioning:!1});new Map;const m=t.startTransition;o.flushSync,t.useId;function p(t){let{basename:n,children:r,future:s,window:o}=t,l=e.useRef();null==l.current&&(l.current=(0,a.zR)({window:o,v5Compat:!0}));let c=l.current,[u,d]=e.useState({action:c.action,location:c.location}),{v7_startTransition:h}=s||{},p=e.useCallback((e=>{h&&m?m((()=>d(e))):d(e)}),[d,h]);return e.useLayoutEffect((()=>c.listen(p)),[c,p]),e.useEffect((()=>(0,i.V8)(s)),[s]),e.createElement(i.Ix,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:c,future:s})}const f="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,g=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,y=e.forwardRef((function(t,n){let r,{onClick:s,relative:o,reloadDocument:d,replace:h,state:m,target:p,to:y,preventScrollReset:v,viewTransition:x}=t,b=c(t,u),{basename:w}=e.useContext(i.jb),N=!1;if("string"===typeof y&&g.test(y)&&(r=y,f))try{let e=new URL(window.location.href),t=y.startsWith("//")?new URL(e.protocol+y):new URL(y),n=(0,a.pb)(t.pathname,w);t.origin===e.origin&&null!=n?y=n+t.search+t.hash:N=!0}catch(UZ){}let j=(0,i.$P)(y,{relative:o}),k=function(t,n){let{target:r,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:u}=void 0===n?{}:n,d=(0,i.Zp)(),h=(0,i.zy)(),m=(0,i.x$)(t,{relative:c});return e.useCallback((e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();let n=void 0!==s?s:(0,a.AO)(h)===(0,a.AO)(m);d(t,{replace:n,state:o,preventScrollReset:l,relative:c,viewTransition:u})}}),[h,d,m,s,o,r,t,l,c,u])}(y,{replace:h,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:x});return e.createElement("a",l({},b,{href:r||j,onClick:N||d?s:function(e){s&&s(e),e.defaultPrevented||k(e)},ref:n,target:p}))}));const v=e.forwardRef((function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:u=!1,style:m,to:p,viewTransition:f,children:g}=t,v=c(t,d),b=(0,i.x$)(p,{relative:v.relative}),N=(0,i.zy)(),j=e.useContext(i.Rq),{navigator:k,basename:C}=e.useContext(i.jb),S=null!=j&&function(t,n){void 0===n&&(n={});let r=e.useContext(h);null==r&&(0,a.Oi)(!1);let{basename:s}=w(x.useViewTransitionState),o=(0,i.x$)(t,{relative:n.relative});if(!r.isTransitioning)return!1;let l=(0,a.pb)(r.currentLocation.pathname,s)||r.currentLocation.pathname,c=(0,a.pb)(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=(0,a.B6)(o.pathname,c)||null!=(0,a.B6)(o.pathname,l)}(b)&&!0===f,A=k.encodeLocation?k.encodeLocation(b).pathname:b.pathname,E=N.pathname,_=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;s||(E=E.toLowerCase(),_=_?_.toLowerCase():null,A=A.toLowerCase()),_&&C&&(_=(0,a.pb)(_,C)||_);const I="/"!==A&&A.endsWith("/")?A.length-1:A.length;let T,P=E===A||!u&&E.startsWith(A)&&"/"===E.charAt(I),R=null!=_&&(_===A||!u&&_.startsWith(A)&&"/"===_.charAt(A.length)),D={isActive:P,isPending:R,isTransitioning:S},M=P?r:void 0;T="function"===typeof o?o(D):[o,P?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let L="function"===typeof m?m(D):m;return e.createElement(y,l({},v,{"aria-current":M,className:T,ref:n,style:L,to:p,viewTransition:f}),"function"===typeof g?g(D):g)}));var x,b;function w(t){let n=e.useContext(i.sp);return n||(0,a.Oi)(!1),n}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(x||(x={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(b||(b={}));var N=n(5961),j=n(9516),k=n(4414);const C=t=>{let{onChange:n,initialView:r="default"}=t;const[s,o]=(0,e.useState)(r);(0,e.useEffect)((()=>{o(r)}),[r]);const i=e=>{o(e),n(e),localStorage.setItem("dashboardView",e),console.log("ViewToggle: toggled to",e)};return(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsx)(j.A,{text:"Switch between detailed and simplified dashboard views",children:(0,k.jsxs)("div",{className:"bg-gray-200 rounded-full p-1 flex items-center border border-gray-300",children:[(0,k.jsxs)("button",{onClick:()=>i("default"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors flex items-center gap-1 ".concat("default"===s?"bg-white text-gray-900 shadow-sm border border-gray-300":"text-gray-900 hover:bg-gray-100"),"aria-pressed":"default"===s,children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,k.jsx)("span",{className:"text-gray-900 font-medium",children:"Detailed"})]}),(0,k.jsxs)("button",{onClick:()=>i("simple"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors flex items-center gap-1 ".concat("simple"===s?"bg-white text-gray-900 shadow-sm border border-gray-300":"text-gray-900 hover:bg-gray-100"),"aria-pressed":"simple"===s,children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,k.jsx)("span",{className:"text-gray-900 font-medium",children:"Simple"})]})]})})})};var S=n(9379);function A(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function E(e,t){if(null==e)return{};var n,r,s=A(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const _=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()};var P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const R=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],D=(0,e.forwardRef)(((t,n)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c}=t,u=E(t,R);return(0,e.createElement)("svg",(0,S.A)((0,S.A)((0,S.A)({ref:n},P),{},{width:s,height:s,stroke:r,strokeWidth:i?24*Number(o)/Number(s):o,className:T("lucide",a)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"}),u),[...c.map((t=>{let[n,r]=t;return(0,e.createElement)(n,r)})),...Array.isArray(l)?l:[l]])})),M=["className"],L=(t,n)=>{const r=(0,e.forwardRef)(((r,s)=>{let{className:o}=r,i=E(r,M);return(0,e.createElement)(D,(0,S.A)({ref:s,iconNode:n,className:T("lucide-".concat(_(I(t))),"lucide-".concat(t),o)},i))}));return r.displayName=I(t),r},O=L("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),F=L("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),B=L("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function U(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}function z(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map((t=>{const r=z(t,e);return n||"function"!=typeof r||(n=!0),r}));if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():z(t[e],null)}}}}function q(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.useCallback(V(...n),n)}const W=["scope","children"];function H(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const s=()=>{const n=r.map((t=>e.createContext(t)));return function(r){const s=(null===r||void 0===r?void 0:r[t])||n;return e.useMemo((()=>({["__scope".concat(t)]:(0,S.A)((0,S.A)({},r),{},{[t]:s})})),[r,s])}};return s.scopeName=t,[function(n,s){const o=e.createContext(s),i=r.length;r=[...r,s];const a=n=>{var r;const{scope:s,children:a}=n,l=E(n,W),c=(null===s||void 0===s||null===(r=s[t])||void 0===r?void 0:r[i])||o,u=e.useMemo((()=>l),Object.values(l));return(0,k.jsx)(c.Provider,{value:u,children:a})};return a.displayName=n+"Provider",[a,function(r,a){var l;const c=(null===a||void 0===a||null===(l=a[t])||void 0===l?void 0:l[i])||o,u=e.useContext(c);if(u)return u;if(void 0!==s)return s;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},G(s,...n)]}function G(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=n[0];if(1===n.length)return s;const o=()=>{const t=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const r=t.reduce(((e,t)=>{let{useScope:r,scopeName:s}=t;const o=r(n)["__scope".concat(s)];return(0,S.A)((0,S.A)({},e),o)}),{});return e.useMemo((()=>({["__scope".concat(s.scopeName)]:r})),[r])}};return o.scopeName=s.scopeName,o}const K=["children"],Y=["children"];function Q(t){const n=J(t),r=e.forwardRef(((t,r)=>{const{children:s}=t,o=E(t,K),i=e.Children.toArray(s),a=i.find(Z);if(a){const t=a.props.children,s=i.map((n=>n===a?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n));return(0,k.jsx)(n,(0,S.A)((0,S.A)({},o),{},{ref:r,children:e.isValidElement(t)?e.cloneElement(t,void 0,s):null}))}return(0,k.jsx)(n,(0,S.A)((0,S.A)({},o),{},{ref:r,children:s}))}));return r.displayName="".concat(t,".Slot"),r}var $=Q("Slot");function J(t){const n=e.forwardRef(((t,n)=>{const{children:r}=t,s=E(t,Y);if(e.isValidElement(r)){const t=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(r),o=function(e,t){const n=(0,S.A)({},t);for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=function(){const e=o(...arguments);return s(...arguments),e}:s&&(n[r]=s):"style"===r?n[r]=(0,S.A)((0,S.A)({},s),o):"className"===r&&(n[r]=[s,o].filter(Boolean).join(" "))}return(0,S.A)((0,S.A)({},e),n)}(s,r.props);return r.type!==e.Fragment&&(o.ref=n?V(n,t):t),e.cloneElement(r,o)}return e.Children.count(r)>1?e.Children.only(null):null}));return n.displayName="".concat(t,".SlotClone"),n}var X=Symbol("radix.slottable");function Z(t){return e.isValidElement(t)&&"function"===typeof t.type&&"__radixId"in t.type&&t.type.__radixId===X}const ee=["asChild"];var te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((t,n)=>{const r=Q("Primitive.".concat(n)),s=e.forwardRef(((e,t)=>{const{asChild:s}=e,o=E(e,ee),i=s?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,k.jsx)(i,(0,S.A)((0,S.A)({},o),{},{ref:t}))}));return s.displayName="Primitive.".concat(n),(0,S.A)((0,S.A)({},t),{},{[n]:s})}),{});function ne(t){const n=e.useRef(t);return e.useEffect((()=>{n.current=t})),e.useMemo((()=>function(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)}),[])}const re=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var se,oe="dismissableLayer.update",ie="dismissableLayer.pointerDownOutside",ae="dismissableLayer.focusOutside",le=e.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ce=e.forwardRef(((t,n)=>{var r;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:c}=t,u=E(t,re),d=e.useContext(le),[h,m]=e.useState(null),p=null!==(r=null===h||void 0===h?void 0:h.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,f]=e.useState({}),g=q(n,(e=>m(e))),y=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(v),b=h?y.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,N=b>=x,j=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=ne(t),s=e.useRef(!1),o=e.useRef((()=>{}));return e.useEffect((()=>{const e=e=>{if(e.target&&!s.current){let t=function(){he(ie,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}else n.removeEventListener("click",o.current);s.current=!1},t=window.setTimeout((()=>{n.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:()=>s.current=!0}}((e=>{const t=e.target,n=[...d.branches].some((e=>e.contains(t)));N&&!n&&(null===i||void 0===i||i(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),p),C=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=ne(t),s=e.useRef(!1);return e.useEffect((()=>{const e=e=>{if(e.target&&!s.current){he(ae,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)}),[n,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())}),p);return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=ne(t);e.useEffect((()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})}),[r,n])}((e=>{b===d.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))}),p),e.useEffect((()=>{if(h)return s&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(se=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),de(),()=>{s&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=se)}}),[h,p,s,d]),e.useEffect((()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),de())}),[h,d]),e.useEffect((()=>{const e=()=>f({});return document.addEventListener(oe,e),()=>document.removeEventListener(oe,e)}),[]),(0,k.jsx)(te.div,(0,S.A)((0,S.A)({},u),{},{ref:g,style:(0,S.A)({pointerEvents:w?N?"auto":"none":void 0},t.style),onFocusCapture:U(t.onFocusCapture,C.onFocusCapture),onBlurCapture:U(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:U(t.onPointerDownCapture,j.onPointerDownCapture)}))}));ce.displayName="DismissableLayer";var ue=e.forwardRef(((t,n)=>{const r=e.useContext(le),s=e.useRef(null),o=q(n,s);return e.useEffect((()=>{const e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}}),[r.branches]),(0,k.jsx)(te.div,(0,S.A)((0,S.A)({},t),{},{ref:o}))}));function de(){const e=new CustomEvent(oe);document.dispatchEvent(e)}function he(e,t,n,r){let{discrete:o}=r;const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),o?function(e,t){e&&s.flushSync((()=>e.dispatchEvent(t)))}(i,a):i.dispatchEvent(a)}ue.displayName="DismissableLayerBranch";var me=0;function pe(){e.useEffect((()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:fe()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:fe()),me++,()=>{1===me&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),me--}}),[])}function fe(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}const ge=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var ye="focusScope.autoFocusOnMount",ve="focusScope.autoFocusOnUnmount",xe={bubbles:!1,cancelable:!0},be=e.forwardRef(((t,n)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:o,onUnmountAutoFocus:i}=t,a=E(t,ge),[l,c]=e.useState(null),u=ne(o),d=ne(i),h=e.useRef(null),m=q(n,(e=>c(e))),p=e.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;e.useEffect((()=>{if(s){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:ke(h.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||ke(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&ke(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}}),[s,l,p.paused]),e.useEffect((()=>{if(l){Ce.add(p);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(ye,xe);l.addEventListener(ye,u),l.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(ke(r,{select:t}),document.activeElement!==n)return}((e=we(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&ke(l))}return()=>{l.removeEventListener(ye,u),setTimeout((()=>{const e=new CustomEvent(ve,xe);l.addEventListener(ve,d),l.dispatchEvent(e),e.defaultPrevented||ke(null!==t&&void 0!==t?t:document.body,{select:!0}),l.removeEventListener(ve,d),Ce.remove(p)}),0)}}var e}),[l,u,d,p]);const f=e.useCallback((e=>{if(!r&&!s)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[s,o]=function(e){const t=we(e),n=Ne(t,e),r=Ne(t.reverse(),e);return[n,r]}(t);s&&o?e.shiftKey||n!==o?e.shiftKey&&n===s&&(e.preventDefault(),r&&ke(o,{select:!0})):(e.preventDefault(),r&&ke(s,{select:!0})):n===t&&e.preventDefault()}}),[r,s,p.paused]);return(0,k.jsx)(te.div,(0,S.A)((0,S.A)({tabIndex:-1},a),{},{ref:m,onKeyDown:f}))}));function we(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ne(e,t){for(const n of e)if(!je(n,{upTo:t}))return n}function je(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function ke(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}be.displayName="FocusScope";var Ce=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=Se(e,t),e.unshift(t)},remove(t){var n;e=Se(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function Se(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Ae=null!==globalThis&&void 0!==globalThis&&globalThis.document?e.useLayoutEffect:()=>{},Ee=t[" useId ".trim().toString()]||(()=>{}),_e=0;function Ie(t){const[n,r]=e.useState(Ee());return Ae((()=>{t||r((e=>null!==e&&void 0!==e?e:String(_e++)))}),[t]),t||(n?"radix-".concat(n):"")}const Te=["top","right","bottom","left"],Pe=Math.min,Re=Math.max,De=Math.round,Me=Math.floor,Le=e=>({x:e,y:e}),Oe={left:"right",right:"left",bottom:"top",top:"bottom"},Fe={start:"end",end:"start"};function Be(e,t,n){return Re(e,Pe(t,n))}function Ue(e,t){return"function"===typeof e?e(t):e}function ze(e){return e.split("-")[0]}function Ve(e){return e.split("-")[1]}function qe(e){return"x"===e?"y":"x"}function We(e){return"y"===e?"height":"width"}function He(e){return["top","bottom"].includes(ze(e))?"y":"x"}function Ge(e){return qe(He(e))}function Ke(e){return e.replace(/start|end/g,(e=>Fe[e]))}function Ye(e){return e.replace(/left|right|bottom|top/g,(e=>Oe[e]))}function Qe(e){return"number"!==typeof e?function(e){return(0,S.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $e(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}const Je=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Xe=["strategy"],Ze=["mainAxis","crossAxis","limiter"],et=["apply"];function tt(e,t,n){let{reference:r,floating:s}=e;const o=He(t),i=Ge(t),a=We(i),l=ze(t),c="y"===o,u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-s.width,y:d};break;default:m={x:r.x,y:r.y}}switch(Ve(t)){case"start":m[i]-=h*(n&&c?-1:1);break;case"end":m[i]+=h*(n&&c?-1:1)}return m}async function nt(e,t){var n;void 0===t&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=Ue(t,e),p=Qe(m),f=a[h?"floating"===d?"reference":"floating":d],g=$e(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(f)))||n?f:f.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),x=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},b=$e(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-b.top+p.top)/x.y,bottom:(b.bottom-g.bottom+p.bottom)/x.y,left:(g.left-b.left+p.left)/x.x,right:(b.right-g.right+p.right)/x.x}}function rt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function st(e){return Te.some((t=>e[t]>=0))}function ot(){return"undefined"!==typeof window}function it(e){return ct(e)?(e.nodeName||"").toLowerCase():"#document"}function at(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function lt(e){var t;return null==(t=(ct(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function ct(e){return!!ot()&&(e instanceof Node||e instanceof at(e).Node)}function ut(e){return!!ot()&&(e instanceof Element||e instanceof at(e).Element)}function dt(e){return!!ot()&&(e instanceof HTMLElement||e instanceof at(e).HTMLElement)}function ht(e){return!(!ot()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof at(e).ShadowRoot)}function mt(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=xt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function pt(e){return["table","td","th"].includes(it(e))}function ft(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(UZ){return!1}}))}function gt(e){const t=yt(),n=ut(e)?xt(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function yt(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function vt(e){return["html","body","#document"].includes(it(e))}function xt(e){return at(e).getComputedStyle(e)}function bt(e){return ut(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wt(e){if("html"===it(e))return e;const t=e.assignedSlot||e.parentNode||ht(e)&&e.host||lt(e);return ht(t)?t.host:t}function Nt(e){const t=wt(e);return vt(t)?e.ownerDocument?e.ownerDocument.body:e.body:dt(t)&&mt(t)?t:Nt(t)}function jt(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=Nt(e),o=s===(null==(r=e.ownerDocument)?void 0:r.body),i=at(s);if(o){const e=kt(i);return t.concat(i,i.visualViewport||[],mt(s)?s:[],e&&n?jt(e):[])}return t.concat(s,jt(s,[],n))}function kt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ct(e){const t=xt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=dt(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=De(n)!==o||De(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function St(e){return ut(e)?e:e.contextElement}function At(e){const t=St(e);if(!dt(t))return Le(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=Ct(t);let i=(o?De(n.width):n.width)/r,a=(o?De(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),a&&Number.isFinite(a)||(a=1),{x:i,y:a}}const Et=Le(0);function _t(e){const t=at(e);return yt()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Et}function It(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),o=St(e);let i=Le(1);t&&(r?ut(r)&&(i=At(r)):i=At(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==at(e))&&t}(o,n,r)?_t(o):Le(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,d=s.height/i.y;if(o){const e=at(o),t=r&&ut(r)?at(r):r;let n=e,s=kt(n);for(;s&&r&&t!==n;){const e=At(s),t=s.getBoundingClientRect(),r=xt(s),o=t.left+(s.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=i,n=at(s),s=kt(n)}}return $e({width:u,height:d,x:l,y:c})}function Tt(e,t){const n=bt(e).scrollLeft;return t?t.left+n:It(lt(e)).left+n}function Pt(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:Tt(e,r)),y:r.top+t.scrollTop}}function Rt(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=at(e),r=lt(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const e=yt();(!e||e&&"fixed"===t)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=lt(e),n=bt(e),r=e.ownerDocument.body,s=Re(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Re(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Tt(e);const a=-n.scrollTop;return"rtl"===xt(r).direction&&(i+=Re(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}(lt(e));else if(ut(t))r=function(e,t){const n=It(e,!0,"fixed"===t),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=dt(e)?At(e):Le(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:s*o.x,y:r*o.y}}(t,n);else{const n=_t(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return $e(r)}function Dt(e,t){const n=wt(e);return!(n===t||!ut(n)||vt(n))&&("fixed"===xt(n).position||Dt(n,t))}function Mt(e,t,n){const r=dt(t),s=lt(t),o="fixed"===n,i=It(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Le(0);function c(){l.x=Tt(s)}if(r||!r&&!o)if(("body"!==it(t)||mt(s))&&(a=bt(t)),r){const e=It(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&c();o&&!r&&s&&c();const u=!s||r||o?Le(0):Pt(s,a);return{x:i.left+a.scrollLeft-l.x-u.x,y:i.top+a.scrollTop-l.y-u.y,width:i.width,height:i.height}}function Lt(e){return"static"===xt(e).position}function Ot(e,t){if(!dt(e)||"fixed"===xt(e).position)return null;if(t)return t(e);let n=e.offsetParent;return lt(e)===n&&(n=n.ownerDocument.body),n}function Ft(e,t){const n=at(e);if(ft(e))return n;if(!dt(e)){let t=wt(e);for(;t&&!vt(t);){if(ut(t)&&!Lt(t))return t;t=wt(t)}return n}let r=Ot(e,t);for(;r&&pt(r)&&Lt(r);)r=Ot(r,t);return r&&vt(r)&&Lt(r)&&!gt(r)?n:r||function(e){let t=wt(e);for(;dt(t)&&!vt(t);){if(gt(t))return t;if(ft(t))return null;t=wt(t)}return null}(e)||n}const Bt={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o="fixed"===s,i=lt(r),a=!!t&&ft(t.floating);if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=Le(1);const u=Le(0),d=dt(r);if((d||!d&&!o)&&(("body"!==it(r)||mt(i))&&(l=bt(r)),dt(r))){const e=It(r);c=At(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!i||d||o?Le(0):Pt(i,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:lt,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o="clippingAncestors"===n?ft(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=jt(e,[],!1).filter((e=>ut(e)&&"body"!==it(e))),s=null;const o="fixed"===xt(e).position;let i=o?wt(e):e;for(;ut(i)&&!vt(i);){const t=xt(i),n=gt(i);n||"fixed"!==t.position||(s=null),(o?!n&&!s:!n&&"static"===t.position&&s&&["absolute","fixed"].includes(s.position)||mt(i)&&!n&&Dt(e,i))?r=r.filter((e=>e!==i)):s=t,i=wt(i)}return t.set(e,r),r}(t,this._c):[].concat(n),i=[...o,r],a=i[0],l=i.reduce(((e,n)=>{const r=Rt(t,n,s);return e.top=Re(r.top,e.top),e.right=Pe(r.right,e.right),e.bottom=Pe(r.bottom,e.bottom),e.left=Re(r.left,e.left),e}),Rt(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Ft,getElementRects:async function(e){const t=this.getOffsetParent||Ft,n=this.getDimensions,r=await n(e.floating);return{reference:Mt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Ct(e);return{width:t,height:n}},getScale:At,isElement:ut,isRTL:function(e){return"rtl"===xt(e).direction}};function Ut(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zt(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=St(e),u=s||o?[...c?jt(c):[],...jt(t)]:[];u.forEach((e=>{s&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const s=lt(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function i(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=c;if(a||t(),!h||!m)return;const p={rootMargin:-Me(d)+"px "+-Me(s.clientWidth-(u+h))+"px "+-Me(s.clientHeight-(d+m))+"px "+-Me(u)+"px",threshold:Re(0,Pe(1,l))||1};let f=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!f)return i();r?i(!1,r):n=setTimeout((()=>{i(!1,1e-7)}),1e3)}1!==r||Ut(c,e.getBoundingClientRect())||i(),f=!1}try{r=new IntersectionObserver(g,(0,S.A)((0,S.A)({},p),{},{root:s.ownerDocument}))}catch(y){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),o}(c,n):null;let h,m=-1,p=null;i&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let f=l?It(e):null;return l&&function t(){const r=It(e);f&&!Ut(f,r)&&n();f=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{s&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Vt=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:s}=e,o=await(null==r.isRTL?void 0:r.isRTL(s.floating)),i=ze(n),a=Ve(n),l="y"===He(n),c=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,d=Ue(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof p&&(m="end"===a?-1*p:p),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}(t,e);return i===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:(0,S.A)((0,S.A)({},l),{},{placement:i})}}}},qt=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,o=Ue(e,t),{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=o,c=E(o,Ze),u={x:n,y:r},d=await nt(t,c),h=He(ze(s)),m=qe(h);let p=u[m],f=u[h];if(i){const e="y"===m?"bottom":"right";p=Be(p+d["y"===m?"top":"left"],p,p-d[e])}if(a){const e="y"===h?"bottom":"right";f=Be(f+d["y"===h?"top":"left"],f,f-d[e])}const g=l.fn((0,S.A)((0,S.A)({},t),{},{[m]:p,[h]:f}));return(0,S.A)((0,S.A)({},g),{},{data:{x:g.x-n,y:g.y-r,enabled:{[m]:i,[h]:a}}})}}},Wt=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=t,u=Ue(e,t),{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0}=u,y=E(u,Je);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=ze(s),x=He(a),b=ze(a)===a,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),N=m||(b||!g?[Ye(a)]:function(e){const t=Ye(e);return[Ke(e),t,Ke(t)]}(a)),j="none"!==f;!m&&j&&N.push(...function(e,t,n,r){const s=Ve(e);let o=function(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:i;default:return[]}}(ze(e),"start"===n,r);return s&&(o=o.map((e=>e+"-"+s)),t&&(o=o.concat(o.map(Ke)))),o}(a,g,f,w));const k=[a,...N],C=await nt(t,y),S=[];let A=(null==(r=o.flip)?void 0:r.overflows)||[];if(d&&S.push(C[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Ve(e),s=Ge(e),o=We(s);let i="x"===s?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Ye(i)),[i,Ye(i)]}(s,i,w);S.push(C[e[0]],C[e[1]])}if(A=[...A,{placement:s,overflows:S}],!S.every((e=>e<=0))){var _,I;const e=((null==(_=o.flip)?void 0:_.index)||0)+1,t=k[e];if(t){if(!("alignment"===h&&x!==He(t))||A.every((e=>e.overflows[0]>0&&He(e.placement)===x)))return{data:{index:e,overflows:A},reset:{placement:t}}}let n=null==(I=A.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:I.placement;if(!n)switch(p){case"bestFit":{var T;const e=null==(T=A.filter((e=>{if(j){const t=He(e.placement);return t===x||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:T[0];e&&(n=e);break}case"initialPlacement":n=a}if(s!==n)return{reset:{placement:n}}}return{}}}},Ht=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,l=Ue(e,t),{apply:c=()=>{}}=l,u=E(l,et),d=await nt(t,u),h=ze(s),m=Ve(s),p="y"===He(s),{width:f,height:g}=o.floating;let y,v;"top"===h||"bottom"===h?(y=h,v=m===(await(null==i.isRTL?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,y="end"===m?"top":"bottom");const x=g-d.top-d.bottom,b=f-d.left-d.right,w=Pe(g-d[y],x),N=Pe(f-d[v],b),j=!t.middlewareData.shift;let k=w,C=N;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(C=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=x),j&&!m){const e=Re(d.left,0),t=Re(d.right,0),n=Re(d.top,0),r=Re(d.bottom,0);p?C=f-2*(0!==e||0!==t?e+t:Re(d.left,d.right)):k=g-2*(0!==n||0!==r?n+r:Re(d.top,d.bottom))}await c((0,S.A)((0,S.A)({},t),{},{availableWidth:C,availableHeight:k}));const A=await i.getDimensions(a.floating);return f!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}},Gt=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,r=Ue(e,t),{strategy:s="referenceHidden"}=r,o=E(r,Xe);switch(s){case"referenceHidden":{const e=rt(await nt(t,(0,S.A)((0,S.A)({},o),{},{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:st(e)}}}case"escaped":{const e=rt(await nt(t,(0,S.A)((0,S.A)({},o),{},{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:st(e)}}}default:return{}}}}},Kt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Ue(e,t)||{};if(null==c)return{};const d=Qe(u),h={x:n,y:r},m=Ge(s),p=We(m),f=await i.getDimensions(c),g="y"===m,y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=o.reference[p]+o.reference[m]-h[m]-o.floating[p],w=h[m]-o.reference[m],N=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let j=N?N[x]:0;j&&await(null==i.isElement?void 0:i.isElement(N))||(j=a.floating[x]||o.floating[p]);const k=b/2-w/2,C=j/2-f[p]/2-1,A=Pe(d[y],C),E=Pe(d[v],C),_=A,I=j-f[p]-E,T=j/2-f[p]/2+k,P=Be(_,T,I),R=!l.arrow&&null!=Ve(s)&&T!==P&&o.reference[p]/2-(T<_?A:E)-f[p]/2<0,D=R?T<_?T-_:T-I:0;return{[m]:h[m]+D,data:(0,S.A)({[m]:P,centerOffset:T-P-D},R&&{alignmentOffset:D}),reset:R}}}),Yt=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ue(e,t),u={x:n,y:r},d=He(s),h=qe(d);let m=u[h],p=u[d];const f=Ue(a,t),g="number"===typeof f?{mainAxis:f,crossAxis:0}:(0,S.A)({mainAxis:0,crossAxis:0},f);if(l){const e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+g.mainAxis,n=o.reference[h]+o.reference[e]-g.mainAxis;m<t?m=t:m>n&&(m=n)}if(c){var y,v;const e="y"===h?"width":"height",t=["top","left"].includes(ze(s)),n=o.reference[d]-o.floating[e]+(t&&(null==(y=i.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=o.reference[d]+o.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);p<n?p=n:p>r&&(p=r)}return{[h]:m,[d]:p}}}},Qt=(e,t,n)=>{const r=new Map,s=(0,S.A)({platform:Bt},n),o=(0,S.A)((0,S.A)({},s.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=tt(c,r,l),h=r,m={},p=0;for(let f=0;f<a.length;f++){const{name:n,fn:o}=a[f],{x:g,y:y,data:v,reset:x}=await o({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,m=(0,S.A)((0,S.A)({},m),{},{[n]:(0,S.A)((0,S.A)({},m[n]),v)}),x&&p<=50&&(p++,"object"===typeof x&&(x.placement&&(h=x.placement),x.rects&&(c=!0===x.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):x.rects),({x:u,y:d}=tt(c,h,l))),f=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:m}})(e,t,(0,S.A)((0,S.A)({},s),{},{platform:o}))};var $t="undefined"!==typeof document?e.useLayoutEffect:function(){};function Jt(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Jt(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;0!==r--;){const n=s[r];if(("_owner"!==n||!e.$$typeof)&&!Jt(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function Xt(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Zt(e,t){const n=Xt(e);return Math.round(t*n)/n}function en(t){const n=e.useRef(t);return $t((()=>{n.current=t})),n}const tn=(e,t)=>(0,S.A)((0,S.A)({},Vt(e)),{},{options:[e,t]}),nn=(e,t)=>(0,S.A)((0,S.A)({},qt(e)),{},{options:[e,t]}),rn=(e,t)=>(0,S.A)((0,S.A)({},Yt(e)),{},{options:[e,t]}),sn=(e,t)=>(0,S.A)((0,S.A)({},Wt(e)),{},{options:[e,t]}),on=(e,t)=>(0,S.A)((0,S.A)({},Ht(e)),{},{options:[e,t]}),an=(e,t)=>(0,S.A)((0,S.A)({},Gt(e)),{},{options:[e,t]}),ln=(e,t)=>(0,S.A)((0,S.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(s=n,{}.hasOwnProperty.call(s,"current"))?null!=n.current?Kt({element:n.current,padding:r}).fn(t):{}:n?Kt({element:n,padding:r}).fn(t):{};var s}}))(e)),{},{options:[e,t]}),cn=["children","width","height"];var un=e.forwardRef(((e,t)=>{const{children:n,width:r=10,height:s=5}=e,o=E(e,cn);return(0,k.jsx)(te.svg,(0,S.A)((0,S.A)({},o),{},{ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,k.jsx)("polygon",{points:"0,0 30,0 15,10"})}))}));un.displayName="Arrow";var dn=un;const hn=["__scopePopper","virtualRef"],mn=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],pn=["__scopePopper"];var fn="Popper",[gn,yn]=H(fn),[vn,xn]=gn(fn),bn=t=>{const{__scopePopper:n,children:r}=t,[s,o]=e.useState(null);return(0,k.jsx)(vn,{scope:n,anchor:s,onAnchorChange:o,children:r})};bn.displayName=fn;var wn="PopperAnchor",Nn=e.forwardRef(((t,n)=>{const{__scopePopper:r,virtualRef:s}=t,o=E(t,hn),i=xn(wn,r),a=e.useRef(null),l=q(n,a);return e.useEffect((()=>{i.onAnchorChange((null===s||void 0===s?void 0:s.current)||a.current)})),s?null:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({},o),{},{ref:l}))}));Nn.displayName=wn;var jn="PopperContent",[kn,Cn]=gn(jn),Sn=e.forwardRef(((t,n)=>{var r,o,i,a,l,c,u,d;const{__scopePopper:h,side:m="bottom",sideOffset:p=0,align:f="center",alignOffset:g=0,arrowPadding:y=0,avoidCollisions:v=!0,collisionBoundary:x=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:N=!1,updatePositionStrategy:j="optimized",onPlaced:C}=t,A=E(t,mn),_=xn(jn,h),[I,T]=e.useState(null),P=q(n,(e=>T(e))),[R,D]=e.useState(null),M=function(t){const[n,r]=e.useState(void 0);return Ae((()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver((e=>{if(!Array.isArray(e))return;if(!e.length)return;const n=e[0];let s,o;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,o=t.blockSize}else s=t.offsetWidth,o=t.offsetHeight;r({width:s,height:o})}));return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}r(void 0)}),[t]),n}(R),L=null!==(r=null===M||void 0===M?void 0:M.width)&&void 0!==r?r:0,O=null!==(o=null===M||void 0===M?void 0:M.height)&&void 0!==o?o:0,F=m+("center"!==f?"-"+f:""),B="number"===typeof b?b:(0,S.A)({top:0,right:0,bottom:0,left:0},b),U=Array.isArray(x)?x:[x],z=U.length>0,V={padding:B,boundary:U.filter(In),altBoundary:z},{refs:W,floatingStyles:H,placement:G,isPositioned:K,middlewareData:Y}=function(t){void 0===t&&(t={});const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:i,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=t,[h,m]=e.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,f]=e.useState(o);Jt(p,o)||f(o);const[g,y]=e.useState(null),[v,x]=e.useState(null),b=e.useCallback((e=>{e!==k.current&&(k.current=e,y(e))}),[]),w=e.useCallback((e=>{e!==C.current&&(C.current=e,x(e))}),[]),N=a||g,j=l||v,k=e.useRef(null),C=e.useRef(null),A=e.useRef(h),E=null!=u,_=en(u),I=en(i),T=en(d),P=e.useCallback((()=>{if(!k.current||!C.current)return;const e={placement:n,strategy:r,middleware:p};I.current&&(e.platform=I.current),Qt(k.current,C.current,e).then((e=>{const t=(0,S.A)((0,S.A)({},e),{},{isPositioned:!1!==T.current});R.current&&!Jt(A.current,t)&&(A.current=t,s.flushSync((()=>{m(t)})))}))}),[p,n,r,I,T]);$t((()=>{!1===d&&A.current.isPositioned&&(A.current.isPositioned=!1,m((e=>(0,S.A)((0,S.A)({},e),{},{isPositioned:!1}))))}),[d]);const R=e.useRef(!1);$t((()=>(R.current=!0,()=>{R.current=!1})),[]),$t((()=>{if(N&&(k.current=N),j&&(C.current=j),N&&j){if(_.current)return _.current(N,j,P);P()}}),[N,j,P,_,E]);const D=e.useMemo((()=>({reference:k,floating:C,setReference:b,setFloating:w})),[b,w]),M=e.useMemo((()=>({reference:N,floating:j})),[N,j]),L=e.useMemo((()=>{const e={position:r,left:0,top:0};if(!M.floating)return e;const t=Zt(M.floating,h.x),n=Zt(M.floating,h.y);return c?(0,S.A)((0,S.A)({},e),{},{transform:"translate("+t+"px, "+n+"px)"},Xt(M.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}}),[r,c,M.floating,h.x,h.y]);return e.useMemo((()=>(0,S.A)((0,S.A)({},h),{},{update:P,refs:D,elements:M,floatingStyles:L})),[h,P,D,M,L])}({strategy:"fixed",placement:F,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zt(...t,{animationFrame:"always"===j})},elements:{reference:_.anchor},middleware:[tn({mainAxis:p+O,alignmentAxis:g}),v&&nn((0,S.A)({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?rn():void 0},V)),v&&sn((0,S.A)({},V)),on((0,S.A)((0,S.A)({},V),{},{apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:s}=e;const{width:o,height:i}=n.reference,a=t.floating.style;a.setProperty("--radix-popper-available-width","".concat(r,"px")),a.setProperty("--radix-popper-available-height","".concat(s,"px")),a.setProperty("--radix-popper-anchor-width","".concat(o,"px")),a.setProperty("--radix-popper-anchor-height","".concat(i,"px"))}})),R&&ln({element:R,padding:y}),Tn({arrowWidth:L,arrowHeight:O}),N&&an((0,S.A)({strategy:"referenceHidden"},V))]}),[Q,$]=Pn(G),J=ne(C);Ae((()=>{K&&(null===J||void 0===J||J())}),[K,J]);const X=null===(i=Y.arrow)||void 0===i?void 0:i.x,Z=null===(a=Y.arrow)||void 0===a?void 0:a.y,ee=0!==(null===(l=Y.arrow)||void 0===l?void 0:l.centerOffset),[re,se]=e.useState();return Ae((()=>{I&&se(window.getComputedStyle(I).zIndex)}),[I]),(0,k.jsx)("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:(0,S.A)((0,S.A)({},H),{},{transform:K?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[null===(c=Y.transformOrigin)||void 0===c?void 0:c.x,null===(u=Y.transformOrigin)||void 0===u?void 0:u.y].join(" ")},(null===(d=Y.hide)||void 0===d?void 0:d.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:(0,k.jsx)(kn,{scope:h,placedSide:Q,onArrowChange:D,arrowX:X,arrowY:Z,shouldHideArrow:ee,children:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({"data-side":Q,"data-align":$},A),{},{ref:P,style:(0,S.A)((0,S.A)({},A.style),{},{animation:K?void 0:"none"})}))})})}));Sn.displayName=jn;var An="PopperArrow",En={top:"bottom",right:"left",bottom:"top",left:"right"},_n=e.forwardRef((function(e,t){const{__scopePopper:n}=e,r=E(e,pn),s=Cn(An,n),o=En[s.placedSide];return(0,k.jsx)("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:(0,k.jsx)(dn,(0,S.A)((0,S.A)({},r),{},{ref:t,style:(0,S.A)((0,S.A)({},r.style),{},{display:"block"})}))})}));function In(e){return null!==e}_n.displayName=An;var Tn=e=>({name:"transformOrigin",options:e,fn(t){var n,r,s,o,i;const{placement:a,rects:l,middlewareData:c}=t,u=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[m,p]=Pn(a),f={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(s=c.arrow)||void 0===s?void 0:s.x)&&void 0!==r?r:0)+d/2,y=(null!==(o=null===(i=c.arrow)||void 0===i?void 0:i.y)&&void 0!==o?o:0)+h/2;let v="",x="";return"bottom"===m?(v=u?f:"".concat(g,"px"),x="".concat(-h,"px")):"top"===m?(v=u?f:"".concat(g,"px"),x="".concat(l.floating.height+h,"px")):"right"===m?(v="".concat(-h,"px"),x=u?f:"".concat(y,"px")):"left"===m&&(v="".concat(l.floating.width+h,"px"),x=u?f:"".concat(y,"px")),{data:{x:v,y:x}}}});function Pn(e){const[t,n="center"]=e.split("-");return[t,n]}var Rn=bn,Dn=Nn,Mn=Sn,Ln=_n;const On=["container"];var Fn=e.forwardRef(((t,n)=>{var r;const{container:o}=t,i=E(t,On),[a,l]=e.useState(!1);Ae((()=>l(!0)),[]);const c=o||a&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return c?s.createPortal((0,k.jsx)(te.div,(0,S.A)((0,S.A)({},i),{},{ref:n})),c):null}));Fn.displayName="Portal";var Bn=t=>{const{present:n,children:r}=t,s=function(t){const[n,r]=e.useState(),s=e.useRef(null),o=e.useRef(t),i=e.useRef("none"),a=t?"mounted":"unmounted",[l,c]=function(t,n){return e.useReducer(((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e}),t)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e.useEffect((()=>{const e=Un(s.current);i.current="mounted"===l?e:"none"}),[l]),Ae((()=>{const e=s.current,n=o.current;if(n!==t){const r=i.current,s=Un(e);if(t)c("MOUNT");else if("none"===s||"none"===(null===e||void 0===e?void 0:e.display))c("UNMOUNT");else{c(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}o.current=t}}),[t,c]),Ae((()=>{if(n){var e;let t;const r=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,a=e=>{const i=Un(s.current).includes(e.animationName);if(e.target===n&&i&&(c("ANIMATION_END"),!o.current)){const e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout((()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)}))}},l=e=>{e.target===n&&(i.current=Un(s.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",a),n.addEventListener("animationend",a),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",a),n.removeEventListener("animationend",a)}}c("ANIMATION_END")}),[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:e.useCallback((e=>{s.current=e?getComputedStyle(e):null,r(e)}),[])}}(n),o="function"===typeof r?r({present:s.isPresent}):e.Children.only(r),i=q(s.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(o));return"function"===typeof r||s.isPresent?e.cloneElement(o,{ref:i}):null};function Un(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}Bn.displayName="Presence";var zn=t[" useInsertionEffect ".trim().toString()]||Ae;function Vn(t){let{prop:n,defaultProp:r,onChange:s=()=>{},caller:o}=t;const[i,a,l]=function(t){let{defaultProp:n,onChange:r}=t;const[s,o]=e.useState(n),i=e.useRef(s),a=e.useRef(r);return zn((()=>{a.current=r}),[r]),e.useEffect((()=>{var e;i.current!==s&&(null===(e=a.current)||void 0===e||e.call(a,s),i.current=s)}),[s,i]),[s,o,a]}({defaultProp:r,onChange:s}),c=void 0!==n,u=c?n:i;{const t=e.useRef(void 0!==n);e.useEffect((()=>{const e=t.current;if(e!==c){const t=e?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(o," is changing from ").concat(t," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}t.current=c}),[c,o])}const d=e.useCallback((e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(n):e;var t;if(r!==n)null===(t=l.current)||void 0===t||t.call(l,r)}else a(e)}),[c,n,a,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var qn=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},Wn=new WeakMap,Hn=new WeakMap,Gn={},Kn=0,Yn=function(e){return e&&(e.host||Yn(e.parentNode))},Qn=function(e,t,n,r){var s=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=Yn(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);Gn[n]||(Gn[n]=new WeakMap);var o=Gn[n],i=[],a=new Set,l=new Set(s),c=function(e){e&&!a.has(e)&&(a.add(e),c(e.parentNode))};s.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(a.has(e))u(e);else try{var t=e.getAttribute(r),s=null!==t&&"false"!==t,l=(Wn.get(e)||0)+1,c=(o.get(e)||0)+1;Wn.set(e,l),o.set(e,c),i.push(e),1===l&&s&&Hn.set(e,!0),1===c&&e.setAttribute(n,"true"),s||e.setAttribute(r,"true")}catch(UZ){console.error("aria-hidden: cannot operate on ",e,UZ)}}))};return u(t),a.clear(),Kn++,function(){i.forEach((function(e){var t=Wn.get(e)-1,s=o.get(e)-1;Wn.set(e,t),o.set(e,s),t||(Hn.has(e)||e.removeAttribute(r),Hn.delete(e)),s||e.removeAttribute(n)})),--Kn||(Wn=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,Gn={})}},$n=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=t||qn(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),Qn(r,s,n,"aria-hidden")):function(){return null}},Jn=n(7827),Xn="right-scroll-bar-position",Zn="width-before-scroll-bar";function er(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var tr="undefined"!==typeof window?e.useLayoutEffect:e.useEffect,nr=new WeakMap;function rr(t,n){var r=function(t,n){var r=(0,e.useState)((function(){return{value:t,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(e){return t.forEach((function(t){return er(t,e)}))}));return tr((function(){var e=nr.get(r);if(e){var n=new Set(e),s=new Set(t),o=r.current;n.forEach((function(e){s.has(e)||er(e,null)})),s.forEach((function(e){n.has(e)||er(e,o)}))}nr.set(r,t)}),[t]),r}function sr(e){return e}function or(e,t){void 0===t&&(t=sr);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var s=t(e,r);return n.push(s),function(){n=n.filter((function(e){return e!==s}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var s=n;n=[],s.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(o)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}};return s}var ir=function(e){void 0===e&&(e={});var t=or(null);return t.options=(0,Jn.__assign)({async:!0,ssr:!1},e),t}(),ar=function(){},lr=e.forwardRef((function(t,n){var r=e.useRef(null),s=e.useState({onScrollCapture:ar,onWheelCapture:ar,onTouchMoveCapture:ar}),o=s[0],i=s[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,p=t.noRelative,f=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,x=void 0===v?"div":v,b=t.gapMode,w=(0,Jn.__rest)(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,j=rr([r,n]),k=(0,Jn.__assign)((0,Jn.__assign)({},w),o);return e.createElement(e.Fragment,null,d&&e.createElement(N,{sideCar:ir,removeScrollBar:u,shards:h,noRelative:p,noIsolation:f,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:b}),a?e.cloneElement(e.Children.only(l),(0,Jn.__assign)((0,Jn.__assign)({},k),{ref:j})):e.createElement(x,(0,Jn.__assign)({},k,{className:c,ref:j}),l))}));lr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},lr.classNames={fullWidth:Zn,zeroRight:Xn};var cr,ur=function(t){var n=t.sideCar,r=(0,Jn.__rest)(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return e.createElement(s,(0,Jn.__assign)({},r))};ur.isSideCarExport=!0;function dr(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=cr||n.nc;return t&&e.setAttribute("nonce",t),e}var hr=function(){var e=0,t=null;return{add:function(n){var r;0==e&&(t=dr())&&(!function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},mr=function(){var t=function(){var t=hr();return function(n,r){e.useEffect((function(){return t.add(n),function(){t.remove()}}),[n&&r])}}();return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},pr={left:0,top:0,right:0,gap:0},fr=function(e){return parseInt(e||"",10)||0},gr=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return pr;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[fr(n),fr(r),fr(s)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},yr=mr(),vr="data-scroll-locked",xr=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body[").concat(vr,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Xn," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(Zn," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(Xn," .").concat(Xn," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Zn," .").concat(Zn," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(vr,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},br=function(){var e=parseInt(document.body.getAttribute(vr)||"0",10);return isFinite(e)?e:0},wr=function(t){var n=t.noRelative,r=t.noImportant,s=t.gapMode,o=void 0===s?"margin":s;e.useEffect((function(){return document.body.setAttribute(vr,(br()+1).toString()),function(){var e=br()-1;e<=0?document.body.removeAttribute(vr):document.body.setAttribute(vr,e.toString())}}),[]);var i=e.useMemo((function(){return gr(o)}),[o]);return e.createElement(yr,{styles:xr(i,!n,o,r?"":"!important")})},Nr=!1;if("undefined"!==typeof window)try{var jr=Object.defineProperty({},"passive",{get:function(){return Nr=!0,!0}});window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch(zZ){Nr=!1}var kr=!!Nr&&{passive:!1},Cr=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Sr=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Ar(e,r)){var s=Er(e,r);if(s[1]>s[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ar=function(e,t){return"v"===e?function(e){return Cr(e,"overflowY")}(t):function(e){return Cr(e,"overflowX")}(t)},Er=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},_r=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ir=function(e){return[e.deltaX,e.deltaY]},Tr=function(e){return e&&"current"in e?e.current:e},Pr=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Rr=0,Dr=[];function Mr(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Lr=(Or=function(t){var n=e.useRef([]),r=e.useRef([0,0]),s=e.useRef(),o=e.useState(Rr++)[0],i=e.useState(mr)[0],a=e.useRef(t);e.useEffect((function(){a.current=t}),[t]),e.useEffect((function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var e=(0,Jn.__spreadArray)([t.lockRef.current],(t.shards||[]).map(Tr),!0).filter(Boolean);return e.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),e.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[t.inert,t.lockRef.current,t.shards]);var l=e.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var n,o=_r(e),i=r.current,l="deltaX"in e?e.deltaX:i[0]-o[0],c="deltaY"in e?e.deltaY:i[1]-o[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Sr(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=Sr(d,u)),!h)return!1;if(!s.current&&"changedTouches"in e&&(l||c)&&(s.current=n),!n)return!0;var m=s.current||n;return function(e,t,n,r,s){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),c=!1,u=i>0,d=0,h=0;do{if(!a)break;var m=Er(e,a),p=m[0],f=m[1]-m[2]-o*p;(p||f)&&Ar(e,a)&&(d+=f,h+=p);var g=a.parentNode;a=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(s&&Math.abs(d)<1||!s&&i>d)||!u&&(s&&Math.abs(h)<1||!s&&-i>h))&&(c=!0),c}(m,t,e,"h"===m?l:c,!0)}),[]),c=e.useCallback((function(e){var t=e;if(Dr.length&&Dr[Dr.length-1]===i){var r="deltaY"in t?Ir(t):_r(t),s=n.current.filter((function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(s&&s.should)t.cancelable&&t.preventDefault();else if(!s){var o=(a.current.shards||[]).map(Tr).filter(Boolean).filter((function(e){return e.contains(t.target)}));(o.length>0?l(t,o[0]):!a.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),u=e.useCallback((function(e,t,r,s){var o={name:e,delta:t,target:r,should:s,shadowParent:Mr(r)};n.current.push(o),setTimeout((function(){n.current=n.current.filter((function(e){return e!==o}))}),1)}),[]),d=e.useCallback((function(e){r.current=_r(e),s.current=void 0}),[]),h=e.useCallback((function(e){u(e.type,Ir(e),e.target,l(e,t.lockRef.current))}),[]),m=e.useCallback((function(e){u(e.type,_r(e),e.target,l(e,t.lockRef.current))}),[]);e.useEffect((function(){return Dr.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,kr),document.addEventListener("touchmove",c,kr),document.addEventListener("touchstart",d,kr),function(){Dr=Dr.filter((function(e){return e!==i})),document.removeEventListener("wheel",c,kr),document.removeEventListener("touchmove",c,kr),document.removeEventListener("touchstart",d,kr)}}),[]);var p=t.removeScrollBar,f=t.inert;return e.createElement(e.Fragment,null,f?e.createElement(i,{styles:Pr(o)}):null,p?e.createElement(wr,{noRelative:t.noRelative,gapMode:t.gapMode}):null)},ir.useMedium(Or),ur);var Or,Fr=e.forwardRef((function(t,n){return e.createElement(lr,(0,Jn.__assign)({},t,{ref:n,sideCar:Lr}))}));Fr.classNames=lr.classNames;const Br=Fr,Ur=["__scopePopover"],zr=["__scopePopover"],Vr=["forceMount"],qr=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],Wr=["__scopePopover"],Hr=["__scopePopover"];var Gr="Popover",[Kr,Yr]=H(Gr,[yn]),Qr=yn(),[$r,Jr]=Kr(Gr),Xr=t=>{const{__scopePopover:n,children:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!1}=t,l=Qr(n),c=e.useRef(null),[u,d]=e.useState(!1),[h,m]=Vn({prop:s,defaultProp:null!==o&&void 0!==o&&o,onChange:i,caller:Gr});return(0,k.jsx)(Rn,(0,S.A)((0,S.A)({},l),{},{children:(0,k.jsx)($r,{scope:n,contentId:Ie(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:e.useCallback((()=>m((e=>!e))),[m]),hasCustomAnchor:u,onCustomAnchorAdd:e.useCallback((()=>d(!0)),[]),onCustomAnchorRemove:e.useCallback((()=>d(!1)),[]),modal:a,children:r})}))};Xr.displayName=Gr;var Zr="PopoverAnchor",es=e.forwardRef(((t,n)=>{const{__scopePopover:r}=t,s=E(t,Ur),o=Jr(Zr,r),i=Qr(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=o;return e.useEffect((()=>(a(),()=>l())),[a,l]),(0,k.jsx)(Dn,(0,S.A)((0,S.A)((0,S.A)({},i),s),{},{ref:n}))}));es.displayName=Zr;var ts="PopoverTrigger",ns=e.forwardRef(((e,t)=>{const{__scopePopover:n}=e,r=E(e,zr),s=Jr(ts,n),o=Qr(n),i=q(t,s.triggerRef),a=(0,k.jsx)(te.button,(0,S.A)((0,S.A)({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":gs(s.open)},r),{},{ref:i,onClick:U(e.onClick,s.onOpenToggle)}));return s.hasCustomAnchor?a:(0,k.jsx)(Dn,(0,S.A)((0,S.A)({asChild:!0},o),{},{children:a}))}));ns.displayName=ts;var rs="PopoverPortal",[ss,os]=Kr(rs,{forceMount:void 0}),is=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=Jr(rs,t);return(0,k.jsx)(ss,{scope:t,forceMount:n,children:(0,k.jsx)(Bn,{present:n||o.open,children:(0,k.jsx)(Fn,{asChild:!0,container:s,children:r})})})};is.displayName=rs;var as="PopoverContent",ls=e.forwardRef(((e,t)=>{const n=os(as,e.__scopePopover),{forceMount:r=n.forceMount}=e,s=E(e,Vr),o=Jr(as,e.__scopePopover);return(0,k.jsx)(Bn,{present:r||o.open,children:o.modal?(0,k.jsx)(us,(0,S.A)((0,S.A)({},s),{},{ref:t})):(0,k.jsx)(ds,(0,S.A)((0,S.A)({},s),{},{ref:t}))})}));ls.displayName=as;var cs=Q("PopoverContent.RemoveScroll"),us=e.forwardRef(((t,n)=>{const r=Jr(as,t.__scopePopover),s=e.useRef(null),o=q(n,s),i=e.useRef(!1);return e.useEffect((()=>{const e=s.current;if(e)return $n(e)}),[]),(0,k.jsx)(Br,{as:cs,allowPinchZoom:!0,children:(0,k.jsx)(hs,(0,S.A)((0,S.A)({},t),{},{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(t.onCloseAutoFocus,(e=>{var t;e.preventDefault(),i.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:U(t.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:U(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})}))})})),ds=e.forwardRef(((t,n)=>{const r=Jr(as,t.__scopePopover),s=e.useRef(!1),o=e.useRef(!1);return(0,k.jsx)(hs,(0,S.A)((0,S.A)({},t),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var n,i;(null===(n=t.onCloseAutoFocus)||void 0===n||n.call(t,e),e.defaultPrevented)||(s.current||null===(i=r.triggerRef.current)||void 0===i||i.focus(),e.preventDefault());s.current=!1,o.current=!1},onInteractOutside:e=>{var n,i;null===(n=t.onInteractOutside)||void 0===n||n.call(t,e),e.defaultPrevented||(s.current=!0,"pointerdown"===e.detail.originalEvent.type&&(o.current=!0));const a=e.target;(null===(i=r.triggerRef.current)||void 0===i?void 0:i.contains(a))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&o.current&&e.preventDefault()}}))})),hs=e.forwardRef(((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u}=e,d=E(e,qr),h=Jr(as,n),m=Qr(n);return pe(),(0,k.jsx)(be,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:(0,k.jsx)(ce,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:(0,k.jsx)(Mn,(0,S.A)((0,S.A)((0,S.A)({"data-state":gs(h.open),role:"dialog",id:h.contentId},m),d),{},{ref:t,style:(0,S.A)((0,S.A)({},d.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})})),ms="PopoverClose",ps=e.forwardRef(((e,t)=>{const{__scopePopover:n}=e,r=E(e,Wr),s=Jr(ms,n);return(0,k.jsx)(te.button,(0,S.A)((0,S.A)({type:"button"},r),{},{ref:t,onClick:U(e.onClick,(()=>s.onOpenChange(!1)))}))}));ps.displayName=ms;var fs=e.forwardRef(((e,t)=>{const{__scopePopover:n}=e,r=E(e,Hr),s=Qr(n);return(0,k.jsx)(Ln,(0,S.A)((0,S.A)((0,S.A)({},s),r),{},{ref:t}))}));function gs(e){return e?"open":"closed"}fs.displayName="PopoverArrow";var ys=Xr,vs=ns,xs=is,bs=ls;function ws(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ws(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ns(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ws(e))&&(r&&(r+=" "),r+=t);return r}const js=Ns,ks=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),o=s?ks(e.slice(1),s):void 0;if(o)return o;if(0===t.validators.length)return;const i=e.join("-");return null===(n=t.validators.find((e=>{let{validator:t}=e;return t(i)})))||void 0===n?void 0:n.classGroupId},Cs=/^\[(.+)\]$/,Ss=e=>{if(Cs.test(e)){const t=Cs.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},As=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Es(n[s],r,s,t);return r},Es=(e,t,n,r)=>{e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return Is(e)?void Es(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((e=>{let[s,o]=e;Es(o,_s(t,s),n,r)}))}else{(""===e?t:_s(t,e)).classGroupId=n}}))},_s=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},Is=e=>e.isThemeGetter,Ts=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},Ps=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,s=0,o=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===r&&0===s){if(":"===i){t.push(e.slice(o,l)),o=l+1;continue}if("/"===i){n=l;continue}}"["===i?r++:"]"===i?r--:"("===i?s++:")"===i&&s--}const i=0===t.length?e:e.substring(o),a=Rs(i);return{modifiers:t,hasImportantModifier:a!==i,baseClassName:a,maybePostfixModifierPosition:n&&n>o?n-o:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Rs=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Ds=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach((e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)})),n.push(...r.sort()),n}},Ms=e=>(0,S.A)({cache:Ts(e.cacheSize),parseClassName:Ps(e),sortModifiers:Ds(e)},(e=>{const t=As(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),ks(n,t)||Ss(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}})(e)),Ls=/\s+/;function Os(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Fs(e))&&(r&&(r+=" "),r+=t);return r}const Fs=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Fs(e[r]))&&(n&&(n+=" "),n+=t);return n};function Bs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let s,o,i,a=function(t){const r=n.reduce(((e,t)=>t(e)),e());return s=Ms(r),o=s.cache.get,i=s.cache.set,a=l,l(t)};function l(e){const t=o(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=t,i=[],a=e.trim().split(Ls);let l="";for(let c=a.length-1;c>=0;c-=1){const e=a[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!m,f=r(p?h.substring(0,m):h);if(!f){if(!p){l=e+(l.length>0?" "+l:l);continue}if(f=r(h),!f){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=o(u).join(":"),y=d?g+"!":g,v=y+f;if(i.includes(v))continue;i.push(v);const x=s(f,p);for(let n=0;n<x.length;++n){const e=x[n];i.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,s);return i(e,n),n}return function(){return a(Os.apply(null,arguments))}}const Us=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},zs=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Vs=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qs=/^\d+\/\d+$/,Ws=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ks=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ys=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qs=e=>qs.test(e),$s=e=>!!e&&!Number.isNaN(Number(e)),Js=e=>!!e&&Number.isInteger(Number(e)),Xs=e=>e.endsWith("%")&&$s(e.slice(0,-1)),Zs=e=>Ws.test(e),eo=()=>!0,to=e=>Hs.test(e)&&!Gs.test(e),no=()=>!1,ro=e=>Ks.test(e),so=e=>Ys.test(e),oo=e=>!ao(e)&&!po(e),io=e=>wo(e,Co,no),ao=e=>zs.test(e),lo=e=>wo(e,So,to),co=e=>wo(e,Ao,$s),uo=e=>wo(e,jo,no),ho=e=>wo(e,ko,so),mo=e=>wo(e,_o,ro),po=e=>Vs.test(e),fo=e=>No(e,So),go=e=>No(e,Eo),yo=e=>No(e,jo),vo=e=>No(e,Co),xo=e=>No(e,ko),bo=e=>No(e,_o,!0),wo=(e,t,n)=>{const r=zs.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},No=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Vs.exec(e);return!!r&&(r[1]?t(r[1]):n)},jo=e=>"position"===e||"percentage"===e,ko=e=>"image"===e||"url"===e,Co=e=>"length"===e||"size"===e||"bg-size"===e,So=e=>"length"===e,Ao=e=>"number"===e,Eo=e=>"family-name"===e,_o=e=>"shadow"===e,Io=(Symbol.toStringTag,()=>{const e=Us("color"),t=Us("font"),n=Us("text"),r=Us("font-weight"),s=Us("tracking"),o=Us("leading"),i=Us("breakpoint"),a=Us("container"),l=Us("spacing"),c=Us("radius"),u=Us("shadow"),d=Us("inset-shadow"),h=Us("text-shadow"),m=Us("drop-shadow"),p=Us("blur"),f=Us("perspective"),g=Us("aspect"),y=Us("ease"),v=Us("animate"),x=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",po,ao],b=()=>[po,ao,l],w=()=>[Qs,"full","auto",...b()],N=()=>[Js,"none","subgrid",po,ao],j=()=>["auto",{span:["full",Js,po,ao]},Js,po,ao],k=()=>[Js,"auto",po,ao],C=()=>["auto","min","max","fr",po,ao],S=()=>["auto",...b()],A=()=>[Qs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],E=()=>[e,po,ao],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",yo,uo,{position:[po,ao]}],I=()=>["auto","cover","contain",vo,io,{size:[po,ao]}],T=()=>[Xs,fo,lo],P=()=>["","none","full",c,po,ao],R=()=>["",$s,fo,lo],D=()=>[$s,Xs,yo,uo],M=()=>["","none",p,po,ao],L=()=>["none",$s,po,ao],O=()=>["none",$s,po,ao],F=()=>[$s,po,ao],B=()=>[Qs,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zs],breakpoint:[Zs],color:[eo],container:[Zs],"drop-shadow":[Zs],ease:["in","out","in-out"],font:[oo],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zs],shadow:[Zs],spacing:["px",$s],text:[Zs],"text-shadow":[Zs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Qs,ao,po,g]}],container:["container"],columns:[{columns:[$s,ao,po,a]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Js,"auto",po,ao]}],basis:[{basis:[Qs,"full","auto",a,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$s,Qs,"auto","initial","none",ao]}],grow:[{grow:["",$s,po,ao]}],shrink:[{shrink:["",$s,po,ao]}],order:[{order:[Js,"first","last","none",po,ao]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[a,"screen",...A()]}],"min-w":[{"min-w":[a,"screen","none",...A()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",n,fo,lo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,po,co]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Xs,ao]}],"font-family":[{font:[go,ao,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,po,ao]}],"line-clamp":[{"line-clamp":[$s,"none",po,co]}],leading:[{leading:[o,...b()]}],"list-image":[{"list-image":["none",po,ao]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",po,ao]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[$s,"from-font","auto",po,lo]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[$s,"auto",po,ao]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",po,ao]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",po,ao]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Js,po,ao],radial:["",po,ao],conic:[Js,po,ao]},xo,ho]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[$s,po,ao]}],"outline-w":[{outline:["",$s,fo,lo]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",u,bo,mo]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",d,bo,mo]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[$s,lo]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",h,bo,mo]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[$s,po,ao]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$s]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[po,ao]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[$s]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",po,ao]}],filter:[{filter:["","none",po,ao]}],blur:[{blur:M()}],brightness:[{brightness:[$s,po,ao]}],contrast:[{contrast:[$s,po,ao]}],"drop-shadow":[{"drop-shadow":["","none",m,bo,mo]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",$s,po,ao]}],"hue-rotate":[{"hue-rotate":[$s,po,ao]}],invert:[{invert:["",$s,po,ao]}],saturate:[{saturate:[$s,po,ao]}],sepia:[{sepia:["",$s,po,ao]}],"backdrop-filter":[{"backdrop-filter":["","none",po,ao]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[$s,po,ao]}],"backdrop-contrast":[{"backdrop-contrast":[$s,po,ao]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$s,po,ao]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$s,po,ao]}],"backdrop-invert":[{"backdrop-invert":["",$s,po,ao]}],"backdrop-opacity":[{"backdrop-opacity":[$s,po,ao]}],"backdrop-saturate":[{"backdrop-saturate":[$s,po,ao]}],"backdrop-sepia":[{"backdrop-sepia":["",$s,po,ao]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",po,ao]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$s,"initial",po,ao]}],ease:[{ease:["linear","initial",y,po,ao]}],delay:[{delay:[$s,po,ao]}],animate:[{animate:["none",v,po,ao]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,po,ao]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:O()}],"scale-x":[{"scale-x":O()}],"scale-y":[{"scale-y":O()}],"scale-z":[{"scale-z":O()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[po,ao,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:B()}],"translate-x":[{"translate-x":B()}],"translate-y":[{"translate-y":B()}],"translate-z":[{"translate-z":B()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",po,ao]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",po,ao]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[$s,fo,lo,co]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),To=Bs(Io);function Po(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return To(Ns(t))}const Ro=["className","align","sideOffset"],Do=ys,Mo=vs,Lo=e.forwardRef(((e,t)=>{let{className:n,align:r="center",sideOffset:s=4}=e,o=E(e,Ro);return(0,k.jsx)(xs,{children:(0,k.jsx)(bs,(0,S.A)({ref:t,align:r,sideOffset:s,className:Po("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n)},o))})}));Lo.displayName=bs.displayName;const Oo=L("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function Fo(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}function Bo(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Uo(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function zo(e,t){return e.get(Uo(e,t))}function Vo(e,t,n){return e.set(Uo(e,t),n),n}var qo;const Wo=["scope","children"];var Ho=new WeakMap;qo=new WeakMap,Map;function Go(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=Ko(t),s=r>=0?r:n+r;return s<0||s>=n?-1:s}(e,t);return-1===n?void 0:e[n]}function Ko(e){return e!==e||0===e?0:Math.trunc(e)}var Yo=e.createContext(void 0);var Qo=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$o=e.forwardRef(((e,t)=>(0,k.jsx)(te.span,(0,S.A)((0,S.A)({},e),{},{ref:t,style:(0,S.A)((0,S.A)({},Qo),e.style)}))));$o.displayName="VisuallyHidden";const Jo=["__scopeSelect","disabled"],Xo=["__scopeSelect","className","style","children","placeholder"],Zo=["__scopeSelect","children"],ei=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],ti=["__scopeSelect","onPlaced"],ni=["__scopeSelect","align","collisionPadding"],ri=["__scopeSelect","nonce"],si=["__scopeSelect"],oi=["__scopeSelect"],ii=["__scopeSelect","value","disabled","textValue"],ai=["__scopeSelect","className","style"],li=["__scopeSelect"],ci=["__scopeSelect","onAutoScroll"],ui=["__scopeSelect"],di=["__scopeSelect"],hi=["__scopeSelect","value"];var mi=[" ","Enter","ArrowUp","ArrowDown"],pi=[" ","Enter"],fi="Select",[gi,yi,vi]=function(t){const n=t+"CollectionProvider",[r,s]=H(n),[o,i]=r(n,{collectionRef:{current:null},itemMap:new Map}),a=t=>{const{scope:n,children:r}=t,s=e.useRef(null),i=e.useRef(new Map).current;return(0,k.jsx)(o,{scope:n,itemMap:i,collectionRef:s,children:r})};a.displayName=n;const l=t+"CollectionSlot",c=Q(l),u=e.forwardRef(((e,t)=>{const{scope:n,children:r}=e,s=q(t,i(l,n).collectionRef);return(0,k.jsx)(c,{ref:s,children:r})}));u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=Q(d),p=e.forwardRef(((t,n)=>{const{scope:r,children:s}=t,o=E(t,Wo),a=e.useRef(null),l=q(n,a),c=i(d,r);return e.useEffect((()=>(c.itemMap.set(a,(0,S.A)({ref:a},o)),()=>{c.itemMap.delete(a)}))),(0,k.jsx)(m,(0,S.A)((0,S.A)({},{[h]:""}),{},{ref:l,children:s}))}));return p.displayName=d,[{Provider:a,Slot:u,ItemSlot:p},function(n){const r=i(t+"CollectionConsumer",n);return e.useCallback((()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(r.itemMap.values()).sort(((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current)))}),[r.collectionRef,r.itemMap])},s]}(fi),[xi,bi]=H(fi,[vi,yn]),wi=yn(),[Ni,ji]=xi(fi),[ki,Ci]=xi(fi),Si=t=>{const{__scopeSelect:n,children:r,open:s,defaultOpen:o,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:f}=t,g=wi(n),[y,v]=e.useState(null),[x,b]=e.useState(null),[w,N]=e.useState(!1),j=function(t){const n=e.useContext(Yo);return t||n||"ltr"}(u),[C,A]=Vn({prop:s,defaultProp:null!==o&&void 0!==o&&o,onChange:i,caller:fi}),[E,_]=Vn({prop:a,defaultProp:l,onChange:c,caller:fi}),I=e.useRef(null),T=!y||(f||!!y.closest("form")),[P,R]=e.useState(new Set),D=Array.from(P).map((e=>e.props.value)).join(";");return(0,k.jsx)(Rn,(0,S.A)((0,S.A)({},g),{},{children:(0,k.jsxs)(Ni,{required:p,scope:n,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:Ie(),value:E,onValueChange:_,open:C,onOpenChange:A,dir:j,triggerPointerDownPosRef:I,disabled:m,children:[(0,k.jsx)(gi.Provider,{scope:n,children:(0,k.jsx)(ki,{scope:t.__scopeSelect,onNativeOptionAdd:e.useCallback((e=>{R((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:e.useCallback((e=>{R((t=>{const n=new Set(t);return n.delete(e),n}))}),[]),children:r})}),T?(0,k.jsxs)(pa,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:E,onChange:e=>_(e.target.value),disabled:m,form:f,children:[void 0===E?(0,k.jsx)("option",{value:""}):null,Array.from(P)]},D):null]})}))};Si.displayName=fi;var Ai="SelectTrigger",Ei=e.forwardRef(((t,n)=>{const{__scopeSelect:r,disabled:s=!1}=t,o=E(t,Jo),i=wi(r),a=ji(Ai,r),l=a.disabled||s,c=q(n,a.onTriggerChange),u=yi(r),d=e.useRef("touch"),[h,m,p]=ga((e=>{const t=u().filter((e=>!e.disabled)),n=t.find((e=>e.value===a.value)),r=ya(t,e,n);void 0!==r&&a.onValueChange(r.value)})),f=e=>{l||(a.onOpenChange(!0),p()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,k.jsx)(Dn,(0,S.A)((0,S.A)({asChild:!0},i),{},{children:(0,k.jsx)(te.button,(0,S.A)((0,S.A)({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":fa(a.value)?"":void 0},o),{},{ref:c,onClick:U(o.onClick,(e=>{e.currentTarget.focus(),"mouse"!==d.current&&f(e)})),onPointerDown:U(o.onPointerDown,(e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())})),onKeyDown:U(o.onKeyDown,(e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||mi.includes(e.key)&&(f(),e.preventDefault())}))}))}))}));Ei.displayName=Ai;var _i="SelectValue",Ii=e.forwardRef(((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i=""}=e,a=E(e,Xo),l=ji(_i,n),{onValueNodeHasChildrenChange:c}=l,u=void 0!==o,d=q(t,l.onValueNodeChange);return Ae((()=>{c(u)}),[c,u]),(0,k.jsx)(te.span,(0,S.A)((0,S.A)({},a),{},{ref:d,style:{pointerEvents:"none"},children:fa(l.value)?(0,k.jsx)(k.Fragment,{children:i}):o}))}));Ii.displayName=_i;var Ti=e.forwardRef(((e,t)=>{const{__scopeSelect:n,children:r}=e,s=E(e,Zo);return(0,k.jsx)(te.span,(0,S.A)((0,S.A)({"aria-hidden":!0},s),{},{ref:t,children:r||"\u25bc"}))}));Ti.displayName="SelectIcon";var Pi=e=>(0,k.jsx)(Fn,(0,S.A)({asChild:!0},e));Pi.displayName="SelectPortal";var Ri="SelectContent",Di=e.forwardRef(((t,n)=>{const r=ji(Ri,t.__scopeSelect),[o,i]=e.useState();if(Ae((()=>{i(new DocumentFragment)}),[]),!r.open){const e=o;return e?s.createPortal((0,k.jsx)(Li,{scope:t.__scopeSelect,children:(0,k.jsx)(gi.Slot,{scope:t.__scopeSelect,children:(0,k.jsx)("div",{children:t.children})})}),e):null}return(0,k.jsx)(Bi,(0,S.A)((0,S.A)({},t),{},{ref:n}))}));Di.displayName=Ri;var Mi=10,[Li,Oi]=xi(Ri),Fi=Q("SelectContent.RemoveScroll"),Bi=e.forwardRef(((t,n)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:y}=t,v=E(t,ei),x=ji(Ri,r),[b,w]=e.useState(null),[N,j]=e.useState(null),C=q(n,(e=>w(e))),[A,_]=e.useState(null),[I,T]=e.useState(null),P=yi(r),[R,D]=e.useState(!1),M=e.useRef(!1);e.useEffect((()=>{if(b)return $n(b)}),[b]),pe();const L=e.useCallback((e=>{const[t,...n]=P().map((e=>e.ref.current)),[r]=n.slice(-1),s=document.activeElement;for(const o of e){if(o===s)return;if(null===o||void 0===o||o.scrollIntoView({block:"nearest"}),o===t&&N&&(N.scrollTop=0),o===r&&N&&(N.scrollTop=N.scrollHeight),null===o||void 0===o||o.focus(),document.activeElement!==s)return}}),[P,N]),O=e.useCallback((()=>L([A,b])),[L,A,b]);e.useEffect((()=>{R&&O()}),[R,O]);const{onOpenChange:F,triggerPointerDownPosRef:B}=x;e.useEffect((()=>{if(b){let e={x:0,y:0};const t=t=>{var n,r,s,o;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=B.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(s=null===(o=B.current)||void 0===o?void 0:o.y)&&void 0!==s?s:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():b.contains(n.target)||F(!1),document.removeEventListener("pointermove",t),B.current=null};return null!==B.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}}),[b,F,B]),e.useEffect((()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[F]);const[z,V]=ga((e=>{const t=P().filter((e=>!e.disabled)),n=t.find((e=>e.ref.current===document.activeElement)),r=ya(t,e,n);r&&setTimeout((()=>r.ref.current.focus()))})),W=e.useCallback(((e,t,n)=>{const r=!M.current&&!n;(void 0!==x.value&&x.value===t||r)&&(_(e),r&&(M.current=!0))}),[x.value]),H=e.useCallback((()=>null===b||void 0===b?void 0:b.focus()),[b]),G=e.useCallback(((e,t,n)=>{const r=!M.current&&!n;(void 0!==x.value&&x.value===t||r)&&T(e)}),[x.value]),K="popper"===s?zi:Ui,Y=K===zi?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:y}:{};return(0,k.jsx)(Li,{scope:r,content:b,viewport:N,onViewportChange:j,itemRefCallback:W,selectedItem:A,onItemLeave:H,itemTextRefCallback:G,focusSelectedItem:O,selectedItemText:I,position:s,isPositioned:R,searchRef:z,children:(0,k.jsx)(Br,{as:Fi,allowPinchZoom:!0,children:(0,k.jsx)(be,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:U(o,(e=>{var t;null===(t=x.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()})),children:(0,k.jsx)(ce,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:(0,k.jsx)(K,(0,S.A)((0,S.A)((0,S.A)({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault()},v),Y),{},{onPlaced:()=>D(!0),ref:C,style:(0,S.A)({display:"flex",flexDirection:"column",outline:"none"},v.style),onKeyDown:U(v.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||V(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=P().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout((()=>L(t))),e.preventDefault()}}))}))})})})})}));Bi.displayName="SelectContentImpl";var Ui=e.forwardRef(((t,n)=>{const{__scopeSelect:r,onPlaced:s}=t,o=E(t,ti),i=ji(Ri,r),a=Oi(Ri,r),[l,c]=e.useState(null),[u,d]=e.useState(null),h=q(n,(e=>d(e))),m=yi(r),p=e.useRef(!1),f=e.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=a,b=e.useCallback((()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&y&&v){const e=i.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),n=i.valueNode.getBoundingClientRect(),r=v.getBoundingClientRect();if("rtl"!==i.dir){const s=r.left-t.left,o=n.left-s,i=e.left-o,a=e.width+i,c=Math.max(a,t.width),u=window.innerWidth-Mi,d=Fo(o,[Mi,Math.max(Mi,u-c)]);l.style.minWidth=a+"px",l.style.left=d+"px"}else{const s=t.right-r.right,o=window.innerWidth-n.right-s,i=window.innerWidth-e.right-o,a=e.width+i,c=Math.max(a,t.width),u=window.innerWidth-Mi,d=Fo(o,[Mi,Math.max(Mi,u-c)]);l.style.minWidth=a+"px",l.style.right=d+"px"}const o=m(),a=window.innerHeight-2*Mi,c=g.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),f=parseInt(d.paddingTop,10),x=parseInt(d.borderBottomWidth,10),b=h+f+c+parseInt(d.paddingBottom,10)+x,w=Math.min(5*y.offsetHeight,b),N=window.getComputedStyle(g),j=parseInt(N.paddingTop,10),k=parseInt(N.paddingBottom,10),C=e.top+e.height/2-Mi,S=a-C,A=y.offsetHeight/2,E=h+f+(y.offsetTop+A),_=b-E;if(E<=C){const e=o.length>0&&y===o[o.length-1].ref.current;l.style.bottom="0px";const t=u.clientHeight-g.offsetTop-g.offsetHeight,n=E+Math.max(S,A+(e?k:0)+t+x);l.style.height=n+"px"}else{const e=o.length>0&&y===o[0].ref.current;l.style.top="0px";const t=Math.max(C,h+g.offsetTop+(e?j:0)+A)+_;l.style.height=t+"px",g.scrollTop=E-C+g.offsetTop}l.style.margin="".concat(Mi,"px 0"),l.style.minHeight=w+"px",l.style.maxHeight=a+"px",null===s||void 0===s||s(),requestAnimationFrame((()=>p.current=!0))}}),[m,i.trigger,i.valueNode,l,u,g,y,v,i.dir,s]);Ae((()=>b()),[b]);const[w,N]=e.useState();Ae((()=>{u&&N(window.getComputedStyle(u).zIndex)}),[u]);const j=e.useCallback((e=>{e&&!0===f.current&&(b(),null===x||void 0===x||x(),f.current=!1)}),[b,x]);return(0,k.jsx)(Vi,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:j,children:(0,k.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({},o),{},{ref:h,style:(0,S.A)({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})}));Ui.displayName="SelectItemAlignedPosition";var zi=e.forwardRef(((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Mi}=e,o=E(e,ni),i=wi(n);return(0,k.jsx)(Mn,(0,S.A)((0,S.A)((0,S.A)({},i),o),{},{ref:t,align:r,collisionPadding:s,style:(0,S.A)((0,S.A)({boxSizing:"border-box"},o.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}));zi.displayName="SelectPopperPosition";var[Vi,qi]=xi(Ri,{}),Wi="SelectViewport",Hi=e.forwardRef(((t,n)=>{const{__scopeSelect:r,nonce:s}=t,o=E(t,ri),i=Oi(Wi,r),a=qi(Wi,r),l=q(n,i.onViewportChange),c=e.useRef(0);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,k.jsx)(gi.Slot,{scope:r,children:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({"data-radix-select-viewport":"",role:"presentation"},o),{},{ref:l,style:(0,S.A)({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:U(o.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=a;if(null!==r&&void 0!==r&&r.current&&n){const e=Math.abs(c.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Mi,s=parseFloat(n.style.minHeight),o=parseFloat(n.style.height),i=Math.max(s,o);if(i<r){const s=i+e,o=Math.min(r,s),a=s-o;n.style.height=o+"px","0px"===n.style.bottom&&(t.scrollTop=a>0?a:0,n.style.justifyContent="flex-end")}}}c.current=t.scrollTop}))}))})]})}));Hi.displayName=Wi;var Gi="SelectGroup",[Ki,Yi]=xi(Gi),Qi=e.forwardRef(((e,t)=>{const{__scopeSelect:n}=e,r=E(e,si),s=Ie();return(0,k.jsx)(Ki,{scope:n,id:s,children:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({role:"group","aria-labelledby":s},r),{},{ref:t}))})}));Qi.displayName=Gi;var $i="SelectLabel",Ji=e.forwardRef(((e,t)=>{const{__scopeSelect:n}=e,r=E(e,oi),s=Yi($i,n);return(0,k.jsx)(te.div,(0,S.A)((0,S.A)({id:s.id},r),{},{ref:t}))}));Ji.displayName=$i;var Xi="SelectItem",[Zi,ea]=xi(Xi),ta=e.forwardRef(((t,n)=>{const{__scopeSelect:r,value:s,disabled:o=!1,textValue:i}=t,a=E(t,ii),l=ji(Xi,r),c=Oi(Xi,r),u=l.value===s,[d,h]=e.useState(null!==i&&void 0!==i?i:""),[m,p]=e.useState(!1),f=q(n,(e=>{var t;return null===(t=c.itemRefCallback)||void 0===t?void 0:t.call(c,e,s,o)})),g=Ie(),y=e.useRef("touch"),v=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(""===s)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,k.jsx)(Zi,{scope:r,value:s,disabled:o,textId:g,isSelected:u,onItemTextChange:e.useCallback((e=>{h((t=>{var n;return t||(null!==(n=null===e||void 0===e?void 0:e.textContent)&&void 0!==n?n:"").trim()}))}),[]),children:(0,k.jsx)(gi.ItemSlot,{scope:r,value:s,disabled:o,textValue:d,children:(0,k.jsx)(te.div,(0,S.A)((0,S.A)({role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},a),{},{ref:f,onFocus:U(a.onFocus,(()=>p(!0))),onBlur:U(a.onBlur,(()=>p(!1))),onClick:U(a.onClick,(()=>{"mouse"!==y.current&&v()})),onPointerUp:U(a.onPointerUp,(()=>{"mouse"===y.current&&v()})),onPointerDown:U(a.onPointerDown,(e=>{y.current=e.pointerType})),onPointerMove:U(a.onPointerMove,(e=>{var t;(y.current=e.pointerType,o)?null===(t=c.onItemLeave)||void 0===t||t.call(c):"mouse"===y.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:U(a.onPointerLeave,(e=>{var t;e.currentTarget===document.activeElement&&(null===(t=c.onItemLeave)||void 0===t||t.call(c))})),onKeyDown:U(a.onKeyDown,(e=>{var t;""!==(null===(t=c.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(pi.includes(e.key)&&v()," "===e.key&&e.preventDefault())}))}))})})}));ta.displayName=Xi;var na="SelectItemText",ra=e.forwardRef(((t,n)=>{const{__scopeSelect:r,className:o,style:i}=t,a=E(t,ai),l=ji(na,r),c=Oi(na,r),u=ea(na,r),d=Ci(na,r),[h,m]=e.useState(null),p=q(n,(e=>m(e)),u.onItemTextChange,(e=>{var t;return null===(t=c.itemTextRefCallback)||void 0===t?void 0:t.call(c,e,u.value,u.disabled)})),f=null===h||void 0===h?void 0:h.textContent,g=e.useMemo((()=>(0,k.jsx)("option",{value:u.value,disabled:u.disabled,children:f},u.value)),[u.disabled,u.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=d;return Ae((()=>(y(g),()=>v(g))),[y,v,g]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(te.span,(0,S.A)((0,S.A)({id:u.textId},a),{},{ref:p})),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?s.createPortal(a.children,l.valueNode):null]})}));ra.displayName=na;var sa="SelectItemIndicator",oa=e.forwardRef(((e,t)=>{const{__scopeSelect:n}=e,r=E(e,li);return ea(sa,n).isSelected?(0,k.jsx)(te.span,(0,S.A)((0,S.A)({"aria-hidden":!0},r),{},{ref:t})):null}));oa.displayName=sa;var ia="SelectScrollUpButton",aa=e.forwardRef(((t,n)=>{const r=Oi(ia,t.__scopeSelect),s=qi(ia,t.__scopeSelect),[o,i]=e.useState(!1),a=q(n,s.onScrollButtonChange);return Ae((()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[r.viewport,r.isPositioned]),o?(0,k.jsx)(ua,(0,S.A)((0,S.A)({},t),{},{ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null}));aa.displayName=ia;var la="SelectScrollDownButton",ca=e.forwardRef(((t,n)=>{const r=Oi(la,t.__scopeSelect),s=qi(la,t.__scopeSelect),[o,i]=e.useState(!1),a=q(n,s.onScrollButtonChange);return Ae((()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;i(n)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[r.viewport,r.isPositioned]),o?(0,k.jsx)(ua,(0,S.A)((0,S.A)({},t),{},{ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null}));ca.displayName=la;var ua=e.forwardRef(((t,n)=>{const{__scopeSelect:r,onAutoScroll:s}=t,o=E(t,ci),i=Oi("SelectScrollButton",r),a=e.useRef(null),l=yi(r),c=e.useCallback((()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)}),[]);return e.useEffect((()=>()=>c()),[c]),Ae((()=>{var e;const t=l().find((e=>e.ref.current===document.activeElement));null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})}),[l]),(0,k.jsx)(te.div,(0,S.A)((0,S.A)({"aria-hidden":!0},o),{},{ref:n,style:(0,S.A)({flexShrink:0},o.style),onPointerDown:U(o.onPointerDown,(()=>{null===a.current&&(a.current=window.setInterval(s,50))})),onPointerMove:U(o.onPointerMove,(()=>{var e;null===(e=i.onItemLeave)||void 0===e||e.call(i),null===a.current&&(a.current=window.setInterval(s,50))})),onPointerLeave:U(o.onPointerLeave,(()=>{c()}))}))})),da=e.forwardRef(((e,t)=>{const{__scopeSelect:n}=e,r=E(e,ui);return(0,k.jsx)(te.div,(0,S.A)((0,S.A)({"aria-hidden":!0},r),{},{ref:t}))}));da.displayName="SelectSeparator";var ha="SelectArrow",ma=e.forwardRef(((e,t)=>{const{__scopeSelect:n}=e,r=E(e,di),s=wi(n),o=ji(ha,n),i=Oi(ha,n);return o.open&&"popper"===i.position?(0,k.jsx)(Ln,(0,S.A)((0,S.A)((0,S.A)({},s),r),{},{ref:t})):null}));ma.displayName=ha;var pa=e.forwardRef(((t,n)=>{let{__scopeSelect:r,value:s}=t,o=E(t,hi);const i=e.useRef(null),a=q(n,i),l=function(t){const n=e.useRef({value:t,previous:t});return e.useMemo((()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous)),[t])}(s);return e.useEffect((()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==s&&n){const t=new Event("change",{bubbles:!0});n.call(e,s),e.dispatchEvent(t)}}),[l,s]),(0,k.jsx)(te.select,(0,S.A)((0,S.A)({},o),{},{style:(0,S.A)((0,S.A)({},Qo),o.style),ref:a,defaultValue:s}))}));function fa(e){return""===e||void 0===e}function ga(t){const n=ne(t),r=e.useRef(""),s=e.useRef(0),o=e.useCallback((e=>{const t=r.current+e;n(t),function e(t){r.current=t,window.clearTimeout(s.current),""!==t&&(s.current=window.setTimeout((()=>e("")),1e3))}(t)}),[n]),i=e.useCallback((()=>{r.current="",window.clearTimeout(s.current)}),[]);return e.useEffect((()=>()=>window.clearTimeout(s.current)),[]),[r,o,i]}function ya(e,t,n){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,s=n?e.indexOf(n):-1;let o=function(e,t){return e.map(((n,r)=>e[(t+r)%e.length]))}(e,Math.max(s,0));1===r.length&&(o=o.filter((e=>e!==n)));const i=o.find((e=>e.textValue.toLowerCase().startsWith(r.toLowerCase())));return i!==n?i:void 0}pa.displayName="SelectBubbleInput";var va=Si,xa=Ei,ba=Ii,wa=Ti,Na=Pi,ja=Di,ka=Hi,Ca=ta,Sa=ra,Aa=oa;function Ea(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}var _a=["color"],Ia=(0,e.forwardRef)((function(t,n){var r=t.color,s=void 0===r?"currentColor":r,o=Ea(t,_a);return(0,e.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:n}),(0,e.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))})),Ta=["color"],Pa=(0,e.forwardRef)((function(t,n){var r=t.color,s=void 0===r?"currentColor":r,o=Ea(t,Ta);return(0,e.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:n}),(0,e.createElement)("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:s,fillRule:"evenodd",clipRule:"evenodd"}))}));const Ra=["className","children"],Da=["className","children","position"],Ma=["className","children"],La=va,Oa=ba,Fa=e.forwardRef(((e,t)=>{let{className:n,children:r}=e,s=E(e,Ra);return(0,k.jsxs)(xa,(0,S.A)((0,S.A)({ref:t,className:Po("flex h-9 w-full items-center justify-between gap-2 rounded-lg border border-input bg-background px-3 py-2 text-start text-sm text-foreground shadow-sm shadow-black/5 focus:border-ring focus:outline-none focus:ring-[3px] focus:ring-ring/20 disabled:cursor-not-allowed disabled:opacity-50 data-[placeholder]:text-muted-foreground/70 [&>span]:min-w-0",n)},s),{},{children:[r,(0,k.jsx)(wa,{asChild:!0,children:(0,k.jsx)(Pa,{className:"h-4 w-4 shrink-0 text-muted-foreground/80"})})]}))}));Fa.displayName=xa.displayName;const Ba=e.forwardRef(((e,t)=>{let{className:n,children:r,position:s="popper"}=e,o=E(e,Da);return(0,k.jsx)(Na,{children:(0,k.jsx)(ja,(0,S.A)((0,S.A)({ref:t,className:Po("relative z-50 max-h-[min(24rem,var(--radix-select-content-available-height))] min-w-[8rem] overflow-hidden rounded-lg border border-input bg-popover text-popover-foreground shadow-lg shadow-black/5 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 [&_[role=group]]:py-1","popper"===s&&"w-full min-w-[var(--radix-select-trigger-width)] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:s},o),{},{children:(0,k.jsx)(ka,{className:Po("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)]"),children:r})}))})}));Ba.displayName=ja.displayName;const Ua=e.forwardRef(((e,t)=>{let{className:n,children:r}=e,s=E(e,Ma);return(0,k.jsxs)(Ca,(0,S.A)((0,S.A)({ref:t,className:Po("relative flex w-full cursor-default select-none items-center rounded-md py-1.5 pe-2 ps-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n)},s),{},{children:[(0,k.jsx)("span",{className:"absolute start-2 flex size-3.5 items-center justify-center",children:(0,k.jsx)(Aa,{children:(0,k.jsx)(Ia,{className:"h-4 w-4"})})}),(0,k.jsx)(Sa,{children:r})]}))}));function za(e){let{regions:t,selectedRegion:n,onRegionChange:r,selectedRegionData:s}=e;return(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("label",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[(0,k.jsx)(Oo,{className:"h-4 w-4"}),"Region"]}),(0,k.jsxs)(La,{value:n,onValueChange:r,children:[(0,k.jsx)(Fa,{children:(0,k.jsx)(Oa,{children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:null===s||void 0===s?void 0:s.flag}),(0,k.jsx)("span",{children:null===s||void 0===s?void 0:s.name})]})})}),(0,k.jsx)(Ba,{children:t.map((e=>(0,k.jsx)(Ua,{value:e.code,children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"text-lg",children:e.flag}),(0,k.jsx)("span",{children:e.name})]})},e.code)))})]})]})}Ua.displayName=Ca.displayName;const Va=L("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function qa(e){let{currencies:t,selectedCurrency:n,onCurrencyChange:r,selectedCurrencyData:s}=e;return(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("label",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[(0,k.jsx)(Va,{className:"h-4 w-4"}),"Currency"]}),(0,k.jsxs)(La,{value:n,onValueChange:r,children:[(0,k.jsx)(Fa,{children:(0,k.jsx)(Oa,{children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"font-mono",children:null===s||void 0===s?void 0:s.symbol}),(0,k.jsx)("span",{children:null===s||void 0===s?void 0:s.code}),(0,k.jsxs)("span",{className:"text-muted-foreground",children:["- ",null===s||void 0===s?void 0:s.name]})]})})}),(0,k.jsx)(Ba,{children:t.map((e=>(0,k.jsx)(Ua,{value:e.code,children:(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("span",{className:"font-mono w-6",children:e.symbol}),(0,k.jsx)("span",{className:"font-medium",children:e.code}),(0,k.jsxs)("span",{className:"text-muted-foreground",children:["- ",e.name]})]})},e.code)))})]})]})}function Wa(){return(0,k.jsx)("div",{className:"w-full max-w-md mx-auto p-4 flex items-center justify-center",children:(0,k.jsxs)("div",{className:"animate-pulse flex space-x-4 items-center",children:[(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300"}),(0,k.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,k.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),(0,k.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]})]})})}const Ha=["class","className"],Ga=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Ka=Ns,Ya=["className","variant","size","asChild"],Qa=((e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return Ka(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map((e=>{const t=null===n||void 0===n?void 0:n[e],r=null===o||void 0===o?void 0:o[e];if(null===t)return null;const i=Ga(t)||Ga(r);return s[e][i]})),a=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),l=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r}=t,s=E(t,Ha);return Object.entries(s).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes((0,S.A)((0,S.A)({},o),a)[t]):(0,S.A)((0,S.A)({},o),a)[t]===n}))?[...e,n,r]:e}),[]);return Ka(e,i,l,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)})("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glow:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_15px_rgba(59,130,246,0.5)] hover:shadow-[0_0_25px_rgba(59,130,246,0.7)]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$a=e.forwardRef(((e,t)=>{let{className:n,variant:r,size:s,asChild:o=!1}=e,i=E(e,Ya);const a=o?$:"button";return(0,k.jsx)(a,(0,S.A)({className:Po(Qa({variant:r,size:s,className:n})),ref:t},i))}));function Ja(t){var n;let{defaultCurrency:r="USD",defaultRegion:s="US",onCurrencyChange:o,onRegionChange:i}=t;const[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),{currencies:d,regions:h,selectedCurrency:m,selectedRegion:p,isLoading:f,setSelectedCurrency:g,setSelectedRegion:y,resetToDetected:v,detectedRegion:x}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"US",r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const[o,i]=(0,e.useState)(t),[a,l]=(0,e.useState)(n),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)([]),[m,p]=(0,e.useState)([]),[f,g]=(0,e.useState)(!0),y=e=>{i(e),localStorage.setItem("userCurrency",e),console.log("Currency set to:",e),r&&(r(e),document.dispatchEvent(new CustomEvent("currency-changed",{detail:{currency:e}})))},v=e=>{l(e),localStorage.setItem("userRegion",e),console.log("Region set to:",e),s&&s(e)},x=e=>({US:"USD",GB:"GBP",DE:"EUR",FR:"EUR",JP:"JPY",CA:"CAD",AU:"AUD",CH:"CHF",CN:"CNY",IN:"INR",BR:"BRL",ZA:"ZAR"}[e]||"USD"),b=async()=>{try{try{console.log("Attempting to detect region with ipapi.co...");const e=await fetch("https://ipapi.co/json/"),t=await e.json();if(t&&t.country)return console.log("ipapi.co detected region:",t.country),u(t.country),t.country}catch(e){console.error("Error with ipapi.co:",e)}try{console.log("Attempting to detect region with ipinfo.io...");const e=await fetch("https://ipinfo.io/json"),t=await e.json();if(t&&t.country)return console.log("ipinfo.io detected region:",t.country),u(t.country),t.country}catch(e){console.error("Error with ipinfo.io:",e)}try{console.log("Attempting to detect region with geolocation-db.com...");const e=await fetch("https://geolocation-db.com/json/"),t=await e.json();if(t&&t.country_code)return console.log("geolocation-db.com detected region:",t.country_code),u(t.country_code),t.country_code}catch(e){console.error("Error with geolocation-db.com:",e)}const t=(navigator.language||"en-US").split("-")[1]||"US";return console.log("Using browser language as fallback:",t),u(t),t}catch(e){return console.error("Error detecting user region:",e),console.log("Defaulting to US"),u("US"),"US"}};return(0,e.useEffect)((()=>{(async()=>{try{g(!0),p([{code:"US",name:"United States",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"GB",name:"United Kingdom",flag:"\ud83c\uddec\ud83c\udde7"},{code:"DE",name:"Germany",flag:"\ud83c\udde9\ud83c\uddea"},{code:"FR",name:"France",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"JP",name:"Japan",flag:"\ud83c\uddef\ud83c\uddf5"},{code:"CA",name:"Canada",flag:"\ud83c\udde8\ud83c\udde6"},{code:"AU",name:"Australia",flag:"\ud83c\udde6\ud83c\uddfa"},{code:"CH",name:"Switzerland",flag:"\ud83c\udde8\ud83c\udded"},{code:"CN",name:"China",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"IN",name:"India",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"BR",name:"Brazil",flag:"\ud83c\udde7\ud83c\uddf7"},{code:"ZA",name:"South Africa",flag:"\ud83c\uddff\ud83c\udde6"}]),h([{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20ac"},{code:"GBP",name:"British Pound",symbol:"\xa3"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5"},{code:"CAD",name:"Canadian Dollar",symbol:"C$"},{code:"AUD",name:"Australian Dollar",symbol:"A$"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5"},{code:"INR",name:"Indian Rupee",symbol:"\u20b9"},{code:"BRL",name:"Brazilian Real",symbol:"R$"},{code:"ZAR",name:"South African Rand",symbol:"R"}]);const e=localStorage.getItem("userRegion"),t=localStorage.getItem("userCurrency");if(console.log("Saved region in localStorage:",e),console.log("Saved currency in localStorage:",t),e&&t)console.log("Using saved preferences from localStorage"),l(e),i(t),s&&s(e),r&&r(t),b().then((()=>{console.log("Background detection complete")}));else{console.log("No saved preferences, detecting region...");const e=await b(),t=x(e);v(e),y(t)}g(!1)}catch(e){console.error("Error loading currencies and regions:",e),g(!1)}})()}),[r,s]),{currencies:d,regions:m,selectedCurrency:o,selectedRegion:a,isLoading:f,setSelectedCurrency:y,setSelectedRegion:v,resetToDetected:async()=>{console.log("Resetting to detected region..."),localStorage.removeItem("userRegion"),localStorage.removeItem("userCurrency");const e=await b(),t=x(e);v(e),y(t),console.log("Reset complete. Region:",e,"Currency:",t)},detectedRegion:c}}(r,s,o,i);(0,e.useEffect)((()=>{console.log("[CurrencyRegionSetter] Selected currency changed to:",m)}),[m]);const b=d.find((e=>e.code===m))||{code:"USD",name:"US Dollar",symbol:"$"},w=h.find((e=>e.code===p))||{code:"US",name:"United States",flag:"\ud83c\uddfa\ud83c\uddf8"};return f?(0,k.jsx)(Wa,{}):(0,k.jsx)("div",{className:"w-full max-w-md mx-auto",id:"currency-region-selector",children:(0,k.jsxs)(Do,{open:a,onOpenChange:l,children:[(0,k.jsx)(Mo,{asChild:!0,children:(0,k.jsxs)("button",{className:"w-full flex items-center justify-between gap-3 p-4 rounded-lg border border-input bg-background hover:bg-accent/50 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[(0,k.jsxs)("div",{className:"flex items-center gap-3",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)(O,{className:"h-5 w-5 text-muted-foreground"}),(0,k.jsx)("span",{className:"text-2xl",children:null===w||void 0===w?void 0:w.flag}),(0,k.jsx)("span",{className:"font-medium",children:null===w||void 0===w?void 0:w.name})]}),(0,k.jsx)("div",{className:"h-4 w-px bg-border"}),(0,k.jsx)("div",{className:"flex items-center gap-2",children:(0,k.jsxs)("span",{className:"font-medium",children:[null===b||void 0===b?void 0:b.symbol," ",null===b||void 0===b?void 0:b.code]})})]}),(0,k.jsx)(F,{className:"h-4 w-4 text-muted-foreground"})]})}),(0,k.jsxs)(Lo,{className:"w-80 p-0",align:"start",children:[(0,k.jsxs)("div",{className:"p-4 border-b",children:[(0,k.jsx)("h3",{className:"font-semibold text-sm text-foreground mb-1",children:"Currency & Region Settings"}),(0,k.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose your preferred currency and region"})]}),(0,k.jsxs)("div",{className:"p-4 space-y-4",children:[(0,k.jsx)(za,{regions:h,selectedRegion:p,onRegionChange:y,selectedRegionData:w}),(0,k.jsx)(qa,{currencies:d,selectedCurrency:m,onCurrencyChange:e=>{console.log("[CurrencyRegionSetter] Currency selection changed to:",e),g(e),document.dispatchEvent(new CustomEvent("currency-changed",{detail:{currency:e}}))},selectedCurrencyData:b}),x&&x!==p&&(0,k.jsxs)("div",{className:"pt-2 border-t",children:[(0,k.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["We detected that you're in ",(null===(n=h.find((e=>e.code===x)))||void 0===n?void 0:n.name)||x,". Would you like to use that region instead?"]}),(0,k.jsx)($a,{variant:"outline",size:"sm",className:"w-full flex items-center justify-center gap-2",onClick:async()=>{u(!0),await v(),u(!1)},disabled:c,children:c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(B,{className:"h-3 w-3 animate-spin"}),(0,k.jsx)("span",{children:"Resetting..."})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(B,{className:"h-3 w-3"}),(0,k.jsx)("span",{children:"Use Detected Region"})]})})]})]}),(0,k.jsx)("div",{className:"p-4 border-t bg-muted/30",children:(0,k.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,k.jsx)("span",{className:"text-muted-foreground",children:"Current selection:"}),(0,k.jsxs)("span",{className:"font-medium",children:[null===w||void 0===w?void 0:w.flag," ",null===b||void 0===b?void 0:b.symbol," ",null===b||void 0===b?void 0:b.code]})]})})]})]})})}$a.displayName="Button";const Xa=e=>{let{onViewChange:t,currentView:n="default"}=e;const{user:r}=(0,N.A)(),s=(0,i.zy)(),o=s.pathname.includes("/business/dashboard")||s.pathname.includes("/business/customers")||s.pathname.includes("/business/coupons")||s.pathname.includes("/business/results")||s.pathname.includes("/business/communications")||s.pathname.includes("/business/loyalty")||s.pathname.includes("/business/settings")||s.pathname.includes("/business/billing");return(0,k.jsx)("header",{className:"bg-white shadow-sm",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"flex justify-between h-16",children:[(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("img",{className:"h-8 w-auto",src:"/logo.png",alt:"Regulist"})})}),(0,k.jsxs)("div",{className:"flex items-center gap-4",children:[!r&&(0,k.jsx)("div",{className:"w-auto max-w-[200px]",children:(0,k.jsx)(Ja,{})}),o&&t&&(0,k.jsx)(C,{onChange:e=>{t&&(console.log("Header: changing view to",e),t(e))},initialView:n}),r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"ml-3 relative",children:(0,k.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:null!==r&&void 0!==r&&r.displayName?(0,k.jsx)("span",{className:"font-medium text-sm text-gray-900",children:r.displayName.charAt(0).toUpperCase()}):(0,k.jsx)("span",{className:"font-medium text-sm text-gray-900",children:"U"})})}),(0,k.jsx)("a",{href:"/logout",className:"text-gray-900 hover:text-gray-700 text-sm font-medium",children:"Logout"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("a",{href:"/login",className:"text-gray-900 hover:text-gray-700 text-sm font-medium",children:"Login"}),(0,k.jsx)("a",{href:"/register",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Register"})]})]})]})})})},Za=()=>{const e=[{name:"Dashboard",path:"/business/dashboard",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Customers",path:"/business/customers",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{name:"Coupons",path:"/business/coupons",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},{name:"Loyalty Programs",path:"/business/loyalty",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{name:"Communications",path:"/business/communications",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{name:"Analytics",path:"/business/analytics",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{name:"Settings",path:"/business/settings",icon:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{name:"Billing",path:"/business/billing",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{name:"QR Code",path:"/business/qr-code",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}];return(0,k.jsx)("div",{className:"w-64 bg-gray-50 border-r border-gray-200 flex-shrink-0",children:(0,k.jsx)("div",{className:"h-full flex flex-col",children:(0,k.jsx)("nav",{className:"flex-1 px-2 py-4 space-y-1",children:e.map((e=>(0,k.jsxs)(v,{to:e.path,className:e=>{let{isActive:t}=e;return"flex items-center px-4 py-3 text-sm font-medium rounded-md ".concat(t?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-100 hover:text-gray-900")},children:[(0,k.jsx)("span",{className:"mr-3",children:e.icon}),(0,k.jsx)("span",{className:"flex-1",children:e.name}),e.badge&&(0,k.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium rounded-full bg-primary-100 text-primary-800",children:e.badge})]},e.name)))})})})},el=(0,e.createContext)(void 0),tl=()=>(0,e.useContext)(el),nl=()=>{const{user:t}=(0,N.A)(),n=(0,i.zy)(),[r,s]=(0,e.useState)((()=>{const e=localStorage.getItem("viewMode");return"simple"===e||"default"===e?e:"default"}));(0,e.useEffect)((()=>{if(n.pathname.includes("/simple"))s("simple");else{const e=localStorage.getItem("viewMode");"simple"!==e&&"default"!==e||s(e)}}),[n.pathname]),(0,e.useEffect)((()=>{localStorage.setItem("viewMode",r)}),[r]);const o=e=>{s(e)};return t?(0,k.jsx)(el.Provider,{value:{viewMode:r,onViewChange:o},children:(0,k.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,k.jsx)(Xa,{onViewChange:o,currentView:r}),(0,k.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:["default"===r&&(0,k.jsx)(Za,{}),(0,k.jsx)("main",{className:"flex-1 overflow-auto bg-gray-50 ".concat("simple"===r?"w-full":""),children:(0,k.jsx)("div",{className:"dashboard-outlet-container","data-view-mode":r,children:(0,k.jsx)(i.sv,{})})})]})]})}):null};var rl=n(2575),sl=n(3849);const ol=new class{constructor(){this.metrics=[],this.MAX_METRICS=1e3}trackQueryPerformance(e,t,n){const r=n-t,s={queryName:e,duration:r,timestamp:Date.now()};this.addMetric(s),this.logPerformance(e,r)}trackCacheHit(e){const t={queryName:"cache_hit_".concat(e),duration:0,timestamp:Date.now(),cacheHit:!0};this.addMetric(t),console.log("\ud83c\udfaf Cache hit: ".concat(e))}trackQueryError(e,t){const n={queryName:e,duration:-1,timestamp:Date.now(),error:t.message||t};this.addMetric(n),console.error("\u274c Query error in ".concat(e,":"),t)}getPerformanceSummary(){const e=this.metrics.filter((e=>!e.cacheHit&&!e.error)),t=this.metrics.filter((e=>e.cacheHit)).length;return{averageQueryTime:e.length>0?e.reduce(((e,t)=>e+t.duration),0)/e.length:0,slowQueries:e.filter((e=>e.duration>1e3)).sort(((e,t)=>t.duration-e.duration)).slice(0,10),cacheHitRate:this.metrics.length>0?t/this.metrics.length*100:0,totalQueries:this.metrics.length}}exportMetrics(){return[...this.metrics]}clearMetrics(){this.metrics=[]}addMetric(e){this.metrics.push(e),this.metrics.length>this.MAX_METRICS&&(this.metrics=this.metrics.slice(-this.MAX_METRICS))}logPerformance(e,t){t>2e3?console.warn("\ud83d\udc0c Very slow query: ".concat(e," took ").concat(t.toFixed(2),"ms")):t>1e3?console.warn("\u26a0\ufe0f Slow query: ".concat(e," took ").concat(t.toFixed(2),"ms")):t>500?console.log("\u23f1\ufe0f ".concat(e,": ").concat(t.toFixed(2),"ms")):console.log("\u26a1 Fast query: ".concat(e,": ").concat(t.toFixed(2),"ms"))}};async function il(e){const t=performance.now();try{const n=(0,sl.d_)((0,sl.P)((0,sl.rJ)(rl.db,"coupons"),(0,sl._M)("businessId","==",e),(0,sl._M)("active","==",!0))),r=(0,sl.d_)((0,sl.P)((0,sl.rJ)(rl.db,"customerCoupons"),(0,sl._M)("businessId","==",e),(0,sl._M)("used","==",!0))),s=async function(e){try{const t=(0,sl.rJ)(rl.db,"customerCoupons"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e),(0,sl._M)("used","==",!0)),r=await(0,sl.GG)(n),s={};r.forEach((e=>{const t=e.data().customerId;s[t]||(s[t]=0),s[t]++}));const o=Object.values(s).filter((e=>e>=2)).length;return o}catch(t){return console.error("Error getting loyal customers count:",t),0}}(e),o=al(e,5),[i,a,l,c]=await Promise.all([n,r,s,o]),u={activeCoupons:i.data().count,totalRedemptions:a.data().count,loyalCustomers:l,revenueGenerated:0,totalCustomers:0,recentActivity:c,lastUpdated:new Date},d=await(0,sl.d_)((0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",e)));u.totalCustomers=d.data().count,u.totalCustomers>0&&u.totalRedemptions>0&&(u.conversionRate=u.totalRedemptions/u.totalCustomers*100);const h=performance.now();return ol.trackQueryPerformance("optimized_dashboard_stats",t,h),u}catch(n){return ol.trackQueryError("optimized_dashboard_stats",n),console.error("Error fetching optimized dashboard stats:",n),{activeCoupons:0,totalRedemptions:0,loyalCustomers:0,revenueGenerated:0,totalCustomers:0,lastUpdated:new Date}}}async function al(e,t){try{const n=(0,sl.rJ)(rl.db,"coupons"),r=(0,sl.P)(n,(0,sl._M)("businessId","==",e),(0,sl.My)("createdAt","desc"),(0,sl.AB)(t)),s=await(0,sl.GG)(r);return s.docs.map((e=>{const t=e.data();return{id:e.id,type:"coupon_created",title:"New coupon created: ".concat(t.title||"Untitled"),timestamp:t.createdAt||new Date,entityId:e.id,details:t.description||""}}))}catch(n){return console.error("Error getting recent activity:",n),[]}}function ll(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function cl(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function ul(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function dl(e,t,n,r){if("function"===typeof t){const[s,o]=ul(r);t=t(void 0!==n?n:e.custom,s,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[s,o]=ul(r);t=t(void 0!==n?n:e.custom,s,o)}return t}function hl(e,t,n){const r=e.getProps();return dl(r,t,void 0!==n?n:r.custom,e)}function ml(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const pl=e=>e,fl={},gl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],yl={value:null,addProjectionMetrics:null};function vl(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=gl.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,s=!1,o=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(u.schedule(t),e()),l++,t(a)}const u={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{a=e,s?o=!0:(s=!0,[n,r]=[r,n],n.forEach(c),t&&yl.value&&yl.value.frameloop[t].push(l),l=0,n.clear(),s=!1,o&&(o=!1,u.process(e)))}};return u}(o,t?n:void 0),e)),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:m,postRender:p}=i,f=()=>{const o=fl.useManualTiming?s.timestamp:performance.now();n=!1,fl.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(o-s.timestamp,40),1)),s.timestamp=o,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),p.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(f))},g=gl.reduce(((t,o)=>{const a=i[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(f)),a.schedule(t,o,i)},t}),{});return{schedule:g,cancel:e=>{for(let t=0;t<gl.length;t++)i[gl[t]].cancel(e)},state:s,steps:i}}const{schedule:xl,cancel:bl,state:wl,steps:Nl}=vl("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:pl,!0),jl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kl=(()=>new Set(jl))(),Cl=new Set(["width","height","top","left","right","bottom",...jl]);function Sl(e,t){-1===e.indexOf(t)&&e.push(t)}function Al(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class El{constructor(){this.subscriptions=[]}add(e){return Sl(this.subscriptions,e),()=>Al(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function _l(e,t){return t?e*(1e3/t):0}let Il;function Tl(){Il=void 0}const Pl={now:()=>(void 0===Il&&Pl.set(wl.isProcessing||fl.useManualTiming?wl.timestamp:performance.now()),Il),set:e=>{Il=e,queueMicrotask(Tl)}},Rl={current:void 0};class Dl{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=Pl.now();var s,o;if((t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev)&&(null===(s=t.events.change)||void 0===s||s.notify(t.current),t.dependents))for(const i of t.dependents)i.dirty();n&&(null===(o=t.events.renderRequest)||void 0===o||o.notify(t.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Pl.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new El);const n=this.events[e].add(t);return"change"===e?()=>{n(),xl.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Rl.current&&Rl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Pl.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return _l(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ml(e,t){return new Dl(e,t)}const Ll=e=>Array.isArray(e),Ol=["transitionEnd","transition"];function Fl(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ml(n))}const Bl=e=>Boolean(e&&e.getVelocity);function Ul(e,t){const n=e.getValue("willChange");if(r=n,Boolean(Bl(r)&&r.add))return n.add(t);if(!n&&fl.WillChange){const n=new fl.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}const zl=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Vl="data-"+zl("framerAppearId");function ql(e){return e.props[Vl]}const Wl=(e,t)=>n=>t(e(n)),Hl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Wl)},Gl=(e,t,n)=>n>t?t:n<e?e:n,Kl=e=>1e3*e,Yl=e=>e/1e3,Ql={layout:0,mainThread:0,waapi:0};const $l=e=>t=>"string"===typeof t&&t.startsWith(e),Jl=$l("--"),Xl=$l("var(--"),Zl=e=>!!Xl(e)&&ec.test(e.split("/*")[0].trim()),ec=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,tc={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},nc=(0,S.A)((0,S.A)({},tc),{},{transform:e=>Gl(0,1,e)}),rc=(0,S.A)((0,S.A)({},tc),{},{default:1}),sc=e=>Math.round(1e5*e)/1e5,oc=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const ic=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,ac=(e,t)=>n=>Boolean("string"===typeof n&&ic.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),lc=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[s,o,i,a]=r.match(oc);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(i),alpha:void 0!==a?parseFloat(a):1}},cc=(0,S.A)((0,S.A)({},tc),{},{transform:e=>Math.round((e=>Gl(0,255,e))(e))}),uc={test:ac("rgb","red"),parse:lc("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+cc.transform(t)+", "+cc.transform(n)+", "+cc.transform(r)+", "+sc(nc.transform(s))+")"}};const dc={test:ac("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:uc.transform},hc=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),mc=hc("deg"),pc=hc("%"),fc=hc("px"),gc=hc("vh"),yc=hc("vw"),vc=(()=>(0,S.A)((0,S.A)({},pc),{},{parse:e=>pc.parse(e)/100,transform:e=>pc.transform(100*e)}))(),xc={test:ac("hsl","hue"),parse:lc("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+pc.transform(sc(n))+", "+pc.transform(sc(r))+", "+sc(nc.transform(s))+")"}},bc={test:e=>uc.test(e)||dc.test(e)||xc.test(e),parse:e=>uc.test(e)?uc.parse(e):xc.test(e)?xc.parse(e):dc.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?uc.transform(e):xc.transform(e),getAnimatableNone:e=>{const t=bc.parse(e);return t.alpha=0,bc.transform(t)}},wc=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Nc="number",jc="color",kc=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Cc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const i=t.replace(kc,(e=>(bc.test(e)?(r.color.push(o),s.push(jc),n.push(bc.parse(e))):e.startsWith("var(")?(r.var.push(o),s.push("var"),n.push(e)):(r.number.push(o),s.push(Nc),n.push(parseFloat(e))),++o,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:s}}function Sc(e){return Cc(e).values}function Ac(e){const{split:t,types:n}=Cc(e),r=t.length;return e=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],void 0!==e[o]){const t=n[o];s+=t===Nc?sc(e[o]):t===jc?bc.transform(e[o]):e[o]}return s}}const Ec=e=>"number"===typeof e?0:bc.test(e)?bc.getAnimatableNone(e):e;const _c={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(oc))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(wc))||void 0===n?void 0:n.length)||0)>0},parse:Sc,createTransformer:Ac,getAnimatableNone:function(e){const t=Sc(e);return Ac(e)(t.map(Ec))}};function Ic(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Tc(e,t){return n=>n>0?t:e}const Pc=(e,t,n)=>e+(t-e)*n,Rc=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},Dc=[dc,uc,xc];function Mc(e){const t=(n=e,Dc.find((e=>e.test(n))));var n;if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let r=t.parse(e);return t===xc&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let o=0,i=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;o=Ic(s,e,t+1/3),i=Ic(s,e,t),a=Ic(s,e,t-1/3)}else o=i=a=r;return{red:Math.round(255*o),green:Math.round(255*i),blue:Math.round(255*a),alpha:s}}(r)),r}const Lc=(e,t)=>{const n=Mc(e),r=Mc(t);if(!n||!r)return Tc(e,t);const s=(0,S.A)({},n);return e=>(s.red=Rc(n.red,r.red,e),s.green=Rc(n.green,r.green,e),s.blue=Rc(n.blue,r.blue,e),s.alpha=Pc(n.alpha,r.alpha,e),uc.transform(s))},Oc=new Set(["none","hidden"]);function Fc(e,t){return n=>Pc(e,t,n)}function Bc(e){return"number"===typeof e?Fc:"string"===typeof e?Zl(e)?Tc:bc.test(e)?Lc:Vc:Array.isArray(e)?Uc:"object"===typeof e?bc.test(e)?Lc:zc:Tc}function Uc(e,t){const n=[...e],r=n.length,s=e.map(((e,n)=>Bc(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function zc(e,t){const n=(0,S.A)((0,S.A)({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=Bc(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const Vc=(e,t)=>{const n=_c.createTransformer(t),r=Cc(e),s=Cc(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Oc.has(e)&&!s.values.length||Oc.has(t)&&!r.values.length?function(e,t){return Oc.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Hl(Uc(function(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){var s;const i=t.types[o],a=e.indexes[i][r[i]],l=null!==(s=e.values[a])&&void 0!==s?s:0;n[o]=l,r[i]++}return n}(r,s),s.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),Tc(e,t))};function qc(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Pc(e,t,n);return Bc(e)(e,t)}const Wc=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return xl.update(t,e)},stop:()=>bl(t),now:()=>wl.isProcessing?wl.timestamp:Pl.now()}},Hc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const s=Math.max(Math.round(t/n),2);for(let o=0;o<s;o++)r+=Math.round(1e4*e(o/(s-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},Gc=2e4;function Kc(e){let t=0;let n=e.next(t);for(;!n.done&&t<Gc;)t+=50,n=e.next(t);return t>=Gc?1/0:t}function Yc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)((0,S.A)((0,S.A)({},e),{},{keyframes:[0,t]})),r=Math.min(Kc(n),Gc);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:Yl(r)}}function Qc(e,t,n){const r=Math.max(t-5,0);return _l(n-e(r),t-r)}const $c={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jc=.001;function Xc(e){let t,n,{duration:r=$c.duration,bounce:s=$c.bounce,velocity:o=$c.velocity,mass:i=$c.mass}=e;Kl($c.maxDuration);let a=1-s;a=Gl($c.minDamping,$c.maxDamping,a),r=Gl($c.minDuration,$c.maxDuration,Yl(r)),a<1?(t=e=>{const t=e*a,n=t*r,s=t-o,i=eu(e,a),l=Math.exp(-n);return Jc-s/i*l},n=e=>{const n=e*a*r,s=n*o+o,i=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=eu(Math.pow(e,2),a);return(-t(e)+Jc>0?-1:1)*((s-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let s=1;s<Zc;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Kl(r),isNaN(l))return{stiffness:$c.stiffness,damping:$c.damping,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*a*Math.sqrt(i*e),duration:r}}}const Zc=12;function eu(e,t){return e*Math.sqrt(1-t*t)}const tu=["duration","bounce"],nu=["stiffness","damping","mass"];function ru(e,t){return t.some((t=>void 0!==e[t]))}function su(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$c.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$c.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=function(e){let t=(0,S.A)({velocity:$c.velocity,stiffness:$c.stiffness,damping:$c.damping,mass:$c.mass,isResolvedFromDuration:!1},e);if(!ru(e,nu)&&ru(e,tu))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,o=2*Gl(.05,1,1-(e.bounce||0))*Math.sqrt(s);t=(0,S.A)((0,S.A)({},t),{},{mass:$c.mass,stiffness:s,damping:o})}else{const n=Xc(e);t=(0,S.A)((0,S.A)((0,S.A)({},t),n),{},{mass:$c.mass}),t.isResolvedFromDuration=!0}return t}((0,S.A)((0,S.A)({},n),{},{velocity:-Yl(n.velocity||0)})),p=h||0,f=c/(2*Math.sqrt(l*u)),g=i-o,y=Yl(Math.sqrt(l/u)),v=Math.abs(g)<5;let x;if(r||(r=v?$c.restSpeed.granular:$c.restSpeed.default),s||(s=v?$c.restDelta.granular:$c.restDelta.default),f<1){const e=eu(y,f);x=t=>{const n=Math.exp(-f*y*t);return i-n*((p+f*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)x=e=>i-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(f*f-1);x=t=>{const n=Math.exp(-f*y*t),r=Math.min(e*t,300);return i-n*((p+f*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:m&&d||null,next:e=>{const t=x(e);if(m)a.done=e>=d;else{let n=0===e?p:0;f<1&&(n=0===e?Kl(p):Qc(x,e,t));const o=Math.abs(n)<=r,l=Math.abs(i-t)<=s;a.done=o&&l}return a.value=a.done?i:t,a},toString:()=>{const e=Math.min(Kc(b),Gc),t=Hc((t=>b.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return b}function ou(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],m={done:!1,value:h},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=r*n;const g=h+f,y=void 0===a?g:a(g);y!==g&&(f=y-h);const v=e=>-f*Math.exp(-e/s),x=e=>y+v(e),b=e=>{const t=v(e),n=x(e);m.done=Math.abs(t)<=u,m.value=m.done?y:n};let w,N;const j=e=>{var t;(t=m.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,N=su({keyframes:[m.value,p(m.value)],velocity:Qc(x,e,m.value),damping:o,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return N||void 0!==w||(t=!0,b(e),j(e)),void 0!==w&&e>=w?N.next(e-w):(!t&&b(e),m)}}}su.applyToOptions=e=>{const t=Yc(e,100,su);return e.ease=t.ease,e.duration=Kl(t.duration),e.type="keyframes",e};const iu=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function au(e,t,n,r){if(e===t&&n===r)return pl;const s=t=>function(e,t,n,r,s){let o,i,a=0;do{i=t+(n-t)/2,o=iu(i,r,s)-e,o>0?n=i:t=i}while(Math.abs(o)>1e-7&&++a<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:iu(s(e),t,r)}const lu=au(.42,0,1,1),cu=au(0,0,.58,1),uu=au(.42,0,.58,1),du=e=>Array.isArray(e)&&"number"!==typeof e[0],hu=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mu=e=>t=>1-e(1-t),pu=au(.33,1.53,.69,.99),fu=mu(pu),gu=hu(fu),yu=e=>(e*=2)<1?.5*fu(e):.5*(2-Math.pow(2,-10*(e-1))),vu=e=>1-Math.sin(Math.acos(e)),xu=mu(vu),bu=hu(vu),wu=e=>Array.isArray(e)&&"number"===typeof e[0],Nu={linear:pl,easeIn:lu,easeInOut:uu,easeOut:cu,circIn:vu,circInOut:bu,circOut:xu,backIn:fu,backInOut:gu,backOut:pu,anticipate:yu},ju=e=>{if(wu(e)){e.length;const[t,n,r,s]=e;return au(t,n,r,s)}return(e=>"string"===typeof e)(e)?("Invalid easing type '".concat(e,"'"),Nu[e]):e},ku=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function Cu(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(t.length,1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],s=n||fl.mix||qc,o=e.length-1;for(let i=0;i<o;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||pl:t;n=Hl(e,n)}r.push(n)}return r}(t,r,s),l=a.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=ku(e[r],e[r+1],n);return a[r](s)};return n?t=>c(Gl(e[0],e[o-1],t)):c}function Su(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=ku(0,t,r);e.push(Pc(n,1,s))}}function Au(e){const t=[0];return Su(t,e.length-1),t}function Eu(e,t){return e.map((()=>t||uu)).splice(0,e.length-1)}function _u(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const o=du(s)?s.map(ju):ju(s),i={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:Au(n),t),l=Cu(a,n,{ease:Array.isArray(o)?o:Eu(n,o)});return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Iu=e=>null!==e;function Tu(e,t,n){let{repeat:r,repeatType:s="loop"}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Iu),a=o<0||r&&"loop"!==s&&r%2===1?0:i.length-1;return a&&void 0!==n?n:i[a]}const Pu={decay:ou,inertia:ou,tween:_u,keyframes:_u,spring:su};function Ru(e){"string"===typeof e.type&&(e.type=Pu[e.type])}class Du{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Mu=e=>e/100;class Lu extends Du{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Pl.now()&&this.tick(Pl.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},Ql.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Ru(e);const{type:t=_u,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:i}=e;const a=t||_u;a!==_u&&"number"!==typeof i[0]&&(this.mixKeyframes=Hl(Mu,qc(i[0],i[1])),i=[0,100]);const l=a((0,S.A)((0,S.A)({},e),{},{keyframes:i}));"mirror"===s&&(this.mirroredGenerator=a((0,S.A)((0,S.A)({},e),{},{keyframes:[...i].reverse(),velocity:-o}))),null===l.calculatedDuration&&(l.calculatedDuration=Kc(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:i,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,x=n;if(u){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/i)):"mirror"===d&&(x=o)),v=Gl(0,1,n)*i}const b=y?{done:!1,value:c[0]}:x.next(v);s&&(b.value=s(b.value));let{done:w}=b;y||null===a||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const N=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return N&&m!==ou&&(b.value=Tu(c,this.options,f,this.speed)),p&&p(b.value),N&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Yl(this.calculatedDuration)}get time(){return Yl(this.currentTime)}set time(e){var t;e=Kl(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pl.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Yl(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=Wc,startTime:r}=this.options;this.driver||(this.driver=n((e=>this.tick(e)))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pl.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Ql.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}const Ou=e=>180*e/Math.PI,Fu=e=>{const t=Ou(Math.atan2(e[1],e[0]));return Uu(t)},Bu={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Fu,rotateZ:Fu,skewX:e=>Ou(Math.atan(e[1])),skewY:e=>Ou(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Uu=e=>((e%=360)<0&&(e+=360),e),zu=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Vu=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),qu={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zu,scaleY:Vu,scale:e=>(zu(e)+Vu(e))/2,rotateX:e=>Uu(Ou(Math.atan2(e[6],e[5]))),rotateY:e=>Uu(Ou(Math.atan2(-e[2],e[0]))),rotateZ:Fu,rotate:Fu,skewX:e=>Ou(Math.atan(e[4])),skewY:e=>Ou(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Wu(e){return e.includes("scale")?1:0}function Hu(e,t){if(!e||"none"===e)return Wu(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,s;if(n)r=qu,s=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=Bu,s=t}if(!s)return Wu(t);const o=r[t],i=s[1].split(",").map(Gu);return"function"===typeof o?o(i):i[o]}function Gu(e){return parseFloat(e.trim())}const Ku=e=>e===tc||e===fc,Yu=new Set(["x","y","z"]),Qu=jl.filter((e=>!Yu.has(e)));const $u={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return Hu(n,"x")},y:(e,t)=>{let{transform:n}=t;return Hu(n,"y")}};$u.translateX=$u.x,$u.translateY=$u.y;const Ju=new Set;let Xu=!1,Zu=!1,ed=!1;function td(){if(Zu){const e=Array.from(Ju).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Qu.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{var n;let[r,s]=t;null===(n=e.getValue(r))||void 0===n||n.set(s)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Zu=!1,Xu=!1,Ju.forEach((e=>e.complete(ed))),Ju.clear()}function nd(){Ju.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Zu=!0)}))}class rd{constructor(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ju.add(this),Xu||(Xu=!0,xl.read(nd),xl.resolveKeyframes(td))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=null===r||void 0===r?void 0:r.get(),o=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,o);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=o),r&&void 0===s&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ju.delete(this)}cancel(){"scheduled"===this.state&&(Ju.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function sd(e){let t;return()=>(void 0===t&&(t=e()),t)}const od=sd((()=>void 0!==window.ScrollTimeline)),id={};function ad(e,t){const n=sd(e);return()=>{var e;return null!==(e=id[t])&&void 0!==e?e:n()}}const ld=ad((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(UZ){return!1}return!0}),"linearEasing"),cd=e=>{let[t,n,r,s]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(s,")")},ud={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cd([0,.65,.55,1]),circOut:cd([.55,0,1,.45]),backIn:cd([.31,.01,.66,-.59]),backOut:cd([.33,1.53,.69,.99])};function dd(e,t){return e?"function"===typeof e?ld()?Hc(e,t):"ease-out":wu(e)?cd(e):Array.isArray(e)?e.map((e=>dd(e,t)||ud.easeOut)):ud[e]:void 0}function hd(e,t,n){let{delay:r=0,duration:s=300,repeat:o=0,repeatType:i="loop",ease:a="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u={[t]:n};l&&(u.offset=l);const d=dd(a,s);Array.isArray(d)&&(u.easing=d),yl.value&&Ql.waapi++;const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const m=e.animate(u,h);return yl.value&&m.finished.finally((()=>{Ql.waapi--})),m}function md(e){return"function"===typeof e&&"applyToOptions"in e}const pd=["type"];class fd extends Du{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:i,onComplete:a}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=o,this.options=e,e.type;const l=function(e){let{type:t}=e,n=E(e,pd);return md(t)&&ld()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(s=n.ease)&&void 0!==s||(n.ease="easeOut"),n);var r,s}(e);this.animation=hd(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Tu(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===a||void 0===a||a(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(UZ){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return Yl(Number(n))}get time(){return Yl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Kl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&od()?(this.animation.timeline=t,pl):n(this)}}const gd={anticipate:yu,backInOut:gu,circInOut:bu};function yd(e){"string"===typeof e.ease&&e.ease in gd&&(e.ease=gd[e.ease])}const vd=["motionValue","onUpdate","onComplete","element"];class xd extends fd{constructor(e){yd(e),Ru(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:s,onComplete:o,element:i}=n,a=E(n,vd);if(!r)return;if(void 0!==e)return void r.set(e);const l=new Lu((0,S.A)((0,S.A)({},a),{},{autoplay:!1})),c=Kl(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const bd=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!_c.test(e)&&"0"!==e||e.startsWith("url(")));function wd(e){return"object"===typeof e&&null!==e}function Nd(e){return wd(e)&&"offsetHeight"in e}const jd=new Set(["opacity","clipPath","filter","transform"]),kd=sd((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Cd=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class Sd extends Du{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:s="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d}=e,h=E(e,Cd);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=Pl.now();const m=(0,S.A)({autoplay:n,delay:r,type:s,repeat:o,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d},h),p=(null===d||void 0===d?void 0:d.KeyframeResolver)||rd;this.keyframeResolver=new p(l,((e,t,n)=>this.onKeyframesResolved(e,t,m,!n)),c,u,d),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:i,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Pl.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],i=bd(s,t),a=bd(o,t);return"You are trying to animate ".concat(t,' from "').concat(s,'" to "').concat(o,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(o," via the `style` property."),!(!i||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||md(n))&&r)}(e,s,o,i)||(!fl.instantAnimations&&a||null===c||void 0===c||c(Tu(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const u=r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,d=(0,S.A)((0,S.A)({startTime:u,finalKeyframe:t},n),{},{keyframes:e}),h=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:i,type:a}=e;if(!Nd(null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return kd()&&r&&jd.has(r)&&("transform"!==r||!c)&&!l&&!s&&"mirror"!==o&&0!==i&&"inertia"!==a}(d)?new xd((0,S.A)((0,S.A)({},d),{},{element:d.motionValue.owner.current})):new Lu(d);h.finished.then((()=>this.notifyFinished())).catch(pl),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),ed=!0,nd(),td(),ed=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Ad=e=>null!==e;const Ed={type:"spring",stiffness:500,damping:25,restSpeed:10},_d={type:"keyframes",duration:.8},Id={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Td=(e,t)=>{let{keyframes:n}=t;return n.length>2?_d:kl.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Ed:Id},Pd=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Rd=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return i=>{const a=ml(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c-=Kl(l);const u=(0,S.A)((0,S.A)({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},a),{},{delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:o?void 0:s});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u}=e,d=E(e,Pd);return!!Object.keys(d).length})(a)||Object.assign(u,Td(e,u)),u.duration&&(u.duration=Kl(u.duration)),u.repeatDelay&&(u.repeatDelay=Kl(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(fl.instantAnimations||fl.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!a.type&&!a.ease,d&&!o&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:s="loop"}=t;const o=e.filter(Ad),i=r&&"loop"!==s&&r%2===1?0:o.length-1;return i&&void 0!==n?n:o[i]}(u.keyframes,a);if(void 0!==e)return void xl.update((()=>{u.onUpdate(e),u.onComplete()}))}return a.isSync?new Lu(u):new Sd(u)}},Dd=["transition","transitionEnd"];function Md(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function Ld(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:i}=t,a=E(t,Dd);r&&(o=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){var u;const t=e.getValue(d,null!==(u=e.latestValues[d])&&void 0!==u?u:null),r=a[d];if(void 0===r||c&&Md(c,d))continue;const s=(0,S.A)({delay:n},ml(o||{},d)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!s.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=ql(e);if(t){const e=window.MotionHandoffAnimation(t,d,xl);null!==e&&(s.startTime=e,h=!0)}}Ul(e,d),t.start(Rd(d,t,r,e.shouldReduceMotion&&Cl.has(d)?{type:!1}:s,e,h));const m=t.animation;m&&l.push(m)}return i&&Promise.all(l).then((()=>{xl.update((()=>{i&&function(e,t){let n=hl(e,t)||{},{transitionEnd:r={},transition:s={}}=n,o=E(n,Ol);o=(0,S.A)((0,S.A)({},o),r);for(const a in o)Fl(e,a,(i=o[a],Ll(i)?i[i.length-1]||0:i));var i}(e,i)}))})),l}function Od(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=hl(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(o=r.transitionOverride);const i=s?()=>Promise.all(Ld(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:i,staggerDirection:a}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const a=[],l=e.variantChildren.size,c=(l-1)*s,u="function"===typeof r,d=u?e=>r(e,l):1===o?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s}:function(){return c-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s};return Array.from(e.variantChildren).sort(Fd).forEach(((e,s)=>{e.notify("AnimationStart",t),a.push(Od(e,t,(0,S.A)((0,S.A)({},i),{},{delay:n+(u?0:r)+d(s)})).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,n,s,i,a,r)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[i,a]:[a,i];return e().then((()=>t()))}return Promise.all([i(),a(r.delay)])}function Fd(e,t){return e.sortNodePosition(t)}function Bd(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ud(e){return"string"===typeof e||Array.isArray(e)}const zd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vd=["initial",...zd],qd=Vd.length;function Wd(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Wd(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<qd;n++){const r=Vd[n],s=e.props[r];(Ud(s)||!1===s)&&(t[r]=s)}return t}const Hd=["transition","transitionEnd"],Gd=[...zd].reverse(),Kd=zd.length;function Yd(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map((t=>Od(e,t,r)));n=Promise.all(s)}else if("string"===typeof t)n=Od(e,t,r);else{const s="function"===typeof t?hl(e,t,r.custom):t;n=Promise.all(Ld(e,s,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function Qd(e){let t=Yd(e),n=Xd(),r=!0;const s=t=>(n,r)=>{var s;const o=hl(e,r,"exit"===t?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);if(o){const{transition:e,transitionEnd:t}=o,r=E(o,Hd);n=(0,S.A)((0,S.A)((0,S.A)({},n),r),t)}return n};function o(o){const{props:i}=e,a=Wd(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<Kd;t++){const h=Gd[t],m=n[h],p=void 0!==i[h]?i[h]:a[h],f=Ud(p),g=h===o?m.isActive:null;!1===g&&(d=t);let y=p===a[h]&&p!==i[h]&&f;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys=(0,S.A)({},u),!m.isActive&&null===g||!p&&!m.prevProp||cl(p)||"boolean"===typeof p)continue;const v=$d(m.prevProp,p);let x=v||h===o&&m.isActive&&!y&&f||t>d&&f,b=!1;const w=Array.isArray(p)?p:[p];let N=w.reduce(s(h),{});!1===g&&(N={});const{prevResolvedValues:j={}}=m,k=(0,S.A)((0,S.A)({},j),N),C=t=>{x=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in k){const t=N[e],n=j[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Ll(t)&&Ll(n)?!Bd(t,n):t!==n,r?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=N,m.isActive&&(u=(0,S.A)((0,S.A)({},u),N)),r&&e.blockInitialAnimation&&(x=!1);x&&(!(y&&v)||b)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!==typeof i.initial){const n=hl(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){var s;if(n[t].isActive===r)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const i=o(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Xd(),r=!0}}}function $d(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Bd(t,e)}function Jd(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xd(){return{animate:Jd(!0),whileInView:Jd(),whileHover:Jd(),whileTap:Jd(),whileDrag:Jd(),whileFocus:Jd(),exit:Jd()}}class Zd{constructor(e){this.isMounted=!1,this.node=e}update(){}}let eh=0;const th={animation:{Feature:class extends Zd{constructor(e){super(e),e.animationState||(e.animationState=Qd(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Zd{constructor(){super(...arguments),this.id=eh++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},nh={x:!1,y:!1};function rh(){return nh.x||nh.y}function sh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const oh=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function ih(e){return{point:{x:e.pageX,y:e.pageY}}}function ah(e,t,n,r){return sh(e,t,(e=>t=>oh(t)&&e(t,ih(t)))(n),r)}function lh(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function ch(e){return e.max-e.min}function uh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Pc(t.min,t.max,e.origin),e.scale=ch(n)/ch(t),e.translate=Pc(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function dh(e,t,n,r){uh(e.x,t.x,n.x,r?r.originX:void 0),uh(e.y,t.y,n.y,r?r.originY:void 0)}function hh(e,t,n){e.min=n.min+t.min,e.max=e.min+ch(t)}function mh(e,t,n){e.min=t.min-n.min,e.max=e.min+ch(t)}function ph(e,t,n){mh(e.x,t.x,n.x),mh(e.y,t.y,n.y)}const fh=()=>({x:{min:0,max:0},y:{min:0,max:0}});function gh(e){return[e("x"),e("y")]}function yh(e){return void 0===e||1===e}function vh(e){let{scale:t,scaleX:n,scaleY:r}=e;return!yh(t)||!yh(n)||!yh(r)}function xh(e){return vh(e)||bh(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function bh(e){return wh(e.x)||wh(e.y)}function wh(e){return e&&"0%"!==e}function Nh(e,t,n){return n+t*(e-n)}function jh(e,t,n,r,s){return void 0!==s&&(e=Nh(e,s,r)),Nh(e,n,r)+t}function kh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=jh(e.min,t,n,r,s),e.max=jh(e.max,t,n,r,s)}function Ch(e,t){let{x:n,y:r}=t;kh(e.x,n.translate,n.scale,n.originPoint),kh(e.y,r.translate,r.scale,r.originPoint)}const Sh=.999999999999,Ah=1.0000000000001;function Eh(e,t){e.min=e.min+t,e.max=e.max+t}function _h(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;kh(e,t,n,Pc(e.min,e.max,s),r)}function Ih(e,t){_h(e.x,t.x,t.scaleX,t.scale,t.originX),_h(e.y,t.y,t.scaleY,t.scale,t.originY)}function Th(e,t){return lh(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Ph=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null};function Rh(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const Dh=(e,t)=>Math.abs(e-t);class Mh{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Fh(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Dh(e.x,t.x),r=Dh(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=wl;this.history.push((0,S.A)((0,S.A)({},r),{},{timestamp:s}));const{onStart:o,onMove:i}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Lh(t,this.transformPagePoint),xl.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Fh("pointercancel"===e.type?this.lastMoveEventInfo:Lh(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!oh(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=r||window;const i=Lh(ih(e),this.transformPagePoint),{point:a}=i,{timestamp:l}=wl;this.history=[(0,S.A)((0,S.A)({},a),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,Fh(i,this.history)),this.removeListeners=Hl(ah(this.contextWindow,"pointermove",this.handlePointerMove),ah(this.contextWindow,"pointerup",this.handlePointerUp),ah(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bl(this.updatePoint)}}function Lh(e,t){return t?{point:t(e.point)}:e}function Oh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fh(e,t){let{point:n}=e;return{point:n,delta:Oh(n,Uh(t)),offset:Oh(n,Bh(t)),velocity:zh(t,.1)}}function Bh(e){return e[0]}function Uh(e){return e[e.length-1]}function zh(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Uh(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Kl(t)));)n--;if(!r)return{x:0,y:0};const o=Yl(s.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const i={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Vh(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function qh(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Wh=.35;function Hh(e,t,n){return{min:Gh(e,t),max:Gh(e,n)}}function Gh(e,t){return"number"===typeof e?e:e[t]||0}const Kh=new WeakMap;class Yh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new Mh(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ih(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?nh[o]?null:(nh[o]=!0,()=>{nh[o]=!1}):nh.x||nh.y?null:(nh.x=nh.y=!0,()=>{nh.x=nh.y=!1}),!this.openDragLock))return;var o;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gh((e=>{let t=this.getAxisMotionValue(e).get()||0;if(pc.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=ch(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),s&&xl.postRender((()=>s(e,t))),Ul(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>gh((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:Ph(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:i}=this.getProps();i&&xl.postRender((()=>i(n,r)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Qh(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?Pc(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?Pc(s,e,n.max):Math.min(e,s)),e}(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&Rh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:o}=t;return{x:Vh(e.x,r,o),y:Vh(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wh;return!1===e?e=0:!0===e&&(e=Wh),{x:Hh(e,"left","right"),y:Hh(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gh((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Rh(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=Th(e,n),{scroll:s}=t;return s&&(Eh(r.x,s.offset.x),Eh(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:qh(e.x,t.x),y:qh(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=lh(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:i}=this.getProps(),a=this.constraints||{},l=gh((i=>{if(!Qh(i,t,this.currentDirection))return;let l=a&&a[i]||{};o&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=(0,S.A)((0,S.A)({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},s),l);return this.startAxisValueAnimation(i,d)}));return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Ul(this.visualElement,e),n.start(Rd(e,n,0,t,this.visualElement,!1))}stopAnimation(){gh((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){gh((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){gh((t=>{const{drag:n}=this.getProps();if(!Qh(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];s.set(e[t]-Pc(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Rh(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gh((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=ch(e),s=ch(t);return s>r?n=ku(t.min,t.max-r,e.min):r>s&&(n=ku(e.min,e.max-s,t.min)),Gl(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gh((t=>{if(!Qh(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:o}=this.constraints[t];n.set(Pc(s,o,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Kh.set(this.visualElement,this);const e=ah(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Rh(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),xl.read(t);const s=sh(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(gh((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{s(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Wh,dragMomentum:i=!0}=e;return(0,S.A)((0,S.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:i})}}function Qh(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const $h=e=>(t,n)=>{e&&xl.postRender((()=>e(t,n)))};const{schedule:Jh,cancel:Xh}=vl(queueMicrotask,!1),Zh=(0,e.createContext)(null);function em(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,e.useContext)(Zh);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:s,register:o}=n,i=(0,e.useId)();(0,e.useEffect)((()=>{if(t)return o(i)}),[t]);const a=(0,e.useCallback)((()=>t&&s&&s(i)),[i,s,t]);return!r&&s?[!1,a]:[!0]}const tm=(0,e.createContext)({}),nm=(0,e.createContext)({}),rm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const om={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!fc.test(e))return e;e=parseFloat(e)}const n=sm(e,t.target.x),r=sm(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},im={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,o=_c.parse(e);if(o.length>5)return s;const i=_c.createTransformer(e),a="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;o[0+a]/=l,o[1+a]/=c;const u=Pc(l,c,.5);return"number"===typeof o[2+a]&&(o[2+a]/=u),"number"===typeof o[3+a]&&(o[3+a]/=u),i(o)}},am={};let lm=!1;class cm extends e.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)am[t]=e[t],Jl(t)&&(am[t].isCSSVariable=!0)}(dm),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),lm&&s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions((0,S.A)((0,S.A)({},s.options),{},{onExitComplete:()=>this.safeToRemove()}))),rm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:o}=n;return o?(o.isPresent=s,lm=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||xl.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jh.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function um(t){const[n,r]=em(),s=(0,e.useContext)(tm);return(0,k.jsx)(cm,(0,S.A)((0,S.A)({},t),{},{layoutGroup:s,switchLayoutGroup:(0,e.useContext)(nm),isPresent:n,safeToRemove:r}))}const dm={borderRadius:(0,S.A)((0,S.A)({},om),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:om,borderTopRightRadius:om,borderBottomLeftRadius:om,borderBottomRightRadius:om,boxShadow:im};function hm(e){return wd(e)&&"ownerSVGElement"in e}function mm(e){return hm(e)&&"svg"===e.tagName}function pm(e,t,n){const r=Bl(e)?e:Ml(e);return r.start(Rd("",r,t,n)),r.animation}const fm=(e,t)=>e.depth-t.depth;class gm{constructor(){this.children=[],this.isDirty=!1}add(e){Sl(this.children,e),this.isDirty=!0}remove(e){Al(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fm),this.isDirty=!1,this.children.forEach(e)}}function ym(e,t){const n=Pl.now(),r=s=>{let{timestamp:o}=s;const i=o-n;i>=t&&(bl(r),e(i-t))};return xl.setup(r,!0),()=>bl(r)}function vm(e){return Bl(e)?e.get():e}const xm=["TopLeft","TopRight","BottomLeft","BottomRight"],bm=xm.length,wm=e=>"string"===typeof e?parseFloat(e):e,Nm=e=>"number"===typeof e||fc.test(e);function jm(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const km=Sm(0,.5,xu),Cm=Sm(.5,.95,pl);function Sm(e,t,n){return r=>r<e?0:r>t?1:n(ku(e,t,r))}function Am(e,t){e.min=t.min,e.max=t.max}function Em(e,t){Am(e.x,t.x),Am(e.y,t.y)}function _m(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Im(e,t,n,r,s){return e=Nh(e-=t,1/n,r),void 0!==s&&(e=Nh(e,1/s,r)),e}function Tm(e,t,n,r,s){let[o,i,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;pc.test(t)&&(t=parseFloat(t),t=Pc(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let a=Pc(o.min,o.max,r);e===o&&(a-=t),e.min=Im(e.min,t,n,a,s),e.max=Im(e.max,t,n,a,s)}(e,t[o],t[i],t[a],t.scale,r,s)}const Pm=["x","scaleX","originX"],Rm=["y","scaleY","originY"];function Dm(e,t,n,r){Tm(e.x,t,Pm,n?n.x:void 0,r?r.x:void 0),Tm(e.y,t,Rm,n?n.y:void 0,r?r.y:void 0)}function Mm(e){return 0===e.translate&&1===e.scale}function Lm(e){return Mm(e.x)&&Mm(e.y)}function Om(e,t){return e.min===t.min&&e.max===t.max}function Fm(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bm(e,t){return Fm(e.x,t.x)&&Fm(e.y,t.y)}function Um(e){return ch(e.x)/ch(e.y)}function zm(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Vm{constructor(){this.members=[]}add(e){Sl(this.members,e),e.scheduleRender()}remove(e){if(Al(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const qm={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},Wm=["","X","Y","Z"];let Hm=0;function Gm(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Km(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ql(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xl,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Km(r)}function Ym(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Hm++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,yl.value&&(qm.nodes=qm.calculatedTargetDeltas=qm.calculatedProjections=0),this.nodes.forEach(Jm),this.nodes.forEach(sp),this.nodes.forEach(op),this.nodes.forEach(Xm),yl.addProjectionMetrics&&yl.addProjectionMetrics(qm)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new gm)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new El),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;this.isSVG=hm(e)&&!mm(e),this.instance=e;const{layoutId:n,layout:r,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),t){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;xl.read((()=>{r=window.innerWidth})),t(e,(()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=ym(s,250),rm.hasAnimatedSinceResize&&(rm.hasAnimatedSinceResize=!1,this.nodes.forEach(rp)))}))}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&s&&(n||r)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:o}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||s.getDefaultTransition()||dp,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!Bm(this.targetLayout,o),u=!n&&r;if(this.options.layoutRoot||this.resumeFrom||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=(0,S.A)((0,S.A)({},ml(i,"layout")),{},{onPlay:a,onComplete:l});(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,u)}else n||rp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=o}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ip),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Km(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ep);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(tp);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(np),this.nodes.forEach(Qm),this.nodes.forEach($m)):this.nodes.forEach(tp),this.clearAllSnapshots();const e=Pl.now();wl.delta=Gl(0,1e3/60,e-wl.timestamp),wl.timestamp=e,wl.isProcessing=!0,Nl.update.process(wl),Nl.preRender.process(wl),Nl.render.process(wl),wl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Zm),this.sharedNodes.forEach(ap)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xl.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xl.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||ch(this.snapshot.measuredBox.x)||ch(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Lm(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||xh(this.latestValues)||s)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),pp((r=n).x),pp(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(gp))){const{scroll:e}=this.root;e&&(Eh(n.x,e.offset.x),Eh(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Em(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:s,options:o}=t;t!==this.root&&s&&o.layoutScroll&&(s.wasRoot&&Em(n,e),Eh(n.x,s.offset.x),Eh(n.y,s.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Em(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ih(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),xh(e.latestValues)&&Ih(n,e.latestValues)}return xh(this.latestValues)&&Ih(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Em(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!xh(e.latestValues))continue;vh(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};Em(r,e.measurePageBox()),Dm(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return xh(this.latestValues)&&Dm(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,S.A)((0,S.A)((0,S.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:o}=this.options;if(this.layout&&(s||o)){if(this.resolvedRelativeTargetAt=wl.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ph(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Em(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,a=this.relativeTarget,l=this.relativeParent.target,hh(i.x,a.x,l.x),hh(i.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Em(this.target,this.layout.layoutBox),Ch(this.target,this.targetDelta)):Em(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ph(this.relativeTargetOrigin,this.target,e.target),Em(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}yl.value&&qm.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!vh(this.parent.latestValues)&&!bh(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===wl.timestamp&&(r=!1),r)return;const{layout:s,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!o)return;Em(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let o,i;t.x=t.y=1;for(let a=0;a<s;a++){o=n[a],i=o.projectionDelta;const{visualElement:s}=o.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ih(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Ch(e,i)),r&&xh(o.latestValues)&&Ih(e,o.latestValues))}t.x<Ah&&t.x>Sh&&(t.x=1),t.y<Ah&&t.y>Sh&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(_m(this.prevProjectionDelta.x,this.projectionDelta.x),_m(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),dh(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===a&&zm(this.projectionDelta.x,this.prevProjectionDelta.x)&&zm(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),yl.value&&qm.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s=(0,S.A)({},this.latestValues),o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(up));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h;lp(o.x,e.x,n),lp(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ph(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){cp(e.x,t.x,n.x,r),cp(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,n),d&&(l=this.relativeTarget,h=d,Om(l.x,h.x)&&Om(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Em(d,this.relativeTarget)),a&&(this.animationValues=s,function(e,t,n,r,s,o){var i,a;if(s)e.opacity=Pc(0,null!==(i=n.opacity)&&void 0!==i?i:1,km(r)),e.opacityExit=Pc(null!==(a=t.opacity)&&void 0!==a?a:1,0,Cm(r));else if(o){var l,c;e.opacity=Pc(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let u=0;u<bm;u++){const s="border".concat(xm[u],"Radius");let o=jm(t,s),i=jm(n,s);void 0===o&&void 0===i||(o||(o=0),i||(i=0),0===o||0===i||Nm(o)===Nm(i)?(e[s]=Math.max(Pc(wm(o),wm(i),r),0),(pc.test(i)||pc.test(o))&&(e[s]+="%")):e[s]=i)}(t.rotate||n.rotate)&&(e.rotate=Pc(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(bl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xl.update((()=>{rm.hasAnimatedSinceResize=!0,Ql.layout++,this.motionValue||(this.motionValue=Ml(0)),this.currentAnimation=pm(this.motionValue,[0,1e3],(0,S.A)((0,S.A)({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Ql.layout--},onComplete:()=>{Ql.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&fp(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=ch(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=ch(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Em(t,n),Ih(t,s),dh(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Vm);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Gm("z",e,r,this.animationValues);for(let s=0;s<Wm.length;s++)Gm("rotate".concat(Wm[s]),e,r,this.animationValues),Gm("skew".concat(Wm[s]),e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=vm(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=vm(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!xh(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let o=function(e,t,n){let r="";const s=e.x.translate/t.x,o=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((s||o||i)&&(r="translate3d(".concat(s,"px, ").concat(o,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:o,skewX:i,skewY:a}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),s&&(r+="rotateX(".concat(s,"deg) ")),o&&(r+="rotateY(".concat(o,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),a&&(r+="skewY(".concat(a,"deg) "))}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+="scale(".concat(a,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(o=n(s,o)),e.transform=o;const{x:i,y:a}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*a.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=s.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const u in am){if(void 0===s[u])continue;const{correct:t,applyTo:n,isCSSVariable:i}=am[u],a="none"===o?s[u]:t(s[u],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=a}else i?this.options.visualElement.renderState.vars[u]=a:e[u]=a}this.options.layoutId&&(e.pointerEvents=r===this?vm(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(ep),this.root.sharedNodes.clear()}}}function Qm(e){e.updateLayout()}function $m(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;"size"===s?gh((e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],s=ch(r);r.min=t[e].min,r.max=r.min+s})):fp(s,n.layoutBox,t)&&gh((r=>{const s=o?n.measuredBox[r]:n.layoutBox[r],i=ch(t[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};dh(i,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?dh(a,e.applyTransform(r,!0),n.measuredBox):dh(a,t,n.layoutBox);const l=!Lm(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:o}=r;if(s&&o){const i={x:{min:0,max:0},y:{min:0,max:0}};ph(i,n.layoutBox,s.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};ph(a,t,o.layoutBox),Bm(i,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Jm(e){yl.value&&qm.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Xm(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Zm(e){e.clearSnapshot()}function ep(e){e.clearMeasurements()}function tp(e){e.isLayoutDirty=!1}function np(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sp(e){e.resolveTargetDelta()}function op(e){e.calcProjection()}function ip(e){e.resetSkewAndRotation()}function ap(e){e.removeLeadSnapshot()}function lp(e,t,n){e.translate=Pc(t.translate,0,n),e.scale=Pc(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cp(e,t,n,r){e.min=Pc(t.min,n.min,r),e.max=Pc(t.max,n.max,r)}function up(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const dp={duration:.45,ease:[.4,0,.1,1]},hp=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),mp=hp("applewebkit/")&&!hp("chrome/")?Math.round:pl;function pp(e){e.min=mp(e.min),e.max=mp(e.max)}function fp(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Um(t),s=Um(n),o=.2,!(Math.abs(r-s)<=o));var r,s,o}function gp(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const yp=Ym({attachResizeListener:(e,t)=>sh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vp={current:void 0},xp=Ym({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!vp.current){const e=new yp({});e.mount(window),e.setOptions({layoutScroll:!0}),vp.current=e}return vp.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),bp={pan:{Feature:class extends Zd{constructor(){super(...arguments),this.removePointerDownListener=pl}onPointerDown(e){this.session=new Mh(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ph(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:$h(e),onStart:$h(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&xl.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=ah(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Zd{constructor(e){super(e),this.removeGroupControls=pl,this.removeListeners=pl,this.controls=new Yh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pl}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:xp,MeasureLayout:um}};function wp(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let s=document;t&&(s=t.current);const o=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:s.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function Np(e,t){const n=wp(e),r=new AbortController;return[n,(0,S.A)((0,S.A)({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function jp(e){return!("touch"===e.pointerType||rh())}function kp(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&xl.postRender((()=>s(t,ih(t))))}const Cp=(e,t)=>!!t&&(e===t||Cp(e,t.parentElement)),Sp=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Ap=new WeakSet;function Ep(e){return t=>{"Enter"===t.key&&e(t)}}function _p(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ip(e){return oh(e)&&!rh()}function Tp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,o]=Np(e,n),i=e=>{const r=e.currentTarget;if(!Ip(e))return;Ap.add(r);const o=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),Ap.has(r)&&Ap.delete(r),Ip(e)&&"function"===typeof o&&o(e,{success:t})},a=e=>{i(e,r===window||r===document||n.useGlobalTarget||Cp(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",l,s)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),Nd(e)&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ep((()=>{if(Ap.has(n))return;_p(n,"down");const e=Ep((()=>{_p(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>_p(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,s))),t=e,Sp.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),o}function Pp(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&xl.postRender((()=>s(t,ih(t))))}const Rp=["root"],Dp=new WeakMap,Mp=new WeakMap,Lp=e=>{const t=Dp.get(e.target);t&&t(e)},Op=e=>{e.forEach(Lp)};function Fp(e,t,n){const r=function(e){let{root:t}=e,n=E(e,Rp);const r=t||document;Mp.has(r)||Mp.set(r,{});const s=Mp.get(r),o=JSON.stringify(n);return s[o]||(s[o]=new IntersectionObserver(Op,(0,S.A)({root:t},n))),s[o]}(t);return Dp.set(e,n),r.observe(e),()=>{Dp.delete(e),r.unobserve(e)}}const Bp={some:0,all:1};const Up={inView:{Feature:class extends Zd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:Bp[r]};return Fp(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Zd{mount(){const{current:e}=this.node;e&&(this.unmount=Tp(e,((e,t)=>(Pp(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return Pp(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Zd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(UZ){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hl(sh(this.node.current,"focus",(()=>this.onFocus())),sh(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Zd{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,s,o]=Np(e,n),i=e=>{if(!jp(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const o=e=>{jp(e)&&(r(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,s)};return r.forEach((e=>{e.addEventListener("pointerenter",i,s)})),o}(e,((e,t)=>(kp(this.node,t,"Start"),e=>kp(this.node,e,"End")))))}unmount(){}}}},zp={layout:{ProjectionNode:xp,MeasureLayout:um}},Vp=(0,e.createContext)({strict:!1}),qp=(0,e.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Wp=(0,e.createContext)({});function Hp(e){return cl(e.animate)||Vd.some((t=>Ud(e[t])))}function Gp(e){return Boolean(Hp(e)||e.variants)}function Kp(t){const{initial:n,animate:r}=function(e,t){if(Hp(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Ud(t)?t:void 0,animate:Ud(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(Wp));return(0,e.useMemo)((()=>({initial:n,animate:r})),[Yp(n),Yp(r)])}function Yp(e){return Array.isArray(e)?e.join(" "):e}const Qp="undefined"!==typeof window,$p={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jp={};for(const n in $p)Jp[n]={isEnabled:e=>$p[n].some((t=>!!e[t]))};const Xp=Symbol.for("motionComponentSymbol");function Zp(t,n,r){return(0,e.useCallback)((e=>{e&&t.onMount&&t.onMount(e),n&&(e?n.mount(e):n.unmount()),r&&("function"===typeof r?r(e):Rh(r)&&(r.current=e))}),[n])}const ef=Qp?e.useLayoutEffect:e.useEffect;function tf(t,n,r,s,o){var i,a,l,c;const{visualElement:u}=(0,e.useContext)(Wp),d=(0,e.useContext)(Vp),h=(0,e.useContext)(Zh),m=(0,e.useContext)(qp).reducedMotion,p=(0,e.useRef)(null);s=s||d.renderer,!p.current&&s&&(p.current=s(t,{visualState:n,parent:u,props:r,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:m}));const f=p.current,g=(0,e.useContext)(nm);!f||f.projection||!o||"html"!==f.type&&"svg"!==f.type||function(e,t,n,r){const{layoutId:s,layout:o,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:nf(e.parent)),e.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:Boolean(i)||a&&Rh(a),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(p.current,r,o,g);const y=(0,e.useRef)(!1);(0,e.useInsertionEffect)((()=>{f&&y.current&&f.update(r,h)}));const v=r[Vl],x=(0,e.useRef)(Boolean(v)&&!(null!==(i=(a=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(a,v))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,v)));return ef((()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Jh.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())})),(0,e.useEffect)((()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask((()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,v)})),x.current=!1))})),f}function nf(e){if(e)return!1!==e.options.allowProjection?e.projection:nf(e.parent)}function rf(t){var n,r;let{preloadedFeatures:s,createVisualElement:o,useRender:i,useVisualState:a,Component:l}=t;function c(t,n){let r;const s=(0,S.A)((0,S.A)((0,S.A)({},(0,e.useContext)(qp)),t),{},{layoutId:sf(t)}),{isStatic:c}=s,u=Kp(t),d=a(t,c);if(!c&&Qp){!function(){(0,e.useContext)(Vp).strict;0}();const t=function(e){const{drag:t,layout:n}=Jp;if(!t&&!n)return{};const r=(0,S.A)((0,S.A)({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(s);r=t.MeasureLayout,u.visualElement=tf(l,d,s,o,t.ProjectionNode)}return(0,k.jsxs)(Wp.Provider,{value:u,children:[r&&u.visualElement?(0,k.jsx)(r,(0,S.A)({visualElement:u.visualElement},s)):null,i(l,t,Zp(d,u.visualElement,n),d,c,u.visualElement)]})}s&&function(e){for(const t in e)Jp[t]=(0,S.A)((0,S.A)({},Jp[t]),e[t])}(s),c.displayName="motion.".concat("string"===typeof l?l:"create(".concat(null!==(n=null!==(r=l.displayName)&&void 0!==r?r:l.name)&&void 0!==n?n:"",")"));const u=(0,e.forwardRef)(c);return u[Xp]=l,u}function sf(t){let{layoutId:n}=t;const r=(0,e.useContext)(tm).id;return r&&void 0!==n?r+"-"+n:n}function of(e,t){let{layout:n,layoutId:r}=t;return kl.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!am[e]||"opacity"===e)}const af=(e,t)=>t&&"number"===typeof e?t.transform(e):e,lf=(0,S.A)((0,S.A)({},tc),{},{transform:Math.round}),cf={rotate:mc,rotateX:mc,rotateY:mc,rotateZ:mc,scale:rc,scaleX:rc,scaleY:rc,scaleZ:rc,skew:mc,skewX:mc,skewY:mc,distance:fc,translateX:fc,translateY:fc,translateZ:fc,x:fc,y:fc,z:fc,perspective:fc,transformPerspective:fc,opacity:nc,originX:vc,originY:vc,originZ:fc},uf=(0,S.A)((0,S.A)({borderWidth:fc,borderTopWidth:fc,borderRightWidth:fc,borderBottomWidth:fc,borderLeftWidth:fc,borderRadius:fc,radius:fc,borderTopLeftRadius:fc,borderTopRightRadius:fc,borderBottomRightRadius:fc,borderBottomLeftRadius:fc,width:fc,maxWidth:fc,height:fc,maxHeight:fc,top:fc,right:fc,bottom:fc,left:fc,padding:fc,paddingTop:fc,paddingRight:fc,paddingBottom:fc,paddingLeft:fc,margin:fc,marginTop:fc,marginRight:fc,marginBottom:fc,marginLeft:fc,backgroundPositionX:fc,backgroundPositionY:fc},cf),{},{zIndex:lf,fillOpacity:nc,strokeOpacity:nc,numOctaves:lf}),df={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hf=jl.length;function mf(e,t,n){const{style:r,vars:s,transformOrigin:o}=e;let i=!1,a=!1;for(const l in t){const e=t[l];if(kl.has(l))i=!0;else if(Jl(l))s[l]=e;else{const t=af(e,uf[l]);l.startsWith("origin")?(a=!0,o[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",s=!0;for(let o=0;o<hf;o++){const i=jl[o],a=e[i];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(i.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=af(a,uf[i]);l||(s=!1,r+="".concat(df[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const pf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ff(e,t,n){for(const r in t)Bl(t[r])||of(r,n)||(e[r]=t[r])}function gf(t,n){const r={};return ff(r,t.style||{},t),Object.assign(r,function(t,n){let{transformTemplate:r}=t;return(0,e.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return mf(e,n,r),Object.assign({},e.vars,e.style)}),[n])}(t,n)),r}function yf(e,t){const n={},r=gf(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const vf={offset:"stroke-dashoffset",array:"stroke-dasharray"},xf={offset:"strokeDashoffset",array:"strokeDasharray"};const bf=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function wf(e,t,n,r,s){let{attrX:o,attrY:i,attrScale:a,pathLength:l,pathSpacing:c=1,pathOffset:u=0}=t;if(mf(e,E(t,bf),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;var m,p;(d.transform&&(h.transform=d.transform,delete d.transform),h.transform||d.transformOrigin)&&(h.transformOrigin=null!==(m=d.transformOrigin)&&void 0!==m?m:"50% 50%",delete d.transformOrigin);h.transform&&(h.transformBox=null!==(p=null===s||void 0===s?void 0:s.transformBox)&&void 0!==p?p:"fill-box",delete d.transformBox);void 0!==o&&(d.x=o),void 0!==i&&(d.y=i),void 0!==a&&(d.scale=a),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=s?vf:xf;e[o.offset]=fc.transform(-r);const i=fc.transform(t),a=fc.transform(n);e[o.array]="".concat(i," ").concat(a)}(d,l,c,u,!1)}const Nf=()=>(0,S.A)((0,S.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),jf=e=>"string"===typeof e&&"svg"===e.toLowerCase();function kf(t,n,r,s){const o=(0,e.useMemo)((()=>{const e=Nf();return wf(e,n,jf(s),t.transformTemplate,t.style),(0,S.A)((0,S.A)({},e.attrs),{},{style:(0,S.A)({},e.style)})}),[n]);if(t.style){const e={};ff(e,t.style,t),o.style=(0,S.A)((0,S.A)({},e),o.style)}return o}const Cf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sf(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Cf.has(e)}let Af=e=>!Sf(e);try{"function"===typeof(Ef=require("@emotion/is-prop-valid").default)&&(Af=e=>e.startsWith("on")?!Sf(e):Ef(e))}catch(VZ){}var Ef;const _f=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function If(e){return"string"===typeof e&&!e.includes("-")&&!!(_f.indexOf(e)>-1||/[A-Z]/.test(e))}function Tf(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,r,s,o,i)=>{let{latestValues:a}=o;const l=(If(n)?kf:yf)(r,a,i,n),c=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(Af(s)||!0===n&&Sf(s)||!t&&!Sf(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(r,"string"===typeof n,t),u=n!==e.Fragment?(0,S.A)((0,S.A)((0,S.A)({},c),l),{},{ref:s}):{},{children:d}=r,h=(0,e.useMemo)((()=>Bl(d)?d.get():d),[d]);return(0,e.createElement)(n,(0,S.A)((0,S.A)({},u),{},{children:h}))}}function Pf(t){const n=(0,e.useRef)(null);return null===n.current&&(n.current=t()),n.current}const Rf=["transitionEnd","transition"];const Df=t=>(n,r)=>{const s=(0,e.useContext)(Wp),o=(0,e.useContext)(Zh),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:o}=e;return{latestValues:Mf(t,n,r,s),renderState:o()}}(t,n,s,o);return r?i():Pf(i)};function Mf(e,t,n,r){const s={},o=r(e,{});for(const h in o)s[h]=vm(o[h]);let{initial:i,animate:a}=e;const l=Hp(e),c=Gp(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const d=u?a:i;if(d&&"boolean"!==typeof d&&!cl(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=dl(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=E(r,Rf);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}function Lf(e,t,n){const{style:r}=e,s={};for(const i in r){var o;(Bl(r[i])||t.style&&Bl(t.style[i])||of(i,e)||void 0!==(null===n||void 0===n||null===(o=n.getValue(i))||void 0===o?void 0:o.liveStyle))&&(s[i]=r[i])}return s}const Of={useVisualState:Df({scrapeMotionValuesFromProps:Lf,createRenderState:pf})};function Ff(e,t,n){const r=Lf(e,t,n);for(const s in e)if(Bl(e[s])||Bl(t[s])){r[-1!==jl.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const Bf={useVisualState:Df({scrapeMotionValuesFromProps:Ff,createRenderState:Nf})};function Uf(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};const s=If(n)?Bf:Of;return rf((0,S.A)((0,S.A)({},s),{},{preloadedFeatures:e,useRender:Tf(r),createVisualElement:t,Component:n}))}}const zf=e=>t=>t.test(e),Vf=[tc,fc,pc,mc,yc,gc,{test:e=>"auto"===e,parse:e=>e}],qf=e=>Vf.find(zf(e)),Wf=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),Hf=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function Gf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,s]=function(e){const t=Hf.exec(e);if(!t)return[,];const[,n,r,s]=t;return["--".concat(null!==n&&void 0!==n?n:r),s]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return Wf(e)?parseFloat(e):e}return Zl(s)?Gf(s,t,n+1):s}const Kf=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);const Yf=new Set(["brightness","contrast","saturate","opacity"]);function Qf(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(oc)||[];if(!r)return e;const s=n.replace(r,"");let o=Yf.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}const $f=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Jf=(0,S.A)((0,S.A)({},_c),{},{getAnimatableNone:e=>{const t=e.match($f);return t?t.map(Qf).join(" "):e}}),Xf=(0,S.A)((0,S.A)({},uf),{},{color:bc,backgroundColor:bc,outlineColor:bc,fill:bc,stroke:bc,borderColor:bc,borderTopColor:bc,borderRightColor:bc,borderBottomColor:bc,borderLeftColor:bc,filter:Jf,WebkitFilter:Jf}),Zf=e=>Xf[e];function eg(e,t){let n=Zf(e);return n!==Jf&&(n=_c),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const tg=new Set(["auto","none","0"]);class ng extends rd{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),Zl(n))){const r=Gf(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Cl.has(n)||2!==e.length)return;const[r,s]=e,o=qf(r),i=qf(s);if(o!==i)if(Ku(o)&&Ku(i))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else $u[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||("number"===typeof(r=e[s])?0===r:null===r||"none"===r||"0"===r||Kf(r)))&&n.push(s);var r;n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"===typeof t&&!tg.has(t)&&Cc(t).values.length&&(r=e[s]),s++}if(r&&n)for(const o of t)e[o]=eg(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$u[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,i=r[o];r[o]=$u[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const rg=[...Vf,bc,_c],sg={current:null},og={current:!1};const ig=new WeakMap;const ag=["willChange"],lg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cg{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Pl.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,xl.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=(0,S.A)({},l),this.initialValues=n.initial?(0,S.A)({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=Hp(n),this.isVariantNode=Gp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(n,{},this),{willChange:d}=u,h=E(u,ag);for(const m in h){const e=h[m];void 0!==l[m]&&Bl(e)&&e.set(l[m],!1)}}mount(e){this.current=e,ig.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),og.current||function(){if(og.current=!0,Qp)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sg.current=e.matches;e.addEventListener("change",t),t()}else sg.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sg.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),bl(this.notifyUpdate),bl(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=kl.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&xl.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),s(),o&&o(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Jp){const t=Jp[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<lg.length;n++){const t=lg[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],o=n[r];if(Bl(s))e.addValue(r,s);else if(Bl(o))e.addValue(r,Ml(s,{owner:e}));else if(o!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,Ml(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Ml(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var s;return void 0!==r&&null!==r&&("string"===typeof r&&(Wf(r)||Kf(r))?r=parseFloat(r):(s=r,!rg.find(zf(s))&&_c.test(t)&&(r=eg(e,t))),this.setBaseTarget(e,Bl(r)?r.get():r)),Bl(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const s=dl(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);s&&(n=s[e])}if(t&&void 0!==n)return n;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||Bl(s)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new El),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class ug extends cg{constructor(){super(...arguments),this.KeyframeResolver=ng}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bl(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}}function dg(e,t,n,r){let{style:s,vars:o}=t;const i=e.style;let a;for(a in s)i[a]=s[a];for(a in null===r||void 0===r||r.applyProjectionStyles(i,n),o)i.setProperty(a,o[a])}class hg extends ug{constructor(){super(...arguments),this.type="html",this.renderInstance=dg}readValueFromInstance(e,t){var n,r;if(kl.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?Wu(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Hu(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),s=(Jl(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof s?s.trim():s}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Th(e,n)}build(e,t,n){mf(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Lf(e,t,n)}}const mg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class pg extends ug{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fh}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(kl.has(t)){const e=Zf(t);return e&&e.default||0}return t=mg.has(t)?t:zl(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Ff(e,t,n)}build(e,t,n){wf(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){dg(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(mg.has(s)?s:zl(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=jf(e.tagName),super.mount(e)}}const fg=(t,n)=>If(t)?new pg(n):new hg(n,{allowProjection:t!==e.Fragment}),gg=ll(Uf((0,S.A)((0,S.A)((0,S.A)((0,S.A)({},th),Up),bp),zp),fg)),yg=e=>{let{label:t,description:n,path:r,icon:s,bgColor:o,hoverEffect:a,textColor:l,index:c}=e;const u=(0,i.Zp)();return(0,k.jsxs)(gg.button,{onClick:()=>{navigator.vibrate&&navigator.vibrate(50),u(r)},className:"w-full py-6 px-4 bg-gradient-to-r ".concat(o," ").concat(l," rounded-xl shadow-lg \n                 hover:shadow-xl ").concat(a," transition-all duration-300 flex items-center\n                 active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50"),"aria-label":t,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*c,duration:.5},whileHover:{y:-5},whileTap:{scale:.95},children:[(0,k.jsx)("div",{className:"bg-white/30 rounded-full p-3 mr-4",children:(()=>{switch(s){case"gift":return(0,k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})});case"qrcode":return(0,k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})});case"chart-bar":return(0,k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})});case"star":return(0,k.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})});case"cog":return(0,k.jsxs)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});default:return null}})()}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("div",{className:"text-xl font-bold",children:t}),(0,k.jsx)("div",{className:"text-sm opacity-90 mt-1",children:n})]})]})},vg=e=>{let{buttons:t}=e;return(0,k.jsx)("div",{className:"flex flex-col justify-center gap-4 py-2",children:t.map(((e,t)=>(0,k.jsx)(yg,{label:e.label,description:e.description,path:e.path,icon:e.icon,bgColor:e.bgColor,hoverEffect:e.hoverEffect,textColor:e.textColor,index:t},t)))})},xg=e=>{let{activeCoupons:t,totalRedemptions:n,loyalCustomers:r}=e;const s=new Date,o=s.toLocaleDateString("en-US",{weekday:"long"}),i=new Date(s);i.setDate(s.getDate()-s.getDay());const a=new Date(s);a.setDate(i.getDate()+6);const l="".concat(i.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(a.toLocaleDateString("en-US",{month:"short",day:"numeric"}));return(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,k.jsx)(gg.div,{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 shadow-sm",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},whileHover:{scale:1.03,transition:{duration:.2}},children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"mr-3 bg-white/30 rounded-full p-2",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{className:"text-xs font-medium text-white/80",children:["\ud83c\udf89 Today: ",o]}),(0,k.jsx)("p",{className:"text-lg font-bold text-white",children:n>0?"".concat(n," happy customers returned!"):"Ready to welcome customers!"})]})]})}),(0,k.jsx)(gg.div,{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 shadow-sm",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},whileHover:{scale:1.03,transition:{duration:.2}},children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"mr-3 bg-white/30 rounded-full p-2",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{className:"text-xs font-medium text-white/80",children:["\ud83d\udcc8 This week: ",l]}),(0,k.jsx)("p",{className:"text-lg font-bold text-white",children:r>0?"".concat(r," relationships built"):"Start building relationships!"})]})]})})]})},bg=e=>{if(!e)return"N/A";const t="string"===typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid date";return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},wg=e=>{if(!e)return"N/A";const t="string"===typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid time";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},Ng=()=>{const{user:t,businessProfile:n,isLoading:r}=(0,N.A)(),s=(0,i.Zp)(),[o,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(!1),[h,m]=(0,e.useState)(null);(0,e.useEffect)((()=>{if(!sessionStorage.getItem("hasShownWelcomePopup")){console.log("Showing welcome popup"),d(!0),sessionStorage.setItem("hasShownWelcomePopup","true");const e=setTimeout((()=>{console.log("Hiding welcome popup after timeout"),d(!1)}),3e3);return()=>{console.log("Clearing welcome popup timeout"),clearTimeout(e)}}}),[]);const p=()=>{console.log("Manually closing welcome popup"),d(!1)};(0,e.useEffect)((()=>{if(r)return;(async()=>{if(null===t||void 0===t||!t.businessId)return console.log("No business ID available, setting default stats"),a({activeCoupons:0,totalRedemptions:0,loyalCustomers:0,revenueGenerated:0}),void c(!1);try{c(!0),console.log("Fetching stats for business ID:",t.businessId);const e=await async function(e){try{const t=performance.now(),n=(0,sl.rJ)(rl.db,"coupons"),r=(0,sl.P)(n,(0,sl._M)("businessId","==",e),(0,sl._M)("active","==",!0)),s=(await(0,sl.GG)(r)).docs.length,o=(0,sl.rJ)(rl.db,"customerCoupons"),i=(0,sl.P)(o,(0,sl._M)("businessId","==",e),(0,sl._M)("used","==",!0)),a=await(0,sl.GG)(i),l=a.docs.length,c=(0,sl.rJ)(rl.db,"customers"),u=(0,sl.P)(c,(0,sl._M)("businessId","==",e)),d=(await(0,sl.GG)(u)).docs.length,h={};a.forEach((e=>{const t=e.data().customerId;h[t]||(h[t]=0),h[t]++}));const m=Object.values(h).filter((e=>e>=2)).length,p=await al(e,10);let f;d>0&&l>0&&(f=l/d*100);const g=performance.now();return ol.trackQueryPerformance("dashboard_stats",t,g),{activeCoupons:s,totalRedemptions:l,loyalCustomers:m,revenueGenerated:0,totalCustomers:d,conversionRate:f,recentActivity:p,lastUpdated:new Date}}catch(h){return console.error("Error fetching dashboard stats:",h),ol.trackQueryError("dashboard_stats",h),{activeCoupons:0,totalRedemptions:0,loyalCustomers:0,revenueGenerated:0,lastUpdated:new Date}}}(t.businessId);console.log("Dashboard stats fetched:",e),a(e)}catch(zZ){console.error("Error loading dashboard stats:",zZ),m("Could not load dashboard data. Please try again later."),a({activeCoupons:0,totalRedemptions:0,loyalCustomers:0,revenueGenerated:0})}finally{c(!1)}})()}),[null===t||void 0===t?void 0:t.businessId,r]);const f=(0,e.useMemo)((()=>[{label:"MAKE COUPON",description:"Create a special offer your customers will love",path:"/business/coupons/create",icon:"gift",bgColor:"from-amber-400 to-amber-500",hoverEffect:"hover:shadow-amber-300/50",textColor:"text-amber-900"},{label:"SCAN COUPON",description:"Welcome back your loyal customers",path:"/business/scan",icon:"qrcode",bgColor:"from-emerald-400 to-emerald-500",hoverEffect:"hover:shadow-emerald-300/50",textColor:"text-emerald-900"},{label:"SEE RESULTS",description:"Celebrate your business growth",path:"/business/results/simple",icon:"chart-bar",bgColor:"from-rose-400 to-rose-500",hoverEffect:"hover:shadow-rose-300/50",textColor:"text-rose-900"},{label:"LOYALTY PROGRAM",description:"Keep customers coming back with rewards",path:"/business/loyalty",icon:"star",bgColor:"from-purple-400 to-purple-500",hoverEffect:"hover:shadow-purple-300/50",textColor:"text-purple-900"},{label:"SETTINGS",description:"Manage your business profile and preferences",path:"/business/settings/simple",icon:"cog",bgColor:"from-slate-400 to-slate-500",hoverEffect:"hover:shadow-slate-300/50",textColor:"text-slate-900"}]),[]),g=e=>{if(e instanceof Date)return e;if(e&&"function"===typeof e.toDate)try{return e.toDate()}catch(zZ){return console.error("Error converting timestamp:",zZ),new Date}return new Date};return r?(0,k.jsx)("div",{className:"h-full flex items-center justify-center bg-gradient-to-b from-amber-50 to-white",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-amber-700 font-medium",children:"Loading your dashboard..."})]})}):h?(0,k.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,k.jsxs)("div",{className:"text-center p-6 bg-red-50 rounded-lg",children:[(0,k.jsx)("p",{className:"text-red-600 mb-2",children:h}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Reload Page"})]})}):(0,k.jsxs)("div",{className:"h-full bg-gradient-to-b from-amber-50 to-white max-w-3xl mx-auto animate-fadeIn",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-rose-500 text-white pt-8 pb-12 px-6 rounded-b-3xl shadow-lg",children:[(0,k.jsxs)("div",{className:"animate-slideDown",children:[(0,k.jsx)("h2",{className:"text-lg font-medium opacity-90",children:(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})()}),(0,k.jsxs)("h1",{className:"text-2xl font-bold mt-1 flex items-center animate-scaleIn",children:["Hi, ",null!==t&&void 0!==t&&t.displayName?t.displayName.split(" ")[0]:(null===n||void 0===n?void 0:n.businessName)||"there","!",(0,k.jsx)("span",{className:"ml-2 animate-wave",children:"\ud83d\udc4b"})]}),(0,k.jsx)("p",{className:"mt-2 text-amber-100 font-medium animate-fadeIn",children:o?o.totalRedemptions>0?"Your customers are loving your offers!":o.activeCoupons>0?"Your offers are ready to delight customers!":"Create your first offer and watch your business grow!":"Ready to build customer relationships today?"})]}),(0,k.jsx)("div",{className:"mt-6",children:l?(0,k.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map((e=>(0,k.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-3 shadow-sm animate-pulse",children:(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:"w-10 h-10 bg-white/30 rounded-full mb-1"}),(0,k.jsx)("div",{className:"h-2 bg-white/30 rounded w-12 mb-1"}),(0,k.jsx)("div",{className:"h-4 bg-white/30 rounded w-6"})]})},e)))}):(0,k.jsx)(xg,{activeCoupons:(null===o||void 0===o?void 0:o.activeCoupons)||0,totalRedemptions:(null===o||void 0===o?void 0:o.totalRedemptions)||0,loyalCustomers:(null===o||void 0===o?void 0:o.loyalCustomers)||0})})]}),(0,k.jsxs)("div",{className:"px-5 -mt-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 transform translate-y-0 opacity-100 transition-all duration-500 ease-out animate-slideUp",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-amber-900 mb-4",children:"What would you like to do today?"}),(0,k.jsx)(vg,{buttons:f})]}),(0,k.jsxs)("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-5 transform translate-y-0 opacity-100 transition-all duration-500 ease-out delay-100 animate-slideUp",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-amber-900",children:"Customer Connections"}),(0,k.jsx)("button",{onClick:()=>s("/business/customers/simple"),className:"text-sm text-rose-600 font-medium hover:text-rose-700 transition-colors",children:"View All"})]}),l?(0,k.jsx)("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map((e=>(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-full mr-3"}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"h-4 bg-amber-100 rounded w-3/4 mb-2"}),(0,k.jsx)("div",{className:"h-3 bg-amber-100 rounded w-1/2"})]})]},e)))}):null!==o&&void 0!==o&&o.recentActivity&&Array.isArray(o.recentActivity)&&o.recentActivity.length>0?(0,k.jsx)("div",{className:"space-y-3",children:o.recentActivity.slice(0,3).map(((e,t)=>(0,k.jsxs)("div",{className:"flex items-start p-3 rounded-lg hover:bg-amber-50 transition-colors transform hover:scale-102 transition-transform",children:[(0,k.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-3 ".concat("coupon_created"===e.type?"bg-amber-100 text-amber-600":"coupon_redeemed"===e.type?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"),children:"coupon_created"===e.type?(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}):"coupon_redeemed"===e.type?(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{className:"text-sm font-medium text-gray-800",children:["coupon_created"===e.type?"\ud83c\udf89 ":"coupon_redeemed"===e.type?"\ud83d\udcab ":"\ud83e\udd1d ",e.title]}),(0,k.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[bg(g(e.timestamp))," at ",wg(g(e.timestamp))]})]})]},t)))}):(0,k.jsxs)("button",{onClick:()=>s("/business/customers/simple"),className:"w-full flex flex-col items-center justify-center py-8 text-center rounded-2xl bg-amber-100 hover:bg-amber-200 transition-colors shadow-md animate-scaleIn focus:outline-none focus:ring-2 focus:ring-amber-300","aria-label":"View customer connections and start building relationships",children:[(0,k.jsx)("div",{className:"w-20 h-20 bg-amber-200 rounded-full flex items-center justify-center mb-3",children:(0,k.jsx)("svg",{className:"w-10 h-10 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,k.jsx)("p",{className:"text-amber-900 font-semibold mb-1",children:"Start building relationships"}),(0,k.jsx)("p",{className:"text-sm text-amber-700",children:"Create your first coupon to connect with customers"})]})]}),(0,k.jsx)("div",{className:"mt-6 mb-8 bg-gradient-to-r from-amber-100 to-rose-100 rounded-2xl p-5 hover:scale-102 transition-transform animate-slideUp",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"mr-4 bg-gradient-to-br from-amber-500 to-rose-500 rounded-full p-2 shadow-md",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-amber-900",children:"Success Tip"}),(0,k.jsxs)("p",{className:"text-sm text-amber-800 mt-1",children:["Your personal touch matters! Customers who redeem coupons are ",(0,k.jsx)("span",{className:"font-bold",children:"70% more likely"})," to return. Try creating a welcome offer to build lasting relationships."]})]})]})})]}),u&&(0,k.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm z-50",onClick:p,children:(0,k.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-2xl text-center",children:[(0,k.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,k.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back!"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Ready to make today amazing?"}),(0,k.jsx)("button",{className:"mt-4 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors",onClick:p,children:"Let's Go!"})]})})]})},jg=()=>{console.log("Dashboard component rendering");const t=tl(),n=(null===t||void 0===t?void 0:t.viewMode)||"default";console.log("Dashboard view mode:",n);const{user:r,businessProfile:s,isLoading:o}=(0,N.A)(),a=(0,i.Zp)(),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!0),[h,m]=(0,e.useState)(null),[p,f]=(0,e.useState)(s),[g,y]=(0,e.useState)({hasCreatedCoupons:!1,hasCompletedProfile:!1,hasSharedCoupons:!1});return(0,e.useEffect)((()=>{(async()=>{if(null!==r&&void 0!==r&&r.businessId&&!p)try{console.log("Emergency fix: Fetching business profile directly for ID:",r.businessId);const e=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",r.businessId));if(e.exists()){const t=e.data(),n={businessId:r.businessId,businessName:t.businessName||"",industry:t.industry||"",address:t.address||"",phone:t.phone||"",website:t.website||"",logo:t.logo||"",colors:t.colors||{primary:"#3B82F6",secondary:"#10B981"},subscriptionTier:t.subscriptionTier||"free",subscriptionStatus:t.subscriptionStatus||"active"};console.log("Emergency fix: Successfully loaded business profile:",n),f(n)}else console.error("Emergency fix: Business document does not exist")}catch(zZ){console.error("Emergency fix: Error fetching business profile:",zZ)}})()}),[null===r||void 0===r?void 0:r.businessId,p]),(0,e.useEffect)((()=>{s&&f(s)}),[s]),(0,e.useEffect)((()=>{const e=async()=>{if(null===r||void 0===r||!r.businessId)return console.log("No business ID available, skipping data load"),void d(!1);try{console.log("Loading dashboard data for business:",r.businessId),d(!0);const e=await il(r.businessId);console.log("Dashboard stats loaded:",e),c(e);const t=await(async e=>{try{const t=(0,sl.rJ)(rl.db,"coupons"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e)),r=!(await(0,sl.GG)(n)).empty,s=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",e)),o=s.exists()?s.data():null,i=o&&o.industry&&"Not specified"!==o.industry&&(o.logo||o.description),a=(0,sl.rJ)(rl.db,"couponDistributions"),l=(0,sl.P)(a,(0,sl._M)("businessId","==",e));return{hasCreatedCoupons:r,hasCompletedProfile:!!i,hasSharedCoupons:!(await(0,sl.GG)(l)).empty}}catch(h){return console.error("Error checking onboarding status:",h),{hasCreatedCoupons:!1,hasCompletedProfile:!1,hasSharedCoupons:!1}}})(r.businessId);console.log("Onboarding status:",t),y(t)}catch(h){console.error("Error loading dashboard data:",h),m("Failed to load dashboard data")}finally{d(!1)}};o||e()}),[null===r||void 0===r?void 0:r.businessId,o]),o?(0,k.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"}),(0,k.jsx)("p",{className:"ml-3 text-gray-600 animate-pulse",children:"Loading your dashboard experience..."})]}):h?(0,k.jsxs)("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[(0,k.jsx)("h3",{className:"text-red-800 font-semibold",children:"Dashboard Error"}),(0,k.jsx)("p",{className:"text-red-600 mt-2",children:h}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]}):"simple"===n?(console.log("Rendering simple dashboard"),(0,k.jsx)(Ng,{})):(console.log("Rendering detailed dashboard"),(0,k.jsx)("div",{className:"dashboard-container min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,k.jsxs)("div",{className:"p-6 space-y-6",children:[(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(null===p||void 0===p?void 0:p.businessName)||(null===r||void 0===r?void 0:r.displayName)||"Business Owner","! \ud83d\udc4b"]}),(0,k.jsx)("p",{className:"text-gray-600 mt-2",children:"Here's what's happening with your business today"})]}),(0,k.jsx)("div",{className:"text-right",children:(0,k.jsx)("div",{className:"text-sm text-gray-500",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,k.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-blue-100",children:"Active Coupons"}),(0,k.jsx)("p",{className:"text-3xl font-bold",children:(null===l||void 0===l?void 0:l.activeCoupons)||0})]}),(0,k.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83c\udfab"})]})}),(0,k.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-green-100",children:"Total Redemptions"}),(0,k.jsx)("p",{className:"text-3xl font-bold",children:(null===l||void 0===l?void 0:l.totalRedemptions)||0})]}),(0,k.jsx)("div",{className:"text-4xl opacity-80",children:"\u2728"})]})}),(0,k.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-purple-100",children:"This Month"}),(0,k.jsx)("p",{className:"text-3xl font-bold",children:(null===l||void 0===l?void 0:l.loyalCustomers)||0})]}),(0,k.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udcc8"})]})}),(0,k.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-orange-100",children:"Total Customers"}),(0,k.jsx)("p",{className:"text-3xl font-bold",children:(null===l||void 0===l?void 0:l.totalCustomers)||0})]}),(0,k.jsx)("div",{className:"text-4xl opacity-80",children:"\ud83d\udc65"})]})})]}),(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,k.jsxs)("button",{onClick:()=>a("/business/coupons/create"),className:"flex items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200",children:[(0,k.jsx)("div",{className:"text-3xl mr-4",children:"\ud83c\udfab"}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("h3",{className:"font-semibold text-gray-900",children:"Create Coupon"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Design a new promotional offer"})]})]}),(0,k.jsxs)("button",{onClick:()=>a("/business/customers"),className:"flex items-center p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors border border-green-200",children:[(0,k.jsx)("div",{className:"text-3xl mr-4",children:"\ud83d\udc65"}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("h3",{className:"font-semibold text-gray-900",children:"Manage Customers"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"View and organize your customer base"})]})]}),(0,k.jsxs)("button",{onClick:()=>a("/business/analytics"),className:"flex items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors border border-purple-200",children:[(0,k.jsx)("div",{className:"text-3xl mr-4",children:"\ud83d\udcca"}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("h3",{className:"font-semibold text-gray-900",children:"View Analytics"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Track your business performance"})]})]})]})]})]})}))};class kg extends e.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Nd(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Cg(t){let{children:n,isPresent:r,anchorX:s,root:o}=t;const i=(0,e.useId)(),a=(0,e.useRef)(null),l=(0,e.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,e.useContext)(qp);return(0,e.useInsertionEffect)((()=>{const{width:e,height:t,top:n,left:u,right:d}=l.current;if(r||!a.current||!e||!t)return;const h="left"===s?"left: ".concat(u):"right: ".concat(d);a.current.dataset.motionPopId=i;const m=document.createElement("style");c&&(m.nonce=c);const p=null!==o&&void 0!==o?o:document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{p.removeChild(m),p.contains(m)&&p.removeChild(m)}}),[r]),(0,k.jsx)(kg,{isPresent:r,childRef:a,sizeRef:l,children:e.cloneElement(n,{ref:a})})}const Sg=t=>{let{children:n,initial:r,isPresent:s,onExitComplete:o,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c,root:u}=t;const d=Pf(Ag),h=(0,e.useId)();let m=!0,p=(0,e.useMemo)((()=>(m=!1,{id:h,initial:r,isPresent:s,custom:i,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;o&&o()},register:e=>(d.set(e,!1),()=>d.delete(e))})),[s,d,o]);return a&&m&&(p=(0,S.A)({},p)),(0,e.useMemo)((()=>{d.forEach(((e,t)=>d.set(t,!1)))}),[s]),e.useEffect((()=>{!s&&!d.size&&o&&o()}),[s]),"popLayout"===l&&(n=(0,k.jsx)(Cg,{isPresent:s,anchorX:c,root:u,children:n})),(0,k.jsx)(Zh.Provider,{value:p,children:n})};function Ag(){return new Map}const Eg=e=>e.key||"";function _g(t){const n=[];return e.Children.forEach(t,(t=>{(0,e.isValidElement)(t)&&n.push(t)})),n}const Ig=t=>{let{children:n,custom:r,initial:s=!0,onExitComplete:o,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:u}=t;const[d,h]=em(l),m=(0,e.useMemo)((()=>_g(n)),[n]),p=l&&!d?[]:m.map(Eg),f=(0,e.useRef)(!0),g=(0,e.useRef)(m),y=Pf((()=>new Map)),[v,x]=(0,e.useState)(m),[b,w]=(0,e.useState)(m);ef((()=>{f.current=!1,g.current=m;for(let e=0;e<b.length;e++){const t=Eg(b[e]);p.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}}),[b,p.length,p.join("-")]);const N=[];if(m!==v){let e=[...m];for(let t=0;t<b.length;t++){const n=b[t],r=Eg(n);p.includes(r)||(e.splice(t,0,n),N.push(n))}return"wait"===a&&N.length&&(e=N),w(_g(e)),x(m),null}const{forceRender:j}=(0,e.useContext)(tm);return(0,k.jsx)(k.Fragment,{children:b.map((e=>{const t=Eg(e),n=!(l&&!d)&&(m===b||p.includes(t));return(0,k.jsx)(Sg,{isPresent:n,initial:!(f.current&&!s)&&void 0,custom:r,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:n?void 0:()=>{if(!y.has(t))return;y.set(t,!0);let e=!0;y.forEach((t=>{t||(e=!1)})),e&&(null===j||void 0===j||j(),w(g.current),l&&(null===h||void 0===h||h()),o&&o())},anchorX:c,children:e},t)}))})},Tg=t=>{let{mood:n,message:r}=t;const[s,o]=(0,e.useState)(!0);(0,e.useEffect)((()=>{const e=setTimeout((()=>{o(!1)}),5e3);return()=>clearTimeout(e)}),[r]);const i={y:[0,-5,0],transition:{repeat:1/0,repeatType:"reverse",duration:2}},a={rotate:[-5,5,-5],scale:[1,1.1,1],transition:{repeat:1/0,repeatType:"reverse",duration:.5}},l={y:[0,-3,0],x:[0,3,0],transition:{repeat:1/0,repeatType:"reverse",duration:1.5}};return(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)(gg.div,{className:"w-16 h-16 rounded-full ".concat((()=>{switch(n){case"happy":default:return"bg-amber-100";case"excited":return"bg-purple-100";case"helping":return"bg-blue-100"}})()," flex items-center justify-center shadow-md cursor-pointer"),whileHover:{scale:1.1},whileTap:{scale:.9},animate:(()=>{switch(n){case"happy":default:return i;case"excited":return a;case"helping":return l}})(),onClick:()=>o(!s),children:(0,k.jsx)("span",{className:"text-3xl",children:(()=>{switch(n){case"happy":default:return"\ud83d\ude0a";case"excited":return"\ud83e\udd29";case"helping":return"\ud83d\udca1"}})()})}),(0,k.jsx)(Ig,{children:s&&r&&(0,k.jsxs)(gg.div,{className:"absolute top-full right-0 mt-2 bg-white rounded-xl p-3 shadow-md max-w-xs z-10",initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{duration:.2},children:[(0,k.jsx)("div",{className:"absolute -top-2 right-6 w-0 h-0 border-l-8 border-r-8 border-b-8 border-t-0 border-transparent border-b-white"}),(0,k.jsx)("p",{className:"text-sm text-gray-700",children:r}),(0,k.jsx)("button",{onClick:()=>o(!1),className:"absolute top-1 right-1 text-gray-400 hover:text-gray-600 text-xs",children:"\u2715"})]})})]})},Pg=t=>{let{coupon:n,onAction:r,viewMode:s="detailed"}=t;const[o,i]=(0,e.useState)(!1),a=()=>{switch(n.status){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-gray-100 text-gray-800";case"draft":return"bg-amber-100 text-amber-800";default:return"bg-blue-100 text-blue-800"}},l=e=>{if("Invalid Date"===e)return"Not set";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(UZ){return"Invalid date"}},c=n.usage.limit>0?n.usage.used/n.usage.limit*100:0;return"simple"===s?(0,k.jsxs)(gg.div,{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 relative",whileHover:{y:-3,transition:{duration:.2}},onHoverStart:()=>i(!0),onHoverEnd:()=>i(!1),children:[(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,k.jsx)("h3",{className:"text-lg font-bold",children:n.title}),(0,k.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat(a()),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),(0,k.jsxs)("div",{className:"flex items-baseline mb-3",children:[(0,k.jsx)("span",{className:"text-2xl font-bold mr-2 text-purple-600",children:n.discount}),(0,k.jsx)("span",{className:"text-sm text-gray-500",children:"discount"})]}),(0,k.jsxs)("div",{className:"flex justify-between text-sm mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Code"}),(0,k.jsx)("div",{className:"font-mono bg-gray-50 px-2 py-1 rounded",children:n.code})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Valid Until"}),(0,k.jsx)("div",{children:l(n.validUntil)})]})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,k.jsxs)(gg.button,{className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("share"),children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]}),(0,k.jsxs)(gg.button,{className:"text-sm text-purple-600 hover:text-purple-800 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("edit"),children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),o&&(0,k.jsx)(gg.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{boxShadow:"0 0 20px rgba(139, 92, 246, 0.3), 0 0 40px rgba(139, 92, 246, 0.1) inset",borderRadius:"0.75rem"}})]}):(0,k.jsxs)(gg.div,{className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 relative",whileHover:{y:-5,transition:{duration:.2}},onHoverStart:()=>i(!0),onHoverEnd:()=>i(!1),children:[(0,k.jsx)("div",{className:"absolute top-4 right-4",children:(0,k.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-medium ".concat(a()),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-4 text-white",children:[(0,k.jsx)("h3",{className:"text-lg font-bold mb-1",children:n.title}),(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsx)("span",{className:"text-3xl font-bold mr-2",children:n.discount}),(0,k.jsx)("span",{className:"text-sm opacity-80",children:"discount"})]})]}),(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Coupon Code"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(gg.div,{className:"bg-gray-100 rounded px-3 py-2 font-mono text-sm flex-1 mr-2",whileTap:{scale:.98},children:n.code}),(0,k.jsx)(gg.button,{className:"text-purple-500 p-1 rounded hover:bg-purple-50",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{navigator.clipboard.writeText(n.code)},children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Valid Period"}),(0,k.jsxs)("div",{className:"text-sm text-gray-700",children:[l(n.validFrom)," - ",l(n.validUntil)]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,k.jsx)("span",{className:"text-xs text-gray-500",children:"Usage"}),(0,k.jsxs)("span",{className:"text-xs font-medium",children:[n.usage.used," / ",0===n.usage.limit?"\u221e":n.usage.limit]})]}),(0,k.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,k.jsx)(gg.div,{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",initial:{width:0},animate:{width:"".concat(Math.min(c,100),"%")},transition:{duration:1}})})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Sent to"}),(0,k.jsxs)("div",{className:"text-sm text-gray-700 flex items-center",children:[(0,k.jsx)("span",{className:"mr-1",children:n.sent}),(0,k.jsx)("span",{children:1===n.sent?"customer":"customers"})]})]})]}),(0,k.jsxs)("div",{className:"border-t border-gray-100 p-4 flex justify-between",children:[(0,k.jsxs)(gg.button,{className:"text-sm text-purple-600 hover:text-purple-800 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("edit"),children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,k.jsxs)(gg.button,{className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("share"),children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]}),(0,k.jsxs)(gg.button,{className:"text-sm text-red-600 hover:text-red-800 flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r("delete"),children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]}),o&&(0,k.jsx)(gg.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{boxShadow:"0 0 20px rgba(139, 92, 246, 0.3), 0 0 40px rgba(139, 92, 246, 0.1) inset",borderRadius:"0.75rem"}})]})},Rg=e=>{let{coupons:t,loading:n,onCouponAction:r,viewMode:s="detailed"}=e;const o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return n?(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,k.jsx)(gg.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-12 h-12 border-4 border-purple-200 border-t-purple-500 rounded-full mb-4"}),(0,k.jsx)("p",{className:"text-gray-500 animate-pulse",children:"Loading your amazing coupons..."})]}):0===t.length?(0,k.jsxs)(gg.div,{className:"bg-white rounded-xl shadow-md p-8 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,k.jsx)("div",{className:"text-5xl mb-4",children:"\ud83c\udf81"}),(0,k.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No coupons found"}),(0,k.jsx)("p",{className:"text-gray-600 mb-6",children:"Time to create some special offers for your customers!"}),(0,k.jsx)(gg.button,{className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-full  font-medium shadow-lg hover:shadow-purple-200/50 transition-all",whileHover:{scale:1.05},whileTap:{scale:.98},onClick:()=>r("create"),children:"Create Your First Coupon"})]}):(0,k.jsx)(gg.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 ".concat("simple"===s?"md:grid-cols-1 lg:grid-cols-2":"md:grid-cols-2 lg:grid-cols-3"," gap-6"),children:(0,k.jsx)(Ig,{children:t.map((e=>(0,k.jsx)(gg.div,{variants:o,exit:{opacity:0,y:-20,transition:{duration:.3}},layout:!0,children:(0,k.jsx)(Pg,{coupon:e,onAction:r,viewMode:s})},e.id)))})})},Dg=e=>{let{activeCoupons:t,sentCoupons:n,usedCoupons:r,totalCoupons:s}=e;const o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},i=[{title:"Active Coupons",value:t,icon:"\ud83d\udd25",color:"from-amber-500 to-orange-500",percentage:s>0?t/s*100:0,description:"Currently delighting customers"},{title:"Sent Coupons",value:n,icon:"\u2709\ufe0f",color:"from-blue-500 to-cyan-500",percentage:s>0?n/(5*s)*100:0,description:"Shared with your customers"},{title:"Used Coupons",value:r,icon:"\ud83c\udfaf",color:"from-green-500 to-emerald-500",percentage:n>0?r/n*100:0,description:"Successfully redeemed"},{title:"Total Coupons",value:s,icon:"\ud83c\udfc6",color:"from-purple-500 to-indigo-500",percentage:100,description:"Created for your business"}];return(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:i.map(((e,t)=>(0,k.jsx)(gg.div,{custom:t,variants:o,initial:"hidden",animate:"visible",className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",whileHover:{y:-5,transition:{duration:.2}},children:(0,k.jsxs)("div",{className:"p-5",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:e.title}),(0,k.jsx)("span",{className:"text-2xl",children:e.icon})]}),(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(to right, ".concat(e.color.split(" ")[0].replace("from-",""),", ").concat(e.color.split(" ")[1].replace("to-",""),")")},children:e.value}),(0,k.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:e.description})]}),(0,k.jsx)("div",{className:"mt-4 h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,k.jsx)(gg.div,{className:"h-full bg-gradient-to-r ".concat(e.color," rounded-full"),initial:{width:0},animate:{width:"".concat(Math.min(e.percentage,100),"%")},transition:{duration:1,delay:.5}})})]})},e.title)))})},Mg=t=>{let{onSearch:n,onFilterChange:r,currentFilter:s,totalCount:o,filteredCount:i}=t;const[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,k.jsxs)(gg.div,{className:"relative flex-1 ".concat(c?"z-10":""),animate:{scale:c?1.02:1},transition:{duration:.2},children:[(0,k.jsxs)("div",{className:"flex items-center bg-white rounded-full overflow-hidden shadow-sm transition-all duration-300 border ".concat(c?"border-purple-300 shadow-purple-100":"border-gray-200"),children:[(0,k.jsx)("div",{className:"pl-4 pr-2 text-gray-400",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,k.jsx)("input",{type:"text",placeholder:"Search by coupon name or code...",className:"py-3 px-2 w-full outline-none text-gray-700",value:a,onChange:e=>{const t=e.target.value;l(t),n(t)},onFocus:()=>u(!0),onBlur:()=>u(!1)}),a&&(0,k.jsx)(gg.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"pr-4 text-gray-400 hover:text-gray-600",onClick:()=>{l(""),n("")},children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)(Ig,{children:a&&(0,k.jsxs)(gg.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute left-4 -bottom-6 text-xs text-gray-500",children:["Found ",i," ",1===i?"coupon":"coupons"]})})]}),(0,k.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-full",children:[{id:"all",label:"All Coupons",icon:"\ud83c\udf81"},{id:"active",label:"Active",icon:"\ud83d\udd25"},{id:"expired",label:"Expired",icon:"\u23f0"},{id:"draft",label:"Drafts",icon:"\ud83d\udcdd"}].map((e=>(0,k.jsxs)(gg.button,{className:"px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1 transition-colors ".concat(s===e.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-800"),onClick:()=>r(e.id),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,k.jsx)("span",{children:e.icon}),(0,k.jsx)("span",{children:e.label})]},e.id)))})]}),(0,k.jsxs)("div",{className:"mt-8 flex justify-between items-center",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"all"===s?"All Coupons":"active"===s?"Active Coupons":"expired"===s?"Expired Coupons":"Draft Coupons"}),(0,k.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",i," of ",o," coupons"]})]}),(0,k.jsx)(gg.div,{className:"h-0.5 bg-gradient-to-r from-purple-300 to-blue-300 rounded-full mt-2",initial:{width:0},animate:{width:"100%"},transition:{duration:.8}})]})};var Lg={};!function e(t,n,r,s){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"===typeof Path2D&&"function"===typeof DOMMatrix;function a(){}function l(e){var r=n.exports.Promise,s=void 0!==r?r:t.Promise;return"function"===typeof s?new s(e):(e(a,a),null)}var c,u=function(e,t){return{transform:function(n){if(e)return n;if(t.has(n))return t.get(n);var r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),t.set(n,r),r},clear:function(){t.clear()}}}(function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),n=e.getContext("2d");n.fillRect(0,0,1,1);var r=e.transferToImageBitmap();try{n.createPattern(r,"no-repeat")}catch(UZ){return!1}return!0}(),new Map),d=function(){var e,t,n=Math.floor(1e3/60),r={},s=0;return"function"===typeof requestAnimationFrame&&"function"===typeof cancelAnimationFrame?(e=function(e){var t=Math.random();return r[t]=requestAnimationFrame((function o(i){s===i||s+n-1<i?(s=i,delete r[t],e()):r[t]=requestAnimationFrame(o)})),t},t=function(e){r[e]&&cancelAnimationFrame(r[e])}):(e=function(e){return setTimeout(e,n)},t=function(e){return clearTimeout(e)}),{frame:e,cancel:t}}(),h=function(){var t,n,s={};return function(){if(t)return t;if(!r&&o){var i=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{t=new Worker(URL.createObjectURL(new Blob([i])))}catch(UZ){return void 0!==typeof console&&"function"===typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",UZ),null}!function(e){function t(t,n){e.postMessage({options:t||{},callback:n})}e.init=function(t){var n=t.transferControlToOffscreen();e.postMessage({canvas:n},[n])},e.fire=function(r,o,i){if(n)return t(r,null),n;var a=Math.random().toString(36).slice(2);return n=l((function(o){function l(t){t.data.callback===a&&(delete s[a],e.removeEventListener("message",l),n=null,u.clear(),i(),o())}e.addEventListener("message",l),t(r,a),s[a]=l.bind(null,{data:{callback:a}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),s)s[t](),delete s[t]}}(t)}return t}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(e,t,n){return function(e,t){return t?t(e):e}(e&&(null!==(r=e[t])&&void 0!==r)?e[t]:m[t],n);var r}function f(e){return e<0?0:Math.floor(e)}function g(e,t){return Math.floor(Math.random()*(t-e))+e}function y(e){return parseInt(e,16)}function v(e){return e.map(x)}function x(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:y(t.substring(0,2)),g:y(t.substring(2,4)),b:y(t.substring(4,6))}}function b(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function w(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function N(e){var t=e.angle*(Math.PI/180),n=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*n-Math.random()*n),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function j(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var n=t.tick++/t.totalTicks,r=t.x+t.random*t.tiltCos,s=t.y+t.random*t.tiltSin,o=t.wobbleX+t.random*t.tiltCos,a=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-n)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"===typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,n,r,s,o,i){var a=new Path2D(e),l=new Path2D;l.addPath(a,new DOMMatrix(t));var c=new Path2D;return c.addPath(l,new DOMMatrix([Math.cos(i)*s,Math.sin(i)*s,-Math.sin(i)*o,Math.cos(i)*o,n,r])),c}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(o-r),.1*Math.abs(a-s),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,c=.1*Math.abs(o-r),d=.1*Math.abs(a-s),h=t.shape.bitmap.width*t.scalar,m=t.shape.bitmap.height*t.scalar,p=new DOMMatrix([Math.cos(l)*c,Math.sin(l)*c,-Math.sin(l)*d,Math.cos(l)*d,t.x,t.y]);p.multiplySelf(new DOMMatrix(t.shape.matrix));var f=e.createPattern(u.transform(t.shape.bitmap),"no-repeat");f.setTransform(p),e.globalAlpha=1-n,e.fillStyle=f,e.fillRect(t.x-h/2,t.y-m/2,h,m),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(o-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,n,r,s,o,i,a,l){e.save(),e.translate(t,n),e.rotate(o),e.scale(r,s),e.arc(0,0,1,i,a,l),e.restore()}(e,t.x,t.y,Math.abs(o-r)*t.ovalScalar,Math.abs(a-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var g=Math.PI/2*3,y=4*t.scalar,v=8*t.scalar,x=t.x,b=t.y,w=5,N=Math.PI/w;w--;)x=t.x+Math.cos(g)*v,b=t.y+Math.sin(g)*v,e.lineTo(x,b),g+=N,x=t.x+Math.cos(g)*y,b=t.y+Math.sin(g)*y,e.lineTo(x,b),g+=N;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(s)),e.lineTo(Math.floor(o),Math.floor(a)),e.lineTo(Math.floor(r),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function k(e,n){var i,a=!e,c=!!p(n||{},"resize"),m=!1,y=p(n,"disableForReducedMotion",Boolean),x=o&&!!p(n||{},"useWorker")?h():null,k=a?b:w,C=!(!e||!x)&&!!e.__confetti_initialized,S="function"===typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function A(t,n,o){for(var a=p(t,"particleCount",f),c=p(t,"angle",Number),h=p(t,"spread",Number),m=p(t,"startVelocity",Number),y=p(t,"decay",Number),x=p(t,"gravity",Number),b=p(t,"drift",Number),w=p(t,"colors",v),C=p(t,"ticks",Number),S=p(t,"shapes"),A=p(t,"scalar"),E=!!p(t,"flat"),_=function(e){var t=p(e,"origin",Object);return t.x=p(t,"x",Number),t.y=p(t,"y",Number),t}(t),I=a,T=[],P=e.width*_.x,R=e.height*_.y;I--;)T.push(N({x:P,y:R,angle:c,spread:h,startVelocity:m,color:w[I%w.length],shape:S[g(0,S.length)],ticks:C,decay:y,gravity:x,drift:b,scalar:A,flat:E}));return i?i.addFettis(T):(i=function(e,t,n,o,i){var a,c,h=t.slice(),m=e.getContext("2d"),p=l((function(t){function l(){a=c=null,m.clearRect(0,0,o.width,o.height),u.clear(),i(),t()}a=d.frame((function t(){!r||o.width===s.width&&o.height===s.height||(o.width=e.width=s.width,o.height=e.height=s.height),o.width||o.height||(n(e),o.width=e.width,o.height=e.height),m.clearRect(0,0,o.width,o.height),(h=h.filter((function(e){return j(m,e)}))).length?a=d.frame(t):l()})),c=l}));return{addFettis:function(e){return h=h.concat(e),p},canvas:e,promise:p,reset:function(){a&&d.cancel(a),c&&c()}}}(e,T,k,n,o),i.promise)}function E(n){var r=y||p(n,"disableForReducedMotion",Boolean),s=p(n,"zIndex",Number);if(r&&S)return l((function(e){e()}));a&&i?e=i.canvas:a&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(s),document.body.appendChild(e)),c&&!C&&k(e);var o={width:e.width,height:e.height};function u(){if(x){var t={getBoundingClientRect:function(){if(!a)return e.getBoundingClientRect()}};return k(t),void x.postMessage({resize:{width:t.width,height:t.height}})}o.width=o.height=null}function d(){i=null,c&&(m=!1,t.removeEventListener("resize",u)),a&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,C=!1)}return x&&!C&&x.init(e),C=!0,x&&(e.__confetti_initialized=!0),c&&!m&&(m=!0,t.addEventListener("resize",u,!1)),x?x.fire(n,o,d):A(n,o,d)}return E.reset=function(){x&&x.reset(),i&&i.reset()},E}function C(){return c||(c=k(null,{useWorker:!0,resize:!0})),c}n.exports=function(){return C().apply(this,arguments)},n.exports.reset=function(){C().reset()},n.exports.create=k,n.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,n;"string"===typeof e?t=e:(t=e.path,n=e.matrix);var r=new Path2D(t),s=document.createElement("canvas").getContext("2d");if(!n){for(var o,a,l=1e3,c=l,u=l,d=0,h=0,m=0;m<l;m+=2)for(var p=0;p<l;p+=2)s.isPointInPath(r,m,p,"nonzero")&&(c=Math.min(c,m),u=Math.min(u,p),d=Math.max(d,m),h=Math.max(h,p));o=d-c,a=h-u;var f=Math.min(10/o,10/a);n=[f,0,0,f,-Math.round(o/2+c)*f,-Math.round(a/2+u)*f]}return{type:"path",path:t,matrix:n}},n.exports.shapeFromText=function(e){var t,n=1,r="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"===typeof e?t=e:(t=e.text,n="scalar"in e?e.scalar:n,s="fontFamily"in e?e.fontFamily:s,r="color"in e?e.color:r);var o=10*n,i=o+"px "+s,a=new OffscreenCanvas(o,o),l=a.getContext("2d");l.font=i;var c=l.measureText(t),u=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),d=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),h=c.actualBoundingBoxLeft+2,m=c.actualBoundingBoxAscent+2;u+=4,d+=4,(l=(a=new OffscreenCanvas(u,d)).getContext("2d")).font=i,l.fillStyle=r,l.fillText(t,h,m);var p=1/n;return{type:"bitmap",bitmap:a.transferToImageBitmap(),matrix:[p,0,0,p,-u*p/2,-d*p/2]}}}(function(){return"undefined"!==typeof window?window:"undefined"!==typeof self?self:this||{}}(),Lg,!1);const Og=Lg.exports;Lg.exports.create;const Fg=t=>{let{type:n,isVisible:r}=t;e.useEffect((()=>{r&&"confetti"===n&&Og({particleCount:100,spread:70,origin:{y:.6}})}),[r,n]);return(0,k.jsx)(Ig,{children:r&&(0,k.jsxs)(k.Fragment,{children:["sparkle"===n&&(0,k.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:[(0,k.jsx)(gg.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,0]},exit:{scale:0,opacity:0},transition:{duration:1.5},className:"absolute w-40 h-40 rounded-full bg-gradient-to-r from-yellow-300 to-amber-500 opacity-30 blur-xl"}),(0,k.jsx)(gg.div,{initial:{scale:0,opacity:0,rotate:0},animate:{scale:[0,1],opacity:[0,.8,0],rotate:90},exit:{scale:0,opacity:0},transition:{duration:2},className:"absolute w-60 h-60 rounded-full border-4 border-yellow-400 opacity-20"}),(0,k.jsx)(gg.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.5],opacity:[0,.5,0]},exit:{scale:0,opacity:0},transition:{duration:1},className:"absolute w-20 h-20 rounded-full bg-yellow-400 opacity-30 blur-md"})]}),"achievement"===n&&(0,k.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:(0,k.jsxs)(gg.div,{initial:{scale:0,y:50,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:0,y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:15},className:"bg-white rounded-xl shadow-xl p-6 flex flex-col items-center max-w-xs",children:[(0,k.jsx)(gg.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:1,repeat:1},className:"text-5xl mb-4",children:"\ud83c\udfc6"}),(0,k.jsx)("h3",{className:"text-xl font-bold text-purple-800 mb-2",children:"Achievement Unlocked!"}),(0,k.jsx)("p",{className:"text-gray-600 text-center",children:"You're making great progress with your coupons!"})]})}),(0,k.jsxs)(gg.div,{initial:{opacity:0,y:50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-white rounded-full shadow-lg px-6 py-3 z-50 flex items-center",children:[(0,k.jsx)("span",{className:"text-xl mr-2",children:"confetti"===n?"\ud83c\udf89":"sparkle"===n?"\u2728":"\ud83c\udfc6"}),(0,k.jsx)("span",{className:"font-medium text-gray-800",children:(()=>{switch(n){case"confetti":return"Woohoo! Great job!";case"sparkle":return"Amazing work!";case"achievement":return"Achievement unlocked!";default:return"Congratulations!"}})()})]})]})})},Bg=t=>{let{couponsCount:n,activeCouponsCount:r}=t;const[s,o]=(0,e.useState)(""),[i,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)("\ud83d\udca1");return(0,e.useEffect)((()=>{const e=(()=>{const e=[{condition:0===n,text:"Create your first coupon to start delighting your customers!",icon:"\ud83d\ude80"},{condition:n>0&&0===r,text:"You have coupons, but none are active. Activate one to start attracting customers!",icon:"\ud83d\udd25"},{condition:1===r,text:"Great start with your active coupon! Try creating a special offer for returning customers.",icon:"\ud83d\udc4f"},{condition:r>1&&r<5,text:"Your active coupons are ready to drive sales! Try sharing them on social media.",icon:"\ud83d\udcf1"},{condition:r>=5,text:"Pro tip: Analyze which coupons perform best and create similar ones for even more success!",icon:"\ud83d\udcca"},{condition:!0,text:"Try targeting specific customer segments with personalized offers for better results.",icon:"\ud83c\udfaf"}];return e.find((e=>e.condition))||e[e.length-1]})();o(e.text),c(e.icon)}),[n,r]),(0,e.useEffect)((()=>{if(!(0===n||n>0&&0===r)){const e=setTimeout((()=>{a(!1)}),1e4);return()=>clearTimeout(e)}a(!0)}),[s,n,r]),(0,k.jsx)(Ig,{children:i&&s&&(0,k.jsxs)(gg.div,{className:"mb-8 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100 shadow-sm relative overflow-hidden",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)(gg.div,{className:"mr-3 text-2xl",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:5},children:l}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("h3",{className:"font-medium text-blue-800 mb-1",children:"Personalized Tip"}),(0,k.jsx)("p",{className:"text-gray-700",children:s})]}),(0,k.jsx)("button",{className:"text-gray-400 hover:text-gray-600 ml-2",onClick:()=>a(!1),children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsx)(gg.div,{className:"absolute -right-12 -bottom-12 w-40 h-40 rounded-full bg-blue-100 opacity-20 z-0",animate:{scale:[1,1.2,1],opacity:[.2,.3,.2]},transition:{duration:8,repeat:1/0,repeatType:"reverse"}})]})})};var Ug=n(8631),zg=n(700);const Vg=()=>{const[t,n]=(0,e.useState)(null),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(null);return(0,e.useEffect)((()=>{const e=(0,zg.hg)(Ug.j,(async e=>{try{if(e)try{const t=await(0,sl.x7)((0,sl.H9)(Ug.db,"users",e.uid));t.exists()?n((0,S.A)({id:e.uid},t.data())):n(qg(e.uid))}catch(zZ){console.error("Error fetching user data:",zZ),n(qg(e.uid))}else n(null);i(null)}catch(zZ){console.error("Auth state error:",zZ),i("Authentication error. Please try again later."),n(qg("demo-user-id"))}finally{s(!1)}}));return()=>e()}),[]),{user:t,loading:r,error:o}},qg=e=>({id:e,firstName:"Alex",lastName:"Johnson",email:"alex@example.com",businessId:"demo-business-id",businessName:"Alex's Caf\xe9"}),Wg=()=>{const t=tl(),n=(null===t||void 0===t?void 0:t.viewMode)||"default",r=(0,i.Zp)(),{coupons:s,loading:o,error:a}=(()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(null),{user:a}=Vg();return(0,e.useEffect)((()=>{(async()=>{if(null===a||void 0===a||!a.businessId)return n([]),void s(!1);try{s(!0);const t="Mt8ZZpQXyXMt2IEAOKNe"===(e=a.businessId)?"Mt8ZZpQXyXOHzlEAOKNe":e;console.log("[useCoupons] Using corrected businessId:",t);const r=(0,sl.rJ)(Ug.db,"coupons"),o=(0,sl.P)(r,(0,sl._M)("businessId","==",t)),l=(await(0,sl.GG)(o)).docs.map((e=>{var t,n,r,s,o,i,a;const l=e.data();return{id:e.id,title:l.title||"",code:l.code||"",discount:(null===(t=l.value)||void 0===t?void 0:t.toString())||l.discount||"0",status:l.active?"active":"inactive",validFrom:(null===(n=l.startDate)||void 0===n||null===(r=n.toDate)||void 0===r||null===(s=r.call(n))||void 0===s?void 0:s.toISOString())||l.validFrom||"",validUntil:(null===(o=l.endDate)||void 0===o||null===(i=o.toDate)||void 0===i||null===(a=i.call(o))||void 0===a?void 0:a.toISOString())||l.validUntil||"",usage:{used:l.usageCount||0,limit:l.usageLimit||1},sent:l.sent||0,description:l.description||""}}));console.log("[useCoupons] Fetched coupons:",l),n(l),i(null)}catch(zZ){console.error("Error fetching coupons:",zZ),i("Failed to load coupons. Please try again later."),n([])}finally{s(!1)}var e})()}),[null===a||void 0===a?void 0:a.businessId]),{coupons:t,loading:r,error:o}})(),{user:l}=Vg(),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)("all"),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)("confetti"),[y,v]=(0,e.useState)("happy"),[x,b]=(0,e.useState)(""),[w,N]=(0,e.useState)(!0),j=(null===s||void 0===s?void 0:s.filter((e=>"active"===e.status)).length)||0,C=(null===s||void 0===s?void 0:s.reduce(((e,t)=>e+(t.sent||0)),0))||0,S=(null===s||void 0===s?void 0:s.reduce(((e,t)=>{var n;return e+((null===(n=t.usage)||void 0===n?void 0:n.used)||0)}),0))||0,A=(null===s||void 0===s?void 0:s.filter((e=>{const t=e.title.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase());return"all"===d?t:t&&e.status===d})))||[];(0,e.useEffect)((()=>{if(o?(v("helping"),b("Loading your coupons...")):a?(v("helping"),b("Oops! Something went wrong. Let me help you fix that!")):0===(null===s||void 0===s?void 0:s.length)?(v("excited"),b("Ready to create your first coupon? Click the button above to get started!")):j>5?(v("excited"),b("Wow! You have so many active coupons. Your customers must love you!")):(v("happy"),b("Welcome back! You have ".concat(j," active coupons ready to delight customers."))),!o&&!a){const e=setTimeout((()=>{N(!1)}),5e3);return()=>clearTimeout(e)}}),[s,o,a,j]),(0,e.useEffect)((()=>{1!==(null===s||void 0===s?void 0:s.length)||localStorage.getItem("firstCouponCelebration")?10!==C||localStorage.getItem("tenSentCouponsCelebration")?5!==S||localStorage.getItem("fiveUsedCouponsCelebration")||(g("sparkle"),p(!0),localStorage.setItem("fiveUsedCouponsCelebration","true")):(g("achievement"),p(!0),localStorage.setItem("tenSentCouponsCelebration","true")):(g("confetti"),p(!0),localStorage.setItem("firstCouponCelebration","true"))}),[s,C,S]);const E=e=>{switch(e){case"create":v("excited"),b("Great job creating a new coupon! Your customers will love it!"),g("confetti"),p(!0),N(!0);break;case"edit":v("happy"),b("Nice update! Your coupon looks even better now."),N(!0);break;case"share":v("excited"),b("Sharing is caring! Your customers will appreciate this special offer."),g("sparkle"),p(!0),N(!0);break;case"delete":v("helping"),b("Coupon removed! Need help creating a new one?"),N(!0)}setTimeout((()=>{p(!1)}),3e3),setTimeout((()=>{N(!1)}),5e3)};return(0,k.jsxs)(gg.div,{className:"p-4 md:p-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:["simple"===n&&(0,k.jsx)("button",{onClick:()=>{r("/business/dashboard")},className:"text-gray-600 hover:text-gray-800 mr-2 bg-gray-100 hover:bg-gray-200 rounded-full p-2 transition-colors",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Manage Coupons"}),(0,k.jsx)("button",{onClick:()=>E("create"),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Create New Coupon"})]}),w&&(0,k.jsx)("div",{className:"fixed top-20 right-6 z-50",children:(0,k.jsx)(Tg,{mood:y,message:x})}),"default"===n&&(0,k.jsx)(Dg,{activeCoupons:j,sentCoupons:C,usedCoupons:S,totalCoupons:(null===s||void 0===s?void 0:s.length)||0}),"default"===n&&(0,k.jsx)(Bg,{couponsCount:(null===s||void 0===s?void 0:s.length)||0,activeCouponsCount:j}),(0,k.jsx)(Mg,{onSearch:e=>{u(e)},onFilterChange:e=>{h(e)},currentFilter:d,totalCount:(null===s||void 0===s?void 0:s.length)||0,filteredCount:A.length}),(0,k.jsx)(Rg,{coupons:A,loading:o,onCouponAction:E,viewMode:"simple"===n?"simple":"detailed"}),(0,k.jsx)(Fg,{type:f,isVisible:m})]})};n(847);const Hg=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];try{console.log("Fetching customers for business ID:",e);let o=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",e),(0,sl.AB)(n));t&&(o=(0,sl.P)(o,(0,sl.HM)(t)));const i=await(0,sl.GG)(o);console.log("Customers query returned:",i.size,"documents");const a=[];return i.forEach((e=>{var t,n,o;const i=e.data();(!r||null!==(t=i.firstName)&&void 0!==t&&t.toLowerCase().includes(r.toLowerCase())||null!==(n=i.lastName)&&void 0!==n&&n.toLowerCase().includes(r.toLowerCase())||null!==(o=i.email)&&void 0!==o&&o.toLowerCase().includes(r.toLowerCase())||i.phone&&i.phone.includes(r))&&(!(s.length>0)||i.tags&&s.every((e=>{var t;return null===(t=i.tags)||void 0===t?void 0:t.includes(e)})))&&a.push((0,S.A)((0,S.A)({},i),{},{id:e.id}))})),a.sort(((e,t)=>{const n=e.lastName||"",r=t.lastName||"";return n.localeCompare(r)})),console.log("Returning",a.length,"customers after filtering"),{customers:a,lastVisible:i.docs[i.docs.length-1]||null}}catch(o){throw console.error("Error getting customers:",o),o}},Gg=e=>{if("business_id"===e)throw console.error('\ud83d\udea8 CRITICAL: Attempted to save program with hardcoded "business_id"!'),new Error('Invalid businessId: Cannot save program with hardcoded "business_id"');return"Mt8ZZpQXyXMt2IEAOKNe"===e?"Mt8ZZpQXyXOHzlEAOKNe":"FDO1T2TrcWcglFBm4w68"===e?(console.log("\u2705 Using the correct business ID for FDO1T2TrcWcglFBm4w68"),e):e},Kg=async e=>{try{if(!e)throw console.error("\ud83d\udea8 NULL or UNDEFINED businessId provided to getLoyaltyProgram!"),new Error("Invalid businessId: Cannot get program with null or undefined businessId");const t=Gg(e);console.log("Fetching loyalty program for business:",e),console.log("Corrected businessId:",t);const n=(0,sl.P)((0,sl.rJ)(rl.db,"loyaltyPrograms"),(0,sl._M)("businessId","==",t)),r=await(0,sl.GG)(n);if(console.log("Loyalty program query result:",r.empty?"No programs found":"Found ".concat(r.docs.length," programs")),r.empty)return null;const s=r.docs[0],o=s.data(),i=(0,S.A)((0,S.A)({},o),{},{id:s.id,createdAt:o.createdAt instanceof sl.Dc?o.createdAt.toDate():o.createdAt,updatedAt:o.updatedAt instanceof sl.Dc?o.updatedAt.toDate():o.updatedAt,rewards:o.rewards||[]});return console.log("Returning loyalty program:",i),i}catch(t){throw console.error("Error getting loyalty program:",t),t}},Yg=["id"],Qg=async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"customers",e),r=await(0,sl.x7)(n);if(!r.exists())throw new Error("Customer not found");const s=r.data().loyaltyPoints||0;return await(0,sl.mZ)(n,{loyaltyPoints:s+t,updatedAt:(0,sl.O5)()}),!0}catch(n){throw console.error("Error updating customer loyalty points:",n),n}},$g=async(e,t)=>{try{const s=(e=>"Mt8ZZpQXyXMt2IEAOKNe"===e?"Mt8ZZpQXyXOHzlEAOKNe":e)(e);let o=0,i=0,a=0;try{const e=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",s),(0,sl._M)("loyaltyPoints",">=",0));o=(await(0,sl.d_)(e)).data().count}catch(n){console.warn("Error getting member count, using fallback value:",n);try{const e=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",s));o=(await(0,sl.GG)(e)).docs.filter((e=>void 0!==e.data().loyaltyPoints)).length}catch(r){console.error("Fallback method also failed:",r),o=0}}try{const e=(0,sl.P)((0,sl.rJ)(rl.db,"loyaltyRedemptions"),(0,sl._M)("programId","==",t)),n=(await(0,sl.GG)(e)).docs.length;i=o>0?n/o:0}catch(n){console.warn("Error getting redemptions, using fallback value:",n),i=0}try{const e=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",s),(0,sl._M)("loyaltyPoints",">=",0)),t=await(0,sl.GG)(e);let n=0,r=0;t.docs.forEach((e=>{const t=e.data();t.totalSpent&&t.totalSpent>0&&(n+=t.totalSpent,r++)})),a=r>0?n/r:0}catch(n){console.warn("Error getting average spend, using fallback value:",n),a=0}return{memberCount:o,redemptionRate:Math.round(100*i)/100,averageSpend:Math.round(100*a)/100}}catch(n){return console.error("Error getting loyalty program stats:",n),{memberCount:0,redemptionRate:0,averageSpend:0}}},Jg=!0,Xg=[{title:"Program Launch",description:"Successfully launched your loyalty program",icon:"\ud83d\ude80",completed:!0,completedAt:new Date},{title:"First 10 Members",description:"Your program reached 10 members",icon:"\ud83d\udc65",completed:!1,completedAt:null},{title:"First Redemption",description:"A customer redeemed their first reward",icon:"\ud83c\udf81",completed:!1,completedAt:null},{title:"Loyalty Champion",description:"Your program reached 50 members",icon:"\ud83c\udfc6",completed:!1,completedAt:null}],Zg=async(e,t)=>{try{if(!Jg)return console.log("Loyalty achievements are disabled via feature flag"),[];if(!e||!t)return console.error("Missing businessId or programId in getLoyaltyAchievements"),[];const n=(e=>{if("business_id"===e)throw console.error('\ud83d\udea8 CRITICAL: Attempted to use hardcoded "business_id"!'),new Error('Invalid businessId: Cannot use hardcoded "business_id"');return"Mt8ZZpQXyXMt2IEAOKNe"===e?"Mt8ZZpQXyXOHzlEAOKNe":"FDO1T2TrcWcglFBm4w68"===e?(console.log("\u2705 Using the correct business ID for FDO1T2TrcWcglFBm4w68"),e):e})(e);console.log("Getting achievements for business ".concat(n," and program ").concat(t));const r=(0,sl.P)((0,sl.rJ)(rl.db,"loyaltyAchievements"),(0,sl._M)("businessId","==",n),(0,sl._M)("programId","==",t)),s=await(0,sl.GG)(r);if(s.empty){console.log("No existing achievements found, checking if program exists...");const e=await(async e=>{try{if(!e)return!1;const t=(0,sl.H9)(rl.db,"loyaltyPrograms",e);return(await(0,sl.x7)(t)).exists()}catch(t){return console.error("Error verifying program existence:",t),!1}})(t);if(!e)return console.error("Cannot create achievements for non-existent program: ".concat(t)),[];console.log("Program exists, creating default achievements");const r=[];for(const s of Xg){const e=(0,sl.H9)((0,sl.rJ)(rl.db,"loyaltyAchievements")),o=(0,S.A)((0,S.A)({},s),{},{businessId:n,programId:t,createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)()});await(0,sl.BN)(e,o),console.log("Created achievement: ".concat(s.title," with ID: ").concat(e.id)),r.push((0,S.A)((0,S.A)({},s),{},{id:e.id,businessId:n,programId:t,createdAt:new Date,updatedAt:new Date}))}return r}console.log("Found ".concat(s.docs.length," existing achievements"));return s.docs.map((e=>{const t=e.data();return(0,S.A)((0,S.A)({},t),{},{id:e.id,createdAt:t.createdAt instanceof sl.Dc?t.createdAt.toDate():t.createdAt,updatedAt:t.updatedAt instanceof sl.Dc?t.updatedAt.toDate():t.updatedAt,completedAt:t.completedAt instanceof sl.Dc?t.completedAt.toDate():t.completedAt})}))}catch(n){throw console.error("Error getting loyalty achievements:",n),n}},ey=t=>{let{isOpen:n,onClose:r,onCustomerAdded:s}=t;const{user:o}=(0,N.A)(),[i,a]=(0,e.useState)({firstName:"",lastName:"",email:"",phone:"",notes:""}),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null);if(!n)return null;const h=e=>{const{name:t,value:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))};return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Add New Customer"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:(0,k.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md",children:u}),(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==o&&void 0!==o&&o.businessId)if(i.firstName&&i.lastName&&i.email)try{c(!0),d(null);const e={businessId:o.businessId,firstName:i.firstName,lastName:i.lastName,email:i.email,phone:i.phone||"",joinDate:new Date,totalSpent:0,totalVisits:0,notes:i.notes||"",tags:["new-customer"],loyaltyPoints:0},t=await(async e=>{try{const t=(0,sl.H9)((0,sl.rJ)(rl.db,"customers"));return await(0,sl.BN)(t,(0,S.A)((0,S.A)({},e),{},{joinDate:e.joinDate||(0,sl.O5)(),totalSpent:e.totalSpent||0,totalVisits:e.totalVisits||0,loyaltyPoints:e.loyaltyPoints||0})),(0,S.A)((0,S.A)({},e),{},{id:t.id})}catch(u){throw console.error("Error adding customer:",u),u}})(e);s(t),r()}catch(zZ){console.error("Error adding customer:",zZ),d("Failed to add customer. Please try again.")}finally{c(!1)}else d("Please fill in all required fields.");else d("Business ID not found. Please try again later.")},children:[(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name *"}),(0,k.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:i.firstName,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),(0,k.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:i.lastName,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),(0,k.jsx)("input",{type:"email",id:"email",name:"email",value:i.email,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,k.jsx)("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,k.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:i.notes,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,k.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,k.jsx)("button",{type:"button",onClick:r,className:"mr-3 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:l,children:l?"Adding...":"Add Customer"})]})]})]})})})};var ty=n(6932);const ny=t=>{let{isOpen:n,onClose:r,customer:s,onCouponAssigned:o}=t;const{user:i}=(0,N.A)(),[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),[f,g]=(0,e.useState)(null);(0,e.useEffect)((()=>{n&&null!==i&&void 0!==i&&i.businessId&&y()}),[n,i]);const y=async()=>{if(null!==i&&void 0!==i&&i.businessId)try{h(!0);const e=await(0,ty.mx)(i.businessId,null,100,!0);l(e)}catch(m){console.error("Error fetching coupons:",m),p("Failed to load coupons. Please try again.")}finally{h(!1)}};return n?(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Assign Coupon to ",s.firstName," ",s.lastName]}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:(0,k.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md",children:m}),f&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md",children:f}),(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c)if(null!==i&&void 0!==i&&i.businessId)try{h(!0),p(null);const e=a.find((e=>e.id===c));if(!e)throw new Error("Selected coupon not found");let t;t=e.endDate instanceof Date?e.endDate:e.endDate&&"object"===typeof e.endDate&&"toDate"in e.endDate?e.endDate.toDate():new Date(e.endDate),await(async(e,t,n,r,s)=>{try{const o=(0,sl.H9)(rl.db,"coupons",t);if((await(0,sl.x7)(o)).exists())await(0,sl.mZ)(o,{distributionCount:(0,sl.GV)(1),updatedAt:sl.Dc.now()});else{console.log("Creating coupon ".concat(t," in main coupons collection"));const e={businessId:n,title:"Coupon ".concat(r),description:"Coupon allocated to customers",type:"percentage",value:10,code:r,startDate:sl.Dc.now(),endDate:sl.Dc.fromDate(s),usageLimit:1,usageCount:0,distributionCount:1,customerLimit:1,firstTimeOnly:!1,birthdayOnly:!1,active:!0,createdAt:sl.Dc.now(),updatedAt:sl.Dc.now()};await(0,sl.BN)(o,e)}const i={customerId:e,couponId:t,businessId:n,code:r,allocated:!0,used:!1,allocatedDate:(0,sl.O5)(),expiryDate:sl.Dc.fromDate(s)},a=await(0,sl.gS)((0,sl.rJ)(rl.db,"customerCoupons"),i);return(0,S.A)({id:a.id},i)}catch(m){throw console.error("Error allocating coupon to customer:",m),m}})(s.id,e.id,i.businessId,e.code,t),g('Coupon "'.concat(e.title,'" has been successfully assigned to ').concat(s.firstName," ").concat(s.lastName)),u(""),o(),setTimeout((()=>{r()}),2e3)}catch(zZ){console.error("Error assigning coupon:",zZ),p("Failed to assign coupon. Please try again.")}finally{h(!1)}else p("Business ID not found. Please try again later.");else p("Please select a coupon to assign")},children:[(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"coupon",className:"block text-sm font-medium text-gray-700",children:"Select Coupon"}),d?(0,k.jsx)("div",{className:"mt-1 py-2 px-3 border border-gray-300 rounded-md bg-gray-50",children:"Loading coupons..."}):0===a.length?(0,k.jsx)("div",{className:"mt-1 py-2 px-3 border border-gray-300 rounded-md bg-gray-50",children:"No active coupons available"}):(0,k.jsxs)("select",{id:"coupon",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:c,onChange:e=>{u(e.target.value)},required:!0,children:[(0,k.jsx)("option",{value:"",children:"-- Select a coupon --"}),a.map((e=>(0,k.jsxs)("option",{value:e.id,children:[e.title," - ",e.code," (","percentage"===e.type?"".concat(e.value,"% off"):"$".concat(e.value," off"),")"]},e.id)))]})]}),c&&(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Coupon Details"}),(()=>{const e=a.find((e=>e.id===c));return e?(0,k.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Code:"})," ",e.code]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Discount:"})," ","percentage"===e.type?"".concat(e.value,"% off"):"fixed"===e.type?"$".concat(e.value," off"):"buyXgetY"===e.type?"Buy ".concat(e.buyQuantity," get ").concat(e.getQuantity):"Free ".concat(e.freeItem)]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Valid until:"})," ",new Date(e.endDate).toLocaleDateString()]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Description:"})," ",e.description]})]}):null})()]})]}),(0,k.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,k.jsx)("button",{type:"button",onClick:r,className:"mr-3 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:d,children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:d||!c||0===a.length,children:d?"Assigning...":"Assign Coupon"})]})]})]})})}):null},ry=e=>{let{customerCount:t,onAddCustomer:n,onAddSampleData:r,loading:s=!1}=e;return(0,k.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white p-6 rounded-lg shadow-md mb-6",children:(0,k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,k.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold",children:0===t?"Welcome to Your Customer Community!":t<5?"Your Customer Community is Growing!":t<20?"You're Building a Wonderful Community!":t<50?"Your Customer Community is Thriving!":"You Have an Amazing Customer Community!"}),(0,k.jsx)("p",{className:"mt-2 opacity-90",children:0===t?"Start building relationships by adding your first customer.":"You're connecting with ".concat(t," ").concat(1===t?"person":"people",".")})]}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsxs)("button",{onClick:n,className:"bg-white text-primary-700 hover:bg-primary-50 px-4 py-2 rounded-md font-medium shadow-sm transition-colors duration-200 flex items-center",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),"Add Customer"]}),0===t&&(0,k.jsx)("button",{onClick:r,disabled:s,className:"bg-primary-500 hover:bg-primary-400 text-white px-4 py-2 rounded-md font-medium shadow-sm transition-colors duration-200 flex items-center",children:s?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Add Sample Data"]})})]})]})})},sy=e=>{let{searchTerm:t,onSearchTermChange:n,onSearch:r,hasLoyaltyProgram:s,customerCount:o}=e;return(0,k.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6 border border-gray-100",children:(0,k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,k.jsx)("div",{className:"w-full md:w-1/2 mb-4 md:mb-0",children:(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r()},className:"flex",children:[(0,k.jsxs)("div",{className:"relative flex-grow",children:[(0,k.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,k.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12 py-3 sm:text-sm border-gray-300 rounded-md",placeholder:"Find someone in your community..."}),t&&(0,k.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,k.jsxs)("button",{type:"button",onClick:()=>n(""),className:"text-gray-400 hover:text-gray-500",children:[(0,k.jsx)("span",{className:"sr-only",children:"Clear search"}),(0,k.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})]})})]}),(0,k.jsx)("button",{type:"submit",className:"ml-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Search"})]})}),(0,k.jsx)("div",{className:"flex items-center space-x-2",children:!s&&o>0&&(0,k.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsxs)("p",{className:"text-sm text-yellow-700",children:["Create a loyalty program to deepen your customer relationships!",(0,k.jsx)("a",{href:"/business/loyalty",className:"font-medium underline text-yellow-700 hover:text-yellow-600 ml-1",children:"Get started"})]})})]})})})]})})},oy=e=>{let{customers:t,hasLoyaltyProgram:n}=e;const r=t.length;if(0===r)return null;const s=t.reduce(((e,t)=>{var n;return e+((null===(n=t.couponStats)||void 0===n?void 0:n.totalAllocated)||0)}),0),o=t.reduce(((e,t)=>{var n;return e+((null===(n=t.couponStats)||void 0===n?void 0:n.totalUsed)||0)}),0),i=s>0?Math.round(o/s*100):0,a=t.filter((e=>e.totalSpent&&e.totalSpent>0)),l=a.length>0?a.reduce(((e,t)=>e+(t.totalSpent||0)),0)/a.length:0,c=n?t.filter((e=>e.loyaltyPoints&&e.loyaltyPoints>0)):[],u=n&&r>0?Math.round(c.length/r*100):0;return(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Community Insights"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,k.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Coupon Engagement"}),(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsxs)("p",{className:"text-3xl font-semibold text-blue-600",children:[i,"%"]}),(0,k.jsx)("p",{className:"ml-2 text-sm text-gray-500",children:"redemption rate"})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[o," of ",s," coupons used"]})]}),i<30&&s>0&&(0,k.jsxs)("div",{className:"mt-3 text-sm text-blue-700",children:[(0,k.jsx)("span",{className:"font-medium",children:"\ud83d\udca1 Tip:"})," Send a friendly reminder to boost redemptions"]}),i>=70&&s>5&&(0,k.jsxs)("div",{className:"mt-3 text-sm text-blue-700",children:[(0,k.jsx)("span",{className:"font-medium",children:"\ud83c\udf1f Amazing!"})," Your customers love your offers"]})]})]})}),(0,k.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Average Spend"}),(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsxs)("p",{className:"text-3xl font-semibold text-green-600",children:["$",l.toFixed(2)]}),(0,k.jsx)("p",{className:"ml-2 text-sm text-gray-500",children:"per customer"})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[a.length," of ",r," customers have made purchases"]})]}),a.length<r/2&&(0,k.jsxs)("div",{className:"mt-3 text-sm text-green-700",children:[(0,k.jsx)("span",{className:"font-medium",children:"\ud83d\udca1 Tip:"})," Offer a welcome discount to first-time buyers"]})]})]})}),(0,k.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Loyalty Program"}),n?(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsxs)("p",{className:"text-3xl font-semibold text-purple-600",children:[u,"%"]}),(0,k.jsx)("p",{className:"ml-2 text-sm text-gray-500",children:"participation"})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[c.length," of ",r," customers earning points"]}),u<50&&(0,k.jsxs)("div",{className:"mt-3 text-sm text-purple-700",children:[(0,k.jsx)("span",{className:"font-medium",children:"\ud83d\udca1 Tip:"})," Remind customers about your loyalty program"]})]}):(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"You haven't set up a loyalty program yet"}),(0,k.jsxs)("a",{href:"/business/loyalty",className:"mt-3 inline-flex items-center text-sm font-medium text-purple-600 hover:text-purple-800",children:["Create a loyalty program",(0,k.jsx)("svg",{className:"ml-1 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})]})})]})]})},iy=e=>{var t,n,r,s,o;let{customer:i,onClick:a,onAssignCoupon:l}=e;const c=(()=>{var e;const t=i.totalVisits||0,n=i.totalSpent||0,r=(null===(e=i.couponStats)||void 0===e?void 0:e.totalUsed)||0;return(Math.min(t/10,1)+Math.min(n/1e3,1)+Math.min(r/5,1))/3})();return(0,k.jsxs)("div",{className:"border rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 p-5 cursor-pointer transform hover:scale-105 ".concat(c>.8?"border-purple-200 bg-gradient-to-br from-purple-50 to-purple-100":c>.6?"border-primary-200 bg-gradient-to-br from-primary-50 to-primary-100":c>.3?"border-blue-200 bg-gradient-to-br from-blue-50 to-blue-100":"border-gray-200 bg-gradient-to-br from-white to-gray-50"),onClick:a,children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsxs)("div",{className:"w-14 h-14 rounded-full ".concat(c>.8?"bg-gradient-to-br from-purple-500 to-purple-600":c>.6?"bg-gradient-to-br from-primary-500 to-primary-600":c>.3?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-gray-500 to-gray-600"," flex items-center justify-center text-white font-bold text-lg mr-4 shadow-md"),children:[i.firstName.charAt(0),i.lastName.charAt(0)]}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("h3",{className:"font-semibold text-gray-900 text-lg",children:[i.firstName," ",i.lastName]}),(0,k.jsxs)("div",{className:"flex items-center mt-1",children:[(0,k.jsx)("span",{className:"text-sm text-gray-800 font-medium",children:c>.8?"Loyal Champion":c>.6?"Regular Customer":c>.3?"Growing Relationship":c>0?"New Connection":"New Customer"}),(0,k.jsx)("span",{className:"ml-2 text-lg",children:c>.8?"\ud83d\udc8e":c>.6?"\u2b50":c>.3?"\ud83c\udf31":"\ud83d\udc4b"})]})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("span",{className:"text-xs font-medium text-gray-800",children:"Relationship Strength"}),(0,k.jsxs)("span",{className:"text-xs text-gray-700 font-medium",children:[Math.round(100*c),"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(c>.8?"bg-gradient-to-r from-purple-400 to-purple-600":c>.6?"bg-gradient-to-r from-primary-400 to-primary-600":c>.3?"bg-gradient-to-r from-blue-400 to-blue-600":"bg-gradient-to-r from-gray-400 to-gray-600"),style:{width:"".concat(100*c,"%")}})})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,k.jsxs)("div",{className:"text-center p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-white/50",children:[(0,k.jsx)("p",{className:"text-xs text-gray-700 font-medium",children:"Visits"}),(0,k.jsx)("p",{className:"font-bold text-lg text-gray-900",children:i.totalVisits||0})]}),(0,k.jsxs)("div",{className:"text-center p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-white/50",children:[(0,k.jsx)("p",{className:"text-xs text-gray-700 font-medium",children:"Spent"}),(0,k.jsxs)("p",{className:"font-bold text-lg text-gray-900",children:["$",(null===(t=i.totalSpent)||void 0===t?void 0:t.toFixed(2))||"0.00"]})]})]}),(0,k.jsxs)("div",{className:"mb-4 p-3 bg-white/70 backdrop-blur-sm rounded-lg border border-white/50",children:[(0,k.jsx)("p",{className:"text-xs text-gray-700 font-medium mb-1",children:"Last Visit"}),(0,k.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:(()=>{if(!i.lastVisit)return"Never visited";const e=new Date(i.lastVisit),t=new Date,n=Math.abs(t.getTime()-e.getTime()),r=Math.ceil(n/864e5);return 1===r?"Yesterday":r<7?"".concat(r," days ago"):r<30?"".concat(Math.floor(r/7)," weeks ago"):"".concat(Math.floor(r/30)," months ago")})()})]}),(0,k.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50 mb-4",children:[(0,k.jsx)("p",{className:"text-xs text-gray-700 font-medium mb-2",children:"Coupon Engagement"}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,k.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(((null===(n=i.couponStats)||void 0===n?void 0:n.totalUsed)||0)/Math.max((null===(r=i.couponStats)||void 0===r?void 0:r.totalAllocated)||1,1)*100,100),"%")}})}),(0,k.jsxs)("div",{className:"flex justify-between text-xs mt-2",children:[(0,k.jsxs)("span",{className:"text-green-600 font-medium",children:[(null===(s=i.couponStats)||void 0===s?void 0:s.totalUsed)||0," used"]}),(0,k.jsxs)("span",{className:"text-gray-700 font-medium",children:[(null===(o=i.couponStats)||void 0===o?void 0:o.totalAllocated)||0," total"]})]})]}),(0,k.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,k.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"flex-1 text-xs text-primary-600 hover:text-primary-800 font-medium py-2 px-3 rounded-lg hover:bg-primary-50 transition-colors duration-200",children:"\ud83d\udcac Message"}),l&&(0,k.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"flex-1 text-xs text-secondary-600 hover:text-secondary-800 font-medium py-2 px-3 rounded-lg hover:bg-secondary-50 transition-colors duration-200",children:"\ud83c\udf81 Assign Coupon"})]})]})},ay=e=>{let{customers:t,loading:n,onViewCustomer:r,onAssignCoupon:s,hasMore:o,onLoadMore:i,isLoadingMore:a,onAddFirstCustomer:l}=e;return n&&0===t.length?(0,k.jsx)("div",{className:"bg-gradient-to-br from-white to-primary-50 p-8 rounded-xl shadow-sm border border-primary-100 mb-6",children:(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600 mb-6"}),(0,k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,k.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full animate-pulse"})})]}),(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Building your customer community..."}),(0,k.jsx)("p",{className:"text-gray-700 text-center max-w-md",children:"We're gathering all your customer relationships and preparing something beautiful for you."}),(0,k.jsxs)("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-700",children:[(0,k.jsxs)("div",{className:"flex space-x-1",children:[(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce"}),(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,k.jsx)("span",{children:"Loading your community"})]})]})}):0===t.length?(0,k.jsxs)("div",{className:"bg-gradient-to-br from-white via-primary-50 to-secondary-50 p-8 rounded-xl shadow-sm border border-primary-100 mb-6 relative overflow-hidden",children:[(0,k.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary-100 rounded-full opacity-20 transform translate-x-16 -translate-y-16"}),(0,k.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-secondary-100 rounded-full opacity-20 transform -translate-x-12 translate-y-12"}),(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center relative z-10",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-primary-100 to-primary-200 p-6 rounded-full mb-6 shadow-lg",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,k.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"Your customer community is waiting to bloom! \ud83c\udf31"}),(0,k.jsx)("p",{className:"text-gray-800 mb-2 max-w-lg text-lg",children:"Every great business starts with one amazing customer relationship."}),(0,k.jsx)("p",{className:"text-gray-700 mb-8 max-w-md",children:"Add your first customer and watch your community grow into something beautiful."}),(0,k.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,k.jsxs)("button",{onClick:l,className:"group inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 transform hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 group-hover:animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),"Start Building Your Community"]})}),(0,k.jsx)("div",{className:"mt-8 text-sm text-gray-700",children:(0,k.jsx)("p",{children:"\ud83d\udca1 Tip: You can also import customers from your contacts or add sample data to get started"})})]})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Your Growing Community"}),(0,k.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-green-200 px-3 py-1 rounded-full",children:(0,k.jsxs)("span",{className:"text-green-800 text-sm font-medium",children:[t.length," members"]})})]}),(0,k.jsx)("div",{className:"text-sm text-gray-700 font-medium",children:"Building relationships, one customer at a time \u2728"})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(((e,t)=>(0,k.jsx)("div",{className:"transform transition-all duration-300 hover:scale-105 fade-in-up",style:{animationDelay:"".concat(50*t,"ms")},children:(0,k.jsx)(iy,{customer:e,onClick:()=>r(e),onAssignCoupon:()=>s(e)})},e.id)))}),o&&(0,k.jsxs)("div",{className:"mt-8 text-center",children:[(0,k.jsx)("button",{onClick:i,disabled:a,className:"group inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-900 bg-white hover:bg-gray-50 hover:border-primary-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,k.jsx)("span",{className:"text-primary-600",children:"Loading more amazing customers..."})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 group-hover:animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Discover More Community Members"]})}),(0,k.jsx)("p",{className:"text-xs text-gray-700 mt-2 font-medium",children:a?"Finding more wonderful people in your community...":"There are more customers to discover!"})]})]}),(0,k.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes fadeInUp {\n            from {\n              opacity: 0;\n              transform: translateY(20px);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n          \n          .fade-in-up {\n            animation: fadeInUp 0.6s ease-out forwards;\n          }\n        "}})]})},ly=t=>{var n,r,s,o,i,a;let{customer:l,onCustomerUpdated:c,onClose:u,hasLoyaltyProgram:d,onAssignCoupon:h}=t;const[m,p]=(0,e.useState)("relationship"),f=Math.floor(((new Date).getTime()-new Date(l.joinDate).getTime())/864e5),g=(()=>{var e;const t=l.totalVisits||0,n=l.totalSpent||0,r=(null===(e=l.couponStats)||void 0===e?void 0:e.totalUsed)||0;return(Math.min(t/10,1)+Math.min(n/1e3,1)+Math.min(r/5,1))/3})();return(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden max-w-4xl w-full",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 p-6 text-white",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsxs)("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center text-primary-700 font-bold text-xl mr-4",children:[l.firstName.charAt(0),l.lastName.charAt(0)]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("h2",{className:"text-2xl font-bold",children:[l.firstName," ",l.lastName]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-primary-100",children:g>.8?"Loyal Champion":g>.6?"Regular Customer":g>.3?"Growing Relationship":g>0?"New Connection":"New Customer"}),(0,k.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,k.jsxs)("span",{className:"text-primary-100",children:[f," days in your community"]})]})]})]}),(0,k.jsx)("button",{onClick:u,className:"text-white hover:text-primary-100",children:(0,k.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"bg-white bg-opacity-10 rounded-lg p-3",children:[(0,k.jsx)("p",{className:"text-primary-100 text-sm",children:"Total Spent"}),(0,k.jsxs)("p",{className:"text-2xl font-bold",children:["$",(null===(n=l.totalSpent)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,k.jsxs)("div",{className:"bg-white bg-opacity-10 rounded-lg p-3",children:[(0,k.jsx)("p",{className:"text-primary-100 text-sm",children:"Visits"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:l.totalVisits||0})]}),(0,k.jsxs)("div",{className:"bg-white bg-opacity-10 rounded-lg p-3",children:[(0,k.jsx)("p",{className:"text-primary-100 text-sm",children:"Coupons Used"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:(null===(r=l.couponStats)||void 0===r?void 0:r.totalUsed)||0})]})]}),(0,k.jsx)("div",{className:"mt-6 border-b border-primary-500",children:(0,k.jsxs)("nav",{className:"flex space-x-6",children:[(0,k.jsx)("button",{className:"".concat("relationship"===m?"border-white text-white":"border-transparent text-primary-200 hover:text-white"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm"),onClick:()=>p("relationship"),children:"Relationship"}),(0,k.jsx)("button",{className:"".concat("details"===m?"border-white text-white":"border-transparent text-primary-200 hover:text-white"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm"),onClick:()=>p("details"),children:"Details"}),d&&(0,k.jsx)("button",{className:"".concat("loyalty"===m?"border-white text-white":"border-transparent text-primary-200 hover:text-white"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm"),onClick:()=>p("loyalty"),children:"Loyalty"}),(0,k.jsx)("button",{className:"".concat("coupons"===m?"border-white text-white":"border-transparent text-primary-200 hover:text-white"," whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm"),onClick:()=>p("coupons"),children:"Coupons"})]})})]}),(0,k.jsxs)("div",{className:"p-6",children:["relationship"===m&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Relationship Strength"}),(0,k.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,k.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Relationship Score"}),(0,k.jsxs)("span",{className:"text-sm font-medium",children:[Math.round(100*g),"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-300 rounded-full h-2.5 mb-4",children:(0,k.jsx)("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:"".concat(100*g,"%")}})}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Visits"}),(0,k.jsx)("div",{className:"w-full bg-gray-300 rounded-full h-1.5 mt-1",children:(0,k.jsx)("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"".concat(Math.min((l.totalVisits||0)/10*100,100),"%")}})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Spending"}),(0,k.jsx)("div",{className:"w-full bg-gray-300 rounded-full h-1.5 mt-1",children:(0,k.jsx)("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:"".concat(Math.min((l.totalSpent||0)/1e3*100,100),"%")}})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Engagement"}),(0,k.jsx)("div",{className:"w-full bg-gray-300 rounded-full h-1.5 mt-1",children:(0,k.jsx)("div",{className:"bg-purple-500 h-1.5 rounded-full",style:{width:"".concat(Math.min(((null===(s=l.couponStats)||void 0===s?void 0:s.totalUsed)||0)/5*100,100),"%")}})})]})]})]})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Customer Journey"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute top-0 bottom-0 left-3 w-0.5 bg-gray-200"}),(0,k.jsxs)("ul",{className:"space-y-4 relative",children:[(0,k.jsxs)("li",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-primary-600 flex items-center justify-center text-white z-10",children:"1"}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("p",{className:"font-medium",children:"Joined your community"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:new Date(l.joinDate).toLocaleDateString()})]})]}),(l.totalVisits||0)>0&&(0,k.jsxs)("li",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-blue-600 flex items-center justify-center text-white z-10",children:"2"}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("p",{className:"font-medium",children:"First visit to your business"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:l.lastVisit?new Date(l.lastVisit).toLocaleDateString():"Date not recorded"})]})]}),((null===(o=l.couponStats)||void 0===o?void 0:o.totalAllocated)||0)>0&&(0,k.jsxs)("li",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-green-600 flex items-center justify-center text-white z-10",children:(l.totalVisits||0)>0?3:2}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("p",{className:"font-medium",children:"Received first coupon"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Date not recorded"})]})]}),((null===(i=l.couponStats)||void 0===i?void 0:i.totalUsed)||0)>0&&(0,k.jsxs)("li",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-6 w-6 rounded-full bg-purple-600 flex items-center justify-center text-white z-10",children:((l.totalVisits||0)>0?1:0)+(((null===(a=l.couponStats)||void 0===a?void 0:a.totalAllocated)||0)>0?1:0)+2}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("p",{className:"font-medium",children:"Redeemed first coupon"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Date not recorded"})]})]})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Relationship Growth Opportunities"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("button",{className:"flex items-center p-4 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors",onClick:()=>h(l),children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 mr-3",children:"\ud83c\udf81"}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("p",{className:"font-medium",children:"Send a Special Offer"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Reward loyalty with a personalized coupon"})]})]}),(0,k.jsxs)("button",{className:"flex items-center p-4 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors",children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3",children:"\ud83d\udcac"}),(0,k.jsxs)("div",{className:"text-left",children:[(0,k.jsx)("p",{className:"font-medium",children:"Send a Message"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Reach out with a personal communication"})]})]})]})]})]}),"details"===m&&(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,k.jsx)("p",{className:"font-medium",children:l.email})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,k.jsx)("p",{className:"font-medium",children:l.phone||"Not provided"})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Birthday"}),(0,k.jsx)("p",{className:"font-medium",children:l.birthdate?new Date(l.birthdate).toLocaleDateString():"Not provided"})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tags & Notes"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Customer Tags"}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:l.tags&&l.tags.length>0?l.tags.map(((e,t)=>(0,k.jsx)("span",{className:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full",children:e},t))):(0,k.jsx)("p",{className:"text-sm text-gray-400",children:"No tags added yet"})})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Notes"}),(0,k.jsx)("p",{className:"text-sm mt-1",children:l.notes||"No notes added yet"})]})]})]})]})})]})]})},cy=e=>{let{customers:t,totalRedemptions:n}=e;if(0===t.length)return null;const r=[{id:"first-10-customers",title:"Growing Community",description:"Add 10 customers to your community",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),isCompleted:t.length>=10,progress:100*Math.min(t.length/10,1),target:10,currentValue:t.length},{id:"first-50-customers",title:"Thriving Community",description:"Grow your community to 50 customers",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),isCompleted:t.length>=50,progress:100*Math.min(t.length/50,1),target:50,currentValue:t.length},{id:"first-10-redemptions",title:"Coupon Success",description:"Achieve 10 coupon redemptions",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})}),isCompleted:n>=10,progress:100*Math.min(n/10,1),target:10,currentValue:n},{id:"first-50-redemptions",title:"Redemption Champion",description:"Achieve 50 coupon redemptions",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),isCompleted:n>=50,progress:100*Math.min(n/50,1),target:50,currentValue:n}].filter((e=>!e.isCompleted||e.isCompleted&&"first-10-customers"===e.id||e.isCompleted&&"first-10-redemptions"===e.id));return 0===r.length?null:(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Your Business Journey"}),(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((e=>(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"p-3 rounded-full ".concat(e.isCompleted?"bg-primary-100 text-primary-600":"bg-gray-100 text-gray-600"),children:e.icon}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),e.isCompleted&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Completed"})]}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),(0,k.jsx)("div",{className:"mt-2",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,k.jsx)("div",{className:"h-2.5 rounded-full ".concat(e.isCompleted?"bg-green-500":"bg-primary-500"),style:{width:"".concat(e.progress,"%")}})}),(0,k.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:[e.currentValue,"/",e.target]})]})})]})]},e.id)))}),t.length>0&&t.length<10&&(0,k.jsx)("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4 rounded",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,k.jsx)("span",{className:"font-medium",children:"Tip:"})," Import your contacts or add customers manually to grow your community faster."]})})]})})]})]})},uy=t=>{let{state:n,message:r,interactionCount:s,onClick:o}=t;const[i,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1);(0,e.useEffect)((()=>{a(!0);const e=setTimeout((()=>{a(!1)}),8e3);return()=>clearTimeout(e)}),[n,r]),(0,e.useEffect)((()=>{if("excited"===n||"happy"===n){c(!0);const e=setTimeout((()=>{c(!1)}),2e3);return()=>clearTimeout(e)}}),[n]);return(0,k.jsxs)("div",{className:"relative",children:[i&&(0,k.jsxs)("div",{className:"absolute bottom-full right-0 mb-3 w-64 transform transition-all duration-300 ease-out origin-bottom-right",style:{opacity:i?1:0,transform:i?"scale(1)":"scale(0.8)"},children:[(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-4 border border-gray-200",children:(0,k.jsx)("p",{className:"text-sm text-gray-700",children:r})}),(0,k.jsx)("div",{className:"absolute bottom-0 right-6 transform translate-y-1/2 rotate-45 w-4 h-4 bg-white border-r border-b border-gray-200"})]}),(0,k.jsx)("button",{onClick:()=>{o(),a(!0)},className:"w-16 h-16 rounded-full bg-white shadow-lg flex items-center justify-center text-2xl border-2 border-primary-200 hover:border-primary-400 transition-all duration-300 ".concat((()=>{if(!l)return"";switch(n){case"excited":return"animate-bounce";case"happy":return"animate-pulse";default:return""}})()),style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},children:(()=>{switch(n){case"welcome":default:return"\ud83d\udc4b";case"thinking":return"\ud83e\udd14";case"happy":return"\ud83d\ude0a";case"excited":return"\ud83c\udf89";case"idle":return"\ud83d\udc40"}})()}),s>0&&(0,k.jsx)("div",{className:"absolute -top-1 -right-1 bg-primary-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Math.min(s,9)})]})},dy=()=>{const{user:t,isLoading:n}=(0,N.A)(),[r,s]=(0,e.useState)(""),[o,i]=(0,e.useState)([]),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(!0),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)(null),[w,j]=(0,e.useState)(!1),[C,A]=(0,e.useState)(!1),[E,_]=(0,e.useState)(!1),[I,T]=(0,e.useState)(!1),[P,R]=(0,e.useState)(""),[D,M]=(0,e.useState)(0),[L,O]=(0,e.useState)("welcome"),[F,B]=(0,e.useState)("Welcome to your customer community! Click me for tips."),[U,z]=(0,e.useState)(0),[V,q]=(0,e.useState)(0);let W=(null===t||void 0===t?void 0:t.businessId)||(null===t||void 0===t?void 0:t.currentBusinessId);!W&&"business"===(null===t||void 0===t?void 0:t.role)&&null!==t&&void 0!==t&&t.uid&&(W=t.uid,console.log("Using user ID as business ID for EmotionalCustomers:",W)),(0,e.useEffect)((()=>{if(!n)return t&&!W?(l(!1),u("No business profile found. Please contact support if this issue persists."),O("thinking"),void B("Hmm, I can't find your business profile. Let's get this sorted out!")):void(t?W&&(G(),H()):l(!0))}),[t,W,n]),(0,e.useEffect)((()=>{D>0&&o.length>D&&(10!==o.length&&25!==o.length&&50!==o.length&&100!==o.length||(R("Congratulations! You now have ".concat(o.length," customers in your community!")),T(!0),O("excited"),B("Great job! ".concat(o.length," customers in your community!")),setTimeout((()=>{T(!1),O("idle")}),5e3))),M(o.length)}),[o.length]);const H=async()=>{if(W)try{const e=await Kg(W);j(!!e)}catch(c){console.error("Error checking loyalty program:",c)}},G=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(W)try{l(!0),u(null);const t=await Hg(W,e?null:d,20,r),n=await Promise.all(t.customers.map((async e=>{try{const t=await(async e=>{try{const t=(0,sl.P)((0,sl.rJ)(rl.db,"customerCoupons"),(0,sl._M)("customerId","==",e)),n=await(0,sl.GG)(t);let r=0,s=0;return n.forEach((e=>{const t=e.data();r++,t.used&&s++})),{totalAllocated:r,totalUsed:s,unusedCoupons:r-s}}catch(c){throw console.error("Error getting customer coupon stats:",c),c}})(e.id);return(0,S.A)((0,S.A)({},e),{},{couponStats:t})}catch(c){return console.error("Error fetching coupon stats for customer ".concat(e.id,":"),c),(0,S.A)((0,S.A)({},e),{},{couponStats:{totalAllocated:0,totalUsed:0,unusedCoupons:0}})}})));i(e?n:e=>[...e,...n]),h(t.lastVisible),p(20===t.customers.length),0===n.length&&e?(O("thinking"),B("Looks like you don't have any customers yet. Would you like to add some?"),z(1)):n.length>0&&e&&(O("happy"),B("You have ".concat(n.length," customers in your community!"))),q(0)}catch(c){console.error("Error fetching customers:",c),u("There was a problem loading your customers. Please try again."),O("thinking"),B("Oops! I'm having trouble loading your customers. Let's try again!")}finally{l(!1)}},K=async()=>{if(W&&!E)try{_(!0),O("thinking"),B("Adding some sample customers for you..."),await(async()=>{throw console.warn("Sample data functionality has been removed. All data must come from Firebase Firestore."),new Error("Sample data functionality has been disabled. All data must come from Firebase Firestore.")})(),await G(!0),R("Great job! You added sample customers to see how your dashboard works!"),T(!0),O("excited"),B("Excellent! Now you can see how your customer community looks!"),setTimeout((()=>{T(!1),O("idle")}),5e3)}catch(c){console.error("Error adding sample customers:",c),u("There was a problem adding sample customers. Please try again."),O("thinking"),B("Hmm, there was a problem adding sample customers. Try again?")}finally{_(!1)}},Y=()=>{q((e=>e+1)),u(null),G(!0)},Q=e=>{b(e),v(!0)},$=o.reduce(((e,t)=>{var n;return e+((null===(n=t.couponStats)||void 0===n?void 0:n.totalUsed)||0)}),0),J=o.filter((e=>"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase())||e.phone&&e.phone.toLowerCase().includes(r.toLowerCase())));return n||a&&0===o.length&&!c?(0,k.jsx)("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-100 mb-6",children:(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600 mx-auto"}),(0,k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,k.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full animate-pulse"})})]}),(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mt-6 mb-2",children:"Building your customer community..."}),(0,k.jsx)("p",{className:"text-gray-500 max-w-md",children:"We're gathering all your customer relationships and preparing your dashboard with care."}),(0,k.jsxs)("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-400",children:[(0,k.jsxs)("div",{className:"flex space-x-1",children:[(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce"}),(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,k.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,k.jsx)("span",{children:"Loading your community"})]})]})}):c&&!a?(0,k.jsx)("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-100 mb-6",children:(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,k.jsx)("div",{className:"bg-orange-100 p-4 rounded-full mb-6",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"We're having trouble connecting"}),(0,k.jsx)("p",{className:"text-gray-500 mb-6 max-w-md",children:c}),(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,k.jsxs)("button",{onClick:Y,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-200",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Try Again"]}),V<2&&(0,k.jsxs)("button",{onClick:K,className:"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Sample Data"]})]}),V>=2&&(0,k.jsx)("p",{className:"text-sm text-gray-400 mt-4",children:"Still having trouble? Please contact support for assistance."})]})}):(0,k.jsxs)("div",{className:"relative",children:[I&&(0,k.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,k.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white px-8 py-6 rounded-xl shadow-2xl animate-bounce transform scale-110",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udf89"}),(0,k.jsx)("h3",{className:"text-xl font-bold",children:P})]})})}),(0,k.jsx)(ry,{customerCount:o.length,onAddCustomer:()=>g(!0),onAddSampleData:K,loading:E}),(0,k.jsx)(sy,{searchTerm:r,onSearchTermChange:s,onSearch:()=>{G(!0)},hasLoyaltyProgram:w,customerCount:o.length}),(0,k.jsx)(oy,{customers:J,hasLoyaltyProgram:w}),(0,k.jsx)(ay,{customers:J,loading:a,onViewCustomer:e=>{b(e),A(!0)},onAssignCoupon:Q,hasMore:m,onLoadMore:()=>{!a&&m&&G(!1)},isLoadingMore:a&&o.length>0,onAddFirstCustomer:()=>g(!0)}),(0,k.jsx)(cy,{customers:J,totalRedemptions:$}),(0,k.jsx)(uy,{state:L,message:F,interactionCount:U,onClick:()=>{z((e=>e+1));const e=["\ud83d\udca1 Tip: Use the search bar to quickly find specific customers!","\ud83c\udfaf Pro tip: Assign coupons to reward your loyal customers!","\ud83d\udcca Did you know? You can track customer engagement in the insights section!","\ud83c\udf1f Keep building relationships - every customer matters!","\ud83d\udc9d Happy customers become your best advocates!","\ud83d\ude80 Your customer community is the heart of your business!"];B(e[(U-1)%e.length]),O("happy"),setTimeout((()=>{O("idle"),B("Click me anytime for more tips!")}),4e3)}}),f&&(0,k.jsx)(ey,{isOpen:f,onClose:()=>g(!1),onCustomerAdded:e=>{i((t=>[(0,S.A)((0,S.A)({},e),{},{couponStats:{totalAllocated:0,totalUsed:0,unusedCoupons:0}}),...t])),0===o.length&&(R("Congratulations! You added your first customer!"),T(!0),O("excited"),B("Fantastic! Your first customer is here!"),setTimeout((()=>{T(!1),O("happy")}),5e3))}}),y&&x&&(0,k.jsx)(ny,{isOpen:y,onClose:()=>v(!1),customer:x,onCouponAssigned:()=>{G(!0)}}),C&&x&&(0,k.jsx)(ly,{customer:x,onClose:()=>A(!1),onCustomerUpdated:e=>{i((t=>t.map((t=>t.id===e.id?(0,S.A)((0,S.A)({},t),e):t)))),x&&x.id===e.id&&b((t=>t?(0,S.A)((0,S.A)({},t),e):null))},onAssignCoupon:Q,hasLoyaltyProgram:w})]})},hy=()=>(0,k.jsx)(dy,{}),my=()=>{const{user:t}=(0,N.A)(),n=(0,i.Zp)(),[r,s]=(0,e.useState)([]),[o,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId)try{a(!0);const e=await Hg(t.businessId);s(e.customers||[])}catch(zZ){console.error("Error fetching customers:",zZ),c("Failed to load customers")}finally{a(!1)}else a(!1)})()}),[null===t||void 0===t?void 0:t.businessId]);const u=()=>{n("/business/customers")};return o?(0,k.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,k.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,k.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"}),(0,k.jsx)("p",{className:"ml-3 text-gray-600 animate-pulse",children:"Loading customers..."})]})})}):l?(0,k.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,k.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,k.jsxs)("div",{className:"p-6 bg-red-50 border border-red-200 rounded-lg",children:[(0,k.jsx)("h3",{className:"text-red-800 font-semibold",children:"Error Loading Customers"}),(0,k.jsx)("p",{className:"text-red-600 mt-2",children:l}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})})}):(0,k.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:(0,k.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,k.jsxs)("button",{onClick:()=>{n("/business/dashboard/simple")},className:"mb-4 flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]}),(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Customer Connections"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Manage and connect with your valued customers"})]}),(0,k.jsx)("div",{className:"mb-6",children:(0,k.jsxs)("button",{onClick:u,className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3 rounded-lg font-semibold hover:from-amber-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Customer"]})}),r.length>0?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,k.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b",children:(0,k.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Your Customers (",r.length,")"]})}),(0,k.jsx)("div",{className:"divide-y divide-gray-200",children:r.map((e=>(0,k.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:e.firstName?e.firstName.charAt(0).toUpperCase():"C"}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.firstName||e.lastName||"Unknown Customer"}),(0,k.jsx)("p",{className:"text-gray-600",children:e.email||e.phone||"No contact info"}),e.couponStats&&(0,k.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:[e.couponStats.totalUsed," coupons redeemed"]})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Active"}),(0,k.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})})]})]})},e.id)))})]}):(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[(0,k.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-100 to-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,k.jsx)("svg",{className:"w-12 h-12 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,k.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Start Building Relationships"}),(0,k.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Connect with your customers by creating personalized coupons and offers. Your first customer connection is just a click away!"}),(0,k.jsx)("button",{onClick:u,className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-8 py-3 rounded-lg font-semibold hover:from-amber-600 hover:to-orange-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Add Your First Customer"})]})]})})},py=t=>{let{onSave:n,onCancel:r,programId:s,initialData:o}=t;const[i,a]=(0,e.useState)(o||{name:"",description:"",pointsCost:100,visitsCost:5,type:"discount",discountType:"percentage",discountValue:10,freeItem:"",customDescription:"",active:!0}),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),h=e=>{const{name:t,value:n}=e.target;a("pointsCost"===t||"visitsCost"===t||"discountValue"===t?e=>(0,S.A)((0,S.A)({},e),{},{[t]:parseFloat(n)||0}):e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))};return(0,k.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0),d(null);try{const e=(0,S.A)((0,S.A)({},i),{},{programId:s,active:i.active||!1});await n(e)}catch(zZ){d("Failed to save reward. Please try again."),console.error("Error saving loyalty reward:",zZ)}finally{c(!1)}},className:"space-y-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:o?"Edit Reward":"Add New Reward"}),u&&(0,k.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-md mb-4",children:u}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Name *"}),(0,k.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:h,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 10% Off Purchase"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,k.jsx)("textarea",{id:"description",name:"description",value:i.description,onChange:h,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe the reward"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Type *"}),(0,k.jsxs)("select",{id:"type",name:"type",value:i.type,onChange:h,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,k.jsx)("option",{value:"discount",children:"Discount"}),(0,k.jsx)("option",{value:"freeItem",children:"Free Item"}),(0,k.jsx)("option",{value:"custom",children:"Custom Reward"})]})]}),"discount"===i.type&&(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"discountType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,k.jsxs)("select",{id:"discountType",name:"discountType",value:i.discountType,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,k.jsx)("option",{value:"percentage",children:"Percentage"}),(0,k.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"discountValue",className:"block text-sm font-medium text-gray-700 mb-1",children:"percentage"===i.discountType?"Percentage (%)":"Amount ($)"}),(0,k.jsx)("input",{type:"number",id:"discountValue",name:"discountValue",value:i.discountValue,onChange:h,min:"0",step:"percentage"===i.discountType?"1":"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),"freeItem"===i.type&&(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"freeItem",className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Item Description"}),(0,k.jsx)("input",{type:"text",id:"freeItem",name:"freeItem",value:i.freeItem,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Free Coffee"})]}),"custom"===i.type&&(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"customDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Reward Description"}),(0,k.jsx)("textarea",{id:"customDescription",name:"customDescription",value:i.customDescription,onChange:h,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe the custom reward"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"pointsCost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Cost"}),(0,k.jsx)("input",{type:"number",id:"pointsCost",name:"pointsCost",value:i.pointsCost,onChange:h,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"visitsCost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Visits Required"}),(0,k.jsx)("input",{type:"number",id:"visitsCost",name:"visitsCost",value:i.visitsCost,onChange:h,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"active",name:"active",checked:i.active,onChange:e=>{const{name:t,checked:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700",children:"Active"})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",disabled:l,children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:l,children:l?"Saving...":"Save Reward"})]})]})},fy=t=>{let{rewards:n,onEdit:r,onDelete:s}=t;const[o,i]=(0,e.useState)(null),[a,l]=(0,e.useState)(!1),c=async e=>{l(!0);try{await(async e=>{try{const t=(0,sl.H9)(rl.db,"loyaltyRewards",e);return await(0,sl.kd)(t),!0}catch(t){throw console.error("Error deleting loyalty reward:",t),t}})(e),s(e),i(null)}catch(t){console.error("Error deleting reward:",t)}finally{l(!1)}};return 0===n.length?(0,k.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,k.jsx)("p",{className:"text-gray-500",children:"No rewards added yet."}),(0,k.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Add rewards to your loyalty program to encourage customer participation."})]}):(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium",children:"Program Rewards"}),(0,k.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"Reward"}),(0,k.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Type"}),(0,k.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Cost"}),(0,k.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,k.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,k.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,k.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:n.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm",children:[(0,k.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,k.jsx)("div",{className:"text-gray-500",children:e.description})]}),(0,k.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:["discount"===e.type&&(0,k.jsx)("span",{children:"percentage"===e.discountType?"".concat(e.discountValue,"% off"):"$".concat(e.discountValue," off")}),"freeItem"===e.type&&(0,k.jsx)("span",{children:e.freeItem}),"custom"===e.type&&(0,k.jsx)("span",{children:e.customDescription})]}),(0,k.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.pointsCost&&(0,k.jsxs)("div",{children:[e.pointsCost," points"]}),e.visitsCost&&(0,k.jsxs)("div",{children:[e.visitsCost," visits"]})]}),(0,k.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:(0,k.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.active?"Active":"Inactive"})}),(0,k.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium",children:o===e.id?(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("button",{onClick:()=>c(e.id),disabled:a,className:"text-red-600 hover:text-red-900",children:a?"Deleting...":"Confirm"}),(0,k.jsx)("button",{onClick:()=>i(null),className:"text-gray-600 hover:text-gray-900",children:"Cancel"})]}):(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("button",{onClick:()=>r(e),className:"text-primary-600 hover:text-primary-900",children:"Edit"}),(0,k.jsx)("button",{onClick:()=>i(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)))})]})})]})},gy=t=>{let{program:n,rewards:r,onRewardsChange:s}=t;const[o,i]=(0,e.useState)(!1),[a,l]=(0,e.useState)(null);return(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:n.name}),(0,k.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(n.active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:n.active?"Active":"Draft"})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Program Details"}),(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Program Type"}),(0,k.jsx)("p",{className:"font-medium capitalize",children:n.type})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Description"}),(0,k.jsx)("p",{children:n.description||"No description provided"})]})]}),"points"===n.type&&(0,k.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Points Per $1 Spent"}),(0,k.jsx)("p",{className:"font-medium",children:n.pointsPerAmount||0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Value Per Point"}),(0,k.jsxs)("p",{className:"font-medium",children:["$",n.amountPerPoint||0]})]})]}),"visits"===n.type&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Visits Required for Reward"}),(0,k.jsx)("p",{className:"font-medium",children:n.visitsRequired||0})]}),"tiered"===n.type&&n.tiers&&n.tiers.length>0&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Tiers"}),(0,k.jsx)("div",{className:"space-y-2",children:n.tiers.map(((e,t)=>(0,k.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("p",{className:"font-medium",children:e.name}),(0,k.jsxs)("p",{children:[e.threshold," points"]})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-600",children:[e.multiplier,"x points multiplier"]}),e.benefits&&e.benefits.length>0&&(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Benefits:"}),(0,k.jsx)("ul",{className:"text-sm list-disc list-inside",children:e.benefits.map(((e,t)=>(0,k.jsx)("li",{children:e},t)))})]})]},e.id||t)))})]})]})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium",children:"Rewards"}),(0,k.jsx)("button",{onClick:()=>{l(null),i(!0)},className:"px-3 py-1.5 bg-primary-600 text-white text-sm rounded hover:bg-primary-700",children:"Add Reward"})]}),o?(0,k.jsx)("div",{className:"bg-gray-50 p-4 rounded-md mb-4",children:(0,k.jsx)(py,{programId:n.id,onSave:a?async e=>{if(a)try{await(async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"loyaltyRewards",e),{id:r}=t,s=E(t,Yg);return await(0,sl.mZ)(n,s),!0}catch(n){throw console.error("Error updating loyalty reward:",n),n}})(a.id,e);const t=r.map((t=>t.id===a.id?(0,S.A)((0,S.A)({},e),{},{id:a.id}):t));s(t),i(!1),l(null)}catch(t){console.error("Error updating reward:",t)}}:async e=>{try{const t=await(async e=>{try{const t=(0,sl.H9)((0,sl.rJ)(rl.db,"loyaltyRewards"));return await(0,sl.BN)(t,e),(0,S.A)((0,S.A)({},e),{},{id:t.id})}catch(t){throw console.error("Error adding loyalty reward:",t),t}})(e);s([...r,t]),i(!1),l(null)}catch(t){console.error("Error adding reward:",t)}},onCancel:()=>{i(!1),l(null)},initialData:a||void 0})}):(0,k.jsx)(fy,{rewards:r,onEdit:e=>{l(e),i(!0)},onDelete:e=>{const t=r.filter((t=>t.id!==e));s(t)}})]})]})},yy=e=>{let{activeTab:t,onTabChange:n}=e;return(0,k.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,k.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,k.jsx)("button",{className:"".concat("active"===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),onClick:()=>n("active"),children:"Active Programs"}),(0,k.jsx)("button",{className:"".concat("draft"===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),onClick:()=>n("draft"),children:"Drafts"}),(0,k.jsx)("button",{className:"".concat("archived"===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),onClick:()=>n("archived"),children:"Archived"})]})})},vy=e=>{let{program:t,onEdit:n,onViewDetails:r,onManageRewards:s}=e;return(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),(0,k.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.active?"Active":"Draft"})]}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t.type}),(0,k.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:t.description}),(0,k.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Members"}),(0,k.jsx)("p",{className:"text-lg font-semibold",children:0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Program Type"}),(0,k.jsxs)("p",{className:"text-sm capitalize",children:["points"===t.type&&"Points-based","visits"===t.type&&"Visit-based","tiered"===t.type&&"Tiered"]})]})]}),"points"===t.type&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Points Structure"}),(0,k.jsx)("p",{className:"text-sm",children:t.pointsPerAmount?"".concat(t.pointsPerAmount," points per $1 spent"):"Not configured"}),(0,k.jsx)("p",{className:"text-sm",children:t.amountPerPoint?"$".concat(t.amountPerPoint," value per point"):""})]}),"visits"===t.type&&t.visitsRequired&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Visit Structure"}),(0,k.jsxs)("p",{className:"text-sm",children:[t.visitsRequired," visits required for reward"]})]})]}),(0,k.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,k.jsxs)("div",{className:"flex justify-end space-x-3",children:[!t.active&&(0,k.jsx)("button",{className:"text-primary-600 hover:text-primary-900 text-sm font-medium",onClick:n,children:"Edit"}),t.active&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("button",{className:"text-primary-600 hover:text-primary-900 text-sm font-medium",onClick:r,children:"View Details"}),(0,k.jsx)("button",{className:"text-gray-600 hover:text-gray-900 text-sm font-medium",onClick:s,children:"Manage Rewards"})]})]})})]})},xy=e=>{let{activeTab:t,onCreateClick:n}=e;return(0,k.jsxs)("div",{className:"col-span-full bg-white rounded-lg shadow-md p-6 text-center",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No loyalty programs found"}),(0,k.jsxs)("p",{className:"text-gray-500 mb-4",children:["active"===t&&"You don't have any active loyalty programs.","draft"===t&&"You don't have any draft loyalty programs.","archived"===t&&"You don't have any archived loyalty programs."]}),(0,k.jsx)("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700",onClick:n,children:"Create Your First Program"})]})},by=e=>{let{programs:t,activeTab:n,onCreateClick:r,onViewDetails:s}=e;return 0===t.length?(0,k.jsx)(xy,{activeTab:n,onCreateClick:r}):(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e=>(0,k.jsx)(vy,{program:e,onEdit:r,onViewDetails:s,onManageRewards:s},e.id)))})},wy=e=>{let{hasProgram:t,onCreateClick:n}=e;return(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[(0,k.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,k.jsxs)("h1",{className:"text-3xl font-bold text-purple-900 flex items-center",children:["Loyalty Program 2.0",(0,k.jsx)("span",{className:"ml-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs px-2 py-1 rounded-full",children:"NEW"})]}),(0,k.jsx)("p",{className:"text-gray-600 mt-1",children:t?"Manage your loyalty program and reward your best customers":"Create a loyalty program to turn one-time buyers into lifelong fans"})]}),(0,k.jsxs)("button",{onClick:n,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md flex items-center justify-center group",children:[(0,k.jsx)("span",{className:"mr-2",children:t?"Edit Program":"Create Program"}),(0,k.jsx)("svg",{className:"w-5 h-5 transform group-hover:rotate-45 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]})]})},Ny=t=>{let{mood:n,small:r=!1}=t;const[s,o]=(0,e.useState)("");(0,e.useEffect)((()=>{switch(n){case"happy":o("animate-bounce");break;case"excited":o("animate-pulse");break;default:o("")}const e=setTimeout((()=>{o("")}),3e3);return()=>clearTimeout(e)}),[n]);return(0,k.jsx)("div",{className:"".concat(r?"w-10 h-10":"w-16 h-16"," bg-gradient-to-br from-purple-100 to-indigo-100 rounded-full flex items-center justify-center shadow-md ").concat(s),children:(0,k.jsx)("span",{className:"".concat(r?"text-xl":"text-3xl"),children:(()=>{switch(n){case"happy":return"\ud83d\ude0a";case"excited":return"\ud83e\udd29";default:return"\ud83d\ude42"}})()})})},jy=t=>{let{program:n,rewardsCount:r}=t;const[s,o]=(0,e.useState)({memberCount:0,redemptionRate:0,averageSpend:0}),[i,a]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{(async()=>{if(n&&n.id&&n.businessId)try{a(!0);const e=await $g(n.businessId,n.id);o(e)}catch(e){console.error("Error fetching loyalty program stats:",e)}finally{a(!1)}else a(!1)})()}),[n]),n?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-purple-100",children:[(0,k.jsxs)("h2",{className:"text-xl font-semibold text-purple-900 mb-4 flex items-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Program Insights"]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 text-center hover:bg-purple-100 transition-colors",children:[(0,k.jsx)("p",{className:"text-sm text-purple-600",children:"Members"}),i?(0,k.jsx)("div",{className:"animate-pulse h-8 bg-purple-200 rounded mt-1"}):(0,k.jsx)("p",{className:"text-2xl font-bold text-purple-800",children:s.memberCount})]}),(0,k.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-3 text-center hover:bg-indigo-100 transition-colors",children:[(0,k.jsx)("p",{className:"text-sm text-indigo-600",children:"Rewards"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-indigo-800",children:r})]}),(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center hover:bg-blue-100 transition-colors",children:[(0,k.jsx)("p",{className:"text-sm text-blue-600",children:"Redemption"}),i?(0,k.jsx)("div",{className:"animate-pulse h-8 bg-blue-200 rounded mt-1"}):(0,k.jsxs)("p",{className:"text-2xl font-bold text-blue-800",children:[s.redemptionRate,"%"]})]}),(0,k.jsxs)("div",{className:"bg-violet-50 rounded-lg p-3 text-center hover:bg-violet-100 transition-colors",children:[(0,k.jsx)("p",{className:"text-sm text-violet-600",children:"Avg. Spend"}),i?(0,k.jsx)("div",{className:"animate-pulse h-8 bg-violet-200 rounded mt-1"}):(0,k.jsxs)("p",{className:"text-2xl font-bold text-violet-800",children:["R",s.averageSpend]})]})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4",children:[(0,k.jsxs)("h3",{className:"font-medium text-purple-800 mb-2 flex items-center",children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Program Impact"]}),(0,k.jsxs)("p",{className:"text-sm text-purple-700",children:["Members of your loyalty program spend ",(0,k.jsx)("span",{className:"font-bold",children:"2.5x more"})," than non-members. Keep enhancing your program to increase customer retention!"]})]})]}):null},ky=t=>{let{program:n}=t;const[r,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{(async()=>{if(n&&n.id&&n.businessId)try{i(!0);const e=await Zg(n.businessId,n.id);s(e)}catch(e){console.error("Error fetching loyalty achievements:",e)}finally{i(!1)}else i(!1)})()}),[n]),n?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 border border-purple-100",children:[(0,k.jsxs)("h2",{className:"text-xl font-semibold text-purple-900 mb-4 flex items-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Your Achievements"]}),o?(0,k.jsx)("div",{className:"space-y-3",children:[1,2,3,4].map(((e,t)=>(0,k.jsxs)("div",{className:"animate-pulse flex items-center p-3 rounded-lg border border-gray-200",children:[(0,k.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full mr-3"}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,k.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},t)))}):(0,k.jsx)("div",{className:"space-y-3",children:r.map((e=>(0,k.jsxs)("div",{className:"flex items-center p-3 rounded-lg border ".concat(e.completed?"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200":"bg-gray-50 border-gray-200"," transition-transform hover:scale-102"),children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 ".concat(e.completed?"bg-purple-200":"bg-gray-200"),children:(0,k.jsx)("span",{className:"text-xl",children:e.icon})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium ".concat(e.completed?"text-purple-800":"text-gray-600"),children:e.title}),(0,k.jsx)("p",{className:"text-xs ".concat(e.completed?"text-purple-600":"text-gray-500"),children:e.description})]}),e.completed&&(0,k.jsx)("div",{className:"ml-auto",children:(0,k.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]},e.id)))})]}):null};var Cy=n(7528);function Sy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const s in e){const o=e[s];let i="",a=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(i+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(i+=" "+n[r]))}r[s]=i}return r}var Ay=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(UZ){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ey=Math.abs,_y=String.fromCharCode,Iy=Object.assign;function Ty(e){return e.trim()}function Py(e,t,n){return e.replace(t,n)}function Ry(e,t){return e.indexOf(t)}function Dy(e,t){return 0|e.charCodeAt(t)}function My(e,t,n){return e.slice(t,n)}function Ly(e){return e.length}function Oy(e){return e.length}function Fy(e,t){return t.push(e),e}var By=1,Uy=1,zy=0,Vy=0,qy=0,Wy="";function Hy(e,t,n,r,s,o,i){return{value:e,root:t,parent:n,type:r,props:s,children:o,line:By,column:Uy,length:i,return:""}}function Gy(e,t){return Iy(Hy("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ky(){return qy=Vy>0?Dy(Wy,--Vy):0,Uy--,10===qy&&(Uy=1,By--),qy}function Yy(){return qy=Vy<zy?Dy(Wy,Vy++):0,Uy++,10===qy&&(Uy=1,By++),qy}function Qy(){return Dy(Wy,Vy)}function $y(){return Vy}function Jy(e,t){return My(Wy,e,t)}function Xy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Zy(e){return By=Uy=1,zy=Ly(Wy=e),Vy=0,[]}function ev(e){return Wy="",e}function tv(e){return Ty(Jy(Vy-1,sv(91===e?e+2:40===e?e+1:e)))}function nv(e){for(;(qy=Qy())&&qy<33;)Yy();return Xy(e)>2||Xy(qy)>3?"":" "}function rv(e,t){for(;--t&&Yy()&&!(qy<48||qy>102||qy>57&&qy<65||qy>70&&qy<97););return Jy(e,$y()+(t<6&&32==Qy()&&32==Yy()))}function sv(e){for(;Yy();)switch(qy){case e:return Vy;case 34:case 39:34!==e&&39!==e&&sv(qy);break;case 40:41===e&&sv(e);break;case 92:Yy()}return Vy}function ov(e,t){for(;Yy()&&e+qy!==57&&(e+qy!==84||47!==Qy()););return"/*"+Jy(t,Vy-1)+"*"+_y(47===e?e:Yy())}function iv(e){for(;!Xy(Qy());)Yy();return Jy(e,Vy)}var av="-ms-",lv="-moz-",cv="-webkit-",uv="comm",dv="rule",hv="decl",mv="@keyframes";function pv(e,t){for(var n="",r=Oy(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function fv(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case hv:return e.return=e.return||e.value;case uv:return"";case mv:return e.return=e.value+"{"+pv(e.children,r)+"}";case dv:e.value=e.props.join(",")}return Ly(n=pv(e.children,r))?e.return=e.value+"{"+n+"}":""}function gv(e){return ev(yv("",null,null,null,[""],e=Zy(e),0,[0],e))}function yv(e,t,n,r,s,o,i,a,l){for(var c=0,u=0,d=i,h=0,m=0,p=0,f=1,g=1,y=1,v=0,x="",b=s,w=o,N=r,j=x;g;)switch(p=v,v=Yy()){case 40:if(108!=p&&58==Dy(j,d-1)){-1!=Ry(j+=Py(tv(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:j+=tv(v);break;case 9:case 10:case 13:case 32:j+=nv(p);break;case 92:j+=rv($y()-1,7);continue;case 47:switch(Qy()){case 42:case 47:Fy(xv(ov(Yy(),$y()),t,n),l);break;default:j+="/"}break;case 123*f:a[c++]=Ly(j)*y;case 125*f:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(j=Py(j,/\f/g,"")),m>0&&Ly(j)-d&&Fy(m>32?bv(j+";",r,n,d-1):bv(Py(j," ","")+";",r,n,d-2),l);break;case 59:j+=";";default:if(Fy(N=vv(j,t,n,c,u,s,a,x,b=[],w=[],d),o),123===v)if(0===u)yv(j,t,N,N,b,o,d,a,w);else switch(99===h&&110===Dy(j,3)?100:h){case 100:case 108:case 109:case 115:yv(e,N,N,r&&Fy(vv(e,N,N,0,0,s,a,x,s,b=[],d),w),s,w,d,a,r?b:w);break;default:yv(j,N,N,N,[""],w,0,a,w)}}c=u=m=0,f=y=1,x=j="",d=i;break;case 58:d=1+Ly(j),m=p;default:if(f<1)if(123==v)--f;else if(125==v&&0==f++&&125==Ky())continue;switch(j+=_y(v),v*f){case 38:y=u>0?1:(j+="\f",-1);break;case 44:a[c++]=(Ly(j)-1)*y,y=1;break;case 64:45===Qy()&&(j+=tv(Yy())),h=Qy(),u=d=Ly(x=j+=iv($y())),v++;break;case 45:45===p&&2==Ly(j)&&(f=0)}}return o}function vv(e,t,n,r,s,o,i,a,l,c,u){for(var d=s-1,h=0===s?o:[""],m=Oy(h),p=0,f=0,g=0;p<r;++p)for(var y=0,v=My(e,d+1,d=Ey(f=i[p])),x=e;y<m;++y)(x=Ty(f>0?h[y]+" "+v:Py(v,/&\f/g,h[y])))&&(l[g++]=x);return Hy(e,t,n,0===s?dv:a,l,c,u)}function xv(e,t,n){return Hy(e,t,n,uv,_y(qy),My(e,2,-2),0)}function bv(e,t,n,r){return Hy(e,t,n,hv,My(e,0,r),My(e,r+1,-1),r)}var wv=function(e,t,n){for(var r=0,s=0;r=s,s=Qy(),38===r&&12===s&&(t[n]=1),!Xy(s);)Yy();return Jy(e,Vy)},Nv=function(e,t){return ev(function(e,t){var n=-1,r=44;do{switch(Xy(r)){case 0:38===r&&12===Qy()&&(t[n]=1),e[n]+=wv(Vy-1,t,n);break;case 2:e[n]+=tv(r);break;case 4:if(44===r){e[++n]=58===Qy()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=_y(r)}}while(r=Yy());return e}(Zy(e),t))},jv=new WeakMap,kv=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||jv.get(n))&&!r){jv.set(e,!0);for(var s=[],o=Nv(t,s),i=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<i.length;c++,l++)e.props[l]=s[a]?o[a].replace(/&\f/g,i[c]):i[c]+" "+o[a]}}},Cv=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Sv(e,t){switch(function(e,t){return 45^Dy(e,0)?(((t<<2^Dy(e,0))<<2^Dy(e,1))<<2^Dy(e,2))<<2^Dy(e,3):0}(e,t)){case 5103:return cv+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return cv+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return cv+e+lv+e+av+e+e;case 6828:case 4268:return cv+e+av+e+e;case 6165:return cv+e+av+"flex-"+e+e;case 5187:return cv+e+Py(e,/(\w+).+(:[^]+)/,cv+"box-$1$2"+av+"flex-$1$2")+e;case 5443:return cv+e+av+"flex-item-"+Py(e,/flex-|-self/,"")+e;case 4675:return cv+e+av+"flex-line-pack"+Py(e,/align-content|flex-|-self/,"")+e;case 5548:return cv+e+av+Py(e,"shrink","negative")+e;case 5292:return cv+e+av+Py(e,"basis","preferred-size")+e;case 6060:return cv+"box-"+Py(e,"-grow","")+cv+e+av+Py(e,"grow","positive")+e;case 4554:return cv+Py(e,/([^-])(transform)/g,"$1"+cv+"$2")+e;case 6187:return Py(Py(Py(e,/(zoom-|grab)/,cv+"$1"),/(image-set)/,cv+"$1"),e,"")+e;case 5495:case 3959:return Py(e,/(image-set\([^]*)/,cv+"$1$`$1");case 4968:return Py(Py(e,/(.+:)(flex-)?(.*)/,cv+"box-pack:$3"+av+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+cv+e+e;case 4095:case 3583:case 4068:case 2532:return Py(e,/(.+)-inline(.+)/,cv+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ly(e)-1-t>6)switch(Dy(e,t+1)){case 109:if(45!==Dy(e,t+4))break;case 102:return Py(e,/(.+:)(.+)-([^]+)/,"$1"+cv+"$2-$3$1"+lv+(108==Dy(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ry(e,"stretch")?Sv(Py(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Dy(e,t+1))break;case 6444:switch(Dy(e,Ly(e)-3-(~Ry(e,"!important")&&10))){case 107:return Py(e,":",":"+cv)+e;case 101:return Py(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+cv+(45===Dy(e,14)?"inline-":"")+"box$3$1"+cv+"$2$3$1"+av+"$2box$3")+e}break;case 5936:switch(Dy(e,t+11)){case 114:return cv+e+av+Py(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return cv+e+av+Py(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return cv+e+av+Py(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return cv+e+av+e+e}return e}var Av=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case hv:e.return=Sv(e.value,e.length);break;case mv:return pv([Gy(e,{value:Py(e.value,"@","@"+cv)})],r);case dv:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pv([Gy(e,{props:[Py(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return pv([Gy(e,{props:[Py(t,/:(plac\w+)/,":"+cv+"input-$1")]}),Gy(e,{props:[Py(t,/:(plac\w+)/,":-moz-$1")]}),Gy(e,{props:[Py(t,/:(plac\w+)/,av+"input-$1")]})],r)}return""}))}}],Ev=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,s,o=e.stylisPlugins||Av,i={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)i[t[n]]=!0;a.push(e)}));var l,c,u=[fv,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=Oy(e);return function(n,r,s,o){for(var i="",a=0;a<t;a++)i+=e[a](n,r,s,o)||"";return i}}([kv,Cv].concat(o,u));s=function(e,t,n,r){l=n,function(e){pv(gv(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Ay({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return h.sheet.hydrate(a),h};function _v(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var Iv=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Tv=function(e,t,n){Iv(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}};var Pv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Rv(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Dv=/[A-Z]|^ms/g,Mv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Lv=function(e){return 45===e.charCodeAt(1)},Ov=function(e){return null!=e&&"boolean"!==typeof e},Fv=Rv((function(e){return Lv(e)?e:e.replace(Dv,"-$&").toLowerCase()})),Bv=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Mv,(function(e,t,n){return zv={name:t,styles:n,next:zv},t}))}return 1===Pv[e]||Lv(e)||"number"!==typeof t||0===t?t:t+"px"};function Uv(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var s=n;if(1===s.anim)return zv={name:s.name,styles:s.styles,next:zv},s.name;var o=n;if(void 0!==o.styles){var i=o.next;if(void 0!==i)for(;void 0!==i;)zv={name:i.name,styles:i.styles,next:zv},i=i.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Uv(e,t,n[s])+";";else for(var o in n){var i=n[o];if("object"!==typeof i){var a=i;null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Ov(a)&&(r+=Fv(o)+":"+Bv(o,a)+";")}else if(!Array.isArray(i)||"string"!==typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=Uv(e,t,i);switch(o){case"animation":case"animationName":r+=Fv(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var c=0;c<i.length;c++)Ov(i[c])&&(r+=Fv(o)+":"+Bv(o,i[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=zv,l=n(e);return zv=a,Uv(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var zv,Vv=/label:\s*([^\s;{]+)\s*(;|$)/g;function qv(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,s="";zv=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,s+=Uv(n,t,o)):s+=o[0];for(var i=1;i<e.length;i++){if(s+=Uv(n,t,e[i]),r)s+=o[i]}Vv.lastIndex=0;for(var a,l="";null!==(a=Vv.exec(s));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,s=e.length;s>=4;++r,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(s){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:zv}}var Wv=!!t.useInsertionEffect&&t.useInsertionEffect,Hv=Wv||function(e){return e()},Gv=Wv||e.useLayoutEffect,Kv=e.createContext("undefined"!==typeof HTMLElement?Ev({key:"css"}):null),Yv=(Kv.Provider,function(t){return(0,e.forwardRef)((function(n,r){var s=(0,e.useContext)(Kv);return t(n,s,r)}))}),Qv=e.createContext({});var $v={}.hasOwnProperty,Jv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Xv=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Iv(t,n,r),Hv((function(){return Tv(t,n,r)})),null},Zv=Yv((function(t,n,r){var s=t.css;"string"===typeof s&&void 0!==n.registered[s]&&(s=n.registered[s]);var o=t[Jv],i=[s],a="";"string"===typeof t.className?a=_v(n.registered,i,t.className):null!=t.className&&(a=t.className+" ");var l=qv(i,void 0,e.useContext(Qv));a+=n.key+"-"+l.name;var c={};for(var u in t)$v.call(t,u)&&"css"!==u&&u!==Jv&&(c[u]=t[u]);return c.className=a,r&&(c.ref=r),e.createElement(e.Fragment,null,e.createElement(Xv,{cache:n,serialized:l,isStringTag:"string"===typeof o}),e.createElement(o,c))})),ex=Zv,tx=(n(3876),function(t,n){var r=arguments;if(null==n||!$v.call(n,"css"))return e.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=ex,o[1]=function(e,t){var n={};for(var r in t)$v.call(t,r)&&(n[r]=t[r]);return n[Jv]=e,n}(t,n);for(var i=2;i<s;i++)o[i]=r[i];return e.createElement.apply(null,o)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(tx||(tx={}));var nx=Yv((function(t,n){var r=qv([t.styles],void 0,e.useContext(Qv)),s=e.useRef();return Gv((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),o=!1,i=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==i&&(o=!0,i.setAttribute("data-emotion",e),t.hydrate([i])),s.current=[t,o],function(){t.flush()}}),[n]),Gv((function(){var e=s.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&Tv(n,r.next,!0),t.tags.length){var o=t.tags[t.tags.length-1].nextElementSibling;t.before=o,t.flush()}n.insert("",r,t,!1)}}),[n,r.name]),null}));function rx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qv(t)}function sx(){var e=rx.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(null,arguments)}var ix=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ax=Rv((function(e){return ix.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),lx=function(e){return"theme"!==e},cx=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?ax:lx},ux=function(e,t,n){var r;if(t){var s=t.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(t){return e.__emotion_forwardProp(t)&&s(t)}:s}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},dx=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Iv(t,n,r),Hv((function(){return Tv(t,n,r)})),null},hx=function t(n,r){var s,o,i=n.__emotion_real===n,a=i&&n.__emotion_base||n;void 0!==r&&(s=r.label,o=r.target);var l=ux(n,r,i),c=l||cx(a),u=!c("as");return function(){var d=arguments,h=i&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==s&&h.push("label:"+s+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{var m=d[0];h.push(m[0]);for(var p=d.length,f=1;f<p;f++)h.push(d[f],m[f])}var g=Yv((function(t,n,r){var s=u&&t.as||a,i="",d=[],m=t;if(null==t.theme){for(var p in m={},t)m[p]=t[p];m.theme=e.useContext(Qv)}"string"===typeof t.className?i=_v(n.registered,d,t.className):null!=t.className&&(i=t.className+" ");var f=qv(h.concat(d),n.registered,m);i+=n.key+"-"+f.name,void 0!==o&&(i+=" "+o);var g=u&&void 0===l?cx(s):c,y={};for(var v in t)u&&"as"===v||g(v)&&(y[v]=t[v]);return y.className=i,r&&(y.ref=r),e.createElement(e.Fragment,null,e.createElement(dx,{cache:n,serialized:f,isStringTag:"string"===typeof s}),e.createElement(s,y))}));return g.displayName=void 0!==s?s:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=n.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=h,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(e,n){return t(e,ox({},r,n,{shouldForwardProp:ux(g,n,!0)})).apply(void 0,h)},g}}.bind(null);function mx(e,t){return hx(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){hx[e]=hx(e)}));const px=[];function fx(e){return px[0]=e,qv(px)}var gx=n(5732);function yx(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vx(t){if(e.isValidElement(t)||(0,gx.Hy)(t)||!yx(t))return t;const n={};return Object.keys(t).forEach((e=>{n[e]=vx(t[e])})),n}function xx(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const s=r.clone?(0,S.A)({},t):t;return yx(t)&&yx(n)&&Object.keys(n).forEach((o=>{e.isValidElement(n[o])||(0,gx.Hy)(n[o])?s[o]=n[o]:yx(n[o])&&Object.prototype.hasOwnProperty.call(t,o)&&yx(t[o])?s[o]=xx(t[o],n[o],r):r.clone?s[o]=yx(n[o])?vx(n[o]):n[o]:s[o]=n[o]})),s}const bx=["values","unit","step"];function wx(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,s=E(e,bx),o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,S.A)((0,S.A)({},e),{},{[t.key]:t.val})),{})})(t),i=Object.keys(o);function a(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function l(e){const s="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(s-r/100).concat(n,")")}function c(e,s){const o=i.indexOf(s);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof t[i[o]]?t[i[o]]:s)-r/100).concat(n,")")}return(0,S.A)({keys:i,values:o,up:a,down:l,between:c,only:function(e){return i.indexOf(e)+1<i.length?c(e,i[i.indexOf(e)+1]):a(e)},not:function(e){const t=i.indexOf(e);return 0===t?a(i[1]):t===i.length-1?l(i[t]):c(e,i[i.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},s)}function Nx(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var n,r;const s=/min-width:\s*([0-9.]+)/;return+((null===(n=e.match(s))||void 0===n?void 0:n[1])||0)-+((null===(r=t.match(s))||void 0===r?void 0:r[1])||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),(0,S.A)({},t)):t}const jx={borderRadius:4},kx={xs:0,sm:600,md:900,lg:1200,xl:1536},Cx={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(kx[e],"px)")},Sx={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:kx[t]||t;return"number"===typeof n&&(n="".concat(n,"px")),e?"@container ".concat(e," (min-width:").concat(n,")"):"@container (min-width:".concat(n,")")}})};function Ax(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Cx;return t.reduce(((r,s,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||Cx;return Object.keys(t).reduce(((s,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(s).up(o)}(r.containerQueries?r:Sx,o);e&&(s[e]=n(t[o],o))}else if(Object.keys(e.values||kx).includes(o)){s[e.up(o)]=n(t[o],o)}else{const e=o;s[e]=t[e]}return s}),{})}return n(t)}function Ex(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function _x(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Ix(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function Tx(e){if("string"!==typeof e)throw new Error(Ix(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Px(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function Rx(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||s:Px(e,n)||s,t&&(r=t(r,s,e)),r}const Dx=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:s}=e,o=e=>{if(null==e[t])return null;const o=e[t],i=Px(e.theme,r)||{};return Ax(e,o,(e=>{let r=Rx(i,s,e);return e===r&&"string"===typeof e&&(r=Rx(i,s,"".concat(t).concat("default"===e?"":Tx(e)),e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const Mx=function(e,t){return t?xx(e,t,{clone:!1}):e};const Lx={m:"margin",p:"padding"},Ox={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Fx={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Bx=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Fx[e])return[e];e=Fx[e]}const[t,n]=e.split(""),r=Lx[t],s=Ox[n]||"";return Array.isArray(s)?s.map((e=>r+e)):[r+s]})),Ux=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],zx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Vx=[...Ux,...zx];function qx(e,t,n,r){var s;const o=null!==(s=Px(e,t,!0))&&void 0!==s?s:n;return"number"===typeof o||"string"===typeof o?e=>"string"===typeof e?e:"string"===typeof o?o.startsWith("var(")&&0===e?0:o.startsWith("var(")&&1===e?o:"calc(".concat(e," * ").concat(o,")"):o*e:Array.isArray(o)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=o[t];return e>=0?n:"number"===typeof n?-n:"string"===typeof n&&n.startsWith("var(")?"calc(-1 * ".concat(n,")"):"-".concat(n)}:"function"===typeof o?o:()=>{}}function Wx(e){return qx(e,"spacing",8)}function Hx(e,t){return"string"===typeof t||null==t?t:e(t)}function Gx(e,t,n,r){if(!t.includes(n))return null;const s=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=Hx(t,n),e)),{})}(Bx(n),r);return Ax(e,e[n],s)}function Kx(e,t){const n=Wx(e.theme);return Object.keys(e).map((r=>Gx(e,t,r,n))).reduce(Mx,{})}function Yx(e){return Kx(e,Ux)}function Qx(e){return Kx(e,zx)}function $x(e){return Kx(e,Vx)}Yx.propTypes={},Yx.filterProps=Ux,Qx.propTypes={},Qx.filterProps=zx,$x.propTypes={},$x.filterProps=Vx;function Jx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wx({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}const Xx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),s=e=>Object.keys(e).reduce(((t,n)=>r[n]?Mx(t,r[n](e)):t),{});return s.propTypes={},s.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),s};function Zx(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function eb(e,t){return Dx({prop:e,themeKey:"borders",transform:t})}const tb=eb("border",Zx),nb=eb("borderTop",Zx),rb=eb("borderRight",Zx),sb=eb("borderBottom",Zx),ob=eb("borderLeft",Zx),ib=eb("borderColor"),ab=eb("borderTopColor"),lb=eb("borderRightColor"),cb=eb("borderBottomColor"),ub=eb("borderLeftColor"),db=eb("outline",Zx),hb=eb("outlineColor"),mb=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=qx(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:Hx(t,e)});return Ax(e,e.borderRadius,n)}return null};mb.propTypes={},mb.filterProps=["borderRadius"];Xx(tb,nb,rb,sb,ob,ib,ab,lb,cb,ub,mb,db,hb);const pb=e=>{if(void 0!==e.gap&&null!==e.gap){const t=qx(e.theme,"spacing",8),n=e=>({gap:Hx(t,e)});return Ax(e,e.gap,n)}return null};pb.propTypes={},pb.filterProps=["gap"];const fb=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=qx(e.theme,"spacing",8),n=e=>({columnGap:Hx(t,e)});return Ax(e,e.columnGap,n)}return null};fb.propTypes={},fb.filterProps=["columnGap"];const gb=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=qx(e.theme,"spacing",8),n=e=>({rowGap:Hx(t,e)});return Ax(e,e.rowGap,n)}return null};gb.propTypes={},gb.filterProps=["rowGap"];Xx(pb,fb,gb,Dx({prop:"gridColumn"}),Dx({prop:"gridRow"}),Dx({prop:"gridAutoFlow"}),Dx({prop:"gridAutoColumns"}),Dx({prop:"gridAutoRows"}),Dx({prop:"gridTemplateColumns"}),Dx({prop:"gridTemplateRows"}),Dx({prop:"gridTemplateAreas"}),Dx({prop:"gridArea"}));function yb(e,t){return"grey"===t?t:e}Xx(Dx({prop:"color",themeKey:"palette",transform:yb}),Dx({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yb}),Dx({prop:"backgroundColor",themeKey:"palette",transform:yb}));function vb(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const xb=Dx({prop:"width",transform:vb}),bb=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const s=(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n||null===(n=n.values)||void 0===n?void 0:n[t])||kx[t];return s?"px"!==(null===(r=e.theme)||void 0===r||null===(r=r.breakpoints)||void 0===r?void 0:r.unit)?{maxWidth:"".concat(s).concat(e.theme.breakpoints.unit)}:{maxWidth:s}:{maxWidth:vb(t)}};return Ax(e,e.maxWidth,t)}return null};bb.filterProps=["maxWidth"];const wb=Dx({prop:"minWidth",transform:vb}),Nb=Dx({prop:"height",transform:vb}),jb=Dx({prop:"maxHeight",transform:vb}),kb=Dx({prop:"minHeight",transform:vb}),Cb=(Dx({prop:"size",cssProperty:"width",transform:vb}),Dx({prop:"size",cssProperty:"height",transform:vb}),Xx(xb,bb,wb,Nb,jb,kb,Dx({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Zx},borderTop:{themeKey:"borders",transform:Zx},borderRight:{themeKey:"borders",transform:Zx},borderBottom:{themeKey:"borders",transform:Zx},borderLeft:{themeKey:"borders",transform:Zx},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Zx},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:mb},color:{themeKey:"palette",transform:yb},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yb},backgroundColor:{themeKey:"palette",transform:yb},p:{style:Qx},pt:{style:Qx},pr:{style:Qx},pb:{style:Qx},pl:{style:Qx},px:{style:Qx},py:{style:Qx},padding:{style:Qx},paddingTop:{style:Qx},paddingRight:{style:Qx},paddingBottom:{style:Qx},paddingLeft:{style:Qx},paddingX:{style:Qx},paddingY:{style:Qx},paddingInline:{style:Qx},paddingInlineStart:{style:Qx},paddingInlineEnd:{style:Qx},paddingBlock:{style:Qx},paddingBlockStart:{style:Qx},paddingBlockEnd:{style:Qx},m:{style:Yx},mt:{style:Yx},mr:{style:Yx},mb:{style:Yx},ml:{style:Yx},mx:{style:Yx},my:{style:Yx},margin:{style:Yx},marginTop:{style:Yx},marginRight:{style:Yx},marginBottom:{style:Yx},marginLeft:{style:Yx},marginX:{style:Yx},marginY:{style:Yx},marginInline:{style:Yx},marginInlineStart:{style:Yx},marginInlineEnd:{style:Yx},marginBlock:{style:Yx},marginBlockStart:{style:Yx},marginBlockEnd:{style:Yx},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:pb},rowGap:{style:gb},columnGap:{style:fb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vb},maxWidth:{style:bb},minWidth:{transform:vb},height:{transform:vb},maxHeight:{transform:vb},minHeight:{transform:vb},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Sb=function(){function e(e,t,n,r){const s={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:i=e,themeKey:a,transform:l,style:c}=o;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const u=Px(n,a)||{};if(c)return c(s);return Ax(s,t,(t=>{let n=Rx(u,l,t);return t===n&&"string"===typeof t&&(n=Rx(u,l,"".concat(e).concat("default"===t?"":Tx(t)),t)),!1===i?n:{[i]:n}}))}return function t(n){var r;const{sx:s,theme:o={},nested:i}=n||{};if(!s)return null;const a=null!==(r=o.unstable_sxConfig)&&void 0!==r?r:Cb;function l(n){let r=n;if("function"===typeof n)r=n(o);else if("object"!==typeof n)return n;if(!r)return null;const s=Ex(o.breakpoints),l=Object.keys(s);let c=s;return Object.keys(r).forEach((n=>{const s=function(e,t){return"function"===typeof e?e(t):e}(r[n],o);if(null!==s&&void 0!==s)if("object"===typeof s)if(a[n])c=Mx(c,e(n,s,o,a));else{const e=Ax({theme:o},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),s=new Set(r);return t.every((e=>s.size===Object.keys(e).length))}(e,s)?c=Mx(c,e):c[n]=t({sx:s,theme:o,nested:!0})}else c=Mx(c,e(n,s,o,a))})),!i&&o.modularCssLayers?{"@layer sx":Nx(o,_x(l,c))}:Nx(o,_x(l,c))}return Array.isArray(s)?s.map(l):l(s)}}();Sb.filterProps=["sx"];const Ab=Sb;function Eb(e,t){const n=this;if(n.vars){var r;if(null===(r=n.colorSchemes)||void 0===r||!r[e]||"function"!==typeof n.getColorSchemeSelector)return{};let s=n.getColorSchemeSelector(e);return"&"===s?t:((s.includes("data-")||s.includes("."))&&(s="*:where(".concat(s.replace(/\s*&$/,""),") &")),{[s]:t})}return n.palette.mode===e?t:{}}const _b=["breakpoints","palette","spacing","shape"];const Ib=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:s={}}=e,o=E(e,_b),i=wx(t),a=Jx(r);let l=xx({breakpoints:i,direction:"ltr",components:{},palette:(0,S.A)({mode:"light"},n),spacing:a,shape:(0,S.A)((0,S.A)({},jx),s)},o);l=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},s=e=>(n(r,e),r);return n(s),(0,S.A)((0,S.A)({},e),{},{containerQueries:s})}(l),l.applyStyles=Eb;for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];return l=u.reduce(((e,t)=>xx(e,t)),l),l.unstable_sxConfig=(0,S.A)((0,S.A)({},Cb),null===o||void 0===o?void 0:o.unstable_sxConfig),l.unstable_sx=function(e){return Ab({sx:e,theme:this})},l},Tb=["variants"];function Pb(e){const{variants:t}=e,n=E(e,Tb),r={variants:t,style:fx(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=fx(e.style))})),r}const Rb=["variants"],Db=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Mb=Ib();function Lb(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function Ob(e,t){return t&&e&&"object"===typeof e&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles="@layer ".concat(t,"{").concat(String(e.styles),"}")),e}function Fb(e){return e?(t,n)=>n[e]:null}function Bb(e,t,n){const r="function"===typeof t?t(e):t;if(Array.isArray(r))return r.flatMap((t=>Bb(e,t,n)));if(Array.isArray(null===r||void 0===r?void 0:r.variants)){let t;if(r.isProcessed)t=n?Ob(r.style,n):r.style;else{const{variants:e}=r,s=E(r,Rb);t=n?Ob(fx(s),n):s}return Ub(e,r.variants,[t],n)}return null!==r&&void 0!==r&&r.isProcessed?n?Ob(fx(r.style),n):r.style:n?Ob(fx(r),n):r}function Ub(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;e:for(let i=0;i<t.length;i+=1){const a=t[i];if("function"===typeof a.props){if(null!==n&&void 0!==n||(n=(0,S.A)((0,S.A)((0,S.A)({},e),e.ownerState),{},{ownerState:e.ownerState})),!a.props(n))continue}else for(const t in a.props){var o;if(e[t]!==a.props[t]&&(null===(o=e.ownerState)||void 0===o?void 0:o[t])!==a.props[t])continue e}"function"===typeof a.style?(null!==n&&void 0!==n||(n=(0,S.A)((0,S.A)((0,S.A)({},e),e.ownerState),{},{ownerState:e.ownerState})),r.push(s?Ob(fx(a.style(n)),s):a.style(n))):r.push(s?Ob(fx(a.style),s):a.style)}return r}function zb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=Mb,rootShouldForwardProp:r=Lb,slotShouldForwardProp:s=Lb}=e;function o(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==Ab))));const{name:n,slot:i,skipVariantsResolver:a,skipSx:l,overridesResolver:c=Fb(qb(i))}=t,u=E(t,Db),d=n&&n.startsWith("Mui")||i?"components":"custom",h=void 0!==a?a:i&&"Root"!==i&&"root"!==i||!1,m=l||!1;let p=Lb;"Root"===i||"root"===i?p=r:i?p=s:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(p=void 0);const f=mx(e,(0,S.A)({shouldForwardProp:p,label:Vb(n,i)},u)),g=e=>{if(e.__emotion_real===e)return e;if("function"===typeof e)return function(t){return Bb(t,e,t.theme.modularCssLayers?d:void 0)};if(yx(e)){const t=Pb(e);return function(e){return t.variants?Bb(e,t,e.theme.modularCssLayers?d:void 0):e.theme.modularCssLayers?Ob(t.style,d):t.style}}return e},y=function(){const t=[];for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const a=s.map(g),l=[];if(t.push(o),n&&c&&l.push((function(e){var t;const r=null===(t=e.theme.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.styleOverrides;if(!r)return null;const s={};for(const n in r)s[n]=Bb(e,r[n],e.theme.modularCssLayers?"theme":void 0);return c(e,s)})),n&&!h&&l.push((function(e){var t;const r=e.theme,s=null===r||void 0===r||null===(t=r.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.variants;return s?Ub(e,s,[],e.theme.modularCssLayers?"theme":void 0):null})),m||l.push(Ab),Array.isArray(a[0])){const e=a.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let s;s=[...n,...e,...r],s.raw=[...n,...e.raw,...r],t.unshift(s)}const u=[...t,...a,...l],d=f(...u);return e.muiName&&(d.muiName=e.muiName),d};return f.withConfig&&(y.withConfig=f.withConfig),y}}function Vb(e,t){}function qb(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const Wb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function Hb(e){return Wb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Gb(e){if(e.type)return e;if("#"===e.charAt(0))return Gb(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ix(9,e));let r,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),r=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Ix(10,r))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:r}}const Kb=(e,t)=>{try{return(e=>{const t=Gb(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")})(e)}catch(n){return e}};function Yb(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=t.includes("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function Qb(e){e=Gb(e);const{values:t}=e,n=t[0],r=t[1]/100,s=t[2]/100,o=r*Math.min(s,1-s),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return s-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*i(0)),Math.round(255*i(8)),Math.round(255*i(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Yb({type:a,values:l})}function $b(e){let t="hsl"===(e=Gb(e)).type||"hsla"===e.type?Gb(Qb(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Jb(e,t){return e=Gb(e),t=Hb(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,Yb(e)}function Xb(e,t,n){try{return Jb(e,t)}catch(r){return e}}function Zb(e,t){if(e=Gb(e),t=Hb(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Yb(e)}function ew(e,t,n){try{return Zb(e,t)}catch(r){return e}}function tw(e,t){if(e=Gb(e),t=Hb(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Yb(e)}function nw(e,t,n){try{return tw(e,t)}catch(r){return e}}function rw(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return $b(e)>.5?Zb(e,t):tw(e,t)}(e,t)}catch(r){return e}}const sw={black:"#000",white:"#fff"},ow={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iw={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},aw={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},lw={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},cw={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uw={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},dw={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},hw=["mode","contrastThreshold","tonalOffset"];function mw(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:sw.white,default:sw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const pw=mw();function fw(){return{text:{primary:sw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:sw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const gw=fw();function yw(e,t,n,r){const s=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=tw(e.main,s):"dark"===t&&(e.dark=Zb(e.main,o)))}function vw(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,s=E(e,hw),o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:cw[200],light:cw[50],dark:cw[400]}:{main:cw[700],light:cw[400],dark:cw[800]}}(t),i=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:iw[200],light:iw[50],dark:iw[400]}:{main:iw[500],light:iw[300],dark:iw[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:aw[500],light:aw[300],dark:aw[700]}:{main:aw[700],light:aw[400],dark:aw[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:uw[400],light:uw[300],dark:uw[700]}:{main:uw[700],light:uw[500],dark:uw[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:dw[400],light:dw[300],dark:dw[700]}:{main:dw[800],light:dw[500],dark:dw[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:lw[400],light:lw[300],dark:lw[700]}:{main:"#ed6c02",light:lw[500],dark:lw[900]}}(t);function d(e){const t=function(e,t){const n=$b(e),r=$b(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,gw.text.primary)>=n?gw.text.primary:pw.text.primary;return t}const h=e=>{let{color:t,name:n,mainShade:s=500,lightShade:o=300,darkShade:i=700}=e;if(t=(0,S.A)({},t),!t.main&&t[s]&&(t.main=t[s]),!t.hasOwnProperty("main"))throw new Error(Ix(11,n?" (".concat(n,")"):"",s));if("string"!==typeof t.main)throw new Error(Ix(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return yw(t,"light",o,r),yw(t,"dark",i,r),t.contrastText||(t.contrastText=d(t.main)),t};let m;"light"===t?m=mw():"dark"===t&&(m=fw());return xx((0,S.A)({common:(0,S.A)({},sw),mode:t,primary:h({color:o,name:"primary"}),secondary:h({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:ow,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},m),s)}var xw=n(9526);function bw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(o):", var(--".concat(e?"".concat(e,"-"):"").concat(o).concat(t(...r.slice(1)),")")}return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...s),")")}}function ww(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]="".concat(r.fontStyle?"".concat(r.fontStyle," "):"").concat(r.fontVariant?"".concat(r.fontVariant," "):"").concat(r.fontWeight?"".concat(r.fontWeight," "):"").concat(r.fontStretch?"".concat(r.fontStretch," "):"").concat(r.fontSize||"").concat(r.lineHeight?"/".concat(r.lineHeight," "):"").concat(r.fontFamily||""))})),t}const Nw=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(s)?s[Number(e)]=n:s&&"object"===typeof s&&(s[e]=n):s&&"object"===typeof s&&(s[e]||(s[e]=r.includes(e)?[]:{}),s=s[e])}))};function jw(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},s={},o={},i={};var a,l;return a=(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r="--".concat(n?"".concat(n,"-"):"").concat(e.join("-")),l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px"):t)(e,t);Object.assign(s,{[r]:l}),Nw(o,e,"var(".concat(r,")"),a),Nw(i,e,"var(".concat(r,", ").concat(l,")"),a)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[s,o]=t;(!l||l&&!l([...n,s]))&&void 0!==o&&null!==o&&("object"===typeof o&&Object.keys(o).length>0?e(o,[...n,s],Array.isArray(o)?[...r,s]:r):a([...n,s],o,r))}))}(e),{css:s,vars:o,varsWithDefaults:i}}const kw=["colorSchemes","components","defaultColorScheme"];const Cw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:s}=t,{colorSchemes:o={},components:i,defaultColorScheme:a="light"}=e,l=E(e,kw),{vars:c,css:u,varsWithDefaults:d}=jw(l,t);let h=d;const m={},{[a]:p}=o,f=E(o,[a].map(xw.A));if(Object.entries(f||{}).forEach((e=>{let[n,r]=e;const{vars:s,css:o,varsWithDefaults:i}=jw(r,t);h=xx(h,i),m[n]={css:o,vars:s}})),p){const{css:e,vars:n,varsWithDefaults:r}=jw(p,t);h=xx(h,r),m[a]={css:e,vars:n}}function g(t,n){let r=s;if("class"===s&&(r=".%s"),"data"===s&&(r="[data-%s]"),null!==s&&void 0!==s&&s.startsWith("data-")&&!s.includes("%s")&&(r="[".concat(s,'="%s"]')),t){if("media"===r){var i;if(e.defaultColorScheme===t)return":root";const r=(null===(i=o[t])||void 0===i||null===(i=i.palette)||void 0===i?void 0:i.mode)||t;return{["@media (prefers-color-scheme: ".concat(r,")")]:{":root":n}}}if(r)return e.defaultColorScheme===t?":root, ".concat(r.replace("%s",String(t))):r.replace("%s",String(t))}return":root"}return{vars:h,generateThemeVars:()=>{let e=(0,S.A)({},c);return Object.entries(m).forEach((t=>{let[,{vars:n}]=t;e=xx(e,n)})),e},generateStyleSheets:()=>{const t=[],s=e.defaultColorScheme||"light";function i(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:(0,S.A)({},n)}:e)}i(n(void 0,(0,S.A)({},u)),u);const{[s]:a}=m,l=E(m,[s].map(xw.A));if(a){var c;const{css:e}=a,t=null===(c=o[s])||void 0===c||null===(c=c.palette)||void 0===c?void 0:c.mode,l=!r&&t?(0,S.A)({colorScheme:t},e):(0,S.A)({},e);i(n(s,(0,S.A)({},l)),l)}return Object.entries(l).forEach((e=>{var t;let[s,{css:a}]=e;const l=null===(t=o[s])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,c=!r&&l?(0,S.A)({colorScheme:l},a):(0,S.A)({},a);i(n(s,(0,S.A)({},c)),c)})),t}}};function Sw(e,t){return(0,S.A)({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const Aw=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Ew={textTransform:"uppercase"},_w='"Roboto", "Helvetica", "Arial", sans-serif';function Iw(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=_w,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:i=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=E(n,Aw);const m=s/14,p=d||(e=>"".concat(e/c*m,"rem")),f=(e,t,n,s,o)=>{return(0,S.A)((0,S.A)((0,S.A)({fontFamily:r,fontWeight:e,fontSize:p(t),lineHeight:n},r===_w?{letterSpacing:"".concat((i=s/t,Math.round(1e5*i)/1e5),"em")}:{}),o),u);var i},g={h1:f(o,96,1.167,-1.5),h2:f(o,60,1.2,-.5),h3:f(i,48,1.167,0),h4:f(i,34,1.235,.25),h5:f(i,24,1.334,0),h6:f(a,20,1.6,.15),subtitle1:f(i,16,1.75,.15),subtitle2:f(a,14,1.57,.1),body1:f(i,16,1.5,.15),body2:f(i,14,1.43,.15),button:f(a,14,1.75,.4,Ew),caption:f(i,12,1.66,.4),overline:f(i,12,2.66,1,Ew),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xx((0,S.A)({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:s,fontWeightLight:o,fontWeightRegular:i,fontWeightMedium:a,fontWeightBold:l},g),h,{clone:!1})}function Tw(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const Pw=["none",Tw(0,2,1,-1,0,1,1,0,0,1,3,0),Tw(0,3,1,-2,0,2,2,0,0,1,5,0),Tw(0,3,3,-2,0,3,4,0,0,1,8,0),Tw(0,2,4,-1,0,4,5,0,0,1,10,0),Tw(0,3,5,-1,0,5,8,0,0,1,14,0),Tw(0,3,5,-1,0,6,10,0,0,1,18,0),Tw(0,4,5,-2,0,7,10,1,0,2,16,1),Tw(0,5,5,-3,0,8,10,1,0,3,14,2),Tw(0,5,6,-3,0,9,12,1,0,3,16,2),Tw(0,6,6,-3,0,10,14,1,0,4,18,3),Tw(0,6,7,-4,0,11,15,1,0,4,20,3),Tw(0,7,8,-4,0,12,17,2,0,5,22,4),Tw(0,7,8,-4,0,13,19,2,0,5,24,4),Tw(0,7,9,-4,0,14,21,2,0,5,26,4),Tw(0,8,9,-5,0,15,22,2,0,6,28,5),Tw(0,8,10,-5,0,16,24,2,0,6,30,5),Tw(0,8,11,-5,0,17,26,2,0,6,32,5),Tw(0,9,11,-5,0,18,28,2,0,7,34,6),Tw(0,9,12,-6,0,19,29,2,0,7,36,6),Tw(0,10,13,-6,0,20,31,3,0,8,38,7),Tw(0,10,13,-6,0,21,33,3,0,8,40,7),Tw(0,10,14,-6,0,22,35,3,0,8,42,7),Tw(0,11,14,-7,0,23,36,3,0,9,44,8),Tw(0,11,15,-7,0,24,38,3,0,9,46,8)],Rw=["duration","easing","delay"],Dw={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Mw={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Lw(e){return"".concat(Math.round(e),"ms")}function Ow(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Fw(e){const t=(0,S.A)((0,S.A)({},Dw),e.easing),n=(0,S.A)((0,S.A)({},Mw),e.duration);return(0,S.A)((0,S.A)({getAutoHeightDuration:Ow,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:o=t.easeInOut,delay:i=0}=r;E(r,Rw);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof s?s:Lw(s)," ").concat(o," ").concat("string"===typeof i?i:Lw(i)))).join(",")}},e),{},{easing:t,duration:n})}const Bw={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Uw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,S.A)({},e);return function e(t){const n=Object.entries(t);for(let s=0;s<n.length;s++){const[o,i]=n[s];!yx(r=i)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:yx(i)&&(t[o]=(0,S.A)({},i),e(t[o]))}var r}(t),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(t,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const zw=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];const Vw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:s={},transitions:o={},typography:i={},shape:a}=e,l=E(e,zw);if(e.vars&&void 0===e.generateThemeVars)throw new Error(Ix(20));const c=vw(s),u=Ib(e);let d=xx(u,{mixins:Sw(u.breakpoints,n),palette:c,shadows:Pw.slice(),typography:Iw(c,i),transitions:Fw(o),zIndex:(0,S.A)({},Bw)});d=xx(d,l);for(var h=arguments.length,m=new Array(h>1?h-1:0),p=1;p<h;p++)m[p-1]=arguments[p];return d=m.reduce(((e,t)=>xx(e,t)),d),d.unstable_sxConfig=(0,S.A)((0,S.A)({},Cb),null===l||void 0===l?void 0:l.unstable_sxConfig),d.unstable_sx=function(e){return Ab({sx:e,theme:this})},d.toRuntimeSource=Uw,d};function qw(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Ww=["palette","opacity","overlays"],Hw=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=qw(t);return"linear-gradient(rgba(255 255 255 / ".concat(n,"), rgba(255 255 255 / ").concat(n,"))")}));function Gw(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Kw(e){return"dark"===e?Hw:[]}function Yw(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const Qw=e=>[...[...Array(25)].map(((t,n)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(n))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],$w=e=>(t,n)=>{const r=e.rootSelector||":root",s=e.colorSchemeSelector;let o=s;if("class"===s&&(o=".%s"),"data"===s&&(o="[data-%s]"),null!==s&&void 0!==s&&s.startsWith("data-")&&!s.includes("%s")&&(o="[".concat(s,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const s={};return Qw(e.cssVarPrefix).forEach((e=>{s[e]=n[e],delete n[e]})),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:s}}:o?{[o.replace("%s",t)]:s,["".concat(r,", ").concat(o.replace("%s",t))]:n}:{[r]:(0,S.A)((0,S.A)({},n),s)}}if(o&&"media"!==o)return"".concat(r,", ").concat(o.replace("%s",String(t)))}else if(t){if("media"===o)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r},Jw=["palette"],Xw=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function Zw(e,t,n){!e[t]&&n&&(e[t]=n)}function eN(e){return"string"===typeof e&&e.startsWith("hsl")?Qb(e):e}function tN(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=Kb(eN(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const nN=e=>{try{return e()}catch(t){}};function rN(e,t,n,r){var s,o,i;if(!t)return;t=!0===t?{}:t;const a="dark"===r?"dark":"light";var l;if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r}=e,s=E(e,Ww),o=vw(t);return(0,S.A)({palette:o,opacity:(0,S.A)((0,S.A)({},Gw(o.mode)),n),overlays:r||Kw(o.mode)},s)}((0,S.A)((0,S.A)({},t),{},{palette:(0,S.A)({mode:a},null===(l=t)||void 0===l?void 0:l.palette)})));const c=Vw((0,S.A)((0,S.A)({},n),{},{palette:(0,S.A)({mode:a},null===(s=t)||void 0===s?void 0:s.palette)})),{palette:u}=c,d=E(c,Jw);return e[r]=(0,S.A)((0,S.A)({},t),{},{palette:u,opacity:(0,S.A)((0,S.A)({},Gw(a)),null===(o=t)||void 0===o?void 0:o.opacity),overlays:(null===(i=t)||void 0===i?void 0:i.overlays)||Kw(a)}),d}function sN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=Yw,colorSchemeSelector:i=(t.light&&t.dark?"media":void 0),rootSelector:a=":root"}=e,l=E(e,Xw),c=Object.keys(t)[0],u=n||(t.light&&"light"!==c?"light":c),d=function(){return bw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(s),{[u]:h,light:m,dark:p}=t,f=E(t,[u,"light","dark"].map(xw.A)),g=(0,S.A)({},f);let y=h;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(y=!0),!y)throw new Error(Ix(21,u));const v=rN(g,y,l,u);m&&!g.light&&rN(g,m,void 0,"light"),p&&!g.dark&&rN(g,p,void 0,"dark");let x=(0,S.A)((0,S.A)({defaultColorScheme:u},v),{},{cssVarPrefix:s,colorSchemeSelector:i,rootSelector:a,getCssVar:d,colorSchemes:g,font:(0,S.A)((0,S.A)({},ww(v.typography)),v.font),spacing:(b=l.spacing,"number"===typeof b?"".concat(b,"px"):"string"===typeof b||"function"===typeof b||Array.isArray(b)?b:"8px")});var b;Object.keys(x.colorSchemes).forEach((e=>{const t=x.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],s=n[2];return d(e,t[r][s])};if("light"===t.mode&&(Zw(t.common,"background","#fff"),Zw(t.common,"onBackground","#000")),"dark"===t.mode&&(Zw(t.common,"background","#000"),Zw(t.common,"onBackground","#fff")),function(e,t){t.forEach((t=>{e[t]||(e[t]={})}))}(t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),"light"===t.mode){Zw(t.Alert,"errorColor",ew(t.error.light,.6)),Zw(t.Alert,"infoColor",ew(t.info.light,.6)),Zw(t.Alert,"successColor",ew(t.success.light,.6)),Zw(t.Alert,"warningColor",ew(t.warning.light,.6)),Zw(t.Alert,"errorFilledBg",n("palette-error-main")),Zw(t.Alert,"infoFilledBg",n("palette-info-main")),Zw(t.Alert,"successFilledBg",n("palette-success-main")),Zw(t.Alert,"warningFilledBg",n("palette-warning-main")),Zw(t.Alert,"errorFilledColor",nN((()=>t.getContrastText(t.error.main)))),Zw(t.Alert,"infoFilledColor",nN((()=>t.getContrastText(t.info.main)))),Zw(t.Alert,"successFilledColor",nN((()=>t.getContrastText(t.success.main)))),Zw(t.Alert,"warningFilledColor",nN((()=>t.getContrastText(t.warning.main)))),Zw(t.Alert,"errorStandardBg",nw(t.error.light,.9)),Zw(t.Alert,"infoStandardBg",nw(t.info.light,.9)),Zw(t.Alert,"successStandardBg",nw(t.success.light,.9)),Zw(t.Alert,"warningStandardBg",nw(t.warning.light,.9)),Zw(t.Alert,"errorIconColor",n("palette-error-main")),Zw(t.Alert,"infoIconColor",n("palette-info-main")),Zw(t.Alert,"successIconColor",n("palette-success-main")),Zw(t.Alert,"warningIconColor",n("palette-warning-main")),Zw(t.AppBar,"defaultBg",n("palette-grey-100")),Zw(t.Avatar,"defaultBg",n("palette-grey-400")),Zw(t.Button,"inheritContainedBg",n("palette-grey-300")),Zw(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),Zw(t.Chip,"defaultBorder",n("palette-grey-400")),Zw(t.Chip,"defaultAvatarColor",n("palette-grey-700")),Zw(t.Chip,"defaultIconColor",n("palette-grey-700")),Zw(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Zw(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Zw(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Zw(t.LinearProgress,"primaryBg",nw(t.primary.main,.62)),Zw(t.LinearProgress,"secondaryBg",nw(t.secondary.main,.62)),Zw(t.LinearProgress,"errorBg",nw(t.error.main,.62)),Zw(t.LinearProgress,"infoBg",nw(t.info.main,.62)),Zw(t.LinearProgress,"successBg",nw(t.success.main,.62)),Zw(t.LinearProgress,"warningBg",nw(t.warning.main,.62)),Zw(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.11)")),Zw(t.Slider,"primaryTrack",nw(t.primary.main,.62)),Zw(t.Slider,"secondaryTrack",nw(t.secondary.main,.62)),Zw(t.Slider,"errorTrack",nw(t.error.main,.62)),Zw(t.Slider,"infoTrack",nw(t.info.main,.62)),Zw(t.Slider,"successTrack",nw(t.success.main,.62)),Zw(t.Slider,"warningTrack",nw(t.warning.main,.62));const e=rw(t.background.default,.8);Zw(t.SnackbarContent,"bg",e),Zw(t.SnackbarContent,"color",nN((()=>t.getContrastText(e)))),Zw(t.SpeedDialAction,"fabHoverBg",rw(t.background.paper,.15)),Zw(t.StepConnector,"border",n("palette-grey-400")),Zw(t.StepContent,"border",n("palette-grey-400")),Zw(t.Switch,"defaultColor",n("palette-common-white")),Zw(t.Switch,"defaultDisabledColor",n("palette-grey-100")),Zw(t.Switch,"primaryDisabledColor",nw(t.primary.main,.62)),Zw(t.Switch,"secondaryDisabledColor",nw(t.secondary.main,.62)),Zw(t.Switch,"errorDisabledColor",nw(t.error.main,.62)),Zw(t.Switch,"infoDisabledColor",nw(t.info.main,.62)),Zw(t.Switch,"successDisabledColor",nw(t.success.main,.62)),Zw(t.Switch,"warningDisabledColor",nw(t.warning.main,.62)),Zw(t.TableCell,"border",nw(Xb(t.divider,1),.88)),Zw(t.Tooltip,"bg",Xb(t.grey[700],.92))}if("dark"===t.mode){Zw(t.Alert,"errorColor",nw(t.error.light,.6)),Zw(t.Alert,"infoColor",nw(t.info.light,.6)),Zw(t.Alert,"successColor",nw(t.success.light,.6)),Zw(t.Alert,"warningColor",nw(t.warning.light,.6)),Zw(t.Alert,"errorFilledBg",n("palette-error-dark")),Zw(t.Alert,"infoFilledBg",n("palette-info-dark")),Zw(t.Alert,"successFilledBg",n("palette-success-dark")),Zw(t.Alert,"warningFilledBg",n("palette-warning-dark")),Zw(t.Alert,"errorFilledColor",nN((()=>t.getContrastText(t.error.dark)))),Zw(t.Alert,"infoFilledColor",nN((()=>t.getContrastText(t.info.dark)))),Zw(t.Alert,"successFilledColor",nN((()=>t.getContrastText(t.success.dark)))),Zw(t.Alert,"warningFilledColor",nN((()=>t.getContrastText(t.warning.dark)))),Zw(t.Alert,"errorStandardBg",ew(t.error.light,.9)),Zw(t.Alert,"infoStandardBg",ew(t.info.light,.9)),Zw(t.Alert,"successStandardBg",ew(t.success.light,.9)),Zw(t.Alert,"warningStandardBg",ew(t.warning.light,.9)),Zw(t.Alert,"errorIconColor",n("palette-error-main")),Zw(t.Alert,"infoIconColor",n("palette-info-main")),Zw(t.Alert,"successIconColor",n("palette-success-main")),Zw(t.Alert,"warningIconColor",n("palette-warning-main")),Zw(t.AppBar,"defaultBg",n("palette-grey-900")),Zw(t.AppBar,"darkBg",n("palette-background-paper")),Zw(t.AppBar,"darkColor",n("palette-text-primary")),Zw(t.Avatar,"defaultBg",n("palette-grey-600")),Zw(t.Button,"inheritContainedBg",n("palette-grey-800")),Zw(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),Zw(t.Chip,"defaultBorder",n("palette-grey-700")),Zw(t.Chip,"defaultAvatarColor",n("palette-grey-300")),Zw(t.Chip,"defaultIconColor",n("palette-grey-300")),Zw(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Zw(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Zw(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Zw(t.LinearProgress,"primaryBg",ew(t.primary.main,.5)),Zw(t.LinearProgress,"secondaryBg",ew(t.secondary.main,.5)),Zw(t.LinearProgress,"errorBg",ew(t.error.main,.5)),Zw(t.LinearProgress,"infoBg",ew(t.info.main,.5)),Zw(t.LinearProgress,"successBg",ew(t.success.main,.5)),Zw(t.LinearProgress,"warningBg",ew(t.warning.main,.5)),Zw(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.13)")),Zw(t.Slider,"primaryTrack",ew(t.primary.main,.5)),Zw(t.Slider,"secondaryTrack",ew(t.secondary.main,.5)),Zw(t.Slider,"errorTrack",ew(t.error.main,.5)),Zw(t.Slider,"infoTrack",ew(t.info.main,.5)),Zw(t.Slider,"successTrack",ew(t.success.main,.5)),Zw(t.Slider,"warningTrack",ew(t.warning.main,.5));const e=rw(t.background.default,.98);Zw(t.SnackbarContent,"bg",e),Zw(t.SnackbarContent,"color",nN((()=>t.getContrastText(e)))),Zw(t.SpeedDialAction,"fabHoverBg",rw(t.background.paper,.15)),Zw(t.StepConnector,"border",n("palette-grey-600")),Zw(t.StepContent,"border",n("palette-grey-600")),Zw(t.Switch,"defaultColor",n("palette-grey-300")),Zw(t.Switch,"defaultDisabledColor",n("palette-grey-600")),Zw(t.Switch,"primaryDisabledColor",ew(t.primary.main,.55)),Zw(t.Switch,"secondaryDisabledColor",ew(t.secondary.main,.55)),Zw(t.Switch,"errorDisabledColor",ew(t.error.main,.55)),Zw(t.Switch,"infoDisabledColor",ew(t.info.main,.55)),Zw(t.Switch,"successDisabledColor",ew(t.success.main,.55)),Zw(t.Switch,"warningDisabledColor",ew(t.warning.main,.55)),Zw(t.TableCell,"border",ew(Xb(t.divider,1),.68)),Zw(t.Tooltip,"bg",Xb(t.grey[700],.92))}tN(t.background,"default"),tN(t.background,"paper"),tN(t.common,"background"),tN(t.common,"onBackground"),tN(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&Zw(t[e],"mainChannel",Kb(eN(n.main))),n.light&&Zw(t[e],"lightChannel",Kb(eN(n.light))),n.dark&&Zw(t[e],"darkChannel",Kb(eN(n.dark))),n.contrastText&&Zw(t[e],"contrastTextChannel",Kb(eN(n.contrastText))),"text"===e&&(tN(t[e],"primary"),tN(t[e],"secondary")),"action"===e&&(n.active&&tN(t[e],"active"),n.selected&&tN(t[e],"selected")))}))}));for(var w=arguments.length,N=new Array(w>1?w-1:0),j=1;j<w;j++)N[j-1]=arguments[j];x=N.reduce(((e,t)=>xx(e,t)),x);const k={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:$w(x)},{vars:C,generateThemeVars:A,generateStyleSheets:_}=Cw(x,k);return x.vars=C,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach((e=>{let[t,n]=e;x[t]=n})),x.generateThemeVars=A,x.generateStyleSheets=_,x.generateSpacing=function(){return Jx(l.spacing,Wx(this))},x.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(i),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig=(0,S.A)((0,S.A)({},Cb),null===l||void 0===l?void 0:l.unstable_sxConfig),x.unstable_sx=function(e){return Ab({sx:e,theme:this})},x.toRuntimeSource=Uw,x}const oN=["palette","cssVariables","colorSchemes","defaultColorScheme"];function iN(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]=(0,S.A)((0,S.A)({},!0!==n&&n),{},{palette:vw((0,S.A)((0,S.A)({},!0===n?{}:n.palette),{},{mode:t}))}))}function aN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:s=(null===t||void 0===t?void 0:t.mode)}=e,o=E(e,oN),i=s||"light",a=null===r||void 0===r?void 0:r[i],l=(0,S.A)((0,S.A)({},r),t?{[i]:(0,S.A)((0,S.A)({},"boolean"!==typeof a&&a),{},{palette:t})}:void 0);for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(!1===n){if(!("colorSchemes"in e))return Vw(e,...u);let n=t;"palette"in e||l[i]&&(!0!==l[i]?n=l[i].palette:"dark"===i&&(n={mode:"dark"}));const r=Vw((0,S.A)((0,S.A)({},e),{},{palette:n}),...u);return r.defaultColorScheme=i,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light=(0,S.A)((0,S.A)({},!0!==l.light&&l.light),{},{palette:r.palette}),iN(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark=(0,S.A)((0,S.A)({},!0!==l.dark&&l.dark),{},{palette:r.palette}),iN(r,"light",l.light)),r}return t||"light"in l||"light"!==i||(l.light=!0),sN((0,S.A)((0,S.A)({},o),{},{colorSchemes:l,defaultColorScheme:i},"boolean"!==typeof n&&n),...u)}const lN=aN(),cN="$$material";const uN=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},dN=e=>uN(e)&&"classes"!==e,hN=zb({themeId:cN,defaultTheme:lN,rootShouldForwardProp:dN}),mN={theme:void 0};const pN=function(e){let t,n;return function(r){let s=t;return void 0!==s&&r.theme===n||(mN.theme=r.theme,s=Pb(e(mN)),t=s,n=r.theme),s}};function fN(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,S.A)({},t);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=s;if("components"===o||"slots"===o)r[o]=(0,S.A)((0,S.A)({},e[o]),r[o]);else if("componentsProps"===o||"slotProps"===o){const s=e[o],i=t[o];if(i)if(s){r[o]=(0,S.A)({},i);for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)){const t=e;r[o][t]=fN(s[t],i[t],n)}}else r[o]=i;else r[o]=s||{}}else"className"===o&&n&&t.className?r.className=js(null===e||void 0===e?void 0:e.className,null===t||void 0===t?void 0:t.className):"style"===o&&n&&t.style?r.style=(0,S.A)((0,S.A)({},null===e||void 0===e?void 0:e.style),null===t||void 0===t?void 0:t.style):void 0===r[o]&&(r[o]=e[o])}return r}const gN=e.createContext(void 0);function yN(t){let{props:n,name:r}=t;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const s=t.components[n];return s.defaultProps?fN(s.defaultProps,r,t.components.mergeClassNameAndStyle):s.styleOverrides||s.variants?r:fN(s,r,t.components.mergeClassNameAndStyle)}({props:n,name:r,theme:{components:e.useContext(gN)}})}function vN(e){return yN(e)}const xN=Tx;function bN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}const wN=e=>e,NN=(()=>{let e=wN;return{configure(t){e=t},generate:t=>e(t),reset(){e=wN}}})(),jN={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function kN(e,t){const n=jN[t];return n?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(n):"".concat(NN.generate(e),"-").concat(t)}function CN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=kN(e,t,n)})),r}function SN(e){return kN("MuiCircularProgress",e)}CN("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const AN=["className","color","disableShrink","size","style","thickness","value","variant"];var EN,_N,IN,TN;const PN=44,RN=sx(EN||(EN=(0,Cy.A)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),DN=sx(_N||(_N=(0,Cy.A)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: -126px;\n  }\n"]))),MN="string"!==typeof RN?rx(IN||(IN=(0,Cy.A)(["\n        animation: "," 1.4s linear infinite;\n      "])),RN):null,LN="string"!==typeof DN?rx(TN||(TN=(0,Cy.A)(["\n        animation: "," 1.4s ease-in-out infinite;\n      "])),DN):null,ON=hN("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat(xN(n.color))]]}})(pN((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:MN||{animation:"".concat(RN," 1.4s linear infinite")}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),FN=hN("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),BN=hN("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat(xN(n.variant))],n.disableShrink&&t.circleDisableShrink]}})(pN((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:LN||{animation:"".concat(DN," 1.4s ease-in-out infinite")}}]}}))),UN=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:o=!1,size:i=40,style:a,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=E(n,AN),h=(0,S.A)((0,S.A)({},n),{},{color:s,disableShrink:o,size:i,thickness:l,value:c,variant:u}),m=(e=>{const{classes:t,variant:n,color:r,disableShrink:s}=e;return Sy({root:["root",n,"color".concat(xN(r))],svg:["svg"],circle:["circle","circle".concat(xN(n)),s&&"circleDisableShrink"]},SN,t)})(h),p={},f={},g={};if("determinate"===u){const e=2*Math.PI*((PN-l)/2);p.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),p.strokeDashoffset="".concat(((100-c)/100*e).toFixed(3),"px"),f.transform="rotate(-90deg)"}return(0,k.jsx)(ON,(0,S.A)((0,S.A)((0,S.A)({className:js(m.root,r),style:(0,S.A)((0,S.A)({width:i,height:i},f),a),ownerState:h,ref:t,role:"progressbar"},g),d),{},{children:(0,k.jsx)(FN,{className:m.svg,ownerState:h,viewBox:"".concat(22," ").concat(22," ").concat(PN," ").concat(PN),children:(0,k.jsx)(BN,{className:m.circle,style:p,ownerState:h,cx:PN,cy:PN,r:(PN-l)/2,fill:"none",strokeWidth:l})})}))})),zN=UN,VN=()=>{const{user:t,businessProfile:n}=(0,N.A)(),[r,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)(null);return(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId||null!==n&&void 0!==n&&n.businessId)try{const e=(null===t||void 0===t?void 0:t.businessId)||(null===n||void 0===n?void 0:n.businessId),r=await Kg(e);l(r)}catch(e){console.error("Error fetching loyalty program:",e)}})()}),[t,n]),(0,e.useEffect)((()=>{a&&(async()=>{if((null!==t&&void 0!==t&&t.businessId||null!==n&&void 0!==n&&n.businessId)&&a)try{const e=(null===t||void 0===t?void 0:t.businessId)||(null===n||void 0===n?void 0:n.businessId),r=(0,sl.rJ)(rl.db,"customers");let o;o="points"===a.type?(0,sl.P)(r,(0,sl._M)("businessId","==",e),(0,sl._M)("loyaltyPoints",">",0),(0,sl.My)("loyaltyPoints","desc"),(0,sl.AB)(5)):"visits"===a.type?(0,sl.P)(r,(0,sl._M)("businessId","==",e),(0,sl._M)("totalVisits",">",0),(0,sl.My)("totalVisits","desc"),(0,sl.AB)(5)):(0,sl.P)(r,(0,sl._M)("businessId","==",e),(0,sl._M)("loyaltyPoints",">",0),(0,sl.My)("loyaltyPoints","desc"),(0,sl.AB)(5));const l=await(0,sl.GG)(o);if(l.empty)return s([]),void i(!1);const c=[];l.forEach((e=>{const t=(0,S.A)({id:e.id},e.data());let n=0,r=0,s=0;if("points"===a.type){s=t.loyaltyPoints||0;const e=[...a.rewards].filter((e=>e.active&&e.pointsCost)).sort(((e,t)=>(e.pointsCost||0)-(t.pointsCost||0))),o=e.find((e=>(e.pointsCost||0)>s));o?(r=o.pointsCost||0,n=s/r*100):e.length>0&&(r=e[e.length-1].pointsCost||0,n=100)}else if("visits"===a.type)s=t.totalVisits||0,r=a.visitsRequired||10,n=s%r/r*100;else if("tiered"===a.type){s=t.loyaltyPoints||0;const e=[...a.tiers||[]].sort(((e,t)=>e.threshold-t.threshold)),o=e.findIndex((e=>s<e.threshold))-1,i=o>=0?e[o]:null,l=o+1<e.length?e[o+1]:null;if(l){const e=i?i.threshold:0;r=l.threshold,n=(s-e)/(r-e)*100}else e.length>0&&(r=e[e.length-1].threshold,n=100)}c.push((0,S.A)((0,S.A)({},t),{},{progress:n,visitsOrPoints:s,nextRewardAt:r}))})),s(c)}catch(e){console.error("Error fetching loyalty members:",e)}finally{i(!1)}})()}),[t,n,a]),o?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)(zN,{})}):a?(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,k.jsxs)("div",{className:"border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Loyalty Program Members"}),(0,k.jsx)(y,{to:"/business/loyalty",className:"text-sm text-blue-600 hover:text-blue-800",children:"View All"})]}),0===r.length?(0,k.jsx)("div",{className:"text-center py-8",children:(0,k.jsx)("p",{className:"text-gray-500",children:"No members in your loyalty program yet"})}):(0,k.jsx)("ul",{className:"divide-y divide-gray-200",children:r.map((e=>(0,k.jsx)("li",{className:"px-6 py-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,k.jsxs)("span",{className:"text-gray-500 font-medium",children:[e.firstName.charAt(0),e.lastName.charAt(0)]})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:[e.visitsOrPoints," ","points"===a.type?"points":"visits"===a.type?"visits":"points"]})]})]}),(0,k.jsxs)("div",{className:"w-1/3",children:[(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,k.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(Math.min(e.progress,100),"%")}})}),(0,k.jsxs)("div",{className:"text-xs text-right text-gray-500 mt-1",children:[Math.round(e.progress),"% to next reward"]})]})]})},e.id)))})]}):(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"text-center py-4",children:[(0,k.jsx)("p",{className:"text-gray-500",children:"No loyalty program found"}),(0,k.jsx)(y,{to:"/business/loyalty",className:"mt-2 inline-block text-blue-600 hover:text-blue-800",children:"Create a loyalty program"})]})})},qN=()=>{const{user:t,businessProfile:n}=(0,N.A)(),[r,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)(null),[c,u]=(0,e.useState)("");(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId||null!==n&&void 0!==n&&n.businessId)try{const e=(null===t||void 0===t?void 0:t.businessId)||(null===n||void 0===n?void 0:n.businessId),r=await Kg(e);l(r)}catch(e){console.error("Error fetching loyalty program:",e)}})()}),[t,n]),(0,e.useEffect)((()=>{a&&(async()=>{if((null!==t&&void 0!==t&&t.businessId||null!==n&&void 0!==n&&n.businessId)&&a)try{const e=(null===t||void 0===t?void 0:t.businessId)||(null===n||void 0===n?void 0:n.businessId),r=(0,sl.rJ)(rl.db,"customers"),o=(0,sl.P)(r,(0,sl._M)("businessId","==",e),(0,sl.My)("lastName")),l=await(0,sl.GG)(o);if(l.empty)return s([]),void i(!1);const c=[];l.forEach((e=>{const t=(0,S.A)({id:e.id},e.data());if(t.loyaltyPoints||t.totalVisits){let e=0,n=0,r=0,s="";if("points"===a.type){r=t.loyaltyPoints||0;const o=[...a.rewards].filter((e=>e.active&&e.pointsCost)).sort(((e,t)=>(e.pointsCost||0)-(t.pointsCost||0))),i=o.find((e=>(e.pointsCost||0)>r));if(i)n=i.pointsCost||0,s=i.name,e=r/n*100;else if(o.length>0){const t=o[o.length-1];n=t.pointsCost||0,s=t.name,e=100}}else if("visits"===a.type){r=t.totalVisits||0,n=a.visitsRequired||10;const o=a.rewards.find((e=>e.visitsCost===a.visitsRequired));o&&(s=o.name),e=r%n/n*100}else if("tiered"===a.type){r=t.loyaltyPoints||0;const o=[...a.tiers||[]].sort(((e,t)=>e.threshold-t.threshold)),i=o.findIndex((e=>r<e.threshold))-1,l=i>=0?o[i]:null,c=i+1<o.length?o[i+1]:null;if(c){const t=l?l.threshold:0;n=c.threshold,s=c.name+" Tier",e=(r-t)/(n-t)*100}else o.length>0&&(n=o[o.length-1].threshold,s="Highest Tier Achieved",e=100)}c.push((0,S.A)((0,S.A)({},t),{},{progress:e,visitsOrPoints:r,nextRewardAt:n,nextRewardName:s}))}})),s(c)}catch(e){console.error("Error fetching loyalty members:",e)}finally{i(!1)}})()}),[t,n,a]);const d=r.filter((e=>"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(c.toLowerCase())||e.email&&e.email.toLowerCase().includes(c.toLowerCase())||e.phone&&e.phone.includes(c)));return o?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)(zN,{})}):a?(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Loyalty Program Members"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search members...",className:"border border-gray-300 rounded-md px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:e=>u(e.target.value)}),(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),0===d.length?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,k.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No loyalty members found"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c?"Try a different search term":"Start by adding customers to your loyalty program"})]}):(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"points"===a.type?"Points":"visits"===a.type?"Visits":"Tier Progress"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress to Next Reward"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Reward"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,k.jsxs)("span",{className:"text-gray-500 font-medium",children:[e.firstName.charAt(0),e.lastName.charAt(0)]})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]})]})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsxs)("div",{className:"text-sm text-gray-900",children:[e.visitsOrPoints," ","points"===a.type?"points":"visits"===a.type?"visits":"points"]}),"tiered"===a.type&&(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["Next tier at: ",e.nextRewardAt," points"]})]}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,k.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(Math.min(e.progress,100),"%")}})}),(0,k.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(e.progress),"% complete"]})]}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.nextRewardName||"No reward available"})]},e.id)))})]})})]}):(0,k.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm text-yellow-700",children:"No loyalty program found. Please create a loyalty program first."})})]})})},WN=e=>{let{program:t,onScanClick:n,onSendCouponClick:r,onRewardClick:s}=e;return t?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{onClick:n,className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-5 border border-purple-200 hover:shadow-md transition-shadow cursor-pointer",children:[(0,k.jsxs)("div",{className:"flex items-center mb-3",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-purple-200 rounded-full flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-900",children:"Scan QR"}),(0,k.jsx)("p",{className:"text-xs text-purple-700",children:"Record customer visit"})]})]}),(0,k.jsx)("p",{className:"text-sm text-purple-800",children:"visits"===t.type?"Record visits (".concat(t.visitsRequired," visits = 1 reward)"):"points"===t.type?"Add points (1 visit = 1 point)":"Add points and track tier progress"}),(0,k.jsx)("button",{className:"mt-3 w-full py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700 transition-colors",children:"Scan Now"})]}),(0,k.jsxs)("div",{onClick:r,className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg p-5 border border-indigo-200 hover:shadow-md transition-shadow cursor-pointer",children:[(0,k.jsxs)("div",{className:"flex items-center mb-3",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-indigo-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"font-medium text-indigo-900",children:"Send Coupon"}),(0,k.jsx)("p",{className:"text-xs text-indigo-700",children:"Distribute special offers"})]})]}),(0,k.jsx)("p",{className:"text-sm text-indigo-800",children:"Send personalized coupons to your loyal customers to encourage repeat business"}),(0,k.jsx)("button",{className:"mt-3 w-full py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700 transition-colors",children:"Send Coupon"})]}),(0,k.jsxs)("div",{onClick:s,className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-5 border border-blue-200 hover:shadow-md transition-shadow cursor-pointer",children:[(0,k.jsxs)("div",{className:"flex items-center mb-3",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"font-medium text-blue-900",children:"Reward"}),(0,k.jsx)("p",{className:"text-xs text-blue-700",children:"Redeem customer rewards"})]})]}),(0,k.jsx)("p",{className:"text-sm text-blue-800",children:"Process rewards for customers who have earned them through loyalty program participation"}),(0,k.jsx)("button",{className:"mt-3 w-full py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:"Process Reward"})]})]})]}):null},HN=t=>{let{initialData:n,businessId:r,onSave:s,onCancel:o}=t;const[i,a]=(0,e.useState)(n||{name:"",description:"",type:"points",pointsPerAmount:1,amountPerPoint:1,visitsRequired:10,tiers:[],rewards:[],active:!1}),[l,c]=(0,e.useState)(1),[u,d]=(0,e.useState)(!0),h=e=>{const{name:t,value:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))},m=e=>{const{name:t,value:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:parseFloat(n)})))},p=()=>{d(!1),setTimeout((()=>{c((e=>e+1)),d(!0)}),300)},f=()=>{d(!1),setTimeout((()=>{c((e=>e-1)),d(!0)}),300)};return(0,k.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:(0,k.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-purple-900",children:n?"Edit Loyalty Program":"Create Loyalty Program"}),(0,k.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsxs)("div",{className:"flex mb-8",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"h-1 ".concat(l>=1?"bg-purple-600":"bg-gray-200"," transition-colors duration-500")}),(0,k.jsxs)("div",{className:"flex items-center mt-2",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(l>=1?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"),children:"1"}),(0,k.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Basic Info"})]})]}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"h-1 ".concat(l>=2?"bg-purple-600":"bg-gray-200"," transition-colors duration-500")}),(0,k.jsxs)("div",{className:"flex items-center mt-2",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(l>=2?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"),children:"2"}),(0,k.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Program Type"})]})]}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"h-1 ".concat(l>=3?"bg-purple-600":"bg-gray-200"," transition-colors duration-500")}),(0,k.jsxs)("div",{className:"flex items-center mt-2",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(l>=3?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"),children:"3"}),(0,k.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Review"})]})]})]}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={id:(null===n||void 0===n?void 0:n.id)||"loyalty_".concat(Date.now()),businessId:r,name:i.name||"Loyalty Program",description:i.description||"Our loyalty program",type:i.type||"points",pointsPerAmount:i.pointsPerAmount||1,amountPerPoint:i.amountPerPoint||1,visitsRequired:i.visitsRequired||10,tiers:i.tiers||[],rewards:(null===n||void 0===n?void 0:n.rewards)||[],active:i.active||!1,createdAt:(null===n||void 0===n?void 0:n.createdAt)||new Date,updatedAt:new Date};s(t)},children:[1===l&&(0,k.jsxs)("div",{className:"space-y-4 transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0"),children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Name"}),(0,k.jsx)("input",{type:"text",name:"name",value:i.name||"",onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"e.g., VIP Rewards Club",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,k.jsx)("textarea",{name:"description",value:i.description||"",onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors",placeholder:"Describe your loyalty program...",rows:3,required:!0})]}),(0,k.jsx)("div",{className:"pt-4",children:(0,k.jsx)("div",{className:"flex justify-end",children:(0,k.jsxs)("button",{type:"button",onClick:p,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md flex items-center",children:["Next",(0,k.jsx)("svg",{className:"w-5 h-5 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})]}),2===l&&(0,k.jsxs)("div",{className:"space-y-6 transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0"),children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Program Type"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ".concat("points"===i.type?"border-purple-500 bg-purple-50":"border-gray-200"),onClick:()=>a((e=>(0,S.A)((0,S.A)({},e),{},{type:"points"}))),children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsx)("div",{className:"w-5 h-5 rounded-full border ".concat("points"===i.type?"border-purple-500":"border-gray-300"," flex items-center justify-center"),children:"points"===i.type&&(0,k.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})}),(0,k.jsx)("span",{className:"ml-2 font-medium",children:"Points"})]}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Customers earn points based on purchase amount"})]}),(0,k.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ".concat("visits"===i.type?"border-purple-500 bg-purple-50":"border-gray-200"),onClick:()=>a((e=>(0,S.A)((0,S.A)({},e),{},{type:"visits"}))),children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsx)("div",{className:"w-5 h-5 rounded-full border ".concat("visits"===i.type?"border-purple-500":"border-gray-300"," flex items-center justify-center"),children:"visits"===i.type&&(0,k.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})}),(0,k.jsx)("span",{className:"ml-2 font-medium",children:"Visits"})]}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Customers earn rewards based on number of visits"})]}),(0,k.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ".concat("tiered"===i.type?"border-purple-500 bg-purple-50":"border-gray-200"),onClick:()=>a((e=>(0,S.A)((0,S.A)({},e),{},{type:"tiered"}))),children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsx)("div",{className:"w-5 h-5 rounded-full border ".concat("tiered"===i.type?"border-purple-500":"border-gray-300"," flex items-center justify-center"),children:"tiered"===i.type&&(0,k.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})}),(0,k.jsx)("span",{className:"ml-2 font-medium",children:"Tiered"})]}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Customers progress through different loyalty tiers"})]})]})]}),"points"===i.type&&(0,k.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800 mb-3",children:"Points Settings"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points Per Amount"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"number",name:"pointsPerAmount",value:i.pointsPerAmount||1,onChange:m,min:"0.1",step:"0.1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),(0,k.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"points per R1"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Per Point (Redemption)"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"mr-2 text-sm text-gray-600",children:"R"}),(0,k.jsx)("input",{type:"number",name:"amountPerPoint",value:i.amountPerPoint||1,onChange:m,min:"0.1",step:"0.1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),(0,k.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"per point"})]})]})]})]}),"visits"===i.type&&(0,k.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800 mb-3",children:"Visits Settings"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visits Required for Reward"}),(0,k.jsx)("input",{type:"number",name:"visitsRequired",value:i.visitsRequired||10,onChange:m,min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),"tiered"===i.type&&(0,k.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800 mb-3",children:"Tiered Settings"}),(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"You'll be able to configure tiers after creating the program."})]}),(0,k.jsxs)("div",{className:"pt-4 flex justify-between",children:[(0,k.jsxs)("button",{type:"button",onClick:f,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,k.jsxs)("button",{type:"button",onClick:p,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md flex items-center",children:["Next",(0,k.jsx)("svg",{className:"w-5 h-5 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),3===l&&(0,k.jsxs)("div",{className:"space-y-6 transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0"),children:[(0,k.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800 mb-3",children:"Program Summary"}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),(0,k.jsx)("span",{className:"text-sm text-gray-900",children:i.name})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Type:"}),(0,k.jsx)("span",{className:"text-sm text-gray-900 capitalize",children:i.type})]}),"points"===i.type&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Points Per R1:"}),(0,k.jsx)("span",{className:"text-sm text-gray-900",children:i.pointsPerAmount})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Value Per Point:"}),(0,k.jsxs)("span",{className:"text-sm text-gray-900",children:["R",i.amountPerPoint]})]})]}),"visits"===i.type&&(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Visits Required:"}),(0,k.jsx)("span",{className:"text-sm text-gray-900",children:i.visitsRequired})]})]})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"active",name:"active",checked:i.active||!1,onChange:e=>{const{name:t,checked:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))},className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),(0,k.jsx)("label",{htmlFor:"active",className:"ml-2 text-sm text-gray-700",children:"Activate program immediately"})]}),(0,k.jsxs)("div",{className:"pt-4 flex justify-between",children:[(0,k.jsxs)("button",{type:"button",onClick:f,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,k.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md flex items-center",children:[n?"Save Changes":"Create Program",(0,k.jsx)("svg",{className:"w-5 h-5 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})]})]})]})]})})})},GN=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var KN=e=>"number"==typeof e&&!isNaN(e),YN=e=>"string"==typeof e,QN=e=>"function"==typeof e,$N=e=>YN(e)||QN(e)?e:null,JN=(e,t)=>!1===e||KN(e)&&e>0?e:t,XN=t=>(0,e.isValidElement)(t)||YN(t)||QN(t)||KN(t);function ZN(t){let{enter:n,exit:r,appendPosition:s=!1,collapse:o=!0,collapseDuration:i=300}=t;return function(t){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:m}=t,p=s?"".concat(n,"--").concat(l):n,f=s?"".concat(r,"--").concat(l):r,g=(0,e.useRef)(0);return(0,e.useLayoutEffect)((()=>{let e=d.current,t=p.split(" "),n=r=>{r.target===d.current&&(m(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,e.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),o?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:s}=e;requestAnimationFrame((()=>{s.minHeight="initial",s.height=r+"px",s.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)}))}))}(e,u,i):u()};h||(c?t():(g.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))}),[h]),e.createElement(e.Fragment,null,a)}}function ej(e,t){return{content:tj(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function tj(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,e.isValidElement)(t)&&!YN(t.type)?(0,e.cloneElement)(t,{closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):QN(t)?t({closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):t}function nj(t){let{delay:n,isRunning:r,closeToast:s,type:o="default",hide:i,className:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=t,m=i||l&&0===c,p={animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused"};l&&(p.transform="scaleX(".concat(c,")"));let f=js("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(h),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":u}),g=QN(a)?a({rtl:u,type:o,defaultClassName:f}):js(f,a),y={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&s()}};return e.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},e.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(h," Toastify__progress-bar--").concat(o)}),e.createElement("div",(0,S.A)({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:g,style:p},y)))}var rj=1,sj=()=>"".concat(rj++);function oj(e,t,n){let r=1,s=0,o=[],i=[],a=t,l=new Map,c=new Set,u=()=>{i=Array.from(l.values()),c.forEach((e=>e()))},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},m=e=>{var t,r;let{toastId:s,updateId:o}=e.props,i=null==o;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(s,e),u(),n(ej(e,i?"added":"updated")),i&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:a,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:l,clearQueue:()=>{s-=o.length,o=[]},buildToast:(t,i)=>{if((t=>{let{containerId:n,toastId:r,updateId:s}=t,o=n?n!==e:1!==e,i=l.has(r)&&null==s;return o||i})(i))return;let{toastId:c,updateId:d,data:p,staleId:f,delay:g}=i,y=null==d;y&&s++;let v=(0,S.A)((0,S.A)((0,S.A)({},a),{},{style:a.toastStyle,key:r++},Object.fromEntries(Object.entries(i).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:c,updateId:d,data:p,isIn:!1,className:$N(i.className||a.toastClassName),progressClassName:$N(i.progressClassName||a.progressClassName),autoClose:!i.isLoading&&JN(i.autoClose,a.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(ej(e,"removed")),l.delete(c),s--,s<0&&(s=0),o.length>0)return void m(o.shift());u()}}});v.closeButton=a.closeButton,!1===i.closeButton||XN(i.closeButton)?v.closeButton=i.closeButton:!0===i.closeButton&&(v.closeButton=!XN(a.closeButton)||a.closeButton);let x={content:t,props:v,staleId:f};a.limit&&a.limit>0&&s>a.limit&&y?o.push(x):KN(g)?setTimeout((()=>{m(x)}),g):m(x)},setProps(e){a=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>i}}var ij=new Map,aj=[],lj=new Set,cj=e=>lj.forEach((t=>t(e))),uj=()=>ij.size>0;function dj(e,t){var n;if(t)return!(null==(n=ij.get(t))||!n.isToastActive(e));let r=!1;return ij.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function hj(e){if(uj()){if(null==e||(e=>YN(e)||KN(e))(e))ij.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=ij.get(e.containerId);t?t.removeToast(e.id):ij.forEach((t=>{t.removeToast(e.id)}))}}else aj=aj.filter((t=>null!=e&&t.options.toastId!==e))}function mj(e,t){XN(e)&&(uj()||aj.push({content:e,options:t}),ij.forEach((n=>{n.buildToast(e,t)})))}function pj(e,t){ij.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function fj(e){let t=e.containerId||1;return{subscribe(n){let r=oj(t,e,cj);ij.set(t,r);let s=r.observe(n);return aj.forEach((e=>mj(e.content,e.options))),aj=[],()=>{s(),ij.delete(t)}},setProps(e){var n;null==(n=ij.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=ij.get(t))?void 0:e.getSnapshot()}}}function gj(e){return e&&(YN(e.toastId)||KN(e.toastId))?e.toastId:sj()}function yj(e,t){return mj(e,t),t.toastId}function vj(e,t){return(0,S.A)((0,S.A)({},t),{},{type:t&&t.type||e,toastId:gj(t)})}function xj(e){return(t,n)=>yj(t,vj(e,n))}function bj(e,t){return yj(e,vj("default",t))}function wj(t){let[n,r]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),i=(0,e.useRef)(null),a=(0,e.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=t;function m(){r(!0)}function p(){r(!1)}function f(e){let r=i.current;if(a.canDrag&&r){a.didMove=!0,n&&p(),"x"===t.draggableDirection?a.delta=e.clientX-a.start:a.delta=e.clientY-a.start,a.start!==e.clientX&&(a.canCloseOnClick=!1);let s="x"===t.draggableDirection?"".concat(a.delta,"px, var(--y)"):"0, calc(".concat(a.delta,"px + var(--y))");r.style.transform="translate3d(".concat(s,",0)"),r.style.opacity="".concat(1-Math.abs(a.delta/a.removalDistance))}}function g(){document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",g);let e=i.current;if(a.canDrag&&a.didMove&&e){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return o(!0),t.closeToast(!0),void t.collapseAll();e.style.transition="transform 0.2s, opacity 0.2s",e.style.removeProperty("transform"),e.style.removeProperty("opacity")}}(function(e){var t;null==(t=ij.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:t.toastId,containerId:t.containerId,fn:r}),(0,e.useEffect)((()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",m),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",p)}}),[t.pauseOnFocusLoss]);let y={onPointerDown:function(e){if(!0===t.draggable||t.draggable===e.pointerType){a.didMove=!1,document.addEventListener("pointermove",f),document.addEventListener("pointerup",g);let n=i.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===t.draggableDirection?(a.start=e.clientX,a.removalDistance=n.offsetWidth*(t.draggablePercent/100)):(a.start=e.clientY,a.removalDistance=n.offsetHeight*(80===t.draggablePercent?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(e){let{top:n,bottom:r,left:s,right:o}=i.current.getBoundingClientRect();"touchend"!==e.nativeEvent.type&&t.pauseOnHover&&e.clientX>=s&&e.clientX<=o&&e.clientY>=n&&e.clientY<=r?p():m()}};return l&&c&&(y.onMouseEnter=p,t.stacked||(y.onMouseLeave=m)),h&&(y.onClick=e=>{d&&d(e),a.canCloseOnClick&&u(!0)}),{playToast:m,pauseToast:p,isRunning:n,preventExitTransition:s,toastRef:i,eventHandlers:y}}bj.loading=(e,t)=>yj(e,vj("default",(0,S.A)({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),bj.promise=function(e,t,n){let r,{pending:s,error:o,success:i}=t;s&&(r=YN(s)?bj.loading(s,n):bj.loading(s.render,(0,S.A)((0,S.A)({},n),s)));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,s)=>{if(null==t)return void bj.dismiss(r);let o=(0,S.A)((0,S.A)((0,S.A)({type:e},a),n),{},{data:s}),i=YN(t)?{render:t}:t;return r?bj.update(r,(0,S.A)((0,S.A)({},o),i)):bj(i.render,(0,S.A)((0,S.A)({},o),i)),s},c=QN(e)?e():e;return c.then((e=>l("success",i,e))).catch((e=>l("error",o,e))),c},bj.success=xj("success"),bj.info=xj("info"),bj.error=xj("error"),bj.warning=xj("warning"),bj.warn=bj.warning,bj.dark=(e,t)=>yj(e,vj("default",(0,S.A)({theme:"dark"},t))),bj.dismiss=function(e){hj(e)},bj.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ij.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},bj.isActive=dj,bj.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=ij.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:s}=n,o=(0,S.A)((0,S.A)((0,S.A)({delay:100},r),t),{},{toastId:t.toastId||e,updateId:sj()});o.toastId!==e&&(o.staleId=e);let i=o.render||s;delete o.render,yj(i,o)}},bj.done=e=>{bj.update(e,{progress:1})},bj.onChange=function(e){return lj.add(e),()=>{lj.delete(e)}},bj.play=e=>pj(!0,e),bj.pause=e=>pj(!1,e);var Nj="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,jj=t=>{let{theme:n,type:r,isLoading:s}=t,o=E(t,GN);return e.createElement("svg",(0,S.A)({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},o))};var kj={info:function(t){return e.createElement(jj,(0,S.A)({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return e.createElement(jj,(0,S.A)({},t),e.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return e.createElement(jj,(0,S.A)({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return e.createElement(jj,(0,S.A)({},t),e.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return e.createElement("div",{className:"Toastify__spinner"})}};function Cj(t){let{theme:n,type:r,isLoading:s,icon:o}=t,i=null,a={theme:n,type:r};return!1===o||(QN(o)?i=o((0,S.A)((0,S.A)({},a),{},{isLoading:s})):(0,e.isValidElement)(o)?i=(0,e.cloneElement)(o,a):s?i=kj.spinner():(e=>e in kj)(r)&&(i=kj[r](a))),i}var Sj=t=>{let{isRunning:n,preventExitTransition:r,toastRef:s,eventHandlers:o,playToast:i}=wj(t),{closeButton:a,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:m,transition:p,position:f,className:g,style:y,progressClassName:v,updateId:x,role:b,progress:w,rtl:N,toastId:j,deleteToast:k,isIn:C,isLoading:A,closeOnClick:E,theme:_,ariaLabel:I}=t,T=js("Toastify__toast","Toastify__toast-theme--".concat(_),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":N},{"Toastify__toast--close-on-click":E}),P=QN(g)?g({rtl:N,position:f,type:d,defaultClassName:T}):js(T,g),R=Cj(t),D=!!w||!c,M={closeToast:m,type:d,theme:_},L=null;return!1===a||(L=QN(a)?a(M):(0,e.isValidElement)(a)?(0,e.cloneElement)(a,M):function(t){let{closeToast:n,theme:r,ariaLabel:s="close"}=t;return e.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),n(!0)},"aria-label":s},e.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},e.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),e.createElement(p,{isIn:C,done:k,position:f,preventExitTransition:r,nodeRef:s,playToast:i},e.createElement("div",(0,S.A)((0,S.A)({id:j,tabIndex:0,onClick:u,"data-in":C,className:P},o),{},{style:y,ref:s},C&&{role:b,"aria-label":I}),null!=R&&e.createElement("div",{className:js("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},R),tj(l,t,!n),L,!t.customProgressBar&&e.createElement(nj,(0,S.A)((0,S.A)({},x&&!D?{key:"p-".concat(x)}:{}),{},{rtl:N,theme:_,delay:c,isRunning:n,isIn:C,closeToast:m,hide:h,type:d,className:v,controlledProgress:D,progress:w||0}))))},Aj=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Ej=ZN(Aj("bounce",!0)),_j=(ZN(Aj("slide",!0)),ZN(Aj("zoom")),ZN(Aj("flip")),{position:"top-right",transition:Ej,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Ij(t){let n=(0,S.A)((0,S.A)({},_j),t),r=t.stacked,[s,o]=(0,e.useState)(!0),i=(0,e.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=function(t){var n;let{subscribe:r,getSnapshot:s,setProps:o}=(0,e.useRef)(fj(t)).current;o(t);let i=null==(n=(0,e.useSyncExternalStore)(r,s,s))?void 0:n.slice();return{getToastToRender:function(e){if(!i)return[];let n=new Map;return t.newestOnTop&&i.reverse(),i.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(t=>e(t[0],t[1])))},isToastActive:dj,count:null==i?void 0:i.length}}(n),{className:u,style:d,rtl:h,containerId:m,hotKeys:p}=n;function f(e){let t=js("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":h});return QN(u)?u({position:e,rtl:h,defaultClassName:t}):js(t,$N(u))}function g(){r&&(o(!0),bj.play())}return Nj((()=>{var e;if(r){let t=i.current.querySelectorAll('[data-in="true"]'),r=12,o=null==(e=n.position)?void 0:e.includes("top"),a=0,l=0;Array.from(t).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(s)),n.dataset.pos||(n.dataset.pos=o?"top":"bot");let i=a*(s?.2:1)+(s?0:r*t);n.style.setProperty("--y","".concat(o?i:-1*i,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s","".concat(1-(s?l:0))),a+=n.offsetHeight,l+=.025}))}}),[s,c,r]),(0,e.useEffect)((()=>{function e(e){var t;let n=i.current;p(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),o(!1),bj.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(o(!0),bj.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[p]),e.createElement("section",{ref:i,className:"Toastify",id:m,onMouseEnter:()=>{r&&(o(!1),bj.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":n["aria-label"]},a(((t,n)=>{let s=n.length?(0,S.A)({},d):(0,S.A)((0,S.A)({},d),{},{pointerEvents:"none"});return e.createElement("div",{tabIndex:-1,className:f(t),"data-stacked":r,style:s,key:"c-".concat(t)},n.map((t=>{let{content:n,props:s}=t;return e.createElement(Sj,(0,S.A)((0,S.A)({},s),{},{stacked:r,collapseAll:g,isIn:l(s.toastId,s.containerId),key:"t-".concat(s.key)}),n)})))})))}const Tj=t=>{let{program:n,onClose:r,onSuccess:s}=t;const[o,i]=(0,e.useState)("manual"),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(null),[f,g]=(0,e.useState)("");return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-scaleIn",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Record Customer Visit"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,k.jsx)("button",{onClick:()=>i("manual"),className:"flex-1 py-2 px-4 rounded-lg font-medium ".concat("manual"===o?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Manual Entry"}),(0,k.jsx)("button",{onClick:()=>i("camera"),className:"flex-1 py-2 px-4 rounded-lg font-medium ".concat("camera"===o?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Scan QR"})]}),"manual"===o?(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID (if known)"}),(0,k.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Enter customer ID",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Or Phone Number"}),(0,k.jsx)("input",{type:"tel",value:c,onChange:e=>u(e.target.value),placeholder:"Enter phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"})]}),(0,k.jsx)("button",{onClick:async()=>{h(!0),g("");try{if(a){const e=(0,sl.H9)(rl.db,"customers",a),t=await(0,sl.x7)(e);t.exists()&&t.data().businessId===n.businessId?p((0,S.A)({id:t.id},t.data())):g("Customer not found or not associated with this business")}else if(c){const e=(0,sl.rJ)(rl.db,"customers"),t=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("phone","==",c)),r=await(0,sl.GG)(t);if(r.empty)g("No customer found with this phone number");else{const e=r.docs[0];p((0,S.A)({id:e.id},e.data()))}}else g("Please enter a customer ID or phone number")}catch(e){console.error("Error finding customer:",e),g("An error occurred while searching for the customer")}finally{h(!1)}},disabled:d||!a&&!c,className:"w-full py-2 px-4 rounded-lg font-medium ".concat(d||!a&&!c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:d?"Searching...":"Find Customer"})]}):(0,k.jsxs)("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,k.jsxs)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,k.jsxs)("p",{className:"text-gray-600 mb-4",children:["Camera access is required to scan QR codes.",(0,k.jsx)("br",{}),"Position the QR code in the center of the camera view."]}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Note: This is a placeholder. In a real implementation, this would use the device camera to scan QR codes."})]}),f&&(0,k.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md",children:f}),m&&(0,k.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,k.jsx)("h3",{className:"font-medium text-green-800",children:"Customer Found"}),(0,k.jsxs)("p",{className:"text-green-700",children:[m.firstName," ",m.lastName]}),(0,k.jsxs)("p",{className:"text-sm text-green-600",children:["Visits: ",m.totalVisits||0,"points"===n.type&&" | Points: ".concat(m.loyaltyPoints||0)]}),(0,k.jsx)("button",{onClick:async()=>{if(m){h(!0);try{const e=(0,sl.H9)(rl.db,"customers",m.id),t=(m.totalVisits||0)+1;"visits"===n.type?(await(0,sl.mZ)(e,{totalVisits:t,lastVisit:sl.Dc.now(),updatedAt:sl.Dc.now()}),t%(n.visitsRequired||10)===0?bj.success("".concat(m.firstName," has earned a reward!")):bj.success("Visit recorded for ".concat(m.firstName,"!"))):("points"===n.type||"tiered"===n.type)&&(await Qg(m.id,1),await(0,sl.mZ)(e,{totalVisits:t,lastVisit:sl.Dc.now(),updatedAt:sl.Dc.now()}),bj.success("Visit recorded and 1 point added for ".concat(m.firstName,"!"))),s()}catch(e){console.error("Error recording visit:",e),bj.error("Failed to record visit")}finally{h(!1)}}},disabled:d,className:"mt-3 w-full py-2 px-4 rounded-lg font-medium ".concat(d?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:d?"Processing...":"Record Visit"})]})]})]})})},Pj=t=>{let{program:n,onClose:r,onSuccess:s}=t;const[o,i]=(0,e.useState)(""),[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(null),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)("");(0,e.useEffect)((()=>{(async()=>{g(!0);try{const e=(0,sl.rJ)(rl.db,"coupons"),t=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("active","==",!0)),r=await(0,sl.GG)(t);if(!r.empty){const e=[];r.forEach((t=>{e.push((0,S.A)({id:t.id},t.data()))})),u(e)}}catch(e){console.error("Error fetching coupons:",e),b("Failed to load available coupons")}finally{g(!1)}})()}),[n.businessId]);return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-scaleIn",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Send Coupon to Customer"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Find Customer"}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Name, email or phone",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"}),(0,k.jsx)("button",{onClick:async()=>{if(!o||o.length<2)b("Please enter at least 2 characters to search");else{g(!0),b("");try{const e=(0,sl.rJ)(rl.db,"customers"),t=o.toLowerCase();if(/^\d+$/.test(o)){const t=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("phone",">=",o),(0,sl._M)("phone","<=",o+"\uf8ff")),r=await(0,sl.GG)(t);if(r.empty)l([]),b("No customers found with that phone number");else{const e=[];r.forEach((t=>{e.push((0,S.A)({id:t.id},t.data()))})),l(e)}}else{const r=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId)),s=await(0,sl.GG)(r);if(s.empty)l([]),b("No customers found for this business");else{const e=[];s.forEach((n=>{const r=(0,S.A)({id:n.id},n.data()),s="".concat(r.firstName," ").concat(r.lastName).toLowerCase(),o=(r.email||"").toLowerCase();(s.includes(t)||o.includes(t))&&e.push(r)})),l(e),0===e.length&&b("No customers found matching your search")}}}catch(e){console.error("Error searching customers:",e),b("An error occurred while searching for customers")}finally{g(!1)}}},disabled:f||o.length<2,className:"px-4 py-2 rounded-md font-medium ".concat(f||o.length<2?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:f?"Searching...":"Search"})]})]}),a.length>0&&(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select a Customer"}),(0,k.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:a.map((e=>(0,k.jsxs)("div",{onClick:()=>h(e),className:"p-3 cursor-pointer hover:bg-gray-50 ".concat((null===d||void 0===d?void 0:d.id)===e.id?"bg-blue-50 border-l-4 border-blue-500":""),children:[(0,k.jsxs)("div",{className:"font-medium text-gray-800",children:[e.firstName," ",e.lastName]}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:[e.email||"No email"," \u2022 ",e.phone||"No phone"]})]},e.id)))})]}),d&&(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select a Coupon to Send"}),c.length>0?(0,k.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:c.map((e=>(0,k.jsxs)("div",{onClick:()=>p(e),className:"p-3 cursor-pointer hover:bg-gray-50 ".concat((null===m||void 0===m?void 0:m.id)===e.id?"bg-green-50 border-l-4 border-green-500":""),children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.title}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:["percentage"===e.type&&"".concat(e.value,"% off"),"fixed"===e.type&&"$".concat(e.value," off"),"buyXgetY"===e.type&&"Buy ".concat(e.buyQuantity," get ").concat(e.getQuantity),"freeItem"===e.type&&"Free ".concat(e.freeItem)]})]},e.id)))}):(0,k.jsx)("div",{className:"text-center p-4 bg-gray-50 rounded-md",children:(0,k.jsx)("p",{className:"text-gray-500",children:"No active coupons available"})})]}),x&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md",children:x}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,k.jsx)("button",{onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,k.jsx)("button",{onClick:async()=>{if(d&&m){v(!0);try{const e=(0,sl.rJ)(rl.db,"customer_coupons");await(0,sl.gS)(e,{customerId:d.id,couponId:m.id,businessId:n.businessId,redeemed:!1,sentAt:sl.Dc.now(),expiresAt:m.endDate}),bj.success("Coupon sent to ".concat(d.firstName,"!")),s()}catch(e){console.error("Error sending coupon:",e),b("Failed to send coupon")}finally{v(!1)}}else b("Please select both a customer and a coupon")},disabled:y||!d||!m,className:"px-4 py-2 rounded-md font-medium ".concat(!y&&d&&m?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:y?"Sending...":"Send Coupon"})]})]})})},Rj=t=>{let{program:n,onClose:r,onSuccess:s}=t;const[o,i]=(0,e.useState)(""),[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)(""),[w,N]=(0,e.useState)("");(0,e.useEffect)((()=>{if(!c||!n.rewards)return;const e=[];if("points"===n.type){const t=c.loyaltyPoints||0,r=[...n.rewards].filter((e=>e.active&&e.pointsCost)).sort(((e,t)=>(e.pointsCost||0)-(t.pointsCost||0))),s=r.find((e=>(e.pointsCost||0)>t));s&&N(s.name),n.rewards.forEach((n=>{n.active&&n.pointsCost&&t>=n.pointsCost&&e.push(n)}))}else if("visits"===n.type){const t=c.totalVisits||0,r=n.visitsRequired||10,s=n.rewards.find((e=>e.active&&e.visitsCost===r));s&&N(s.name),t>=r&&t%r===0&&n.rewards.forEach((t=>{t.active&&t.visitsCost&&e.push(t)}))}else if("tiered"===n.type){const t=c.loyaltyPoints||0;let r=null;if(n.tiers){const e=[...n.tiers].sort(((e,t)=>e.threshold-t.threshold));for(const n of e){if(!(t>=n.threshold)){N("".concat(n.name," Tier"));break}r=n}}r&&n.rewards.forEach((t=>{var n;!t.active||t.tierRequired&&t.tierRequired!==(null===(n=r)||void 0===n?void 0:n.id)||e.push(t)}))}p(e),0===e.length&&b(w?"This customer is not yet eligible for the reward of ".concat(w):"This customer is not yet eligible for any rewards")}),[c,n]);return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 animate-scaleIn",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Redeem Customer Reward"}),(0,k.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,k.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Find Customer"}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Name, email or phone",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500"}),(0,k.jsx)("button",{onClick:async()=>{if(!o||o.length<2)b("Please enter at least 2 characters to search");else{g(!0),b("");try{const e=(0,sl.rJ)(rl.db,"customers"),t=o.toLowerCase();if(/^\d+$/.test(o)){const t=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("phone",">=",o),(0,sl._M)("phone","<=",o+"\uf8ff")),r=await(0,sl.GG)(t);if(r.empty)l([]),b("No customers found with that phone number");else{const e=[];r.forEach((t=>{e.push((0,S.A)({id:t.id},t.data()))})),l(e)}}else{const r=(0,sl.P)(e,(0,sl._M)("businessId","==",n.businessId)),s=await(0,sl.GG)(r);if(s.empty)l([]),b("No customers found for this business");else{const e=[];s.forEach((n=>{const r=(0,S.A)({id:n.id},n.data()),s="".concat(r.firstName," ").concat(r.lastName).toLowerCase(),o=(r.email||"").toLowerCase();(s.includes(t)||o.includes(t))&&e.push(r)})),l(e),0===e.length&&b("No customers found matching your search")}}}catch(e){console.error("Error searching customers:",e),b("An error occurred while searching for customers")}finally{g(!1)}}},disabled:f||o.length<2,className:"px-4 py-2 rounded-md font-medium ".concat(f||o.length<2?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:f?"Searching...":"Search"})]})]}),a.length>0&&(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select a Customer"}),(0,k.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:a.map((e=>(0,k.jsxs)("div",{onClick:()=>u(e),className:"p-3 cursor-pointer hover:bg-gray-50 ".concat((null===c||void 0===c?void 0:c.id)===e.id?"bg-blue-50 border-l-4 border-blue-500":""),children:[(0,k.jsxs)("div",{className:"font-medium text-gray-800",children:[e.firstName," ",e.lastName]}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:["points"===n.type&&"Points: ".concat(e.loyaltyPoints||0),"visits"===n.type&&"Visits: ".concat(e.totalVisits||0),"tiered"===n.type&&"Points: ".concat(e.loyaltyPoints||0)]})]},e.id)))})]}),c&&(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Available Rewards"}),m.length>0?(0,k.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:m.map((e=>(0,k.jsxs)("div",{onClick:()=>h(e),className:"p-3 cursor-pointer hover:bg-gray-50 ".concat((null===d||void 0===d?void 0:d.id)===e.id?"bg-green-50 border-l-4 border-green-500":""),children:[(0,k.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.description}),(0,k.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["discount"===e.type&&"".concat("percentage"===e.discountType?e.discountValue+"%":"$"+e.discountValue," off"),"freeItem"===e.type&&"Free ".concat(e.freeItem),"custom"===e.type&&e.customDescription]})]},e.id)))}):(0,k.jsx)("div",{className:"text-center p-4 bg-gray-50 rounded-md",children:(0,k.jsx)("p",{className:"text-gray-500",children:c&&w?"This customer is not yet eligible for the reward of ".concat(w):"Select a customer to see available rewards"})})]}),x&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md",children:x}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,k.jsx)("button",{onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,k.jsx)("button",{onClick:async()=>{if(c&&d){v(!0);try{const e=(0,sl.rJ)(rl.db,"reward_redemptions");if(await(0,sl.gS)(e,{customerId:c.id,rewardId:d.id,programId:n.id,businessId:n.businessId,redeemedAt:sl.Dc.now()}),"points"===n.type&&d.pointsCost&&await Qg(c.id,-d.pointsCost),"visits"===n.type&&d.visitsCost){const e=(0,sl.H9)(rl.db,"customers",c.id),t=await(0,sl.x7)(e);if(t.exists()){const r=t.data().totalVisits||0,s=r%(n.visitsRequired||10);await(0,sl.mZ)(e,{totalVisits:s,updatedAt:sl.Dc.now()})}}bj.success("Reward redeemed for ".concat(c.firstName,"!")),s()}catch(e){console.error("Error processing reward:",e),b("Failed to process reward")}finally{v(!1)}}else b("Please select both a customer and a reward")},disabled:y||!c||!d,className:"px-4 py-2 rounded-md font-medium ".concat(!y&&c&&d?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:y?"Processing...":"Redeem Reward"})]})]})})},Dj=t=>{let{loyaltyProgram:n,loyaltyRewards:r,businessId:s,onProgramSaved:o,onRewardsChange:i,showCelebration:a,onBackClick:l}=t;const[c,u]=(0,e.useState)("active"),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)(!1),[w,N]=(0,e.useState)(!1),[j,C]=(0,e.useState)(null!==n&&void 0!==n&&n.active?"happy":"neutral"),[S,A]=(0,e.useState)(!1),E=(()=>{if(!n)return[];switch(c){case"active":return n.active?[n]:[];case"draft":return n.active?[]:[n];default:return[]}})(),_=()=>{A(!0),C("excited"),v(!1),b(!1),N(!1),setTimeout((()=>{A(!1),C("happy")}),3e3)};return m&&n?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("button",{onClick:()=>p(!1),className:"mr-3 text-gray-600 hover:text-gray-900",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,k.jsx)("h1",{className:"text-3xl font-bold",children:"Loyalty Program Members"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,k.jsx)(qN,{})})]}):d&&n?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("button",{onClick:()=>h(!1),className:"mr-3 text-gray-600 hover:text-gray-900",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,k.jsx)("h1",{className:"text-3xl font-bold",children:"Loyalty Program Details"})]})}),(0,k.jsx)(gy,{program:n,rewards:r,onRewardsChange:i})]}):(0,k.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,k.jsx)("div",{className:"flex items-center mb-4",children:(0,k.jsxs)("button",{onClick:l,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),(0,k.jsx)("span",{children:"Back to Dashboard"})]})}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsx)(wy,{hasProgram:!!n,onCreateClick:()=>g(!0)})}),(0,k.jsx)("div",{className:"w-24 h-24 relative",children:(0,k.jsx)(Ny,{mood:j})})]}),n&&n.active&&(0,k.jsx)(WN,{program:n,onScanClick:()=>v(!0),onSendCouponClick:()=>b(!0),onRewardClick:()=>N(!0)}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-purple-100 to-indigo-100 rounded-xl p-6 shadow-md border border-purple-200",children:[(0,k.jsx)(yy,{activeTab:c,onTabChange:e=>{u(e),C("active"===e?"happy":"neutral")}}),(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsx)(by,{programs:E,activeTab:c,onCreateClick:()=>g(!0),onViewDetails:()=>h(!0)}),"active"===c&&E.length>0&&(0,k.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,k.jsx)("div",{className:"lg:col-span-2",children:(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,k.jsx)(jy,{program:n,rewardsCount:r.length}),(0,k.jsx)(VN,{}),(0,k.jsx)("div",{className:"flex justify-end mt-2",children:(0,k.jsxs)("button",{onClick:()=>p(!0),className:"text-indigo-600 hover:text-indigo-800 font-medium flex items-center",children:["View all members",(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})}),(0,k.jsx)("div",{children:(0,k.jsx)(ky,{program:n})})]}),"draft"===c&&!n&&(0,k.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center shadow-md",children:[(0,k.jsx)("div",{className:"w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,k.jsx)("span",{className:"text-5xl",children:"\ud83c\udf81"})}),(0,k.jsx)("h3",{className:"text-xl font-semibold text-purple-900 mb-2",children:"Create Your First Loyalty Program"}),(0,k.jsx)("p",{className:"text-gray-600 mb-6 max-w-lg mx-auto",children:"Loyal customers spend 67% more than new ones. Start rewarding loyalty today and watch your business grow!"}),(0,k.jsx)("button",{onClick:()=>g(!0),className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md",children:"Get Started Now"})]})]})]}),S&&(0,k.jsx)("div",{className:"fixed bottom-4 right-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded shadow-md animate-slideInRight",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm",children:"Action completed successfully!"})})]})}),f&&(0,k.jsx)(HN,{initialData:n||void 0,businessId:s,onSave:e=>{o(e),g(!1),C("excited"),setTimeout((()=>{C("happy")}),3e3)},onCancel:()=>g(!1)}),y&&n&&(0,k.jsx)(Tj,{program:n,onClose:()=>v(!1),onSuccess:_}),x&&n&&(0,k.jsx)(Pj,{program:n,onClose:()=>b(!1),onSuccess:_}),w&&n&&(0,k.jsx)(Rj,{program:n,onClose:()=>N(!1),onSuccess:_}),a&&(0,k.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/30 backdrop-blur-sm animate-fadeIn",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-8 shadow-xl max-w-md text-center transform animate-bounce",children:[(0,k.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,k.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-2",children:null!==n&&void 0!==n&&n.active?"Program Updated!":"Program Created!"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Your customers will love this loyalty program!"})]})})]})},Mj=t=>{var n;let{program:r}=t;const[s,o]=(0,e.useState)(0),[i,a]=(0,e.useState)(!0),l=Math.min(100,Math.round(s/200*100));return(0,e.useEffect)((()=>{(async()=>{try{const e=await $g(r.businessId,r.id);o((null===e||void 0===e?void 0:e.memberCount)||0)}catch(e){console.error("Error fetching loyalty program stats:",e)}finally{a(!1)}})()}),[r.businessId,r.id]),(0,k.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 shadow-sm",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h3",{className:"text-white font-medium",children:r.name}),(0,k.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(r.active?"bg-green-200 text-green-800":"bg-amber-200 text-amber-800"),children:r.active?"Active":"Draft"})]}),(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsxs)("div",{className:"flex justify-between text-xs text-white mb-1",children:[(0,k.jsx)("span",{children:"Program Growth"}),(0,k.jsxs)("span",{children:[l,"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(l,"%")}})})]}),(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsx)("div",{className:"text-white",children:i?(0,k.jsx)("span",{className:"opacity-70",children:"Loading..."}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"font-semibold",children:s})," members"]})}),(0,k.jsxs)("div",{className:"text-white",children:[(0,k.jsx)("span",{className:"font-semibold",children:(null===(n=r.rewards)||void 0===n?void 0:n.length)||0})," rewards"]})]})]})},Lj=e=>{let{rewards:t,program:n,onRewardsChange:r}=e;return 0===t.length?(0,k.jsxs)("div",{className:"text-center py-6 bg-purple-50 rounded-xl",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,k.jsx)("span",{className:"text-2xl",children:"\ud83c\udf81"})}),(0,k.jsx)("p",{className:"text-purple-800 font-medium mb-1",children:"No rewards yet"}),(0,k.jsx)("p",{className:"text-sm text-purple-600",children:"Add rewards to your loyalty program to engage customers"})]}):(0,k.jsx)("div",{className:"space-y-3",children:t.map((e=>(0,k.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-100 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:"discount"===e.type?"\ud83d\udcb0":"freeItem"===e.type?"\ud83c\udf81":"\u2728"}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800",children:e.name}),(0,k.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:e.description}),(0,k.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,k.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"points"===n.type&&e.pointsCost?"".concat(e.pointsCost," points"):"visits"===n.type&&e.visitsCost?"".concat(e.visitsCost," visits"):e.tierRequired?"".concat(e.tierRequired," tier"):"Custom reward"}),(0,k.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded-full ".concat(e.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.active?"Active":"Inactive"})]})]})]})},e.id)))})},Oj=e=>{let{program:t,onScanClick:n,onSendCouponClick:r,onRewardClick:s}=e;return t?(0,k.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 mb-6 animate-slideUp",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Quick Actions"}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,k.jsxs)("button",{onClick:n,className:"flex flex-col items-center justify-center p-4 bg-purple-50 rounded-xl border border-purple-100 hover:bg-purple-100 transition-colors",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-purple-200 rounded-full flex items-center justify-center mb-2",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-purple-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,k.jsx)("span",{className:"text-sm font-medium text-purple-800",children:"Scan QR"})]}),(0,k.jsxs)("button",{onClick:r,className:"flex flex-col items-center justify-center p-4 bg-indigo-50 rounded-xl border border-indigo-100 hover:bg-indigo-100 transition-colors",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center mb-2",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-indigo-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),(0,k.jsx)("span",{className:"text-sm font-medium text-indigo-800",children:"Send Coupon"})]}),(0,k.jsxs)("button",{onClick:s,className:"flex flex-col items-center justify-center p-4 bg-blue-50 rounded-xl border border-blue-100 hover:bg-blue-100 transition-colors",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center mb-2",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-blue-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Reward"})]})]})]}):null},Fj=t=>{var n;let{loyaltyProgram:r,loyaltyRewards:s,businessId:o,onProgramSaved:i,onRewardsChange:a,onBackClick:l}=t;const[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)(null!==r&&void 0!==r&&r.active?"happy":"neutral"),[w,N]=(0,e.useState)(!0),[j,C]=(0,e.useState)(!1);(0,e.useEffect)((()=>{if(w){const e=setTimeout((()=>{N(!1)}),5e3);return()=>clearTimeout(e)}}),[w]),(0,e.useEffect)((()=>{if(j){const e=setTimeout((()=>{C(!1)}),3e3);return()=>clearTimeout(e)}}),[j]);const S=()=>{C(!0),b("excited"),h(!1),p(!1),g(!1),setTimeout((()=>{b("happy")}),3e3)};return(0,k.jsxs)("div",{className:"h-full bg-gradient-to-b from-purple-50 to-white max-w-3xl mx-auto animate-fadeIn",children:[(0,k.jsx)("div",{className:"pt-4 px-6",children:(0,k.jsxs)("button",{onClick:l,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),(0,k.jsx)("span",{children:"Back to Dashboard"})]})}),(0,k.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 text-white mt-4 pt-8 pb-12 px-6 rounded-b-3xl shadow-lg",children:[(0,k.jsxs)("div",{className:"animate-slideDown",children:[(0,k.jsxs)("h1",{className:"text-2xl font-bold mt-1 flex items-center",children:["Loyalty Program",(0,k.jsx)("span",{className:"ml-2 text-2xl",children:"\u2728"})]}),(0,k.jsx)("p",{className:"mt-2 text-purple-100 font-medium",children:null!==r&&void 0!==r&&r.active?"Reward your loyal customers and watch them return!":"Create a loyalty program to turn customers into fans!"})]}),(0,k.jsx)("div",{className:"mt-6",children:r?(0,k.jsx)(Mj,{program:r}):(0,k.jsx)("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 shadow-sm",children:(0,k.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-white/30 rounded-full flex items-center justify-center mb-2",children:(0,k.jsx)("span",{className:"text-2xl",children:"\ud83c\udf81"})}),(0,k.jsx)("p",{className:"text-white font-medium",children:"No active program"}),(0,k.jsx)("button",{onClick:()=>u(!0),className:"mt-2 px-4 py-2 bg-white text-purple-600 rounded-full font-medium text-sm hover:bg-purple-100 transition-colors",children:"Create Now"})]})})})]}),(0,k.jsxs)("div",{className:"px-5 -mt-6",children:[r&&r.active&&(0,k.jsx)(Oj,{program:r,onScanClick:()=>h(!0),onSendCouponClick:()=>p(!0),onRewardClick:()=>g(!0)}),(0,k.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 transform translate-y-0 opacity-100 transition-all duration-500 ease-out animate-slideUp",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-purple-900",children:null!==r&&void 0!==r&&r.active?"Program Status":"Get Started"}),(0,k.jsx)("div",{className:"w-12 h-12",children:(0,k.jsx)(Ny,{mood:x,small:!0})})]}),r?(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-100",children:[(0,k.jsx)("h3",{className:"font-medium text-purple-800",children:r.name}),(0,k.jsx)("p",{className:"text-sm text-purple-600 mt-1",children:r.description}),(0,k.jsxs)("div",{className:"mt-3 flex justify-between items-center",children:[(0,k.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(r.active?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"),children:r.active?"Active":"Draft"}),(0,k.jsx)("button",{onClick:()=>u(!0),className:"text-sm text-purple-600 hover:text-purple-800 transition-colors",children:"Edit Program"})]})]}),(0,k.jsx)("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-100",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center mr-3",children:"points"===r.type?"\ud83c\udfc6":"visits"===r.type?"\ud83d\udd04":"\ud83c\udfc5"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-indigo-800",children:"points"===r.type?"Points Program":"visits"===r.type?"Visit-Based Program":"Tiered Program"}),(0,k.jsx)("p",{className:"text-xs text-indigo-600",children:"points"===r.type?"".concat(r.pointsPerAmount," points per purchase"):"visits"===r.type?"".concat(r.visitsRequired," visits for reward"):"".concat((null===(n=r.tiers)||void 0===n?void 0:n.length)||0," loyalty tiers")})]})]})})]}):(0,k.jsxs)("div",{className:"bg-purple-50 rounded-xl p-6 text-center",children:[(0,k.jsx)("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,k.jsx)("span",{className:"text-3xl",children:"\ud83c\udf81"})}),(0,k.jsx)("h3",{className:"text-lg font-medium text-purple-800 mb-2",children:"Create Your First Loyalty Program"}),(0,k.jsx)("p",{className:"text-sm text-purple-600 mb-4",children:"Loyal customers spend 67% more than new ones. Start rewarding loyalty today!"}),(0,k.jsx)("button",{onClick:()=>u(!0),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-indigo-700 transition-colors shadow-md",children:"Create Loyalty Program"})]})]}),r&&(0,k.jsxs)("div",{className:"mt-6 bg-white rounded-2xl shadow-lg p-5 transform translate-y-0 opacity-100 transition-all duration-500 ease-out delay-100 animate-slideUp",children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,k.jsx)("h2",{className:"text-lg font-semibold text-purple-900",children:"Customer Rewards"})}),(0,k.jsx)(Lj,{rewards:s,program:r,onRewardsChange:a})]}),w&&(0,k.jsx)("div",{className:"mt-6 mb-8 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-2xl p-5 hover:scale-102 transition-transform animate-slideUp",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"mr-4 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-full p-2 shadow-md",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-purple-900",children:"Loyalty Tip"}),(0,k.jsxs)("p",{className:"text-sm text-purple-800 mt-1",children:["Businesses with loyalty programs see an average ",(0,k.jsx)("span",{className:"font-bold",children:"30% increase"})," in customer retention. Make your rewards meaningful and achievable!"]})]}),(0,k.jsx)("button",{onClick:()=>N(!1),className:"ml-2 text-purple-400 hover:text-purple-600",children:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),j&&(0,k.jsx)("div",{className:"fixed bottom-4 right-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded shadow-md animate-slideInRight",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm",children:"Action completed successfully!"})})]})}),c&&(0,k.jsx)(HN,{initialData:r||void 0,businessId:o,onSave:e=>{i(e),u(!1),b("excited"),v(!0),setTimeout((()=>{v(!1),setTimeout((()=>b("happy")),500)}),3e3)},onCancel:()=>u(!1)}),d&&r&&(0,k.jsx)(Tj,{program:r,onClose:()=>h(!1),onSuccess:S}),m&&r&&(0,k.jsx)(Pj,{program:r,onClose:()=>p(!1),onSuccess:S}),f&&r&&(0,k.jsx)(Rj,{program:r,onClose:()=>g(!1),onSuccess:S}),y&&(0,k.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/30 backdrop-blur-sm animate-fadeIn",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl p-8 shadow-xl max-w-md text-center transform animate-bounce",children:[(0,k.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,k.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-2",children:null!==r&&void 0!==r&&r.active?"Program Updated!":"Program Created!"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Your customers will love this loyalty program!"})]})})]})},Bj=["sx"];function Uj(e){const{sx:t}=e,n=E(e,Bj),{systemProps:r,otherProps:s}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},s=null!==(t=null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.unstable_sxConfig)&&void 0!==t?t:Cb;return Object.keys(e).forEach((t=>{s[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return yx(e)?(0,S.A)((0,S.A)({},r),e):r}:(0,S.A)((0,S.A)({},r),t),(0,S.A)((0,S.A)({},s),{},{sx:o})}const zj=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=e.useContext(Qv);return n&&(r=n,0!==Object.keys(r).length)?n:t;var r},Vj=Ib();const qj=function(){return zj(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vj)},Wj=["className","component"];const Hj=CN("MuiBox",["root"]),Gj=aN(),Kj=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:n,defaultTheme:r,defaultClassName:s="MuiBox-root",generateClassName:o}=t,i=mx("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Ab);return e.forwardRef((function(e,t){const a=qj(r),l=Uj(e),{className:c,component:u="div"}=l,d=E(l,Wj);return(0,k.jsx)(i,(0,S.A)({as:u,ref:t,className:js(c,o?o(s):s),theme:n&&a[n]||a},d))}))}({themeId:cN,defaultTheme:Gj,defaultClassName:Hj.root,generateClassName:NN.generate}),Yj=Kj;function Qj(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,k.jsx)(nx,{styles:r})}function $j(e){const t=fx(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles="@layer global{".concat(t.styles,"}")),t):e}const Jj=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const s=qj(r),o=n&&s[n]||s;let i="function"===typeof t?t(o):t;return o.modularCssLayers&&(i=Array.isArray(i)?i.map((e=>$j("function"===typeof e?e(o):e))):$j(i)),(0,k.jsx)(Qj,{styles:i})};const Xj=function(e){return(0,k.jsx)(Jj,(0,S.A)((0,S.A)({},e),{},{defaultTheme:lN,themeId:cN}))};function Zj(e){return kN("MuiTypography",e)}const ek=CN("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),tk=["color"],nk=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],rk={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},sk=Uj,ok=hN("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(xN(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(pN((e=>{var t;let{theme:n}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(n.palette).filter(bN()).map((e=>{let[t]=e;return{props:{color:t},style:{color:(n.vars||n).palette[t].main}}})),...Object.entries((null===(t=n.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat(xN(t))},style:{color:(n.vars||n).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),ik={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ak=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiTypography"}),{color:r}=n,s=E(n,tk),o=!rk[r],i=sk((0,S.A)((0,S.A)({},s),o&&{color:r})),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:d=!1,paragraph:h=!1,variant:m="body1",variantMapping:p=ik}=i,f=E(i,nk),g=(0,S.A)((0,S.A)({},i),{},{align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:d,paragraph:h,variant:m,variantMapping:p}),y=c||(h?"p":p[m]||ik[m])||"span",v=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:s,variant:o,classes:i}=e;return Sy({root:["root",o,"inherit"!==e.align&&"align".concat(xN(t)),n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]},Zj,i)})(g);return(0,k.jsx)(ok,(0,S.A)((0,S.A)({as:y,ref:t,className:js(v.root,l)},f),{},{ownerState:g,style:(0,S.A)((0,S.A)({},"inherit"!==a&&{"--Typography-textAlign":a}),f.style)}))})),lk=ak,ck=e=>{let{message:t="Loading..."}=e;return(0,k.jsxs)(Yj,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"200px",padding:4,children:[(0,k.jsx)(zN,{size:40}),(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",sx:{mt:2},children:t})]})},uk=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),[i,a]=(0,e.useState)(null),[l,c]=(0,e.useState)("Customer Rewards"),[u,d]=(0,e.useState)("points");return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"mt-8 flex justify-center",children:(0,k.jsxs)("button",{onClick:()=>r(!0),className:"bg-red-600 text-white px-6 py-3 rounded-md shadow-lg hover:bg-red-700 flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83d\udea8"}),"Emergency: Create Loyalty Program"]})}),n&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,k.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Emergency Loyalty Program Creator"}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Program Name"}),(0,k.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded"})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Program Type"}),(0,k.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded",children:[(0,k.jsx)("option",{value:"points",children:"Points-based"}),(0,k.jsx)("option",{value:"visits",children:"Visit-based"}),(0,k.jsx)("option",{value:"tiered",children:"Tiered"})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Business ID"}),(0,k.jsx)("input",{type:"text",value:(null===t||void 0===t?void 0:t.businessId)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded bg-gray-100"})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("button",{onClick:()=>r(!1),className:"py-2 px-4 border border-gray-300 rounded hover:bg-gray-100",children:"Cancel"}),(0,k.jsx)("button",{onClick:async()=>{o(!0);try{const e=null===t||void 0===t?void 0:t.businessId;if(!e)throw new Error("No business ID available");const n="emergency_".concat(Date.now());console.log("EMERGENCY: Creating program with ID:",n),console.log("EMERGENCY: Business ID:",e);const r=(0,sl.H9)(rl.db,"loyaltyPrograms",n),s={businessId:e,name:l,description:"Created via emergency tool",type:u,pointsPerAmount:"points"===u?10:0,amountPerPoint:"points"===u?.1:0,visitsRequired:"visits"===u?10:0,active:!0,tiers:[],rewards:[],createdAt:new Date,updatedAt:new Date};console.log("EMERGENCY: Program data:",s),await(0,sl.BN)(r,s),console.log("EMERGENCY: Write operation completed");if(!(await(0,sl.x7)(r)).exists())throw console.error("EMERGENCY: Verification failed - document does not exist"),new Error("Document verification failed");console.log("EMERGENCY: Verification successful - document exists"),a({success:!0,message:"Emergency program created successfully!",programId:n})}catch(e){console.error("EMERGENCY: Operation failed:",e),a({success:!1,message:"Failed to create emergency program",error:e instanceof Error?e.message:String(e)})}finally{o(!1)}},disabled:s,className:"py-2 px-4 bg-red-600 text-white rounded hover:bg-red-700 disabled:bg-red-300",children:s?"Creating...":"Create Emergency Program"})]}),i&&(0,k.jsxs)("div",{className:"mt-4 p-3 rounded ".concat(i.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,k.jsx)("p",{className:"font-medium",children:i.message}),i.programId&&(0,k.jsxs)("p",{className:"text-sm mt-1",children:["Program ID: ",i.programId]}),i.error&&(0,k.jsxs)("p",{className:"text-sm mt-1",children:["Error: ",i.error]}),i.success&&(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 w-full py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Reload Page to See Program"})]})]})})]})},dk=()=>{const t=tl(),n=(null===t||void 0===t?void 0:t.viewMode)||"default",r=(0,i.Zp)(),{user:s}=(0,N.A)(),[o,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,m]=(0,e.useState)([]),[p,f]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{if(null!==s&&void 0!==s&&s.businessId)try{a(!0);const e=await Kg(s.businessId);if(d(e),e){const t=await(async e=>{try{const t=(0,sl.P)((0,sl.rJ)(rl.db,"loyaltyRewards"),(0,sl._M)("programId","==",e),(0,sl.My)("pointsCost")),n=await(0,sl.GG)(t),r=[];return n.forEach((e=>{r.push((0,S.A)((0,S.A)({},e.data()),{},{id:e.id}))})),r}catch(t){throw console.error("Error getting loyalty rewards:",t),t}})(e.id);m(t)}}catch(e){console.error("Error fetching loyalty program:",e),bj.error("Failed to load loyalty program. Please try again.")}finally{a(!1)}})()}),[s]);const g=async e=>{if(null!==s&&void 0!==s&&s.businessId)try{c(!0),console.log("Saving loyalty program with data:",e);const t={};Object.entries(e).forEach((e=>{let[n,r]=e;void 0!==r&&(t[n]=r)})),t.businessId=s.businessId;const n=await(async e=>{try{var t;if(!e.businessId)throw console.error("\ud83d\udea8 NULL or UNDEFINED businessId in program object!"),new Error("Invalid businessId: Cannot save program with null or undefined businessId");console.log("\ud83d\ude80 Starting saveLoyaltyProgram with businessId:",e.businessId);const n=Gg(e.businessId);console.log("\u2705 Using corrected businessId:",n);const r=!e.id;console.log("Operation: ".concat(r?"Creating new":"Updating existing"," loyalty program"));const s=r?"loyalty_".concat(Date.now()):e.id;console.log("\ud83d\udcdd Using program ID:",s);const o=(0,sl.H9)(rl.db,"loyaltyPrograms",s),i=await(0,sl.x7)(o),a=i.exists();console.log("Document ".concat(s," exists: ").concat(a));const l={};if(Object.entries(e).forEach((e=>{let[t,n]=e;"id"!==t&&void 0!==n&&(l[t]=n)})),l.businessId=n,l.updatedAt=new Date,"points"===e.type?(l.pointsPerAmount=e.pointsPerAmount||10,l.amountPerPoint=e.amountPerPoint||.1):"visits"===e.type&&(l.visitsRequired=e.visitsRequired||10),l.tiers=e.tiers||[],l.rewards=e.rewards||[],console.log("\ud83d\udcdd Clean program data to save:",l),a?(console.log("\ud83d\udcdd Updating existing program document"),await(0,sl.mZ)(o,l),console.log("\u2705 Program updated successfully!")):(console.log("\ud83c\udd95 Creating new program document"),l.createdAt=new Date,await(0,sl.BN)(o,l),console.log("\u2705 Program created successfully!")),!(await(0,sl.x7)(o)).exists())throw console.error("\u274c CRITICAL: Document not found after save operation!"),new Error("Document save verification failed");return(0,S.A)((0,S.A)({},e),{},{id:s,businessId:n,createdAt:a&&(null===(t=i.data())||void 0===t?void 0:t.createdAt)||new Date,updatedAt:new Date,pointsPerAmount:"points"===e.type?e.pointsPerAmount||10:0,amountPerPoint:"points"===e.type?e.amountPerPoint||.1:0,visitsRequired:"visits"===e.type?e.visitsRequired||10:0,tiers:e.tiers||[],rewards:e.rewards||[]})}catch(n){throw console.error("\u274c Error saving loyalty program:",n),n instanceof Error&&console.error("\u274c Error details:",{message:n.message,name:n.name,stack:n.stack}),n}})(t);console.log("Loyalty program saved successfully:",n),d(n),f(!0),bj.success("Loyalty program saved successfully!"),setTimeout((()=>{f(!1)}),3e3),setTimeout((()=>{window.location.reload()}),3500)}catch(t){console.error("Error saving loyalty program:",t);let e="Failed to save loyalty program. Please try again.";t instanceof Error&&(e=t.message),bj.error(e)}finally{c(!1)}else bj.error("Missing business ID. Please refresh the page or contact support.")},y=e=>{m(e)},v=()=>{r("/business/dashboard")};return o||l?(0,k.jsxs)("div",{className:"h-64 flex items-center justify-center",children:[(0,k.jsx)(ck,{}),(0,k.jsx)("p",{className:"ml-3 text-purple-600 animate-pulse",children:o?"Loading your loyalty program...":"Saving your loyalty program..."})]}):u?"simple"===n?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsx)("h1",{className:"text-3xl font-bold",children:"Loyalty Program"})}),(0,k.jsx)(Fj,{loyaltyProgram:u,loyaltyRewards:h,businessId:(null===s||void 0===s?void 0:s.businessId)||"",onProgramSaved:g,onRewardsChange:y,onBackClick:v})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsx)("h1",{className:"text-3xl font-bold",children:"Loyalty Program"})}),(0,k.jsx)(Dj,{loyaltyProgram:u,loyaltyRewards:h,businessId:(null===s||void 0===s?void 0:s.businessId)||"",onProgramSaved:g,onRewardsChange:y,showCelebration:p,onBackClick:v})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsx)("h1",{className:"text-3xl font-bold",children:"Loyalty Program"})}),(0,k.jsx)("p",{className:"text-gray-600 mb-8",children:"It looks like you don't have a loyalty program set up yet or there might be an issue with your existing program."}),(0,k.jsx)(uk,{}),"simple"===n?(0,k.jsx)(Fj,{loyaltyProgram:null,loyaltyRewards:[],businessId:(null===s||void 0===s?void 0:s.businessId)||"",onProgramSaved:g,onRewardsChange:y,onBackClick:v}):(0,k.jsx)(Dj,{loyaltyProgram:null,loyaltyRewards:[],businessId:(null===s||void 0===s?void 0:s.businessId)||"",onProgramSaved:g,onRewardsChange:y,showCelebration:p,onBackClick:v})]})},hk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},mk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},pk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},fk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})},gk=e=>{let{onCreateCampaign:t,isCreating:n=!1,showOptions:r=!1,setShowOptions:s}=e;const o=e=>{s(!1),t(e)};return(0,k.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-6",children:(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"Communication Campaigns"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-l hover:bg-blue-600 flex items-center ".concat(n?"opacity-75 cursor-wait":""),onClick:()=>o(),disabled:n,children:n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(hk,{className:"w-5 h-5 mr-2"}),"Create New Campaign"]})}),(0,k.jsx)("button",{className:"bg-blue-600 text-white px-2 py-2 rounded-r hover:bg-blue-700 border-l border-blue-400",onClick:()=>s(!r),disabled:n,children:(0,k.jsx)(fk,{className:"w-5 h-5"})}),r&&(0,k.jsx)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,k.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[(0,k.jsx)("button",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",onClick:()=>o("email"),children:"Email Campaign"}),(0,k.jsx)("button",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",onClick:()=>o("sms"),children:"SMS Campaign"}),(0,k.jsx)("button",{className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",onClick:()=>o("multi"),children:"Multi-channel Campaign"})]})})]})]})})},yk=e=>{let{onCreateCampaign:t}=e;return(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)(mk,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,k.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No communication campaigns yet"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new campaign to reach your customers."}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,k.jsx)(hk,{className:"-ml-1 mr-2 h-5 w-5"}),"Create New Campaign"]})})]})},vk=t=>{let{onSearch:n}=t;const[r,s]=(0,e.useState)("");return(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search campaigns...",className:"border border-gray-300 rounded-md pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",value:r,onChange:e=>{const t=e.target.value;s(t),n(t)}}),(0,k.jsx)("div",{className:"absolute left-3 top-2.5",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})},xk=t=>{let{campaigns:n,loading:r,onEdit:s,onDelete:o,onCreateCampaign:i}=t;const[a,l]=(0,e.useState)(""),c=n.filter((e=>e.name.toLowerCase().includes(a.toLowerCase()))),u=c.length>0,d=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},h=e=>{switch(e){case"draft":default:return"bg-gray-200 text-gray-800";case"scheduled":return"bg-blue-100 text-blue-800";case"sent":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800"}};return(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"Communication Campaigns"}),(0,k.jsx)(vk,{onSearch:l})]}),(0,k.jsx)("div",{className:"border-t pt-4",children:r?(0,k.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u?(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign Name"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Channels"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"all"===e.targetAudience?"All Customers":"segment"===e.targetAudience?"Customer Segment":"Specific Customers"})]}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(h(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex space-x-1",children:[e.channels.includes("email")&&(0,k.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:"Email"}),e.channels.includes("sms")&&(0,k.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:"SMS"}),e.channels.includes("whatsapp")&&(0,k.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:"WhatsApp"})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d(e.createdAt)}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.stats?(0,k.jsxs)("div",{className:"text-xs",children:[(0,k.jsxs)("span",{className:"mr-2",children:["Sent: ",e.stats.sent]}),(0,k.jsxs)("span",{className:"mr-2",children:["Opened: ",e.stats.opened||0]}),(0,k.jsxs)("span",{children:["Clicked: ",e.stats.clicked||0]})]}):(0,k.jsx)("span",{className:"text-xs text-gray-500",children:"No stats available"})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,k.jsx)("button",{onClick:()=>s(e),className:"text-primary-600 hover:text-primary-900 mr-3",children:"Edit"}),(0,k.jsx)("button",{onClick:()=>o(e),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)))})]})}):(0,k.jsx)(yk,{onCreateCampaign:i?()=>i("email"):void 0})})]})},bk=t=>{let{channels:n,templates:r,loading:s,onUpdateChannel:o}=t;const[i,a]=(0,e.useState)(null),l=e=>{switch(e.toLowerCase()){case"email":return"\u2709\ufe0f";case"sms":return"\ud83d\udcf1";case"whatsapp":return"\ud83d\udcac";default:return"\ud83d\udce3"}},c={backgroundColor:"#4a6cf7",color:"white",padding:"8px 16px",borderRadius:"4px",border:"none",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",visibility:"visible"},u={backgroundColor:"#f1f1f1",color:"#333",padding:"8px 16px",borderRadius:"4px",border:"1px solid #ddd",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",visibility:"visible"};return s?(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Communication Channels"}),(0,k.jsxs)("div",{className:"animate-pulse",children:[(0,k.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"}),(0,k.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"}),(0,k.jsx)("div",{className:"h-12 bg-gray-200 rounded"})]})]}):(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Communication Channels"}),0===n.length?(0,k.jsx)("p",{className:"text-gray-500",children:"No communication channels configured."}):(0,k.jsx)("div",{className:"space-y-4",children:n.map((e=>(0,k.jsx)("div",{className:"border rounded-md p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-2xl mr-3",children:l(e.type)}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium capitalize",children:e.type}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:e.isConfigured?"".concat(e.type," service is configured and ready to use"):"Connect your ".concat(e.type," provider to send ").concat("sms"===e.type.toLowerCase()?"text":e.type," messages")}),e.isConfigured&&(0,k.jsx)("div",{className:"mt-1",children:(0,k.jsxs)("span",{className:"inline-flex items-center text-sm text-green-600",children:[(0,k.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 mr-2"}),"Connected"]})})]})]}),(0,k.jsx)("button",{style:e.isConfigured?u:c,onClick:()=>(e=>{a(e.id),setTimeout((()=>{o(e.id,{isConfigured:!e.isConfigured}).then((()=>{a(null)})).catch((()=>{a(null)}))}),1e3)})(e),disabled:i===e.id,children:i===e.id?"Configuring...":e.isConfigured?"Reconfigure":"Configure"})]})},e.id)))})]})},wk=e=>{const t=/\{([^}]+)\}/g,n=[];let r;for(;null!==(r=t.exec(e));)n.includes(r[1])||n.push(r[1]);return n},Nk=(e,t)=>{switch(t){case"email":return(e=>{let t=e.content,n=e.subject||"";if(t=t.replace(/^\[EMAIL\]|\[email\]/i,"").trim(),!n){const e=t.split("\n"),r=e.findIndex((e=>e.trim().toLowerCase().startsWith("subject:")));if(r>=0){const s=e[r];n=s.substring(s.indexOf(":")+1).trim(),e.splice(r,1),t=e.join("\n").trim()}}return{subject:n,body:t,variables:wk(t)}})(e);case"sms":return(e=>{let t=e.content;t=t.replace(/^\[SMS\]|\[sms\]/i,"").trim();const n=wk(t);return t.length>160&&(t=t.substring(0,157)+"..."),{body:t,variables:n}})(e);case"whatsapp":return(e=>{let t=e.content;return t=t.replace(/^\[WHATSAPP\]|\[whatsapp\]/i,"").trim(),{body:t,variables:wk(t)}})(e);default:return{body:e.content,variables:wk(e.content)}}},jk=e=>encodeURIComponent(e).replace(/'/g,"%27").replace(/"/g,"%22").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/!/g,"%21");var kk=n(5887);const Ck=async(e,t)=>{try{const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=jk(e),s=jk(t);let o="mailto:";n&&(o+=jk(n));const i=[];return e&&i.push("subject=".concat(r)),t&&i.push("body=".concat(s)),i.length>0&&(o+="?"+i.join("&")),o}(e,t);return window.location.href=n,kk.oR.success("Email client opened successfully"),!0}catch(n){return console.error("Error opening email client:",n),!1}},Sk=async e=>{try{const t=encodeURIComponent(e),n="sms:?body=".concat(t);return window.location.href=n,kk.oR.success("SMS app opened successfully"),!0}catch(t){return console.error("Error opening SMS app:",t),!1}},Ak=async e=>{try{const t=encodeURIComponent(e),n="whatsapp://send?text=".concat(t);return window.location.href=n,setTimeout((()=>{"https://web.whatsapp.com/send?text=".concat(t);kk.oR.success("WhatsApp opened successfully")}),500),!0}catch(t){return console.error("Error opening WhatsApp:",t),!1}},Ek=t=>{let{template:n}=t;const[r,s]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[(0,k.jsx)("div",{className:"flex justify-between items-start",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium",children:n.name}),(0,k.jsxs)("div",{className:"flex items-center mt-1",children:[(0,k.jsx)("svg",{className:"h-4 w-4 ".concat((e=>{switch(e){case"email":return"text-blue-500";case"sms":return"text-green-500";case"whatsapp":return"text-green-600";default:return"text-gray-500"}})(n.type)," mr-1"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:(e=>{switch(e){case"email":return"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z";case"sms":return"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z";case"whatsapp":return"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z";default:return"M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})(n.type)})}),(0,k.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:n.type}),n.createdAt&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"mx-2 text-gray-300",children:"\u2022"}),(0,k.jsxs)("span",{className:"text-xs text-gray-500",children:["Created ",(e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})(n.createdAt)]})]})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-3 whitespace-pre-line",children:["email"===n.type&&n.subject?(0,k.jsxs)("span",{className:"font-medium",children:["Subject: ",n.subject]}):null,n.content]})]})}),(0,k.jsxs)("div",{className:"mt-3 flex justify-end space-x-2",children:[(0,k.jsx)("button",{className:"text-gray-600 hover:text-gray-800 text-sm",children:"Edit"}),(0,k.jsx)("button",{className:"".concat(r?"text-gray-400 cursor-wait":"text-primary-600 hover:text-primary-700"," text-sm font-medium"),onClick:async()=>{s(!0);try{const e=n.type||(e=>{if(e.type)return e.type;const t=e.content.trim();return t.startsWith("[EMAIL]")||t.startsWith("[email]")?"email":t.startsWith("[SMS]")||t.startsWith("[sms]")?"sms":t.startsWith("[WHATSAPP]")||t.startsWith("[whatsapp]")?"whatsapp":e.subject||t.includes("Subject:")?"email":/(?:[\u2600-\u27BF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDFFF]|\uD83E[\uDC00-\uDEFF])/.test(t)?"whatsapp":t.length<=160?"sms":t.length<=1e3?"whatsapp":t.length>1e3||/<[^>]*>/.test(t)?"email":null})(n);if(!e)return kk.oR.error("Unable to determine channel type for this template"),void s(!1);const t=((e,t)=>{const n=[];switch(t){case"sms":e.content.length>160&&n.push("SMS length exceeds 160 characters (".concat(e.content.length,"). Message may be split or truncated."));break;case"email":e.subject||e.content.includes("Subject:")||n.push("Email template should have a subject line.");break;case"whatsapp":e.content.length>4096&&n.push("WhatsApp message exceeds 4096 characters (".concat(e.content.length,"). Message may be truncated."))}return{valid:!0,warnings:n}})(n,e);t.warnings.length>0&&t.warnings.forEach((e=>{(0,kk.oR)(e,{icon:"\u26a0\ufe0f",style:{borderLeft:"4px solid #f97316",background:"#fff7ed",color:"#9a3412"}})}));const r=await(async(e,t)=>{try{const n=Nk(e,t);switch(t){case"email":return await Ck(n.subject||e.name,n.body);case"sms":return await Sk(n.body);case"whatsapp":return await Ak(n.body);default:throw new Error("Unsupported channel type: ".concat(t))}}catch(n){return console.error("Error opening ".concat(t," channel:"),n),kk.oR.error("Failed to open ".concat(t.toUpperCase()," channel. Please check your device settings.")),!1}})(n,e);r&&kk.oR.success("Template opened in ".concat(e.toUpperCase()," successfully"))}catch(e){console.error("Error using template:",e),kk.oR.error("Failed to use template. Please try again.")}finally{s(!1)}},disabled:r,children:r?"Opening...":"Use Template"})]})]})},_k=t=>{let{isOpen:n,onClose:r,onSave:s,error:o}=t;const[i,a]=(0,e.useState)({name:"",type:"email",content:"",subject:"",variables:[]}),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null);(0,e.useEffect)((()=>{n&&(a({name:"",type:"email",content:"",subject:"",variables:[]}),d(null))}),[n]),(0,e.useEffect)((()=>{o&&d(o)}),[o]);const h=e=>{const{name:t,value:n}=e.target;a((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))),u&&d(null)},m=()=>{a({name:"",type:"email",content:"",subject:"",variables:[]}),d(null),r()};return n?(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"Create New Template"}),(0,k.jsx)("button",{onClick:m,className:"text-gray-500 hover:text-gray-700",type:"button",children:(0,k.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),u&&(0,k.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.name&&""!==i.name.trim()?i.content&&""!==i.content.trim()?"email"!==i.type||i.subject&&""!==i.subject.trim()||(d("Subject line is required for email templates"),0):(d("Content is required"),0):(d("Template name is required"),0)){c(!0),d(null);try{console.log("Submitting template data:",i);const e=await s(i);console.log("Template save result:",e),e?(a({name:"",type:"email",content:"",subject:"",variables:[]}),r()):d("Failed to create template. Please try again.")}catch(zZ){console.error("Error saving template:",zZ),d("An error occurred while saving the template.")}finally{c(!1)}}},children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Template Name ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"text",name:"name",value:i.name,onChange:h,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Welcome Email",required:!0})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Template Type ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsxs)("select",{name:"type",value:i.type,onChange:h,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[(0,k.jsx)("option",{value:"email",children:"Email"}),(0,k.jsx)("option",{value:"sms",children:"SMS"}),(0,k.jsx)("option",{value:"whatsapp",children:"WhatsApp"})]})]}),"email"===i.type&&(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Line ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"text",name:"subject",value:i.subject||"",onChange:h,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Welcome to our store!",required:"email"===i.type})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Content ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("textarea",{name:"content",value:i.content,onChange:h,rows:5,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"email"===i.type?"Hello {firstName},\n\nWelcome to our store! We're excited to have you join us.\n\nBest regards,\nYour Store Team":"Hi {firstName}! Welcome to our store. Use code WELCOME10 for 10% off your first purchase!",required:!0}),(0,k.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Use ","{firstName}",", ","{lastName}",", etc. as placeholders for customer information."]})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,k.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:l,children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center",disabled:l,children:l?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Template"})]})]})]})}):null},Ik=t=>{let{templates:n,loading:r,onCreateTemplate:s,error:o}=t;const[i,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),u=()=>{a(!0)},d=o||l,h={backgroundColor:"#4a6cf7",color:"white",padding:"8px 16px",borderRadius:"4px",border:"none",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",visibility:"visible",display:"inline-block"};return(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"Message Templates"}),(0,k.jsx)("button",{style:h,onClick:u,children:"New Template"})]}),d&&(0,k.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),r?(0,k.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):0===n.length?(0,k.jsxs)("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,k.jsx)("div",{className:"text-5xl mb-3",children:"\ud83d\udc8c"}),(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:"No templates yet"}),(0,k.jsx)("p",{className:"text-gray-500 text-sm mb-6",children:"Get started by creating a new message template."}),(0,k.jsx)("button",{style:(0,S.A)((0,S.A)({},h),{},{padding:"10px 20px",fontSize:"16px",margin:"0 auto",display:"block"}),onClick:u,children:"Create Template"})]}):(0,k.jsx)("div",{className:"space-y-4",children:n.map((e=>(0,k.jsx)(Ek,{template:e},e.id)))}),(0,k.jsx)(_k,{isOpen:i,onClose:()=>a(!1),onSave:async e=>{if(c(null),s)try{const t=await s(e);return console.log("Template saved result in MessageTemplates:",t),t?(a(!1),t):(c("Failed to create template. Please try again."),null)}catch(o){return console.error("Error in handleSaveTemplate:",o),c("An unexpected error occurred. Please try again."),null}return null},error:d})]})},Tk=e=>{let{title:t,description:n}=e;return(0,k.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,k.jsxs)("div",{className:"flex items-start mb-3",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 mr-3",children:(0,k.jsx)(pk,{className:"h-5 w-5"})}),(0,k.jsx)("h3",{className:"font-medium",children:t})]}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:n})]})},Pk=()=>(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Communication Best Practices"}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"concise",title:"Keep messages concise",description:"Short, clear messages have higher engagement rates. Aim for 160 characters or less."},{id:"personalize",title:"Personalize your messages",description:"Include the customer's name and relevant details to increase engagement and response rates."},{id:"timing",title:"Timing is everything",description:"Send messages at optimal times when customers are most likely to engage with your content."},{id:"cta",title:"Include clear CTAs",description:"Always include a clear call-to-action so customers know what to do next."}].map((e=>(0,k.jsx)(Tk,{title:e.title,description:e.description},e.id)))})]}),Rk=async e=>new Promise((t=>{const n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n);const r=setTimeout((()=>{document.body.removeChild(n),t(!1)}),2e3);n.onload=()=>{clearTimeout(r),document.body.removeChild(n),t(!0)},n.src=e})),Dk=async(e,t,n)=>{try{const r=n.find((e=>"whatsapp"===e.type||"sms"===e.type));if(await(async e=>{try{let t="whatsapp://";if(e&&e.content){const n=encodeURIComponent(e.content);t="whatsapp://send?text=".concat(n)}return console.log("Opening WhatsApp with URL: ".concat(t)),await Rk(t)||(console.log("WhatsApp Desktop not available, falling back to web"),window.open("https://web.whatsapp.com/","_blank")),!0}catch(t){return console.error("Error opening WhatsApp:",t),!1}})(r)){const n=await(async(e,t,n)=>{try{return console.log("Updating WhatsApp channel ".concat(t," for business ").concat(e," to ").concat(n?"configured":"not configured")),!0}catch(r){return console.error("Error updating WhatsApp channel status:",r),!1}})(e,t,!0);if(n)return kk.oR.success("WhatsApp connected successfully"),!0;kk.oR.error("Failed to update WhatsApp connection status")}else kk.oR.error("Failed to open WhatsApp. Please make sure it is installed.");return!1}catch(r){return console.error("Error connecting WhatsApp:",r),kk.oR.error("An error occurred while connecting WhatsApp"),!1}},Mk=t=>{let{campaigns:n,templates:r,channels:s,loading:o,error:i,onCreateCampaign:a,onEditCampaign:l,onDeleteCampaign:c,onCreateTemplate:u,onUpdateChannel:d,isCreatingCampaign:h}=t;const{user:m}=(0,N.A)(),[p,f]=(0,e.useState)("campaigns"),[g,y]=(0,e.useState)(null);return(0,k.jsxs)("div",{className:"px-4 py-6",children:[(0,k.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,k.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("campaigns"===p?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500"),onClick:()=>f("campaigns"),children:"Campaigns"}),(0,k.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("templates"===p?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500"),onClick:()=>f("templates"),children:"Templates"}),(0,k.jsx)("button",{className:"flex-1 py-2 px-4 text-center ".concat("channels"===p?"border-b-2 border-blue-500 text-blue-600 font-medium":"text-gray-500"),onClick:()=>f("channels"),children:"Channels"})]}),i&&(0,k.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:i}),"campaigns"===p&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-lg font-medium",children:"Communication Campaigns"}),(0,k.jsx)("button",{onClick:()=>a("email"),disabled:h,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center",children:h?(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):(0,k.jsx)("span",{children:"Create Campaign"})})]}),o.campaigns?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,k.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading campaigns..."})]}):0===n.length?(0,k.jsx)(yk,{onCreateCampaign:()=>a("email")}):(0,k.jsx)("div",{className:"space-y-4",children:n.map((e=>(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Status: ",(0,k.jsx)("span",{className:"capitalize",children:e.status})]})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>l(e),className:"text-gray-500 hover:text-gray-700",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,k.jsx)("button",{onClick:()=>c(e),className:"text-gray-500 hover:text-red-600",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)))})]}),"templates"===p&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h2",{className:"text-lg font-medium",children:"Message Templates"}),(0,k.jsx)("button",{onClick:()=>{u({name:"New Template",type:"email",content:"",subject:"",variables:[]})},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium",children:"New Template"})]}),o.templates?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,k.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading templates..."})]}):0===r.length?(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,k.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),(0,k.jsx)("p",{className:"text-gray-500 mb-4",children:"Get started by creating a new message template."}),(0,k.jsx)("button",{onClick:()=>{u({name:"New Template",type:"email",content:"",subject:"",variables:[]})},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Create Template"})]}):(0,k.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Type: ",(0,k.jsx)("span",{className:"capitalize",children:e.type})]})]}),(0,k.jsx)("div",{className:"flex space-x-2",children:(0,k.jsx)("button",{className:"text-gray-500 hover:text-gray-700",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]})},e.id)))})]}),"channels"===p&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Communication Channels"}),o.channels?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,k.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading channels..."})]}):(0,k.jsx)("div",{className:"space-y-4",children:s.map((e=>(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900 capitalize",children:e.type}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Status: ",e.isConfigured?"Connected":"Not Connected"]})]}),(0,k.jsx)("button",{onClick:()=>"whatsapp"===e.type&&(async e=>{if("whatsapp"===e.type&&null!==m&&void 0!==m&&m.businessId){y(e.id);try{await Dk(m.businessId,e.id,r)&&d&&await d(e.id,{isConfigured:!0})}catch(i){console.error("Error connecting WhatsApp:",i)}finally{y(null)}}})(e),disabled:g===e.id,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded ".concat(e.isConfigured?"bg-gray-200 text-gray-800 hover:bg-gray-300":"text-white bg-blue-600 hover:bg-blue-700"),children:g===e.id?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):e.isConfigured?"Manage":"Connect"})]})},e.id)))})]})]})},Lk=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)([]),[s,o]=(0,e.useState)([]),[i,a]=(0,e.useState)([]),[l,c]=(0,e.useState)({campaigns:!0,templates:!0,channels:!0});return(0,e.useEffect)((()=>{const e=async()=>{if(null!==t&&void 0!==t&&t.businessId)try{c((e=>(0,S.A)((0,S.A)({},e),{},{campaigns:!0})));const e=await(async e=>{if(!e)return[];try{const t=(0,sl.rJ)(rl.db,"businesses",e,"campaigns"),n=(0,sl.P)(t),r=await(0,sl.GG)(n),s=[];return r.forEach((e=>{s.push((0,S.A)({id:e.id},e.data()))})),s}catch(t){return console.error("Error fetching campaigns:",t),[]}})(t.businessId);r(e)}catch(e){console.error("Error in campaigns hook:",e)}finally{c((e=>(0,S.A)((0,S.A)({},e),{},{campaigns:!1})))}};null!==t&&void 0!==t&&t.businessId&&e()}),[t]),(0,e.useEffect)((()=>{const e=async()=>{if(null!==t&&void 0!==t&&t.businessId)try{c((e=>(0,S.A)((0,S.A)({},e),{},{templates:!0})));const e=await(async e=>{if(!e)return[];try{const t=(0,sl.rJ)(rl.db,"businesses",e,"messageTemplates"),n=(0,sl.P)(t),r=await(0,sl.GG)(n),s=[];return r.forEach((e=>{s.push((0,S.A)({id:e.id},e.data()))})),s}catch(t){return console.error("Error fetching templates:",t),[]}})(t.businessId);o(e)}catch(e){console.error("Error in templates hook:",e)}finally{c((e=>(0,S.A)((0,S.A)({},e),{},{templates:!1})))}};null!==t&&void 0!==t&&t.businessId&&e()}),[t]),(0,e.useEffect)((()=>{const e=async()=>{if(null!==t&&void 0!==t&&t.businessId)try{c((e=>(0,S.A)((0,S.A)({},e),{},{channels:!0})));let e=await(async e=>{if(!e)return[];try{const t=(0,sl.rJ)(rl.db,"businesses",e,"communicationChannels"),n=(0,sl.P)(t),r=await(0,sl.GG)(n),s=[];return r.forEach((e=>{s.push((0,S.A)({id:e.id},e.data()))})),s}catch(t){return console.error("Error fetching channels:",t),[]}})(t.businessId);if(0===e.length){e=await(async e=>{if(!e)return[];const t=[{type:"email",isConfigured:!1,settings:{}},{type:"sms",isConfigured:!1,settings:{}},{type:"whatsapp",isConfigured:!1,settings:{}}],n=[];try{for(const r of t){const t=(0,sl.rJ)(rl.db,"businesses",e,"communicationChannels"),s=await(0,sl.gS)(t,(0,S.A)((0,S.A)({},r),{},{createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)()}));n.push((0,S.A)({id:s.id},r))}}catch(r){console.error("Error creating default channels:",r)}return n})(t.businessId)}else Ok(e)&&(console.log("Duplicate channels detected, cleaning up..."),e=await(async e=>{if(!e)return[];try{const t=(0,sl.rJ)(rl.db,"businesses",e,"communicationChannels"),n=(0,sl.P)(t),r=await(0,sl.GG)(n),s=new Map;r.forEach((e=>{const t=(0,S.A)({id:e.id},e.data()),n=s.get(t.type);(!n||t.updatedAt&&n.data.updatedAt&&t.updatedAt>n.data.updatedAt)&&s.set(t.type,{id:e.id,data:t})}));const o=[];return r.forEach((e=>{const t=(0,S.A)({id:e.id},e.data()),n=s.get(t.type);if(n&&n.id!==e.id){const t=e.ref;o.push((0,sl.kd)(t))}})),o.length>0&&(console.log("Cleaning up ".concat(o.length," duplicate channels")),await Promise.all(o)),Array.from(s.values()).map((e=>e.data))}catch(t){return console.error("Error cleaning up duplicate channels:",t),[]}})(t.businessId));a(e)}catch(e){console.error("Error in channels hook:",e)}finally{c((e=>(0,S.A)((0,S.A)({},e),{},{channels:!1})))}};null!==t&&void 0!==t&&t.businessId&&e()}),[t]),{campaigns:n,templates:s,channels:i,loading:l,setCampaigns:r,setTemplates:o,setChannels:a}},Ok=e=>{const t=new Set;for(const n of e){if(t.has(n.type))return!0;t.add(n.type)}return!1},Fk=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(null);return{createDraftCampaign:async e=>{if(r(null),null===t||void 0===t||!t.businessId)return r("You must be logged in to create a campaign"),null;try{return await(async(e,t)=>{if(!e)return null;try{const n=(0,sl.rJ)(rl.db,"businesses",e,"campaigns"),r=(0,S.A)((0,S.A)({},t),{},{businessId:e,status:t.status||"draft",createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)()}),s=await(0,sl.gS)(n,r);return(0,S.A)((0,S.A)({id:s.id},r),{},{createdAt:new Date,updatedAt:new Date})}catch(n){return console.error("Error creating campaign:",n),null}})(t.businessId,e)}catch(zZ){return console.error("Error in createDraftCampaign:",zZ),r("Failed to create campaign"),null}},createTemplate:async e=>{if(r(null),null===t||void 0===t||!t.businessId)return r("You must be logged in to create a template"),null;try{return await(async(e,t)=>{if(console.log("createTemplate called with businessId:",e),console.log("templateData:",t),!e)return console.error("Cannot create template: No businessId provided"),null;try{if(!t.name)return console.error("Template name is required"),null;if(!t.type)return console.error("Template type is required"),null;if(!t.content)return console.error("Template content is required"),null;const n=[];if(t.content){const e=/\{([^}]+)\}/g;let r;for(;null!==(r=e.exec(t.content));)n.push(r[1])}const r={name:t.name,type:t.type,content:t.content,businessId:e,variables:Array.from(new Set(n)),createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)()};"email"===t.type&&t.subject&&(r.subject=t.subject),console.log("Template data to save:",r),console.log("Getting collection reference for path:","businesses/".concat(e,"/messageTemplates"));const s=(0,sl.rJ)(rl.db,"businesses",e,"messageTemplates");console.log("About to call addDoc");const o=await(0,sl.gS)(s,r);return console.log("Document added with ID:",o.id),(0,S.A)((0,S.A)({id:o.id},r),{},{createdAt:new Date,updatedAt:new Date})}catch(n){return console.error("Error creating template:",n),console.error("Error details:",JSON.stringify(n,Object.getOwnPropertyNames(n))),null}})(t.businessId,e)}catch(zZ){return console.error("Error in createTemplate:",zZ),r("Failed to create template"),null}},updateChannel:async(e,n)=>{if(r(null),null===t||void 0===t||!t.businessId)return r("You must be logged in to update a channel"),!1;try{const r=(0,sl.H9)(rl.db,"businesses",t.businessId,"communicationChannels",e);return await(0,sl.mZ)(r,(0,S.A)((0,S.A)({},n),{},{updatedAt:(0,sl.O5)()})),!0}catch(zZ){return console.error("Error updating channel:",zZ),r("Failed to update channel"),!1}},error:n}};class Bk extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by ErrorBoundary:",e,t),this.props.onError&&this.props.onError(e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,k.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Something went wrong"}),(0,k.jsx)("p",{className:"text-red-600 mb-2",children:"We're sorry, but there was an error loading this component."}),this.state.error&&(0,k.jsx)("pre",{className:"text-sm bg-white p-2 rounded border border-red-100 overflow-auto",children:this.state.error.toString()}),(0,k.jsx)("button",{className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",onClick:()=>this.setState({hasError:!1,error:null}),children:"Try Again"})]}):this.props.children}}const Uk=Bk,zk=()=>{const{campaigns:t,templates:n,channels:r,loading:s,setCampaigns:o,setTemplates:i,setChannels:a}=Lk(),{createDraftCampaign:l,createTemplate:c,updateChannel:u,error:d}=Fk(),[h,m]=(0,e.useState)(null),[p,f]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1),v=tl(),x=(null===v||void 0===v?void 0:v.viewMode)||"default",b=["email","sms","whatsapp"];(0,e.useEffect)((()=>{d&&m(d)}),[d]);const w=async e=>{if(e&&b.includes(e)){m(null),f(!0);try{const t=e,n={name:"New ".concat(e.charAt(0).toUpperCase()+e.slice(1)," Campaign"),templateId:"",channels:[t],targetAudience:"all",status:"draft"},r=await l(n);r?o((e=>[r,...e])):m("Failed to create campaign. Please try again.")}catch(zZ){console.error("Error creating campaign:",zZ),m("An unexpected error occurred. Please try again.")}finally{f(!1),y(!1)}}else m("Please select a valid channel type: Email, SMS, or WhatsApp")},N=e=>{console.log("Editing campaign:",e),alert("Editing campaign: ".concat(e.name))},j=e=>{window.confirm('Are you sure you want to delete the campaign "'.concat(e.name,'"?'))&&(o((t=>t.filter((t=>t.id!==e.id)))),alert('Campaign "'.concat(e.name,'" has been deleted.')))},C=async e=>{m(null);try{if(!e.name||!e.type||!e.content)return m("Please fill in all required fields"),null;if("email"===e.type&&!e.subject)return m("Subject line is required for email templates"),null;const t=await c(e);return t?(i((e=>[t,...e])),t):(m("Failed to create template. Please try again."),null)}catch(zZ){return console.error("Error in handleCreateTemplate:",zZ),m("An unexpected error occurred. Please try again."),null}},A=async(e,t)=>{try{return!!await u(e,t)&&(a((n=>n.map((n=>n.id===e?(0,S.A)((0,S.A)({},n),t):n)))),!0)}catch(zZ){return console.error("Error updating channel:",zZ),m("Failed to update channel settings"),!1}};return"simple"===x?(0,k.jsx)(Uk,{children:(0,k.jsx)(Mk,{campaigns:t,templates:n,channels:r,loading:s,error:h,onCreateCampaign:w,onEditCampaign:N,onDeleteCampaign:j,onCreateTemplate:C,onUpdateChannel:A,isCreatingCampaign:p})}):(0,k.jsxs)("div",{children:[(0,k.jsx)(gk,{onCreateCampaign:w,isCreating:p,showOptions:g,setShowOptions:y}),h&&(0,k.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:h}),(0,k.jsx)(xk,{campaigns:t,loading:s.campaigns,onEdit:N,onDelete:j,onCreateCampaign:w}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,k.jsx)(bk,{channels:r,templates:n,loading:s.channels,onUpdateChannel:A}),(0,k.jsx)(Ik,{templates:n,loading:s.templates,onCreateTemplate:C,error:h})]}),(0,k.jsx)(Pk,{})]})},Vk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})},qk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},Wk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Hk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})},Gk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},Kk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},Yk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},Qk=e=>{let{className:t="w-6 h-6"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})},$k=e=>{let{className:t="w-5 h-5"}=e;return(0,k.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})},Jk=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;const Xk=function(e){var t={target:"confetti-holder",max:80,size:1,animate:!0,respawn:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,start_from_edge:!1,width:window.innerWidth,height:window.innerHeight};if(e&&(e.target&&(t.target=e.target),e.max&&(t.max=e.max),e.size&&(t.size=e.size),void 0!==e.animate&&null!==e.animate&&(t.animate=e.animate),void 0!==e.respawn&&null!==e.respawn&&(t.respawn=e.respawn),e.props&&(t.props=e.props),e.colors&&(t.colors=e.colors),e.clock&&(t.clock=e.clock),void 0!==e.start_from_edge&&null!==e.start_from_edge&&(t.start_from_edge=e.start_from_edge),e.width&&(t.width=e.width),e.height&&(t.height=e.height),void 0!==e.rotate&&null!==e.rotate&&(t.rotate=e.rotate)),"object"!=typeof t.target&&"string"!=typeof t.target)throw new TypeError("The target parameter should be a node or string");if("object"==typeof t.target&&(null===t.target||!t.target instanceof HTMLCanvasElement)||"string"==typeof t.target&&(null===document.getElementById(t.target)||!document.getElementById(t.target)instanceof HTMLCanvasElement))throw new ReferenceError("The target element does not exist or is not a canvas element");var n="object"==typeof t.target?t.target:document.getElementById(t.target),r=n.getContext("2d"),s=[];function o(e,t){e||(e=1);var n=Math.random()*e;return t?Math.floor(n):n}var i=t.props.reduce((function(e,t){return e+(t.weight||1)}),0);function a(){var e=t.props[function(){for(var e=Math.random()*i,n=0;n<t.props.length;++n){var r=t.props[n].weight||1;if(e<r)return n;e-=r}}()];return{prop:e.type?e.type:e,x:o(t.width),y:t.start_from_edge?t.clock>=0?-10:parseFloat(t.height)+10:o(t.height),src:e.src,radius:o(4)+1,size:e.size,rotate:t.rotate,line:Math.floor(o(65)-30),angles:[o(10,!0)+2,o(10,!0)+2,o(10,!0)+2,o(10,!0)+2],color:t.colors[o(t.colors.length,!0)],rotation:o(360,!0)*Math.PI/180,speed:o(t.clock/7)+t.clock/30}}function l(e){if(e){var n=e.radius<=3?.4:.8;switch(r.fillStyle=r.strokeStyle="rgba("+e.color+", "+n+")",r.beginPath(),e.prop){case"circle":r.moveTo(e.x,e.y),r.arc(e.x,e.y,e.radius*t.size,0,2*Math.PI,!0),r.fill();break;case"triangle":r.moveTo(e.x,e.y),r.lineTo(e.x+e.angles[0]*t.size,e.y+e.angles[1]*t.size),r.lineTo(e.x+e.angles[2]*t.size,e.y+e.angles[3]*t.size),r.closePath(),r.fill();break;case"line":r.moveTo(e.x,e.y),r.lineTo(e.x+e.line*t.size,e.y+5*e.radius),r.lineWidth=2*t.size,r.stroke();break;case"square":r.save(),r.translate(e.x+15,e.y+5),r.rotate(e.rotation),r.fillRect(-15*t.size,-5*t.size,15*t.size,5*t.size),r.restore();break;case"svg":r.save();var s=new window.Image;s.src=e.src;var o=e.size||15;r.translate(e.x+o/2,e.y+o/2),e.rotate&&r.rotate(e.rotation),r.drawImage(s,-o/2*t.size,-o/2*t.size,o*t.size,o*t.size),r.restore()}}}var c=function(){t.animate=!1,clearInterval(t.interval),requestAnimationFrame((function(){r.clearRect(0,0,n.width,n.height);var e=n.width;n.width=1,n.width=e}))};return{render:function(){n.width=t.width,n.height=t.height,s=[];for(var e=0;e<t.max;e++)s.push(a());return requestAnimationFrame((function e(){for(var n in r.clearRect(0,0,t.width,t.height),s)l(s[n]);!function(){for(var e=0;e<t.max;e++){var n=s[e];n&&(t.animate&&(n.y+=n.speed),n.rotate&&(n.rotation+=n.speed/35),(n.speed>=0&&n.y>t.height||n.speed<0&&n.y<0)&&(t.respawn?(s[e]=n,s[e].x=o(t.width,!0),s[e].y=n.speed>=0?-10:parseFloat(t.height)):s[e]=void 0))}s.every((function(e){return void 0===e}))&&c()}(),t.animate&&requestAnimationFrame(e)}))},clear:c}},Zk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={target:"confetti-canvas",max:100,size:1.2,animate:!0,respawn:!1,props:["circle","square","triangle","line"],colors:[[63,130,246],[16,185,129],[139,92,246],[245,158,11],[249,115,22]],clock:25,rotate:!0,start_from_edge:!0,width:window.innerWidth,height:window.innerHeight},n=(0,S.A)((0,S.A)({},t),e);return Xk(n)},eC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;const n=document.createElement("canvas");n.id="confetti-canvas",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.pointerEvents="none",n.style.zIndex="9999",document.body.appendChild(n);const r=Zk(e);return r.render(),setTimeout((()=>{r.clear(),document.body.removeChild(n)}),t),r},tC=["children","onClick","variant","size","className"],nC=["value","onChange","options","label","className"],rC=t=>{let{children:n,className:r=""}=t;const[s,o]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}),[]),(0,k.jsx)("div",{className:"\n        ".concat(s?"emotional-dashboard-enter-active":"emotional-dashboard-enter","\n        ").concat(r,"\n      "),children:n})},sC=(e,t)=>{let{children:n,index:r=0,interactive:s=!0,achievement:o=!1,className:i=""}=e;return(0,k.jsxs)("div",{ref:t,className:"\n        emotional-card \n        ".concat(s?"emotional-card-hover":"","\n        ").concat(i,"\n      "),style:{animationDelay:Jk()?"0ms":"".concat(100+50*r,"ms")},children:[o&&(0,k.jsx)("div",{className:"emotional-achievement-indicator",children:(0,k.jsx)("span",{children:"\u2713"})}),n]})},oC=(0,e.forwardRef)(sC),iC=e=>{let{children:t,title:n,index:r=0,className:s=""}=e;return(0,k.jsxs)("div",{className:"\n        emotional-chart-container\n        bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300\n        ".concat(s,"\n      "),style:{animationDelay:Jk()?"0ms":"".concat(300+100*r,"ms")},children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:n}),t]})},aC=e=>{let{userName:t,className:n=""}=e;const r=(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})();return(0,k.jsxs)("div",{className:"emotional-greeting ".concat(n),children:[(0,k.jsx)("h2",{className:"text-lg text-gray-600",children:r}),(0,k.jsxs)("h1",{className:"text-2xl font-bold",children:["Welcome back, ",t||"there"," \ud83d\udc4b"]})]})},lC=e=>{let{icon:t,message:n,subMessage:r,actionText:s,onAction:o,className:i=""}=e;return(0,k.jsxs)("div",{className:"emotional-empty-state text-center p-6 ".concat(i),children:[(0,k.jsx)("div",{className:"mx-auto h-16 w-16 text-gray-400 mb-4 emotional-icon-pulse",children:t}),(0,k.jsx)("p",{className:"mt-2 text-base font-medium text-gray-600",children:n}),r&&(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r}),s&&o&&(0,k.jsx)("button",{onClick:o,className:"mt-4 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-md hover:from-indigo-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 active:scale-95",children:s})]})},cC=t=>{let{trigger:n,duration:r=3e3,options:s={}}=t;const[o,i]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{if(Jk()||o||!n)return;eC(s,r),i(!0);const e=setTimeout((()=>i(!1)),r);return()=>clearTimeout(e)}),[n,r,o,s]),null},uC=e=>{let{children:t,onClick:n,variant:r="primary",size:s="md",className:o=""}=e,i=E(e,tC);const a={primary:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-indigo-600 hover:to-purple-700",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",success:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700",attention:"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-lg"};return(0,k.jsx)("button",(0,S.A)((0,S.A)({onClick:n,className:"\n        emotional-button\n        rounded-md font-medium\n        transition-all duration-300\n        transform hover:scale-105 active:scale-95\n        ".concat(a[r]||a.primary,"\n        ").concat(l[s]||l.md,"\n        ").concat(o,"\n      ")},i),{},{children:t}))},dC=e=>{let{value:t,onChange:n,options:r=[],label:s,className:o=""}=e,i=E(e,nC);return(0,k.jsxs)("div",{className:o,children:[s&&(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,k.jsx)("select",(0,S.A)((0,S.A)({value:t,onChange:n,className:"emotional-select w-full border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"},i),{},{children:r.map((e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value)))}))]})},hC=e=>{let{title:t,insight:n,icon:r,color:s="indigo",className:o=""}=e;const i={indigo:"bg-indigo-100 text-indigo-800 border-indigo-200",green:"bg-green-100 text-green-800 border-green-200",amber:"bg-amber-100 text-amber-800 border-amber-200",purple:"bg-purple-100 text-purple-800 border-purple-200",blue:"bg-blue-100 text-blue-800 border-blue-200"};return(0,k.jsx)("div",{className:"\n      p-4 rounded-lg border ".concat(i[s]||i.indigo,"\n      transform transition-all duration-300 hover:scale-102\n      ").concat(o,"\n    "),children:(0,k.jsxs)("div",{className:"flex items-start",children:[r&&(0,k.jsx)("div",{className:"mr-3 mt-0.5",children:r}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium",children:t}),(0,k.jsx)("p",{className:"text-sm mt-1",children:n})]})]})})},mC=t=>{let{title:n,timeframe:r,onTimeframeChange:s}=t;const{user:o}=(0,N.A)(),[i,a]=(0,e.useState)("");(0,e.useEffect)((()=>{if(null!==o&&void 0!==o&&o.displayName){const e=o.displayName.split(" ")[0];a(e)}else if(null!==o&&void 0!==o&&o.email){const e=o.email.split("@")[0];a(e)}}),[o]);return(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)(aC,{userName:i,className:"mb-6"}),(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:n}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsx)(dC,{value:r,onChange:s,options:[{value:"last7days",label:"Last 7 days"},{value:"last30days",label:"Last 30 days"},{value:"last90days",label:"Last 90 days"},{value:"thisyear",label:"This year"},{value:"alltime",label:"All time"}],className:"w-40"}),(0,k.jsx)(uC,{variant:"secondary",size:"md",className:"flex items-center justify-center","aria-label":"Download analytics data","data-tooltip":"Download analytics report",onClick:()=>{console.log("Download analytics data"),alert("Analytics data download started")},children:(0,k.jsx)($k,{className:"w-5 h-5"})})]})]})]})},pC=t=>{let{children:n,duration:r=2e3,className:s=""}=t;const o=(0,e.useRef)(null);return(0,e.useEffect)((()=>{if(Jk()||!o.current)return;const e=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;if(Jk()||!e)return()=>{};const s=o=>{n||(n=o);const i=(o-n)%r/r,a=1+.05*Math.sin(i*Math.PI*2);e.style.transform="scale(".concat(a,")"),t=requestAnimationFrame(s)};return t=requestAnimationFrame(s),()=>{t&&(cancelAnimationFrame(t),e.style.transform="")}}(o.current,r);return()=>e()}),[r]),(0,k.jsx)("div",{ref:o,className:"emotional-icon-pulse ".concat(s),children:n})},fC=t=>{let{value:n,duration:r=1e3,prefix:s="",suffix:o="",className:i="",formatter:a=e=>Math.round(e).toString()}=t;const l=(0,e.useRef)(null);return(0,e.useEffect)((()=>{l.current&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Jk()||!e)return void(e.textContent=t.toString());const r={duration:1e3,easing:"decelerate",formatter:e=>Math.round(e).toString(),prefix:"",suffix:""},s=(0,S.A)((0,S.A)({},r),n),o=performance.now(),i=n=>{const r=n-o,a=Math.min(r/s.duration,1);let l;switch(s.easing){case"decelerate":l=1-Math.pow(1-a,2);break;case"accelerate":l=a*a;break;default:l=a}const c=0+(t-0)*l;e.textContent="".concat(s.prefix).concat(s.formatter(c)).concat(s.suffix),a<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}(l.current,n,{duration:r,formatter:a,prefix:s,suffix:o})}),[n,r,s,o,a]),(0,k.jsxs)("span",{ref:l,className:i,children:[s,a(0),o]})},gC=t=>{let{value:n,maxValue:r=100,height:s="h-2.5",className:o="",positiveColor:i="bg-green-500",negativeColor:a="bg-amber-500"}=t;const l=(0,e.useRef)(null),c=Math.min(Math.max(n/r*100,0),100),u=n>=0?i:a;return(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full ".concat(s," ").concat(o),children:(0,k.jsx)("div",{ref:l,className:"".concat(s," rounded-full emotional-progress-bar ").concat(u),style:{width:"".concat(Math.abs(c),"%")}})})},yC=e=>{let{value:t,showIcon:n=!0,className:r=""}=e;const s=t>=0,o="number"===typeof t?"".concat(t.toFixed(1),"%"):t;return(0,k.jsxs)("span",{className:"\n      ".concat(s?"emotional-growth-positive":"emotional-growth-negative","\n      ").concat(r,"\n    "),children:[n&&s&&(0,k.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),n&&!s&&(0,k.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M12 13a1 1 0 110 2H7a1 1 0 01-1-1v-5a1 1 0 112 0v2.586l4.293-4.293a1 1 0 011.414 0L16 9.586V7a1 1 0 112 0v5a1 1 0 01-1 1h-5z",clipRule:"evenodd"})}),o]})},vC=t=>{let{message:n="Loading insights...",className:r=""}=t;const s=["Analyzing your data...","Discovering insights...","Preparing your dashboard...","Crunching the numbers...","Finding patterns in your data..."],[o,i]=e.useState(n||s[0]);return(0,e.useEffect)((()=>{if(n)return;const e=setInterval((()=>{const e=Math.floor(Math.random()*s.length);i(s[e])}),2e3);return()=>clearInterval(e)}),[n]),(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 ".concat(r),children:[(0,k.jsxs)("div",{className:"relative w-16 h-16 mb-4",children:[(0,k.jsx)("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-gray-200 rounded-full"}),(0,k.jsx)("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-t-premium-emotion border-transparent rounded-full animate-spin"})]}),(0,k.jsx)("p",{className:"text-gray-600 font-medium emotional-loading-pulse",children:o})]})},xC=t=>{let{title:n,value:r,icon:s,changePercentage:o,loading:i=!1,iconBgColor:a="bg-green-100",iconColor:l="text-green-600",index:c=0,achievement:u=!1}=t;const[d,h]=(0,e.useState)(!1),m=(0,e.useRef)(null);(0,e.useEffect)((()=>{if(d||!m.current)return;const e=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(h(!0),e.disconnect())}),{threshold:.3});return e.observe(m.current),()=>{e.disconnect()}}),[d]);return(0,k.jsxs)(oC,{index:c,achievement:u,className:"bg-white p-6 rounded-lg shadow-md",ref:m,children:[(0,k.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:n}),(0,k.jsx)("h2",{className:"text-3xl font-bold",children:i?(0,k.jsx)("div",{className:"h-9 w-24 bg-gray-200 rounded animate-pulse"}):(0,k.jsx)(fC,{value:"number"===typeof r?r:0,prefix:"string"===typeof r&&r.startsWith("R")?"R":"",formatter:e=>(e=>"string"===typeof e?e:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))(e),duration:1200})})]}),(0,k.jsx)("div",{className:"p-3 rounded-md ".concat(a," transition-transform duration-300 hover:scale-110"),children:(0,k.jsx)("div",{className:l,children:s})})]}),(0,k.jsx)("div",{className:"flex items-center",children:void 0!==o&&"-"!==o?(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(yC,{value:"number"===typeof o?o:0}),(0,k.jsx)("span",{className:"text-gray-500 text-sm ml-2",children:"vs last period"})]}):(0,k.jsx)("span",{className:"text-gray-500 text-sm",children:"No previous data"})})]})},bC=e=>{let{title:t,children:n,height:r="h-64",index:s=0}=e;return(0,k.jsx)(iC,{title:t,index:s,className:"transition-all duration-300",children:(0,k.jsx)("div",{className:"".concat(r," flex items-center justify-center bg-gray-50 rounded-lg overflow-hidden"),children:n})})},wC=t=>{let{loading:n,totalCustomers:r,customerRetention:s,averageSpend:o,customerGrowth:i}=t;const a=(0,e.useRef)(null),[l,c]=(0,e.useState)(!1);if((0,e.useEffect)((()=>{if(!a.current)return;const e=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(c(!0),e.disconnect())}),{threshold:.3});return e.observe(a.current),()=>{e.disconnect()}}),[]),n)return(0,k.jsx)(vC,{message:"Analyzing customer data..."});if(0===r)return(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 emotional-icon-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,k.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No customer growth data available yet"}),(0,k.jsx)("p",{className:"text-xs text-gray-400",children:"Acquire customers to see growth trends"})]});return(0,k.jsxs)("div",{className:"p-4 w-full",ref:a,children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,k.jsxs)("div",{className:"mb-4 md:mb-0 p-4 bg-blue-50 rounded-lg transition-all duration-300 hover:bg-blue-100",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Customer Retention"}),(0,k.jsxs)("div",{className:"flex items-end",children:[(0,k.jsx)(fC,{value:s,suffix:"%",className:"text-2xl font-semibold text-blue-700",duration:l?1500:0}),(0,k.jsx)("span",{className:"text-blue-500 text-sm ml-2 mb-1",children:"loyal customers"})]})]}),(0,k.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg transition-all duration-300 hover:bg-green-100",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Average Spend"}),(0,k.jsxs)("div",{className:"flex items-end",children:[(0,k.jsx)(fC,{value:o,prefix:"R",formatter:e=>e.toFixed(2),className:"text-2xl font-semibold text-green-700",duration:l?1500:0}),(0,k.jsx)("span",{className:"text-green-500 text-sm ml-2 mb-1",children:"per customer"})]})]})]}),(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Growth Rate"}),(0,k.jsxs)("p",{className:"text-sm font-medium ".concat(i>=0?"text-green-600":"text-amber-600"),children:[i,"%"]})]}),(0,k.jsx)(gC,{value:i,maxValue:Math.max(20,1.2*Math.abs(i)),height:"h-3",positiveColor:"bg-gradient-to-r from-green-400 to-green-600",negativeColor:"bg-gradient-to-r from-amber-400 to-amber-600"})]}),(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsx)(hC,{title:"Customer Growth Insight",insight:i>10?"Your customer base is growing rapidly! Consider launching a referral program to capitalize on this momentum.":i>0?"Your customer base is growing steadily. Focus on retention strategies to maintain this positive trend.":0===i?"Your customer base is stable. Consider new acquisition strategies to drive growth.":"Your customer base has decreased slightly. Focus on re-engagement campaigns to bring customers back.",icon:(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:i>=0?"green":"amber"})})]})},NC=e=>{let{icon:t,message:n,subMessage:r,actionText:s,onAction:o}=e;return(0,k.jsx)(lC,{icon:(0,k.jsx)(pC,{children:t}),message:n,subMessage:r,actionText:s,onAction:o,className:"py-8"})},jC=t=>{let{analytics:n,loading:r}=t;const[s,o]=(0,e.useState)(null),[i,a]=(0,e.useState)(!1);(0,e.useEffect)((()=>{!r&&n&&(s?(n.totalCustomers>s.totalCustomers+10||n.revenueGenerated>1.2*s.revenueGenerated)&&a(!0):(n.totalCustomers>50||n.revenueGenerated>5e3)&&a(!0),o(n))}),[n,r,s]);const l=e=>{if(!n||!s)return!1;switch(e){case"totalCustomers":return n.totalCustomers>100||n.customerGrowth>15;case"couponsRedeemed":return n.couponsRedeemed>50;case"revenueGenerated":return n.revenueGenerated>1e4;case"loyaltyMembers":return n.loyaltyMembers>25;default:return!1}};return(0,k.jsxs)(rC,{children:[(0,k.jsx)(cC,{trigger:i,options:{particleCount:100,spread:70,origin:{y:.6}}}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,k.jsx)(xC,{title:"Total Customers",value:n.totalCustomers,icon:(0,k.jsx)(Vk,{}),changePercentage:n.customerGrowth,loading:r,iconBgColor:"bg-green-100",iconColor:"text-green-600",index:0,achievement:l("totalCustomers")}),(0,k.jsx)(xC,{title:"Coupons Redeemed",value:n.couponsRedeemed,icon:(0,k.jsx)(qk,{}),loading:r,iconBgColor:"bg-blue-100",iconColor:"text-blue-600",index:1,achievement:l("couponsRedeemed")}),(0,k.jsx)(xC,{title:"Revenue Generated",value:"R".concat(n.revenueGenerated.toFixed(2)),icon:(0,k.jsx)(Wk,{}),loading:r,iconBgColor:"bg-green-100",iconColor:"text-green-600",index:2,achievement:l("revenueGenerated")}),(0,k.jsx)(xC,{title:"Loyalty Members",value:n.loyaltyMembers,icon:(0,k.jsx)(Hk,{}),loading:r,iconBgColor:"bg-purple-100",iconColor:"text-purple-600",index:3,achievement:l("loyaltyMembers")})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,k.jsx)(bC,{title:"Coupon Performance",index:0,children:(0,k.jsx)(NC,{icon:(0,k.jsx)(Gk,{className:"mx-auto h-12 w-12"}),message:"No coupon data available yet",subMessage:"Create and distribute coupons to see performance data",actionText:"Create Coupon",onAction:()=>window.location.href="/business/coupons/create"})}),(0,k.jsx)(bC,{title:"Customer Growth",index:1,children:(0,k.jsx)(wC,{loading:r,totalCustomers:n.totalCustomers,customerRetention:n.customerRetention,averageSpend:n.averageSpend,customerGrowth:n.customerGrowth})})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-6 mb-6",children:(0,k.jsx)(bC,{title:"Coupon Redemption by Day",index:2,children:(0,k.jsx)(NC,{icon:(0,k.jsx)(Kk,{className:"mx-auto h-12 w-12"}),message:"No redemption data available yet",subMessage:"Customers need to redeem coupons to see this data"})})}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsx)(bC,{title:"Customer Demographics",index:3,children:(0,k.jsx)(NC,{icon:(0,k.jsx)(Yk,{className:"mx-auto h-12 w-12"}),message:"No demographic data available yet",subMessage:"Collect customer data to see demographics",actionText:"Add Customers",onAction:()=>window.location.href="/business/customers"})}),(0,k.jsx)(bC,{title:"Top Performing Coupons",index:4,children:(0,k.jsx)(NC,{icon:(0,k.jsx)(Qk,{className:"mx-auto h-12 w-12"}),message:"No coupon performance data available yet",subMessage:"Create multiple coupons to compare performance"})})]})]})},kC=async(e,t)=>{if(!e)throw new Error("Business ID is required");try{const t=await(async e=>{try{if(!e)throw new Error("Business ID is required");const t=new Date,n=new Date;n.setMonth(t.getMonth()-1);const r=new Date;r.setMonth(t.getMonth()-2);const s=sl.Dc.fromDate(t),o=sl.Dc.fromDate(n),i=sl.Dc.fromDate(r),a=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",e),(0,sl._M)("joinDate",">=",o),(0,sl._M)("joinDate","<=",s)),l=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",e),(0,sl._M)("joinDate",">=",i),(0,sl._M)("joinDate","<",o)),c=(0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",e)),[u,d,h]=await Promise.all([(0,sl.GG)(a),(0,sl.GG)(l),(0,sl.GG)(c)]),m=u.size,p=d.size;let f=0;p>0?f=(m-p)/p*100:m>0&&(f=100);const g=[];h.forEach((e=>{const t=e.data();g.push((0,S.A)((0,S.A)({},t),{},{id:e.id}))}));const y=g.filter((e=>e.totalVisits&&e.totalVisits>1)).length,v=g.length>0?y/g.length*100:0,x=g.reduce(((e,t)=>e+(t.totalSpent||0)),0),b=g.length>0?x/g.length:0;return{customerGrowth:{percentage:parseFloat(f.toFixed(1)),comparedTo:"Compared to last month"},customerRetention:{percentage:parseFloat(v.toFixed(1)),description:"Returning customers"},averageSpend:{amount:parseFloat(b.toFixed(2)),description:"Per customer"}}}catch(t){throw console.error("Error getting customer analytics:",t),t}})(e),n=(0,sl.rJ)(rl.db,"customers"),r=(0,sl.P)(n,(0,sl._M)("businessId","==",e)),s=(await(0,sl.d_)(r)).data().count,o=(0,sl.rJ)(rl.db,"customerCoupons"),i=(0,sl.P)(o,(0,sl._M)("businessId","==",e),(0,sl._M)("used","==",!0)),a=(await(0,sl.d_)(i)).data().count,l=(0,sl.P)(n,(0,sl._M)("businessId","==",e),(0,sl._M)("loyaltyPoints",">",0)),c=(await(0,sl.d_)(l)).data().count,u=(0,sl.P)(n,(0,sl._M)("businessId","==",e)),d=await(0,sl.GG)(u);let h=0;return d.forEach((e=>{const t=e.data();h+=t.totalSpent||0})),{totalCustomers:s,couponsRedeemed:a,revenueGenerated:h,loyaltyMembers:c,customerGrowth:t.customerGrowth.percentage,customerRetention:t.customerRetention.percentage,averageSpend:t.averageSpend.amount}}catch(n){throw console.error("Error fetching analytics data:",n),n}},CC=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(!0),[s,o]=(0,e.useState)("last7days"),[i,a]=(0,e.useState)({totalCustomers:0,couponsRedeemed:0,revenueGenerated:0,loyaltyMembers:0,customerGrowth:0,customerRetention:0,averageSpend:0});(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId)try{r(!0);const e=await kC(t.businessId);a(e)}catch(e){console.error("Error loading analytics data:",e)}finally{setTimeout((()=>{r(!1)}),800)}})()}),[t,s]);return(0,k.jsxs)("div",{className:"pb-12",children:[(0,k.jsx)(mC,{title:"Business Analytics",timeframe:s,onTimeframeChange:e=>{o(e.target.value)}}),n?(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-md p-12 mt-6",children:(0,k.jsx)(vC,{message:"Analyzing your business data..."})}):(0,k.jsx)(jC,{analytics:i,loading:n})]})},SC={container:"layout_container__p23f2",header:"layout_header__hpJ0K",titleWrapper:"layout_titleWrapper__em1va",fadeIn:"layout_fadeIn__x4iGD",title:"layout_title__djGId",subtitle:"layout_subtitle__tpbgX",controls:"layout_controls__+eSuU",viewToggle:"layout_viewToggle__6gW87",progressContainer:"layout_progressContainer__WqVzN",progressMessage:"layout_progressMessage__656Dd",completedMessage:"layout_completedMessage__RdPZp",progressIndicator:"layout_progressIndicator__B1RCw",progressRing:"layout_progressRing__VW0rs",progressBackground:"layout_progressBackground__D-RxE",progressForeground:"layout_progressForeground__ROCCa",milestone:"layout_milestone__aiavV",pulse:"layout_pulse__-wWoD",progressPercentage:"layout_progressPercentage__1T7QT",progressSections:"layout_progressSections__8e6w8",progressSection:"layout_progressSection__7TC0i",completed:"layout_completed__Ls9xj",active:"layout_active__MQ46w",sectionIcon:"layout_sectionIcon__-rc1F",sectionLabel:"layout_sectionLabel__mHlHh",content:"layout_content__cfDcz",simpleView:"layout_simpleView__QC49-"},AC=t=>{let{percentage:n,activeTab:r}=t;const s=(0,e.useRef)(null),o=(0,e.useRef)(0);(0,e.useEffect)((()=>{if(s.current){const e=2*Math.PI*45,t=e-n/100*e;setTimeout((()=>{s.current&&(s.current.style.strokeDashoffset="".concat(t),(n>=25&&o.current<25||n>=50&&o.current<50||n>=75&&o.current<75||100===n&&o.current<100)&&(s.current.classList.add(SC.milestone),setTimeout((()=>{s.current&&s.current.classList.remove(SC.milestone)}),1e3)))}),200),o.current=n}}),[n]);const i=[n>=20,n>=40,n>=60,n>=80,n>=100];return(0,k.jsxs)("div",{className:SC.progressIndicator,children:[(0,k.jsxs)("div",{className:SC.progressRing,children:[(0,k.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",children:[(0,k.jsx)("circle",{className:SC.progressBackground,cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"8"}),(0,k.jsx)("circle",{ref:s,className:SC.progressForeground,cx:"50",cy:"50",r:"45",fill:"none",strokeWidth:"8",strokeDasharray:2*Math.PI*45,strokeDashoffset:2*Math.PI*45,transform:"rotate(-90 50 50)"})]}),(0,k.jsxs)("div",{className:SC.progressPercentage,children:[n,"%"]})]}),(0,k.jsx)("div",{className:SC.progressSections,children:Object.entries({profile:"Basic Info",branding:"Branding",team:"Team Members",notifications:"Notifications",security:"Security",regional:"Regional Settings"}).map(((e,t)=>{let[n,s]=e;return(0,k.jsxs)("div",{className:"".concat(SC.progressSection," ").concat(i[t]?SC.completed:""," ").concat(r===n?SC.active:""),children:[(0,k.jsx)("span",{className:SC.sectionIcon,children:i[t]?"\u2705":t===i.findIndex((e=>!e))?"\u23f3":"\u274c"}),(0,k.jsx)("span",{className:SC.sectionLabel,children:s})]},n)}))})]})},EC=e=>{let{isSimpleView:t=!1,children:n,activeTab:r,completionPercentage:s=0}=e;return(0,k.jsxs)("div",{className:Po(SC.container,t?SC.simpleView:SC.detailedView),children:[(0,k.jsx)("header",{className:SC.header,children:(0,k.jsxs)("div",{className:SC.titleWrapper,children:[(0,k.jsx)("h1",{className:SC.title,children:"Your Brand Studio"}),(0,k.jsx)("p",{className:SC.subtitle,children:"Shape how customers see your business"})]})}),(0,k.jsxs)("div",{className:SC.progressContainer,children:[(0,k.jsx)(AC,{percentage:s,activeTab:r||"profile"}),s<100&&(0,k.jsx)("p",{className:SC.progressMessage,children:s>=80?"Almost there! Complete your profile to unlock full features":"Keep going! Your brand profile is taking shape"}),100===s&&(0,k.jsx)("p",{className:SC.completedMessage,children:"Perfect! Your brand profile is complete and looking great"})]}),(0,k.jsx)("main",{className:SC.content,children:n})]})},_C={form:"form_form__I7v+X",formSection:"form_formSection__6smgU",sectionTitle:"form_sectionTitle__vmPL3",formGrid:"form_formGrid__wRpnJ",formField:"form_formField__5PWne",fieldFocused:"form_fieldFocused__YX0wZ",labelContainer:"form_labelContainer__Ymof2",label:"form_label__jMBqs",required:"form_required__J8Zey",validIcon:"form_validIcon__odtzW",bounceIn:"form_bounceIn__2xh8W",input:"form_input__IQ5UY",textarea:"form_textarea__6+TpZ",select:"form_select__fE8wU",focused:"form_focused__9MhMC",error:"form_error__dveEd",valid:"form_valid__am02G",selectWrapper:"form_selectWrapper__Nf7cF",selectArrow:"form_selectArrow__XfusO",textareaWrapper:"form_textareaWrapper__THwAB",charCount:"form_charCount__jXbPC",charCountWarning:"form_charCountWarning__dZeSc",fieldFooter:"form_fieldFooter__e5qfn",helperText:"form_helperText__sVkMe",errorText:"form_errorText__5y9Vo",customerImpact:"form_customerImpact__wT4pd",fadeIn:"form_fadeIn__PPlRP",formActions:"form_formActions__wkKuM",saveButtonContainer:"form_saveButtonContainer__5o6Gw",saveButton:"form_saveButton__NOBA4",loading:"form_loading__PLgJi",success:"form_success__p8yEe",complete:"form_complete__3PTcF",spinner:"form_spinner__7tooL",spin:"form_spin__sfJQt",spinnerCircle:"form_spinnerCircle__3V-38",checkmark:"form_checkmark__ZXZ5U",buttonText:"form_buttonText__h9Z3x",confetti:"form_confetti__gwzni",confettiPiece:"form_confettiPiece__tiy+A",completeBadge:"form_completeBadge__dSC09"},IC=t=>{let{label:n,type:r,value:s,onChange:o,helperText:i,required:a=!1,validation:l=[],options:c=[],placeholder:u="",maxLength:d,customerImpact:h}=t;const[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(null),[x,b]=(0,e.useState)(!1),[w,N]=(0,e.useState)(0),j=(0,e.useRef)(null);(0,e.useEffect)((()=>{"textarea"===r&&N(s.length),f&&A(s)}),[s]);const C=()=>{p(!0)},S=()=>{p(!1),g(!0),A(s)},A=e=>{if(a&&!e.trim())return v("".concat(n," is required")),void b(!1);for(const t of l)if(!t.test(e))return v(t.message),void b(!1);v(null),b(!0)},E=e=>{o(e.target.value)};return(0,k.jsxs)("div",{className:"".concat(_C.formField," ").concat(m?_C.fieldFocused:""),children:[(0,k.jsxs)("div",{className:_C.labelContainer,children:[(0,k.jsxs)("label",{className:_C.label,children:[n," ",a&&(0,k.jsx)("span",{className:_C.required,children:"*"})]}),x&&f&&(0,k.jsx)("span",{className:_C.validIcon,children:"\u2713"})]}),(()=>{switch(r){case"textarea":return(0,k.jsxs)("div",{className:_C.textareaWrapper,children:[(0,k.jsx)("textarea",{ref:j,value:s,onChange:E,onFocus:C,onBlur:S,className:"".concat(_C.textarea," ").concat(m?_C.focused:""," ").concat(y?_C.error:""," ").concat(x&&f?_C.valid:""),placeholder:u,maxLength:d,required:a}),d&&(0,k.jsxs)("div",{className:_C.charCount,children:[(0,k.jsx)("span",{className:w>.8*d?_C.charCountWarning:"",children:w}),"/",d]})]});case"select":return(0,k.jsxs)("div",{className:_C.selectWrapper,children:[(0,k.jsxs)("select",{ref:j,value:s,onChange:E,onFocus:C,onBlur:S,className:"".concat(_C.select," ").concat(m?_C.focused:""," ").concat(y?_C.error:""," ").concat(x&&f?_C.valid:""),required:a,children:[(0,k.jsxs)("option",{value:"",disabled:!0,children:["Select ",n]}),c.map((e=>(0,k.jsxs)("option",{value:e.value,children:[e.icon&&"".concat(e.icon," "),e.label]},e.value)))]}),(0,k.jsx)("div",{className:_C.selectArrow,children:"\u25bc"})]});default:return(0,k.jsx)("input",{ref:j,type:r,value:s,onChange:E,onFocus:C,onBlur:S,className:"".concat(_C.input," ").concat(m?_C.focused:""," ").concat(y?_C.error:""," ").concat(x&&f?_C.valid:""),placeholder:u,required:a})}})(),(0,k.jsx)("div",{className:_C.fieldFooter,children:y?(0,k.jsx)("p",{className:_C.errorText,children:y}):(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)("p",{className:_C.helperText,children:i}),h&&m&&(0,k.jsxs)("div",{className:"".concat(_C.customerImpact," ").concat(_C.fadeIn),children:[(0,k.jsx)("span",{className:_C.impactIcon,children:"\ud83d\udc41\ufe0f"})," ",h]})]})})]})},TC=t=>{let{isLoading:n,isSuccess:r,completionPercentage:s}=t;const[o,i]=(0,e.useState)(!1);(0,e.useEffect)((()=>{r&&(i(!0),setTimeout((()=>{i(!1)}),3e3))}),[r]);return(0,k.jsxs)("div",{className:_C.saveButtonContainer,children:[(0,k.jsxs)("button",{type:"submit",className:"\n          ".concat(_C.saveButton,"\n          ").concat(n?_C.loading:"","\n          ").concat(r?_C.success:"","\n          ").concat(s>=100?_C.complete:"","\n        "),disabled:n,children:[n&&(0,k.jsx)("span",{className:_C.spinner,children:(0,k.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("circle",{className:_C.spinnerCircle,cx:"12",cy:"12",r:"10",fill:"none",strokeWidth:"3"})})}),r&&(0,k.jsx)("span",{className:_C.checkmark,children:"\u2713"}),(0,k.jsx)("span",{className:_C.buttonText,children:n?"Saving...":r?"Saved Successfully!":s<50?"Save Progress":s<100?"Save Your Brand Identity":"Save Your Complete Brand"})]}),o&&(0,k.jsx)("div",{className:_C.confetti,children:[...Array(20)].map(((e,t)=>(0,k.jsx)("div",{className:_C.confettiPiece,style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(.5*Math.random(),"s"),backgroundColor:["#2563EB","#10B981","#F59E0B","#EF4444","#8B5CF6"][Math.floor(5*Math.random())]}},t)))}),s>=100&&!n&&!r&&(0,k.jsx)("div",{className:_C.completeBadge,children:"100% Complete"})]})};var PC=n(9751);const RC=async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"businesses",e,"settings","profile"),r=(0,S.A)((0,S.A)({},t),{},{updatedAt:(0,sl.O5)()});await(0,sl.BN)(n,r,{merge:!0});const s=(0,sl.H9)(rl.db,"businesses",e);await(0,sl.mZ)(s,{businessName:t.name,description:t.description,address:t.address,phone:t.phone,website:t.website,email:t.email,industry:t.industry,updatedAt:(0,sl.O5)()})}catch(n){throw console.error("Error updating business profile:",n),n}},DC=async(e,t,n)=>{try{const o=(0,sl.H9)(rl.db,"businesses",e,"settings","branding");let i=(0,S.A)({},t);if(n)try{console.log("Uploading logo file:",n.name,n.type,n.size);const t=await(async e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})))(n);console.log("Using data URL for logo (truncated):",t.substring(0,50)+"..."),i.logoUrl=t;try{const t=(new Date).getTime(),r=n.name.split(".").pop(),s="".concat(t,".").concat(r),o=(0,PC.KR)(rl.IG,"businesses/".concat(e,"/logos/").concat(s));(0,PC.D)(o,n).then((()=>{console.log("Background upload to Firebase Storage completed")})).catch((e=>{console.log("Background upload failed, but using data URL so it's fine:",e)}))}catch(r){console.log("Failed to start background upload, but using data URL so it's fine")}}catch(s){throw console.error("Error handling logo:",s),new Error("Failed to process logo. Please try again.")}const a=(0,S.A)((0,S.A)({},i),{},{updatedAt:(0,sl.O5)()});await(0,sl.BN)(o,a,{merge:!0});const l=(0,sl.H9)(rl.db,"businesses",e);await(0,sl.mZ)(l,{colors:{primary:i.primaryColor,secondary:i.secondaryColor},logo:i.logoUrl,updatedAt:(0,sl.O5)()}),console.log("Branding settings updated successfully")}catch(s){throw console.error("Error updating branding settings:",s),s}},MC=t=>{let{onUpdate:n,onProfileCompletion:r,isSimpleView:s}=t;const{user:o,businessProfile:i}=(0,N.A)(),[a,l]=(0,e.useState)({name:"",description:"",email:"",phone:"",address:"",website:"",industry:""}),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(0);(0,e.useEffect)((()=>{i&&l({name:i.businessName||"",description:i.description||"",email:(null===o||void 0===o?void 0:o.email)||"",phone:i.phone||"",address:i.address||"",website:i.website||"",industry:i.industry||""})}),[i,o]),(0,e.useEffect)((()=>{f()}),[a]);const f=()=>{const e=["name","industry","email"],t=["description","phone","address","website"],n=e.filter((e=>a[e]&&""!==a[e].toString().trim())).length,s=t.filter((e=>a[e]&&""!==a[e].toString().trim())).length,o=n/e.length*.7*100,i=s/t.length*.3*100,l=Math.round(o+i);p(l),r&&r(l)},g=e=>t=>{l((n=>(0,S.A)((0,S.A)({},n),{},{[e]:t})))};return(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==o&&void 0!==o&&o.businessId){u(!0);try{await RC(o.businessId,{name:a.name||"",description:a.description||"",email:a.email||"",phone:a.phone||"",address:a.address||"",website:a.website||"",industry:a.industry||""}),h(!0),n(),setTimeout((()=>{h(!1)}),3e3)}catch(t){console.error("Error updating business profile:",t)}finally{u(!1)}}else console.error("No business ID found")},className:_C.form,children:[(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Business Essentials"}),(0,k.jsxs)("div",{className:_C.formGrid,children:[(0,k.jsx)(IC,{label:"Business Name",type:"text",value:a.name||"",onChange:g("name"),required:!0,helperText:"Your official business name",customerImpact:"This appears on all receipts and customer communications"}),(0,k.jsx)(IC,{label:"Industry",type:"select",value:a.industry||"",onChange:g("industry"),options:[{value:"retail",label:"Retail",icon:"\ud83d\udecd\ufe0f"},{value:"restaurant",label:"Restaurant",icon:"\ud83c\udf7d\ufe0f"},{value:"beauty",label:"Beauty & Wellness",icon:"\ud83d\udc86"},{value:"health",label:"Health & Fitness",icon:"\ud83c\udfcb\ufe0f"},{value:"education",label:"Education",icon:"\ud83c\udf93"},{value:"technology",label:"Technology",icon:"\ud83d\udcbb"},{value:"professional",label:"Professional Services",icon:"\ud83d\udc54"},{value:"entertainment",label:"Entertainment",icon:"\ud83c\udfad"},{value:"travel",label:"Travel & Hospitality",icon:"\u2708\ufe0f"},{value:"other",label:"Other",icon:"\ud83d\udce6"}],required:!0,helperText:"Select the category that best describes your business",customerImpact:"Helps us suggest better features for your business type"})]})]}),(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Contact Information"}),(0,k.jsxs)("div",{className:_C.formGrid,children:[(0,k.jsx)(IC,{label:"Email Address",type:"email",value:a.email||"",onChange:g("email"),required:!0,validation:[{test:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),message:"Please enter a valid email address"}],helperText:"Your business contact email",customerImpact:"Customers can reach you through this email"}),(0,k.jsx)(IC,{label:"Phone Number",type:"tel",value:a.phone||"",onChange:g("phone"),helperText:"Include country code for international customers",customerImpact:"For urgent customer support inquiries"})]})]}),(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Online Presence"}),(0,k.jsxs)("div",{className:_C.formGrid,children:[(0,k.jsx)(IC,{label:"Website",type:"text",value:a.website||"",onChange:g("website"),helperText:"Your business website URL",customerImpact:"Customers can learn more about your business here",validation:[{test:e=>!e||/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/.test(e),message:"Please enter a valid website URL"}]}),(0,k.jsx)(IC,{label:"Business Address",type:"text",value:a.address||"",onChange:g("address"),helperText:"Your physical business location",customerImpact:"Helps customers find your physical location"})]})]}),(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Your Story"}),(0,k.jsx)(IC,{label:"Business Description",type:"textarea",value:a.description||"",onChange:g("description"),helperText:"Tell customers about your business",maxLength:500,customerImpact:"Tell customers what makes your business special"})]}),(0,k.jsx)("div",{className:_C.formActions,children:(0,k.jsx)(TC,{isLoading:c,isSuccess:d,completionPercentage:m})})]})},LC=t=>{let{currentLogoUrl:n,onLogoChange:r,disabled:s=!1}=t;const[o,i]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsx)("div",{className:"w-40 h-16 border border-gray-300 rounded-md overflow-hidden flex items-center justify-center bg-gray-50",children:n?(0,k.jsx)("img",{src:n,alt:"Company Logo Preview",className:"max-w-full max-h-full object-contain"}):(0,k.jsx)("span",{className:"text-sm text-gray-400",children:"No logo uploaded"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("input",{type:"file",id:"logo-upload",accept:"image/jpeg,image/png,image/svg+xml,image/gif",onChange:async e=>{if(e.target.files&&e.target.files[0]){const n=e.target.files[0],s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return e.size>1024*t*1024?{valid:!1,error:"Logo file is too large. Please upload an image smaller than ".concat(t,"MB.")}:["image/jpeg","image/png","image/svg+xml","image/gif"].includes(e.type)?{valid:!0}:{valid:!1,error:"Please upload a valid image file (JPEG, PNG, SVG, or GIF)."}}(n);if(!s.valid)return void kk.oR.error(s.error||"Invalid file");try{i(!0);let e=n;"image/svg+xml"!==n.type&&(kk.oR.loading("Optimizing image for upload...",{id:"compressing"}),e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return new Promise(((n,r)=>{if(e.size<=1024*t*1024||"image/svg+xml"===e.type)return void n(e);const s=new FileReader;s.readAsDataURL(e),s.onload=t=>{var s;const o=new Image;o.src=null===(s=t.target)||void 0===s?void 0:s.result,o.onload=()=>{const t=document.createElement("canvas");let s=o.width,i=o.height;s>i?s>300&&(i*=300/s,s=300):i>100&&(s*=100/i,i=100),t.width=s,t.height=i;const a=t.getContext("2d");null===a||void 0===a||a.drawImage(o,0,0,s,i),t.toBlob((t=>{if(t){const r=new File([t],e.name,{type:"image/jpeg",lastModified:Date.now()});n(r)}else r(new Error("Failed to compress image"))}),"image/jpeg",.7)}},s.onerror=e=>{r(e)}}))}(n),kk.oR.dismiss("compressing"));const t=new FileReader;t.onload=t=>{t.target&&t.target.result&&r(e,t.target.result)},t.onerror=()=>{kk.oR.error("Error reading file. Please try another image.")},t.readAsDataURL(e)}catch(t){console.error("Error processing image:",t),kk.oR.error("Failed to process image. Please try another one.")}finally{i(!1)}}},className:"hidden",disabled:o||s}),(0,k.jsx)("label",{htmlFor:"logo-upload",className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 cursor-pointer inline-block ".concat(o||s?"opacity-50 cursor-not-allowed":""),children:o?"Processing...":"Upload Logo"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended size: 300x100px, PNG or SVG format (max 2MB)"}),(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Images will be automatically optimized for best performance"})]})]})]})},OC=e=>{let{label:t,name:n,value:r,onChange:s,description:o}=e;return(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("input",{type:"color",name:n,value:r,onChange:s,className:"w-10 h-10 border-0 p-0"}),(0,k.jsx)("input",{type:"text",name:n,value:r,onChange:s,className:"w-32 px-3 py-2 border border-gray-300 rounded-md",pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",title:"Please enter a valid hex color code (e.g. #FF0000)"})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:o})]})},FC=["logoFile"],BC=t=>{let{onUpdate:n}=t;const{user:r}=(0,N.A)(),[s,o]=(0,e.useState)(!0),[i,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)({primaryColor:"#3B82F6",secondaryColor:"#10B981",logoUrl:"",logoFile:null}),[u,d]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{if(null!==r&&void 0!==r&&r.businessId)try{o(!0),d(null);const e=await(async e=>{try{const t=(0,sl.H9)(rl.db,"businesses",e,"settings","branding"),n=await(0,sl.x7)(t);return n.exists()?n.data():{primaryColor:"#3B82F6",secondaryColor:"#10B981",logoUrl:""}}catch(u){throw console.error("Error getting branding settings:",u),u}})(r.businessId);c((t=>(0,S.A)((0,S.A)({},e),{},{logoFile:null})))}catch(u){console.error("Error fetching branding settings:",u),d("Failed to load branding settings. Please refresh the page.")}finally{o(!1)}})()}),[r]);const h=e=>{const{name:t,value:n}=e.target;c((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))};return s?(0,k.jsx)("div",{className:"p-4",children:(0,k.jsxs)("div",{className:"animate-pulse",children:[(0,k.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"}),(0,k.jsx)("div",{className:"h-32 bg-gray-200 rounded mb-4"}),(0,k.jsx)("div",{className:"h-12 bg-gray-200 rounded"})]})}):(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-6",children:"Branding"}),(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==r&&void 0!==r&&r.businessId)try{a(!0),d(null);const e=kk.oR.loading("Saving branding settings..."),{logoFile:t}=l,s=E(l,FC);await DC(r.businessId,s,t||void 0),n&&n(),kk.oR.success("Branding updated successfully!",{id:e})}catch(u){console.error("Error saving branding:",u),"storage/retry-limit-exceeded"===u.code?(d("Upload timed out. Please try again with a smaller image or check your internet connection."),kk.oR.error("Upload timed out. Please try again with a smaller image.")):(d(u.message||"Failed to update branding. Please try again."),kk.oR.error("Failed to update branding. Please try again."))}finally{a(!1)}else kk.oR.error("No business ID available. Please refresh the page.")},children:[u&&(0,k.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Business Logo"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Your logo will be displayed on your business page and on coupons."}),(0,k.jsx)(LC,{currentLogoUrl:l.logoUrl,onLogoChange:(e,t)=>{c((n=>(0,S.A)((0,S.A)({},n),{},{logoFile:e,logoUrl:t})))},disabled:i})]}),(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brand Colors"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"These colors will be used throughout your customer-facing pages."}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,k.jsx)(OC,{label:"Primary Brand Color",name:"primaryColor",value:l.primaryColor,onChange:h,description:"Used for headings, buttons, and highlights"}),(0,k.jsx)(OC,{label:"Secondary Brand Color",name:"secondaryColor",value:l.secondaryColor,onChange:h,description:"Used for accents and secondary elements"})]})]}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ".concat(i?"opacity-70 cursor-not-allowed":""),children:i?"Saving...":"Save Branding"})})]}),(0,k.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"mr-3 text-amber-500",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsx)("div",{children:(0,k.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,k.jsx)("strong",{children:"Note:"})," The About section in the preview uses your business description from the Business Profile tab."]})})]})})]})},UC=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(!0),[s,o]=(0,e.useState)(!1),[i,a]=(0,e.useState)({email:{newOrders:!0,orderUpdates:!0,marketing:!1,systemUpdates:!0},push:{newOrders:!0,orderUpdates:!0,marketing:!1,systemUpdates:!1},sms:{newOrders:!1,orderUpdates:!1,marketing:!1}});(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId)try{r(!0);const e=await(async e=>{try{const t=(0,sl.H9)(rl.db,"businesses",e,"settings","notifications"),n=await(0,sl.x7)(t);return n.exists()?n.data():{email:{newOrders:!0,orderUpdates:!0,marketing:!1,systemUpdates:!0},push:{newOrders:!0,orderUpdates:!0,marketing:!1,systemUpdates:!1},sms:{newOrders:!1,orderUpdates:!1,marketing:!1}}}catch(t){throw console.error("Error getting notification preferences:",t),t}})(t.businessId);a(e)}catch(e){console.error("Error fetching notification preferences:",e)}finally{r(!1)}})()}),[t]);const l=(e,t)=>{a((n=>(0,S.A)((0,S.A)({},n),{},{[e]:(0,S.A)((0,S.A)({},n[e]),{},{[t]:!n[e][t]})})))};return n?(0,k.jsx)("div",{className:"p-4 text-center",children:"Loading notification preferences..."}):(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==t&&void 0!==t&&t.businessId)try{o(!0),await(async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"businesses",e,"settings","notifications"),r=(0,S.A)((0,S.A)({},t),{},{updatedAt:(0,sl.O5)()});await(0,sl.BN)(n,r,{merge:!0})}catch(n){throw console.error("Error updating notification preferences:",n),n}})(t.businessId,i),alert("Notification preferences updated successfully!")}catch(n){console.error("Error saving notification preferences:",n),alert("Failed to update notification preferences. Please try again.")}finally{o(!1)}else console.error("No business ID available")},children:[(0,k.jsx)("div",{className:"mb-6",children:(0,k.jsxs)("table",{className:"w-full border-collapse",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"bg-gray-50",children:[(0,k.jsx)("th",{className:"text-left p-3 border-b",children:"Notification Type"}),(0,k.jsx)("th",{className:"text-center p-3 border-b",children:"Email"}),(0,k.jsx)("th",{className:"text-center p-3 border-b",children:"Push"}),(0,k.jsx)("th",{className:"text-center p-3 border-b",children:"SMS"})]})}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"p-3 border-b",children:[(0,k.jsx)("div",{className:"font-medium",children:"New Orders"}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Receive alerts for new orders"})]}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.email.newOrders,onChange:()=>l("email","newOrders"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.push.newOrders,onChange:()=>l("push","newOrders"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.sms.newOrders,onChange:()=>l("sms","newOrders"),className:"h-4 w-4 text-blue-600"})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"p-3 border-b",children:[(0,k.jsx)("div",{className:"font-medium",children:"Order Updates"}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Status changes and fulfillment updates"})]}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.email.orderUpdates,onChange:()=>l("email","orderUpdates"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.push.orderUpdates,onChange:()=>l("push","orderUpdates"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.sms.orderUpdates,onChange:()=>l("sms","orderUpdates"),className:"h-4 w-4 text-blue-600"})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"p-3 border-b",children:[(0,k.jsx)("div",{className:"font-medium",children:"Marketing"}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Promotions, news, and special offers"})]}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.email.marketing,onChange:()=>l("email","marketing"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.push.marketing,onChange:()=>l("push","marketing"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.sms.marketing,onChange:()=>l("sms","marketing"),className:"h-4 w-4 text-blue-600"})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"p-3 border-b",children:[(0,k.jsx)("div",{className:"font-medium",children:"System Updates"}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Platform updates and maintenance notices"})]}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.email.systemUpdates,onChange:()=>l("email","systemUpdates"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("input",{type:"checkbox",checked:i.push.systemUpdates,onChange:()=>l("push","systemUpdates"),className:"h-4 w-4 text-blue-600"})}),(0,k.jsx)("td",{className:"text-center p-3 border-b",children:(0,k.jsx)("span",{className:"text-gray-400",children:"N/A"})})]})]})]})}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsx)("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ".concat(s?"opacity-70 cursor-not-allowed":""),children:s?"Saving...":"Save Preferences"})})]})},zC=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(!0),[s,o]=(0,e.useState)(!1),[i,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)({twoFactorEnabled:!1,sessionTimeout:30}),[u,d]=(0,e.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[h,m]=(0,e.useState)("");(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId)try{r(!0);const e=await(async e=>{try{const t=(0,sl.H9)(rl.db,"businesses",e,"settings","security"),n=await(0,sl.x7)(t);return n.exists()?n.data():{twoFactorEnabled:!1,sessionTimeout:30}}catch(t){throw console.error("Error getting security settings:",t),t}})(t.businessId);c(e)}catch(e){console.error("Error fetching security settings:",e)}finally{r(!1)}})()}),[t]);const p=e=>{const{name:t,value:n,type:r}=e.target;c("checkbox"===r?n=>(0,S.A)((0,S.A)({},n),{},{[t]:e.target.checked}):e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))},f=e=>{const{name:t,value:n}=e.target;d((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))),h&&m("")};return n?(0,k.jsx)("div",{className:"p-4 text-center",children:"Loading security settings..."}):(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null===t||void 0===t||!t.businessId)return void console.error("No business ID available");const n=rl.j2.currentUser;if(n)try{if(o(!0),u.newPassword){if(u.newPassword!==u.confirmPassword)return m("New passwords do not match"),void o(!1);if(u.newPassword.length<8)return m("Password must be at least 8 characters long"),void o(!1);try{const e=zg.IX.credential(n.email||"",u.currentPassword);await(0,zg.kZ)(n,e),await(0,zg.f3)(n,u.newPassword),d({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){return"auth/wrong-password"===r.code?m("Current password is incorrect"):m("Error updating password: "+r.message),void o(!1)}}await(async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"businesses",e,"settings","security"),r=(0,S.A)((0,S.A)({},t),{},{updatedAt:(0,sl.O5)()});await(0,sl.BN)(n,r,{merge:!0})}catch(r){throw console.error("Error updating security settings:",r),r}})(t.businessId,l),alert("Security settings updated successfully!")}catch(r){console.error("Error saving security settings:",r),alert("Failed to update security settings. Please try again.")}finally{o(!1)}else console.error("No Firebase user available")},children:[(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Change Password"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{type:i?"text":"password",name:"currentPassword",value:u.currentPassword,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,k.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500",onClick:()=>a(!i),children:i?"Hide":"Show"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,k.jsx)("input",{type:i?"text":"password",name:"newPassword",value:u.newPassword,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 8 characters with a mix of letters, numbers, and symbols"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,k.jsx)("input",{type:i?"text":"password",name:"confirmPassword",value:u.confirmPassword,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),h&&(0,k.jsx)("div",{className:"text-red-500 text-sm",children:h})]})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Two-Factor Authentication"}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"twoFactorEnabled",name:"twoFactorEnabled",checked:l.twoFactorEnabled,onChange:p,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"twoFactorEnabled",className:"text-sm text-gray-700",children:"Enable two-factor authentication (Recommended)"})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Adds an extra layer of security to your account by requiring a verification code"})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-3",children:"Session Settings"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Timeout"}),(0,k.jsxs)("select",{name:"sessionTimeout",value:l.sessionTimeout,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,k.jsx)("option",{value:"15",children:"15 minutes"}),(0,k.jsx)("option",{value:"30",children:"30 minutes"}),(0,k.jsx)("option",{value:"60",children:"1 hour"}),(0,k.jsx)("option",{value:"120",children:"2 hours"}),(0,k.jsx)("option",{value:"240",children:"4 hours"}),(0,k.jsx)("option",{value:"480",children:"8 hours"})]}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically log out after period of inactivity"})]})]}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsx)("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ".concat(s?"opacity-70 cursor-not-allowed":""),children:s?"Saving...":"Save Security Settings"})})]})},VC=["id"],qC=async(e,t,n)=>{try{const r=(0,sl.H9)(rl.db,"businesses",e,"users",t),{id:s}=n,o=E(n,VC);await(0,sl.mZ)(r,(0,S.A)((0,S.A)({},o),{},{updatedAt:(0,sl.O5)()}))}catch(r){throw console.error("Error updating business user:",r),r}},WC=t=>{const[n,r]=(0,e.useState)([]),[s,o]=(0,e.useState)(!0),i=(0,e.useCallback)((async()=>{if(t)try{o(!0);const e=await(async e=>{try{const t=(0,sl.rJ)(rl.db,"businesses",e,"users");return(await(0,sl.GG)(t)).docs.map((e=>(0,S.A)({id:e.id},e.data())))}catch(t){throw console.error("Error getting business users:",t),t}})(t);r(e)}catch(e){console.error("Error fetching business users:",e)}finally{o(!1)}}),[t]),a=(0,e.useCallback)((async(e,s,o)=>{if(t)try{const i=n.find((t=>t.id===e));if(!i)return;const a=(0,S.A)((0,S.A)({},i.permissions),{},{[s]:o});await qC(t,e,{permissions:a}),r((t=>t.map((t=>t.id===e?(0,S.A)((0,S.A)({},t),{},{permissions:a}):t))))}catch(i){console.error("Error updating user permission:",i)}}),[t,n]),l=(0,e.useCallback)((async(e,n)=>{if(t)try{await qC(t,e,{role:n}),r((t=>t.map((t=>t.id===e?(0,S.A)((0,S.A)({},t),{},{role:n}):t))))}catch(s){console.error("Error updating user role:",s)}}),[t]),c=(0,e.useCallback)((async e=>{if(t&&window.confirm("Are you sure you want to remove this user?"))try{await(async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"businesses",e,"users",t);await(0,sl.kd)(n)}catch(n){throw console.error("Error removing business user:",n),n}})(t,e),r((t=>t.filter((t=>t.id!==e))))}catch(n){console.error("Error removing user:",n)}}),[t]);return{users:n,loading:s,fetchUsers:i,updateUserPermission:a,updateUserRole:l,removeUser:c}},HC=t=>{let{businessId:n,userId:r,onSuccess:s,onCancel:o}=t;const[i,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)({email:"",name:"",role:"staff",permissions:{manageUsers:!1,manageSettings:!1,manageCoupons:!0,manageCustomers:!0,viewAnalytics:!0}}),h=e=>{const{name:t,value:n}=e.target;"email"!==t&&"name"!==t&&"role"!==t||d((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))},m=e=>{const{name:t,checked:n}=e.target;d((e=>(0,S.A)((0,S.A)({},e),{},{permissions:(0,S.A)((0,S.A)({},e.permissions),{},{[t]:n})})))};return(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md mb-6 border border-gray-200",children:[(0,k.jsx)("h4",{className:"font-medium mb-3",children:"Invite New Team Member"}),(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n)if(u.email&&u.name)try{a(!0),c(""),await(async(e,t,n)=>{try{const r=(0,sl.rJ)(rl.db,"businesses",e,"users"),s=(0,sl.P)(r,(0,sl._M)("email","==",n.email));if(!(await(0,sl.GG)(s)).empty)throw new Error("A user with this email already exists in this business");const o=(0,S.A)((0,S.A)({},n),{},{status:"invited",invitedBy:t,invitedAt:(0,sl.O5)()}),i=await(0,sl.gS)((0,sl.rJ)(rl.db,"businesses",e,"users"),o);return await(0,sl.gS)((0,sl.rJ)(rl.db,"invitations"),{businessId:e,userId:i.id,email:n.email,name:n.name,role:n.role,status:"pending",createdAt:(0,sl.O5)()}),i.id}catch(r){throw console.error("Error inviting business user:",r),r}})(n,r,u),s()}catch(t){c(t.message||"Failed to invite user")}finally{a(!1)}else c("Please fill in all required fields");else c("Business ID not found")},children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,k.jsx)("input",{type:"text",name:"name",value:u.name,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,k.jsx)("input",{type:"email",name:"email",value:u.email,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,k.jsxs)("select",{name:"role",value:u.role,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,k.jsx)("option",{value:"staff",children:"Staff"}),(0,k.jsx)("option",{value:"admin",children:"Admin"}),(0,k.jsx)("option",{value:"owner",children:"Owner"})]})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h5",{className:"font-medium mb-2 text-sm text-gray-700",children:"Permissions"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"manageUsers",name:"manageUsers",checked:u.permissions.manageUsers,onChange:m,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"manageUsers",className:"text-sm text-gray-700",children:"Manage Users"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"manageSettings",name:"manageSettings",checked:u.permissions.manageSettings,onChange:m,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"manageSettings",className:"text-sm text-gray-700",children:"Manage Settings"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"manageCoupons",name:"manageCoupons",checked:u.permissions.manageCoupons,onChange:m,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"manageCoupons",className:"text-sm text-gray-700",children:"Manage Coupons"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"manageCustomers",name:"manageCustomers",checked:u.permissions.manageCustomers,onChange:m,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"manageCustomers",className:"text-sm text-gray-700",children:"Manage Customers"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"viewAnalytics",name:"viewAnalytics",checked:u.permissions.viewAnalytics,onChange:m,className:"h-4 w-4 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"viewAnalytics",className:"text-sm text-gray-700",children:"View Analytics"})]})]})]}),l&&(0,k.jsx)("div",{className:"text-red-500 text-sm mb-4",children:l}),(0,k.jsxs)("div",{className:"flex justify-end",children:[(0,k.jsx)("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md mr-2 hover:bg-gray-50",disabled:i,children:"Cancel"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ".concat(i?"opacity-70 cursor-not-allowed":""),disabled:i,children:i?"Sending Invitation...":"Send Invitation"})]})]})]})},GC=e=>{let{user:t,onUpdatePermission:n,onUpdateRole:r,onRemove:s}=e;return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-gray-500 font-medium",children:t.name.charAt(0).toUpperCase()})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("select",{value:t.role,onChange:e=>r(t.id,e.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1",children:[(0,k.jsx)("option",{value:"owner",children:"Owner"}),(0,k.jsx)("option",{value:"admin",children:"Admin"}),(0,k.jsx)("option",{value:"staff",children:"Staff"})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===t.status?"bg-green-100 text-green-800":"invited"===t.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.status})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,k.jsx)("div",{className:"space-y-1",children:Object.entries(t.permissions).map((e=>{let[r,s]=e;return(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",id:"".concat(t.id,"-").concat(r),checked:s,onChange:e=>n(t.id,r,e.target.checked),className:"h-3 w-3 text-blue-600 mr-2"}),(0,k.jsx)("label",{htmlFor:"".concat(t.id,"-").concat(r),className:"text-xs capitalize",children:r.replace(/([A-Z])/g," $1").trim()})]},r)}))})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,k.jsx)("button",{onClick:()=>s(t.id),className:"text-red-600 hover:text-red-900",children:"Remove"})})]})},KC=e=>{let{users:t,onUpdatePermission:n,onUpdateRole:r,onRemoveUser:s,onInviteClick:o}=e;return 0===t.length?(0,k.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:[(0,k.jsx)("p",{className:"text-gray-500",children:"No team members yet"}),(0,k.jsx)("button",{onClick:o,className:"mt-2 text-blue-600 hover:text-blue-800",children:"Invite your first team member"})]}):(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,k.jsx)(GC,{user:e,onUpdatePermission:n,onUpdateRole:r,onRemove:s},e.id)))})]})})},YC=()=>{const{user:t}=(0,N.A)(),{users:n,loading:r,fetchUsers:s,updateUserPermission:o,updateUserRole:i,removeUser:a}=WC(null===t||void 0===t?void 0:t.businessId),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)([]);return(0,e.useEffect)((()=>{s()}),[s]),(0,e.useEffect)((()=>{if(t&&n){if(n.some((e=>e.email===t.email)))d(n);else{const e={id:t.uid||"current-user",email:t.email||"",name:t.displayName||"Business Owner",role:"owner",status:"active",permissions:{manageUsers:!0,manageSettings:!0,manageCoupons:!0,manageCustomers:!0,viewAnalytics:!0},joinedAt:new Date};d([e,...n])}}else d(n)}),[n,t]),r?(0,k.jsx)("div",{className:"p-4 text-center",children:"Loading business users..."}):(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium",children:"Team Members"}),(0,k.jsx)("button",{onClick:()=>c(!l),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:l?"Cancel":"Invite User"})]}),l&&(0,k.jsx)(HC,{businessId:(null===t||void 0===t?void 0:t.businessId)||"",userId:(null===t||void 0===t?void 0:t.uid)||"",onSuccess:()=>{s(),c(!1)},onCancel:()=>c(!1)}),(0,k.jsx)(KC,{users:u,onUpdatePermission:o,onUpdateRole:i,onRemoveUser:a,onInviteClick:()=>c(!0)})]})},QC=t=>{let{onUpdate:n}=t;const{user:r,businessProfile:s}=(0,N.A)(),[o,i]=(0,e.useState)({currency:"ZAR",timezone:"Africa/Johannesburg",dateFormat:"DD/MM/YYYY",numberFormat:"en-ZA",language:"en"}),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1);(0,e.useEffect)((()=>{null!==s&&void 0!==s&&s.regionalSettings&&i({currency:s.regionalSettings.currency||"USD",timezone:s.regionalSettings.timezone||"UTC",dateFormat:s.regionalSettings.dateFormat||"MM/DD/YYYY",numberFormat:s.regionalSettings.numberFormat||"en-US",language:s.regionalSettings.language||"en"})}),[s]);const d=(e,t)=>{i((n=>(0,S.A)((0,S.A)({},n),{},{[e]:t})))};return(0,k.jsx)("div",{className:_C.form,children:(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==r&&void 0!==r&&r.businessId){l(!0),u(!1);try{const e={regionalSettings:o};await RC(r.businessId,e),u(!0),null===n||void 0===n||n(),setTimeout((()=>u(!1)),3e3)}catch(t){console.error("Error updating regional settings:",t)}finally{l(!1)}}},children:[(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Currency & Formatting"}),(0,k.jsxs)("div",{className:_C.formGrid,children:[(0,k.jsx)(IC,{label:"Currency",type:"select",value:o.currency,onChange:e=>d("currency",e),options:[{value:"USD",label:"US Dollar ($)",icon:"\ud83d\udcb5"},{value:"EUR",label:"Euro (\u20ac)",icon:"\ud83d\udcb6"},{value:"GBP",label:"British Pound (\xa3)",icon:"\ud83d\udcb7"},{value:"JPY",label:"Japanese Yen (\xa5)",icon:"\ud83d\udcb4"},{value:"CAD",label:"Canadian Dollar (C$)",icon:"\ud83c\udf41"},{value:"AUD",label:"Australian Dollar (A$)",icon:"\ud83c\udde6\ud83c\uddfa"},{value:"ZAR",label:"South African Rand (R)",icon:"\ud83c\uddff\ud83c\udde6"},{value:"INR",label:"Indian Rupee (\u20b9)",icon:"\ud83c\uddee\ud83c\uddf3"},{value:"CNY",label:"Chinese Yuan (\xa5)",icon:"\ud83c\udde8\ud83c\uddf3"},{value:"BRL",label:"Brazilian Real (R$)",icon:"\ud83c\udde7\ud83c\uddf7"}],helperText:"Choose your primary business currency for pricing and transactions",customerImpact:"Customers will see prices in this currency"}),(0,k.jsx)(IC,{label:"Number Format",type:"select",value:o.numberFormat,onChange:e=>d("numberFormat",e),options:[{value:"en-US",label:"US Format (1,234.56)",icon:"\ud83d\udd22"},{value:"en-GB",label:"UK Format (1,234.56)",icon:"\ud83d\udd22"},{value:"de-DE",label:"German Format (1.234,56)",icon:"\ud83d\udd22"},{value:"fr-FR",label:"French Format (1 234,56)",icon:"\ud83d\udd22"},{value:"es-ES",label:"Spanish Format (1.234,56)",icon:"\ud83d\udd22"}],helperText:"How numbers and prices are displayed",customerImpact:"Affects how prices and quantities appear to customers"})]})]}),(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Date & Time"}),(0,k.jsxs)("div",{className:_C.formGrid,children:[(0,k.jsx)(IC,{label:"Timezone",type:"select",value:o.timezone,onChange:e=>d("timezone",e),options:[{value:"UTC",label:"UTC (Coordinated Universal Time)",icon:"\ud83c\udf0d"},{value:"America/New_York",label:"Eastern Time (ET)",icon:"\ud83c\uddfa\ud83c\uddf8"},{value:"America/Chicago",label:"Central Time (CT)",icon:"\ud83c\uddfa\ud83c\uddf8"},{value:"America/Denver",label:"Mountain Time (MT)",icon:"\ud83c\uddfa\ud83c\uddf8"},{value:"America/Los_Angeles",label:"Pacific Time (PT)",icon:"\ud83c\uddfa\ud83c\uddf8"},{value:"Europe/London",label:"Greenwich Mean Time (GMT)",icon:"\ud83c\uddec\ud83c\udde7"},{value:"Europe/Paris",label:"Central European Time (CET)",icon:"\ud83c\uddea\ud83c\uddfa"},{value:"Asia/Tokyo",label:"Japan Standard Time (JST)",icon:"\ud83c\uddef\ud83c\uddf5"},{value:"Asia/Shanghai",label:"China Standard Time (CST)",icon:"\ud83c\udde8\ud83c\uddf3"},{value:"Australia/Sydney",label:"Australian Eastern Time (AET)",icon:"\ud83c\udde6\ud83c\uddfa"},{value:"Africa/Johannesburg",label:"South Africa Standard Time (SAST)",icon:"\ud83c\uddff\ud83c\udde6"}],helperText:"Your business timezone for scheduling and timestamps",customerImpact:"Affects coupon validity times and business hours display"}),(0,k.jsx)(IC,{label:"Date Format",type:"select",value:o.dateFormat,onChange:e=>d("dateFormat",e),options:[{value:"MM/DD/YYYY",label:"MM/DD/YYYY (US Format)",icon:"\ud83d\udcc5"},{value:"DD/MM/YYYY",label:"DD/MM/YYYY (European Format)",icon:"\ud83d\udcc5"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (ISO Format)",icon:"\ud83d\udcc5"},{value:"DD MMM YYYY",label:"DD MMM YYYY (e.g., 15 Jan 2024)",icon:"\ud83d\udcc5"}],helperText:"How dates are displayed throughout the system",customerImpact:"Customers will see dates in this format"})]})]}),(0,k.jsxs)("div",{className:_C.formSection,children:[(0,k.jsx)("h3",{className:_C.sectionTitle,children:"Language & Localization"}),(0,k.jsx)("div",{className:_C.formGrid,children:(0,k.jsx)(IC,{label:"Primary Language",type:"select",value:o.language,onChange:e=>d("language",e),options:[{value:"en",label:"English",icon:"\ud83c\uddfa\ud83c\uddf8"},{value:"es",label:"Espa\xf1ol",icon:"\ud83c\uddea\ud83c\uddf8"},{value:"fr",label:"Fran\xe7ais",icon:"\ud83c\uddeb\ud83c\uddf7"},{value:"de",label:"Deutsch",icon:"\ud83c\udde9\ud83c\uddea"},{value:"it",label:"Italiano",icon:"\ud83c\uddee\ud83c\uddf9"},{value:"pt",label:"Portugu\xeas",icon:"\ud83c\uddf5\ud83c\uddf9"},{value:"zh",label:"\u4e2d\u6587",icon:"\ud83c\udde8\ud83c\uddf3"},{value:"ja",label:"\u65e5\u672c\u8a9e",icon:"\ud83c\uddef\ud83c\uddf5"},{value:"ko",label:"\ud55c\uad6d\uc5b4",icon:"\ud83c\uddf0\ud83c\uddf7"},{value:"ar",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",icon:"\ud83c\uddf8\ud83c\udde6"}],helperText:"Default language for your business communications",customerImpact:"Affects system messages and default text language"})})]}),(0,k.jsx)("div",{className:_C.formActions,children:(0,k.jsx)(TC,{isLoading:a,isSuccess:c,completionPercentage:100})})]})})},$C={previewPanel:"preview_previewPanel__7CmU7",previewHeader:"preview_previewHeader__UrfwE",previewTitle:"preview_previewTitle__1y+Zf",previewIcon:"preview_previewIcon__4lMot",previewControls:"preview_previewControls__b8IAv",previewTypeButton:"preview_previewTypeButton__KzoEY",active:"preview_active__8Gsf2",previewContent:"preview_previewContent__qS2CI",previewLoading:"preview_previewLoading__lbr0K",fadeIn:"preview_fadeIn__TIrfL",previewSpinner:"preview_previewSpinner__9p8KN",spin:"preview_spin__8cnVK",previewFooter:"preview_previewFooter__9VvXY",updateIndicator:"preview_updateIndicator__oqi5n",updateIcon:"preview_updateIcon__AeP7T",rotate:"preview_rotate__Ev6dV",mobilePreview:"preview_mobilePreview__dm51H",mobileHeader:"preview_mobileHeader__MCLIh",statusBar:"preview_statusBar__0Qv++",time:"preview_time__hORsz",icons:"preview_icons__i4FeS",appHeader:"preview_appHeader__D-EV7",backButton:"preview_backButton__aQKdX",menuButton:"preview_menuButton__4IFHI",headerTitle:"preview_headerTitle__aAur2",mobileContent:"preview_mobileContent__zR++k",businessCard:"preview_businessCard__o2Ogd",businessLogo:"preview_businessLogo__4U8wV",logoPlaceholder:"preview_logoPlaceholder__19RuL",businessInfo:"preview_businessInfo__pVGzq",businessName:"preview_businessName__mMCQF",businessCategory:"preview_businessCategory__B++YF",businessDescription:"preview_businessDescription__J9nWP",contactInfo:"preview_contactInfo__pv4Lj",contactItem:"preview_contactItem__DdHG2",contactIcon:"preview_contactIcon__qX8Ze",previewCoupons:"preview_previewCoupons__fK5-Z",sectionTitle:"preview_sectionTitle__qQM8x",couponCard:"preview_couponCard__yoFFX",couponHeader:"preview_couponHeader__8GYFF",couponTitle:"preview_couponTitle__PfEJX",couponValue:"preview_couponValue__8SnkB",couponBody:"preview_couponBody__1zBmL",couponCode:"preview_couponCode__cxaRL",couponExpiry:"preview_couponExpiry__Glb+Z",mobileFooter:"preview_mobileFooter__krt5g",navItem:"preview_navItem__CNmtv",receiptPreview:"preview_receiptPreview__fj+CT",receiptHeader:"preview_receiptHeader__0IvsS",receiptLogo:"preview_receiptLogo__tGp2R",receiptBusinessName:"preview_receiptBusinessName__lTdo9",receiptAddress:"preview_receiptAddress__9f0zP",receiptPhone:"preview_receiptPhone__oDdNJ",receiptDate:"preview_receiptDate__oSmss",receiptNumber:"preview_receiptNumber__xAxzR",receiptItems:"preview_receiptItems__Ff513",receiptItem:"preview_receiptItem__mBGXG",itemName:"preview_itemName__ao3I+",itemPrice:"preview_itemPrice__C10fn",receiptSummary:"preview_receiptSummary__R0Xzj",summaryItem:"preview_summaryItem__XHKjK",summaryTotal:"preview_summaryTotal__P57Nh",receiptFooter:"preview_receiptFooter__9TMuw",receiptWebsite:"preview_receiptWebsite__wI9N+",couponPreview:"preview_couponPreview__YTW-I",couponPreviewHeader:"preview_couponPreviewHeader__KhNLm",couponPreviewLogo:"preview_couponPreviewLogo__OEKu2",couponPreviewTitle:"preview_couponPreviewTitle__xlIZx",couponPreviewOffer:"preview_couponPreviewOffer__RJlKE",couponPreviewContent:"preview_couponPreviewContent__-UspK",couponPreviewDescription:"preview_couponPreviewDescription__-oLsA",couponPreviewCode:"preview_couponPreviewCode__ko337",codeLabel:"preview_codeLabel__KAN4E",codeValue:"preview_codeValue__Xnx+S",couponPreviewValidity:"preview_couponPreviewValidity__EQfqi",validityLabel:"preview_validityLabel__J2CgP",validityValue:"preview_validityValue__E0UdD",couponPreviewTerms:"preview_couponPreviewTerms__1FRu0"},JC=t=>{let{refreshTrigger:n,previewType:r="mobile"}=t;const{businessProfile:s}=(0,N.A)(),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)(0);(0,e.useEffect)((()=>{if(n>0){i(!0);const e=setTimeout((()=>{i(!1),l((e=>e+1))}),800);return()=>clearTimeout(e)}}),[n]),(0,e.useEffect)((()=>{const e=setTimeout((()=>{i(!1)}),1e3);return()=>clearTimeout(e)}),[]);const c=e=>({retail:"\ud83d\udecd\ufe0f",restaurant:"\ud83c\udf7d\ufe0f",beauty:"\ud83d\udc86",health:"\ud83c\udfcb\ufe0f",education:"\ud83c\udf93",technology:"\ud83d\udcbb",professional:"\ud83d\udc54",entertainment:"\ud83c\udfad",travel:"\u2708\ufe0f",other:"\ud83d\udce6"}[e]||"\ud83c\udfe2"),u=e=>({retail:"Retail",restaurant:"Restaurant",beauty:"Beauty & Wellness",health:"Health & Fitness",education:"Education",technology:"Technology",professional:"Professional Services",entertainment:"Entertainment",travel:"Travel & Hospitality",other:"Business"}[e]||"Business");return(0,k.jsxs)("div",{className:$C.previewPanel,children:[(0,k.jsxs)("div",{className:$C.previewHeader,children:[(0,k.jsxs)("h3",{className:$C.previewTitle,children:[(0,k.jsx)("span",{className:$C.previewIcon,children:"\ud83d\udc41\ufe0f"})," Customer View"]}),(0,k.jsxs)("div",{className:$C.previewControls,children:[(0,k.jsx)("button",{className:"".concat($C.previewTypeButton," ").concat("mobile"===r?$C.active:""),onClick:()=>l((e=>e+1)),children:"\ud83d\udcf1 Mobile"}),(0,k.jsx)("button",{className:"".concat($C.previewTypeButton," ").concat("receipt"===r?$C.active:""),onClick:()=>l((e=>e+1)),children:"\ud83e\uddfe Receipt"}),(0,k.jsx)("button",{className:"".concat($C.previewTypeButton," ").concat("coupon"===r?$C.active:""),onClick:()=>l((e=>e+1)),children:"\ud83c\udfab Coupon"})]})]}),(0,k.jsx)("div",{className:$C.previewContent,children:o?(0,k.jsxs)("div",{className:$C.previewLoading,children:[(0,k.jsx)("div",{className:$C.previewSpinner}),(0,k.jsx)("p",{children:"Updating preview..."})]}):(0,k.jsxs)(k.Fragment,{children:["mobile"===r&&(()=>{var e;const t=(null===s||void 0===s?void 0:s.businessName)||"Your Business",n=(null===s||void 0===s?void 0:s.description)||"Your business description will appear here. Tell customers what makes your business special.",r=(null===s||void 0===s?void 0:s.logo)||"\ud83c\udfea",o=(null===s||void 0===s||null===(e=s.colors)||void 0===e?void 0:e.primary)||"#2563EB";return(0,k.jsxs)("div",{className:$C.mobilePreview,children:[(0,k.jsxs)("div",{className:$C.mobileHeader,style:{backgroundColor:o},children:[(0,k.jsxs)("div",{className:$C.statusBar,children:[(0,k.jsx)("div",{className:$C.time,children:"9:41"}),(0,k.jsxs)("div",{className:$C.icons,children:[(0,k.jsx)("span",{children:"\ud83d\udcf6"}),(0,k.jsx)("span",{children:"\ud83d\udce1"}),(0,k.jsx)("span",{children:"\ud83d\udd0b"})]})]}),(0,k.jsxs)("div",{className:$C.appHeader,children:[(0,k.jsx)("div",{className:$C.backButton,children:"\u2190"}),(0,k.jsx)("div",{className:$C.headerTitle,children:"Business Details"}),(0,k.jsx)("div",{className:$C.menuButton,children:"\u22ef"})]})]}),(0,k.jsxs)("div",{className:$C.mobileContent,children:[(0,k.jsxs)("div",{className:$C.businessCard,children:[(0,k.jsx)("div",{className:$C.businessLogo,children:"string"===typeof r&&r.startsWith("http")?(0,k.jsx)("img",{src:r,alt:t}):(0,k.jsx)("span",{className:$C.logoPlaceholder,children:r})}),(0,k.jsxs)("div",{className:$C.businessInfo,children:[(0,k.jsx)("h3",{className:$C.businessName,children:t}),(null===s||void 0===s?void 0:s.industry)&&(0,k.jsxs)("div",{className:$C.businessCategory,children:[c(s.industry)," ",u(s.industry)]}),(0,k.jsx)("p",{className:$C.businessDescription,children:n}),(0,k.jsxs)("div",{className:$C.contactInfo,children:[(null===s||void 0===s?void 0:s.phone)&&(0,k.jsxs)("div",{className:$C.contactItem,children:[(0,k.jsx)("span",{className:$C.contactIcon,children:"\ud83d\udcde"}),(0,k.jsx)("span",{children:s.phone})]}),(null===s||void 0===s?void 0:s.email)&&(0,k.jsxs)("div",{className:$C.contactItem,children:[(0,k.jsx)("span",{className:$C.contactIcon,children:"\u2709\ufe0f"}),(0,k.jsx)("span",{children:s.email})]}),(null===s||void 0===s?void 0:s.website)&&(0,k.jsxs)("div",{className:$C.contactItem,children:[(0,k.jsx)("span",{className:$C.contactIcon,children:"\ud83c\udf10"}),(0,k.jsx)("span",{children:s.website})]}),(null===s||void 0===s?void 0:s.address)&&(0,k.jsxs)("div",{className:$C.contactItem,children:[(0,k.jsx)("span",{className:$C.contactIcon,children:"\ud83d\udccd"}),(0,k.jsx)("span",{children:s.address})]})]})]})]}),(0,k.jsxs)("div",{className:$C.previewCoupons,children:[(0,k.jsx)("h4",{className:$C.sectionTitle,children:"Available Coupons"}),(0,k.jsxs)("div",{className:$C.couponCard,style:{borderColor:o},children:[(0,k.jsxs)("div",{className:$C.couponHeader,style:{backgroundColor:o},children:[(0,k.jsx)("div",{className:$C.couponTitle,children:"Welcome Offer"}),(0,k.jsx)("div",{className:$C.couponValue,children:"20% OFF"})]}),(0,k.jsxs)("div",{className:$C.couponBody,children:[(0,k.jsxs)("p",{children:["Welcome to ",t,"! Use this coupon for 20% off your first purchase."]}),(0,k.jsx)("div",{className:$C.couponCode,children:"CODE: WELCOME20"}),(0,k.jsx)("div",{className:$C.couponExpiry,children:"Valid until Dec 31, 2025"})]})]})]})]}),(0,k.jsxs)("div",{className:$C.mobileFooter,children:[(0,k.jsx)("div",{className:$C.navItem,children:"\ud83c\udfe0"}),(0,k.jsx)("div",{className:$C.navItem,children:"\ud83c\udf9f\ufe0f"}),(0,k.jsx)("div",{className:$C.navItem,children:"\ud83d\udc64"})]})]},a)})(),"receipt"===r&&(()=>{const e=(null===s||void 0===s?void 0:s.businessName)||"Your Business",t=(null===s||void 0===s?void 0:s.address)||"123 Main Street, City",n=(null===s||void 0===s?void 0:s.phone)||"(123) 456-7890";return(0,k.jsxs)("div",{className:$C.receiptPreview,children:[(0,k.jsxs)("div",{className:$C.receiptHeader,children:[(0,k.jsx)("div",{className:$C.receiptLogo,children:null!==s&&void 0!==s&&s.logo?(0,k.jsx)("img",{src:s.logo,alt:e}):(0,k.jsx)("span",{className:$C.logoPlaceholder,children:"\ud83c\udfea"})}),(0,k.jsx)("h3",{className:$C.receiptBusinessName,children:e}),(0,k.jsx)("p",{className:$C.receiptAddress,children:t}),(0,k.jsx)("p",{className:$C.receiptPhone,children:n}),(0,k.jsxs)("p",{className:$C.receiptDate,children:["Date: ",(new Date).toLocaleDateString()]}),(0,k.jsx)("p",{className:$C.receiptNumber,children:"Receipt #: R-12345"})]}),(0,k.jsxs)("div",{className:$C.receiptItems,children:[(0,k.jsxs)("div",{className:$C.receiptItem,children:[(0,k.jsx)("span",{className:$C.itemName,children:"Product 1"}),(0,k.jsx)("span",{className:$C.itemPrice,children:"$19.99"})]}),(0,k.jsxs)("div",{className:$C.receiptItem,children:[(0,k.jsx)("span",{className:$C.itemName,children:"Product 2"}),(0,k.jsx)("span",{className:$C.itemPrice,children:"$24.99"})]}),(0,k.jsxs)("div",{className:$C.receiptItem,children:[(0,k.jsx)("span",{className:$C.itemName,children:"Product 3"}),(0,k.jsx)("span",{className:$C.itemPrice,children:"$9.99"})]})]}),(0,k.jsxs)("div",{className:$C.receiptSummary,children:[(0,k.jsxs)("div",{className:$C.summaryItem,children:[(0,k.jsx)("span",{children:"Subtotal"}),(0,k.jsx)("span",{children:"$54.97"})]}),(0,k.jsxs)("div",{className:$C.summaryItem,children:[(0,k.jsx)("span",{children:"Tax"}),(0,k.jsx)("span",{children:"$5.50"})]}),(0,k.jsxs)("div",{className:$C.summaryTotal,children:[(0,k.jsx)("span",{children:"Total"}),(0,k.jsx)("span",{children:"$60.47"})]})]}),(0,k.jsxs)("div",{className:$C.receiptFooter,children:[(0,k.jsx)("p",{children:"Thank you for your business!"}),(null===s||void 0===s?void 0:s.website)&&(0,k.jsx)("p",{className:$C.receiptWebsite,children:s.website})]})]},a)})(),"coupon"===r&&(()=>{var e,t;const n=(null===s||void 0===s?void 0:s.businessName)||"Your Business",r=(null===s||void 0===s||null===(e=s.colors)||void 0===e?void 0:e.primary)||"#2563EB",o=(null===s||void 0===s||null===(t=s.colors)||void 0===t?void 0:t.secondary)||"#DBEAFE";return(0,k.jsxs)("div",{className:$C.couponPreview,style:{borderColor:r,backgroundColor:o},children:[(0,k.jsxs)("div",{className:$C.couponPreviewHeader,style:{backgroundColor:r},children:[(0,k.jsx)("div",{className:$C.couponPreviewLogo,children:null!==s&&void 0!==s&&s.logo?(0,k.jsx)("img",{src:s.logo,alt:n}):(0,k.jsx)("span",{className:$C.logoPlaceholder,children:"\ud83c\udfea"})}),(0,k.jsx)("h3",{className:$C.couponPreviewTitle,children:n}),(0,k.jsx)("div",{className:$C.couponPreviewOffer,children:"20% OFF"})]}),(0,k.jsxs)("div",{className:$C.couponPreviewContent,children:[(0,k.jsxs)("p",{className:$C.couponPreviewDescription,children:["Welcome to ",n,"! Enjoy 20% off your first purchase."]}),(0,k.jsxs)("div",{className:$C.couponPreviewCode,children:[(0,k.jsx)("span",{className:$C.codeLabel,children:"USE CODE:"}),(0,k.jsx)("span",{className:$C.codeValue,children:"WELCOME20"})]}),(0,k.jsxs)("div",{className:$C.couponPreviewValidity,children:[(0,k.jsx)("span",{className:$C.validityLabel,children:"Valid until:"}),(0,k.jsx)("span",{className:$C.validityValue,children:"December 31, 2025"})]}),(0,k.jsx)("div",{className:$C.couponPreviewTerms,children:(0,k.jsx)("p",{children:"Terms & Conditions apply. Cannot be combined with other offers."})})]})]},a)})()]})}),(0,k.jsx)("div",{className:$C.previewFooter,children:(0,k.jsxs)("div",{className:$C.updateIndicator,children:[(0,k.jsx)("span",{className:$C.updateIcon,children:"\ud83d\udd04"}),(0,k.jsx)("span",{className:$C.updateText,children:"Updates as you type"})]})})]})},XC=()=>{const t=(0,i.Zp)(),n=(0,i.zy)(),[r,s]=(0,e.useState)("profile"),[o,a]=(0,e.useState)(0),[l,c]=(0,e.useState)(20),u=tl(),d="simple"===(null===u||void 0===u?void 0:u.viewMode),h=n.pathname.includes("/simple"),m=()=>{a((e=>e+1))},p=e=>{c((t=>"profile"===r?e:t))};return(0,k.jsxs)("div",{children:[(h||d)&&(0,k.jsx)("div",{className:"mb-6 px-6 pt-6",children:(0,k.jsxs)("button",{onClick:()=>{t(h||d?"/business/dashboard/simple":"/business/dashboard")},className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),(0,k.jsxs)(EC,{isSimpleView:d,activeTab:r,completionPercentage:l,children:[(0,k.jsx)("div",{className:"mb-6 border-b border-gray-200 overflow-x-auto",children:(0,k.jsxs)("nav",{className:"flex -mb-px min-w-max",children:[(0,k.jsx)("button",{onClick:()=>s("profile"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("profile"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udccb Business Profile"}),(0,k.jsx)("button",{onClick:()=>s("branding"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("branding"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83c\udfa8 Branding"}),(0,k.jsx)("button",{onClick:()=>s("team"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("team"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udc65 Team Members"}),(0,k.jsx)("button",{onClick:()=>s("notifications"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("notifications"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udd14 Notifications"}),(0,k.jsx)("button",{onClick:()=>s("security"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("security"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udd12 Account Security"}),(0,k.jsx)("button",{onClick:()=>s("regional"),className:"mr-6 py-4 px-1 border-b-2 font-medium text-sm ".concat("regional"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83c\udf0d Regional Settings"})]})}),(()=>{switch(r){case"profile":return(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,k.jsx)("div",{className:"lg:col-span-2",children:(0,k.jsx)(MC,{onUpdate:m,onProfileCompletion:p})}),!d&&(0,k.jsx)("div",{className:"lg:col-span-1",children:(0,k.jsx)(JC,{refreshTrigger:o,previewType:"mobile"})})]});case"branding":return(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,k.jsx)("div",{className:"lg:col-span-2",children:(0,k.jsx)(BC,{onUpdate:m})}),!d&&(0,k.jsx)("div",{className:"lg:col-span-1",children:(0,k.jsx)(JC,{refreshTrigger:o,previewType:"coupon"})})]});case"team":return(0,k.jsx)("div",{className:"mb-8",children:(0,k.jsx)(YC,{})});case"notifications":return(0,k.jsx)("div",{className:"mb-8",children:(0,k.jsx)(UC,{})});case"security":return(0,k.jsx)("div",{className:"mb-8",children:(0,k.jsx)(zC,{})});case"regional":return(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,k.jsx)("div",{className:"lg:col-span-2",children:(0,k.jsx)(QC,{onUpdate:m})}),!d&&(0,k.jsx)("div",{className:"lg:col-span-1",children:(0,k.jsx)(JC,{refreshTrigger:o,previewType:"mobile"})})]});default:return null}})(),d&&o>0&&(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsx)(JC,{refreshTrigger:o,previewType:"branding"===r?"coupon":"mobile"})})]})]})},ZC="simple-settings_container__tjdjE",eS="simple-settings_header__0kXqw",tS="simple-settings_backButton__m3afl",nS="simple-settings_viewToggle__QM5Ei",rS="simple-settings_detailedButton__dQBGE",sS="simple-settings_simpleButton__cs1lk",oS="simple-settings_active__PDMvw",iS="simple-settings_logoutButton__z1vT4",aS="simple-settings_titleSection__VSvqA",lS="simple-settings_title__R3jdA",cS="simple-settings_subtitle__S7Tsn",uS="simple-settings_cardsContainer__G++1D",dS="simple-settings_placeholderContent__ZzuUj",hS={card:"card_card__8VhFc",active:"card_active__Mrjht",completed:"card_completed__loxag",cardHeader:"card_cardHeader__9kMPe",headerLeft:"card_headerLeft__oZ4dw",icon:"card_icon__sprEU",title:"card_title__MuLOe",headerRight:"card_headerRight__HKaVG",completedBadge:"card_completedBadge__CFf6A",miniProgress:"card_miniProgress__GIYPG",miniProgressFill:"card_miniProgressFill__Stt6D",miniProgressText:"card_miniProgressText__nvzr6",expandButton:"card_expandButton__ezVwT",cardBody:"card_cardBody__XfFlU",slideDown:"card_slideDown__h7wV9",cardContent:"card_cardContent__ikH8p"},mS="forms_formContainer__YT3rv",pS="forms_collapsibleForm__Az03z",fS="forms_collapsibleHeader__aaZkI",gS="forms_formIcon__tjn92",yS="forms_formTitle__LrI6m",vS="forms_expandIcon__OC-Ho",xS="forms_collapsibleContent__+buOv",bS="forms_saveButton__vJ4cs",wS=e=>{let{onClick:t,isLoading:n=!1,isDisabled:r=!1,text:s="Save Changes"}=e;return(0,k.jsx)("button",{className:bS,onClick:t,disabled:r||n,type:"submit",children:n?"Saving...":s})},NS=t=>{let{title:n,description:r,children:s,id:o,icon:i,isActive:a,isCompleted:l,completionPercentage:c,onClick:u}=t;const[d,h]=(0,e.useState)(a),[m,p]=(0,e.useState)(!1);return(0,k.jsxs)("section",{id:o,className:"".concat(hS.sectionCard," ").concat(a?hS.active:""," ").concat(l?hS.completed:""),children:[(0,k.jsxs)("div",{className:hS.cardHeader,onClick:()=>{h(!d),d||u()},children:[(0,k.jsxs)("div",{className:hS.headerLeft,children:[(0,k.jsx)("span",{className:hS.icon,children:i}),(0,k.jsx)("h2",{className:hS.cardTitle,children:n})]}),(0,k.jsxs)("div",{className:hS.headerRight,children:[l?(0,k.jsx)("span",{className:hS.completedBadge,children:"\u2713 Completed"}):(0,k.jsxs)("div",{className:hS.miniProgress,children:[(0,k.jsx)("div",{className:hS.miniProgressFill,style:{width:"".concat(c,"%")}}),(0,k.jsxs)("span",{className:hS.miniProgressText,children:[c,"%"]})]}),(0,k.jsx)("button",{className:hS.expandButton,children:d?"\u25b2":"\u25bc"})]})]}),d&&(0,k.jsxs)("div",{className:hS.cardContent,children:[r&&(0,k.jsx)("p",{className:hS.cardDescription,children:r}),s,(0,k.jsx)("div",{className:hS.cardFooter,children:(0,k.jsx)(wS,{onClick:()=>{p(!0),setTimeout((()=>{p(!1)}),1e3)},isLoading:m})})]})]})},jS={formContainer:"forms_formContainer__UukDz",formSection:"forms_formSection__KLNRT",sectionTitle:"forms_sectionTitle__ISpAh",formField:"forms_formField__R2XUs",label:"forms_label__ij1Qp",required:"forms_required__yW1DU",input:"forms_input__3fq2q",textarea:"forms_textarea__DQ2YS",select:"forms_select__MKs5O",selectWrapper:"forms_selectWrapper__sYS+F",helperText:"forms_helperText__lGyCM",charCounter:"forms_charCounter__o2fU4",collapsibleForm:"forms_collapsibleForm__yNI8b",collapsibleHeader:"forms_collapsibleHeader__m0aa-",formIcon:"forms_formIcon__AYjmE",formTitle:"forms_formTitle__HRiaA",expandIcon:"forms_expandIcon__HIeik",collapsibleContent:"forms_collapsibleContent__FZLS1",slideDown:"forms_slideDown__QkULY",formActions:"forms_formActions__bGZVs",saveButton:"forms_saveButton__NYIBF",saveIcon:"forms_saveIcon__0Qa8T",saveButtonEffect:"forms_saveButtonEffect__QtbzF",shimmer:"forms_shimmer__pumvi",loading:"forms_loading__SdjLR",spinner:"forms_spinner__CVB5z",spin:"forms_spin__mu1pI"},kS=t=>{let{id:n,label:r,type:s="text",value:o,onChange:i,placeholder:a,required:l=!1,options:c=[],helperText:u,maxLength:d,error:h}=t;const[m,p]=(0,e.useState)(!1),f=()=>p(!0),g=()=>p(!1);return(0,k.jsxs)("div",{className:jS.formField,children:[(0,k.jsxs)("label",{htmlFor:n,className:jS.label,children:[r,l&&(0,k.jsx)("span",{className:jS.required,children:"*"})]}),(()=>{switch(s){case"textarea":return(0,k.jsx)("textarea",{id:n,className:"".concat(jS.input," ").concat(jS.textarea," ").concat(m?jS.focused:""),value:o,onChange:e=>i(e.target.value),placeholder:a,required:l,onFocus:f,onBlur:g,maxLength:d});case"select":return(0,k.jsx)("div",{className:"".concat(jS.selectWrapper," ").concat(m?jS.focused:""),children:(0,k.jsxs)("select",{id:n,className:jS.select,value:o,onChange:e=>i(e.target.value),required:l,onFocus:f,onBlur:g,children:[(0,k.jsx)("option",{value:"",disabled:!0,children:a}),c.map((e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value)))]})});default:return(0,k.jsx)("input",{id:n,type:s,className:"".concat(jS.input," ").concat(m?jS.focused:""),value:o,onChange:e=>i(e.target.value),placeholder:a,required:l,onFocus:f,onBlur:g,maxLength:d})}})(),u&&(0,k.jsx)("p",{className:jS.helperText,children:u}),d&&(0,k.jsxs)("div",{className:jS.charCounter,children:[o.length,"/",d]}),h&&(0,k.jsx)("div",{className:jS.fieldError,children:h})]})},CS=t=>{let{title:n,icon:r,children:s,defaultExpanded:o=!1}=t;const[i,a]=(0,e.useState)(o);return(0,k.jsxs)("div",{className:pS,children:[(0,k.jsxs)("button",{className:fS,onClick:()=>a(!i),type:"button",children:[r&&(0,k.jsx)("span",{className:gS,children:r}),(0,k.jsx)("span",{className:yS,children:n}),(0,k.jsx)("span",{className:vS,children:i?"\u25b2":"\u25bc"})]}),i&&(0,k.jsx)("div",{className:xS,children:s})]})},SS=()=>{const{businessProfile:t}=(0,N.A)(),[n,r]=(0,e.useState)({businessName:(null===t||void 0===t?void 0:t.businessName)||"",industry:(null===t||void 0===t?void 0:t.industry)||"",description:(null===t||void 0===t?void 0:t.description)||"",email:(null===t||void 0===t?void 0:t.email)||"",phone:(null===t||void 0===t?void 0:t.phone)||"",website:(null===t||void 0===t?void 0:t.website)||"",address:(null===t||void 0===t?void 0:t.address)||""}),s=(e,t)=>{r((n=>(0,S.A)((0,S.A)({},n),{},{[e]:t})))};return(0,k.jsxs)("div",{className:mS,children:[(0,k.jsxs)(CS,{title:"Basic Information",icon:"\ud83d\udccb",defaultExpanded:!0,children:[(0,k.jsx)(kS,{id:"businessName",label:"Business Name",value:n.businessName,onChange:e=>s("businessName",e),placeholder:"Enter your business name",required:!0}),(0,k.jsx)(kS,{id:"industry",label:"Industry",type:"select",value:n.industry,onChange:e=>s("industry",e),placeholder:"Select your industry",options:[{value:"retail",label:"\ud83d\udecd\ufe0f Retail"},{value:"restaurant",label:"\ud83c\udf7d\ufe0f Restaurant"},{value:"beauty",label:"\ud83d\udc86 Beauty & Wellness"},{value:"health",label:"\ud83c\udfcb\ufe0f Health & Fitness"},{value:"education",label:"\ud83c\udf93 Education"},{value:"technology",label:"\ud83d\udcbb Technology"},{value:"professional",label:"\ud83d\udc54 Professional Services"},{value:"entertainment",label:"\ud83c\udfad Entertainment"},{value:"travel",label:"\u2708\ufe0f Travel & Hospitality"},{value:"other",label:"\ud83d\udce6 Other"}],required:!0}),(0,k.jsx)(kS,{id:"description",label:"Business Description",type:"textarea",value:n.description,onChange:e=>s("description",e),placeholder:"Describe what your business offers...",helperText:"A clear description helps customers understand your business better",maxLength:200})]}),(0,k.jsxs)(CS,{title:"Contact Information",icon:"\ud83d\udcde",children:[(0,k.jsx)(kS,{id:"email",label:"Business Email",type:"email",value:n.email,onChange:e=>s("email",e),placeholder:"contact@yourbusiness.com",required:!0}),(0,k.jsx)(kS,{id:"phone",label:"Business Phone",type:"tel",value:n.phone,onChange:e=>s("phone",e),placeholder:"+1 (555) 123-4567"}),(0,k.jsx)(kS,{id:"website",label:"Website",value:n.website,onChange:e=>s("website",e),placeholder:"https://yourbusiness.com",helperText:"Include https:// at the beginning"}),(0,k.jsx)(kS,{id:"address",label:"Business Address",value:n.address,onChange:e=>s("address",e),placeholder:"123 Main St, City, State, ZIP"})]})]})},AS=n(8592).A,ES=n(3862).A,_S=()=>{const{businessProfile:t}=(0,N.A)(),[n,r]=(0,e.useState)("profile"),[s]=(0,e.useState)({percentage:70,completedSections:["Basic Info","Branding","Team Members"],incompleteSections:["Notifications","Security","Regional Settings"]}),o=[{id:"profile",title:"Business Profile",icon:"\ud83c\udfe2"},{id:"branding",title:"Branding",icon:"\ud83c\udfa8"},{id:"team",title:"Team Members",icon:"\ud83d\udc65"},{id:"notifications",title:"Notifications",icon:"\ud83d\udd14"},{id:"security",title:"Security",icon:"\ud83d\udd12"}],i={profile:{completed:!0,percentage:100},branding:{completed:!0,percentage:100},team:{completed:!0,percentage:100},notifications:{completed:!1,percentage:50},security:{completed:!1,percentage:0}},a=e=>{r(e);const t=document.getElementById("section-".concat(e));t&&t.scrollIntoView({behavior:"smooth"})},l=e=>{switch(e){case"profile":default:return(0,k.jsx)(SS,{});case"branding":return(0,k.jsx)("div",{className:dS,children:"Branding content will go here"});case"team":return(0,k.jsx)("div",{className:dS,children:"Team Members content will go here"});case"notifications":return(0,k.jsx)("div",{className:dS,children:"Notifications content will go here"});case"security":return(0,k.jsx)("div",{className:dS,children:"Security content will go here"})}};return(0,k.jsxs)("div",{className:ZC,children:[(0,k.jsxs)("div",{className:eS,children:[(0,k.jsx)("button",{className:tS,onClick:()=>window.history.back(),children:"\u2190 Back"}),(0,k.jsxs)("div",{className:nS,children:[(0,k.jsx)("button",{className:rS,children:"Detailed"}),(0,k.jsx)("button",{className:"".concat(sS," ").concat(oS),children:"Simple"})]}),(0,k.jsx)("button",{className:iS,children:"Logout"})]}),(0,k.jsxs)("div",{className:aS,children:[(0,k.jsx)("h1",{className:lS,children:"Your Brand Studio"}),(0,k.jsx)("p",{className:cS,children:"Shape how customers see your business"})]}),(0,k.jsx)(AS,{percentage:s.percentage,completedSections:s.completedSections,incompleteSections:s.incompleteSections,showCelebration:!1}),(0,k.jsx)("div",{className:uS,children:o.map((e=>{var t,r;return(0,k.jsx)(NS,{id:"section-".concat(e.id),title:e.title,icon:e.icon,isActive:n===e.id,isCompleted:(null===(t=i[e.id])||void 0===t?void 0:t.completed)||!1,completionPercentage:(null===(r=i[e.id])||void 0===r?void 0:r.percentage)||0,onClick:()=>a(e.id),children:n===e.id&&l(e.id)},e.id)}))}),(0,k.jsx)(ES,{sections:o,activeSection:n,onSectionChange:a,sectionStatus:i})]})};var IS=n(4762);const TS=new class{async getUserSubscription(e){try{const t=(0,sl.rJ)(rl.db,"subscriptions"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e),(0,sl._M)("status","in",["active","past_due"]),(0,sl.My)("createdAt","desc")),r=await(0,sl.GG)(n);return r.empty?null:r.docs[0].data()}catch(t){throw console.error("Error fetching subscription:",t),t}}async getBillingHistory(e){try{const t=(0,sl.rJ)(rl.db,"billingHistory"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e),(0,sl.My)("paymentDate","desc"));return(await(0,sl.GG)(n)).docs.map((e=>(0,S.A)({id:e.id},e.data())))}catch(t){throw console.error("Error fetching billing history:",t),t}}async getUsageMetrics(e){try{const t=(0,sl.H9)(rl.db,"usageMetrics",e),n=await(0,sl.x7)(t);return n.exists()?n.data():null}catch(t){throw console.error("Error fetching usage metrics:",t),t}}async getPricingPlans(){try{console.log("Fetching pricing plans from collection: pricing_plans");const e=(0,sl.rJ)(rl.db,"pricing_plans"),t=(0,sl.P)(e,(0,sl._M)("active","==",!0)),n=await(0,sl.GG)(t);return console.log("Found ".concat(n.size," active pricing plans")),n.docs.map((e=>(0,S.A)({id:e.id},e.data())))}catch(e){throw console.error("Error fetching pricing plans:",e),e}}async changePlan(e,t){try{throw new Error("Not implemented: This would integrate with your payment processor")}catch(n){throw console.error("Error changing plan:",n),n}}async updatePaymentMethod(e,t){try{throw new Error("Not implemented: This would integrate with your payment processor")}catch(n){throw console.error("Error updating payment method:",n),n}}async cancelSubscription(e){try{throw new Error("Not implemented: This would integrate with your payment processor")}catch(t){throw console.error("Error canceling subscription:",t),t}}},PS=[{name:"Starter",description:"For small businesses just getting started",price:0,currency:"USD",billingCycle:"month",popularPlan:!1,ctaText:"Start Free",active:!0,currencyPrices:[{currencyCode:"USD",price:0},{currencyCode:"ZAR",price:0},{currencyCode:"EUR",price:0},{currencyCode:"GBP",price:0}],features:[{id:"free-1",name:"100 customers",included:!0},{id:"free-2",name:"5 coupons",included:!0},{id:"free-3",name:"Basic analytics",included:!0},{id:"free-4",name:"Email support",included:!0},{id:"free-5",name:"Custom branding",included:!1},{id:"free-6",name:"Advanced analytics",included:!1},{id:"free-7",name:"Priority support",included:!1}]},{name:"Growth",description:"For growing businesses with more customers",price:29,currency:"USD",billingCycle:"month",popularPlan:!0,ctaText:"Go Pro",active:!0,currencyPrices:[{currencyCode:"USD",price:29},{currencyCode:"ZAR",price:199.99},{currencyCode:"EUR",price:27},{currencyCode:"GBP",price:23}],features:[{id:"pro-1",name:"Up to 500 customers",included:!0,highlight:!0},{id:"pro-2",name:"Up to 50 coupons",included:!0,highlight:!0},{id:"pro-3",name:"Advanced analytics",included:!0},{id:"pro-4",name:"Custom branding",included:!0},{id:"pro-5",name:"Email & phone support",included:!0},{id:"pro-6",name:"API access",included:!1},{id:"pro-7",name:"White-label option",included:!1}]},{name:"Professional",description:"For established businesses with custom needs",price:99,currency:"USD",billingCycle:"month",popularPlan:!1,ctaText:"Contact Sales",active:!0,currencyPrices:[{currencyCode:"USD",price:99},{currencyCode:"ZAR",price:399.99},{currencyCode:"EUR",price:89},{currencyCode:"GBP",price:79}],features:[{id:"ent-1",name:"Unlimited customers",included:!0,highlight:!0},{id:"ent-2",name:"Unlimited coupons",included:!0,highlight:!0},{id:"ent-3",name:"Advanced analytics",included:!0},{id:"ent-4",name:"Custom branding",included:!0},{id:"ent-5",name:"Priority support 24/7",included:!0},{id:"ent-6",name:"API access",included:!0},{id:"ent-7",name:"White-label option",included:!0},{id:"ent-8",name:"Dedicated account manager",included:!0}]}],RS=async()=>{try{const e=(0,sl.rJ)(rl.db,"pricing_plans");if((await(0,sl.GG)(e)).empty){console.log("No pricing plans found. Adding default plans...");const e=(0,sl.wP)(rl.db);for(const t of PS){const n=(0,sl.H9)((0,sl.rJ)(rl.db,"pricing_plans"));e.set(n,(0,S.A)((0,S.A)({},t),{},{createdAt:new Date,updatedAt:new Date}))}await e.commit(),console.log("Default pricing plans added successfully")}else console.log("Pricing plans already exist. Skipping initialization.")}catch(e){throw console.error("Error initializing pricing plans:",e),e}};var DS=$S(),MS=e=>GS(e,DS),LS=$S();MS.write=e=>GS(e,LS);var OS=$S();MS.onStart=e=>GS(e,OS);var FS=$S();MS.onFrame=e=>GS(e,FS);var BS=$S();MS.onFinish=e=>GS(e,BS);var US=[];MS.setTimeout=(e,t)=>{const n=MS.now()+t,r=()=>{const e=US.findIndex((e=>e.cancel==r));~e&&US.splice(e,1),WS-=~e?1:0},s={time:n,handler:e,cancel:r};return US.splice(zS(n),0,s),WS+=1,KS(),s};var zS=e=>~(~US.findIndex((t=>t.time>e))||~US.length);MS.cancel=e=>{OS.delete(e),FS.delete(e),BS.delete(e),DS.delete(e),LS.delete(e)},MS.sync=e=>{HS=!0,MS.batchedUpdates(e),HS=!1},MS.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];t=r,MS.onStart(n)}return r.handler=e,r.cancel=()=>{OS.delete(n),t=null},r};var VS="undefined"!=typeof window?window.requestAnimationFrame:()=>{};MS.use=e=>VS=e,MS.now="undefined"!=typeof performance?()=>performance.now():Date.now,MS.batchedUpdates=e=>e(),MS.catch=console.error,MS.frameLoop="always",MS.advance=()=>{"demand"!==MS.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):QS()};var qS=-1,WS=0,HS=!1;function GS(e,t){HS?(t.delete(e),e(0)):(t.add(e),KS())}function KS(){qS<0&&(qS=0,"demand"!==MS.frameLoop&&VS(YS))}function YS(){~qS&&(VS(YS),MS.batchedUpdates(QS))}function QS(){const e=qS;qS=MS.now();const t=zS(qS);t&&(JS(US.splice(0,t),(e=>e.handler())),WS-=t),WS?(OS.flush(),DS.flush(e?Math.min(64,qS-e):16.667),FS.flush(),LS.flush(),BS.flush()):qS=-1}function $S(){let e=new Set,t=e;return{add(n){WS+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(WS-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,WS-=t.size,JS(t,(t=>t(n)&&e.add(t))),WS+=e.size,t=e)}}}function JS(e,t){e.forEach((e=>{try{t(e)}catch(UZ){MS.catch(UZ)}}))}var XS=Object.defineProperty,ZS={};function eA(){}((e,t)=>{for(var n in t)XS(e,n,{get:t[n],enumerable:!0})})(ZS,{assign:()=>pA,colors:()=>dA,createStringInterpolator:()=>aA,skipAnimation:()=>hA,to:()=>lA,willAdvance:()=>mA});var tA={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function nA(e,t){if(tA.arr(e)){if(!tA.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var rA=(e,t)=>e.forEach(t);function sA(e,t,n){if(tA.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],"".concat(r));else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var oA=e=>tA.und(e)?[]:tA.arr(e)?e:[e];function iA(e,t){if(e.size){const n=Array.from(e);e.clear(),rA(n,t)}}var aA,lA,cA=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return iA(e,(e=>e(...n)))},uA=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dA=null,hA=!1,mA=eA,pA=e=>{e.to&&(lA=e.to),e.now&&(MS.now=e.now),void 0!==e.colors&&(dA=e.colors),null!=e.skipAnimation&&(hA=e.skipAnimation),e.createStringInterpolator&&(aA=e.createStringInterpolator),e.requestAnimationFrame&&MS.use(e.requestAnimationFrame),e.batchedUpdates&&(MS.batchedUpdates=e.batchedUpdates),e.willAdvance&&(mA=e.willAdvance),e.frameLoop&&(MS.frameLoop=e.frameLoop)},fA=new Set,gA=[],yA=[],vA=0,xA={get idle(){return!fA.size&&!gA.length},start(e){vA>e.priority?(fA.add(e),MS.onStart(bA)):(wA(e),MS(jA))},advance:jA,sort(e){if(vA)MS.onFrame((()=>xA.sort(e)));else{const t=gA.indexOf(e);~t&&(gA.splice(t,1),NA(e))}},clear(){gA=[],fA.clear()}};function bA(){fA.forEach(wA),fA.clear(),MS(jA)}function wA(e){gA.includes(e)||NA(e)}function NA(e){gA.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(gA,(t=>t.priority>e.priority)),0,e)}function jA(e){const t=yA;for(let n=0;n<gA.length;n++){const r=gA[n];vA=r.priority,r.idle||(mA(r),r.advance(e),r.idle||t.push(r))}return vA=0,(yA=gA).length=0,(gA=t).length>0}var kA="[-+]?\\d*\\.?\\d+",CA=kA+"%";function SA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var AA=new RegExp("rgb"+SA(kA,kA,kA)),EA=new RegExp("rgba"+SA(kA,kA,kA,kA)),_A=new RegExp("hsl"+SA(kA,CA,CA)),IA=new RegExp("hsla"+SA(kA,CA,CA,kA)),TA=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,PA=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,RA=/^#([0-9a-fA-F]{6})$/,DA=/^#([0-9a-fA-F]{8})$/;function MA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function LA(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,o=MA(s,r,e+1/3),i=MA(s,r,e),a=MA(s,r,e-1/3);return Math.round(255*o)<<24|Math.round(255*i)<<16|Math.round(255*a)<<8}function OA(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function FA(e){return(parseFloat(e)%360+360)%360/360}function BA(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function UA(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function zA(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=RA.exec(e))?parseInt(t[1]+"ff",16)>>>0:dA&&void 0!==dA[e]?dA[e]:(t=AA.exec(e))?(OA(t[1])<<24|OA(t[2])<<16|OA(t[3])<<8|255)>>>0:(t=EA.exec(e))?(OA(t[1])<<24|OA(t[2])<<16|OA(t[3])<<8|BA(t[4]))>>>0:(t=TA.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=DA.exec(e))?parseInt(t[1],16)>>>0:(t=PA.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=_A.exec(e))?(255|LA(FA(t[1]),UA(t[2]),UA(t[3])))>>>0:(t=IA.exec(e))?(LA(FA(t[1]),UA(t[2]),UA(t[3]))|BA(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;const n=(16711680&t)>>>16,r=(65280&t)>>>8,s=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(s,")")}var VA=(e,t,n)=>{if(tA.fun(e))return e;if(tA.arr(e))return VA({range:e,output:t,extrapolate:n});if(tA.str(e.output[0]))return aA(e);const r=e,s=r.output,o=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,s,o,i,a,l){let c=l?l(e):e;if(c<t){if("identity"===i)return c;"clamp"===i&&(c=t)}if(c>n){if("identity"===a)return c;"clamp"===a&&(c=n)}if(r===s)return r;if(t===n)return e<=t?r:s;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=o(c),r===-1/0?c=-c:s===1/0?c+=r:c=c*(s-r)+r;return c}(e,o[t],o[t+1],s[t],s[t+1],l,i,a,r.map)}};var qA=1.70158,WA=1.525*qA,HA=qA+1,GA=2*Math.PI/3,KA=2*Math.PI/4.5,YA=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},QA={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>HA*e*e*e-qA*e*e,easeOutBack:e=>1+HA*Math.pow(e-1,3)+qA*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-WA)/2:(Math.pow(2*e-2,2)*((WA+1)*(2*e-2)+WA)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*GA),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*GA)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*KA)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*KA)/2+1,easeInBounce:e=>1-YA(1-e),easeOutBounce:YA,easeInOutBounce:e=>e<.5?(1-YA(1-2*e))/2:(1+YA(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return((e,t,n)=>Math.min(Math.max(n,e),t))(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}},$A=Symbol.for("FluidValue.get"),JA=Symbol.for("FluidValue.observers"),XA=e=>Boolean(e&&e[$A]),ZA=e=>e&&e[$A]?e[$A]():e,eE=e=>e[JA]||null;function tE(e,t){const n=e[JA];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var nE=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");rE(this,e)}},rE=(e,t)=>aE(e,$A,t);function sE(e,t){if(e[$A]){let n=e[JA];n||aE(e,JA,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function oE(e,t){const n=e[JA];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[JA]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var iE,aE=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),lE=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,cE=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,uE=new RegExp("(".concat(lE.source,")(%|[a-z]+)"),"i"),dE=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,hE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,mE=e=>{const[t,n]=pE(e);if(!t||uA())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&hE.test(n)?mE(n):n||e},pE=e=>{const t=hE.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},fE=(e,t,n,r,s)=>"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(s,")"),gE=e=>{iE||(iE=dA?new RegExp("(".concat(Object.keys(dA).join("|"),")(?!\\w)"),"g"):/^\b$/);const t=e.output.map((e=>ZA(e).replace(hE,mE).replace(cE,zA).replace(iE,zA))),n=t.map((e=>e.match(lE).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))),s=r.map((t=>VA((0,S.A)((0,S.A)({},e),{},{output:t}))));return e=>{var n;const r=!uE.test(t[0])&&(null===(n=t.find((e=>uE.test(e))))||void 0===n?void 0:n.replace(lE,""));let o=0;return t[0].replace(lE,(()=>"".concat(s[o++](e)).concat(r||""))).replace(dE,fE)}},yE="react-spring: ",vE=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError("".concat(yE,"once requires a function parameter"));return function(){n||(t(...arguments),n=!0)}},xE=vE(console.warn);var bE=vE(console.warn);function wE(e){return tA.str(e)&&("#"==e[0]||/\d/.test(e)||!uA()&&hE.test(e)||e in(dA||{}))}var NE=uA()?e.useEffect:e.useLayoutEffect;function jE(){const t=(0,e.useState)()[1],n=(()=>{const t=(0,e.useRef)(!1);return NE((()=>(t.current=!0,()=>{t.current=!1})),[]),t})();return()=>{n.current&&t(Math.random())}}var kE=t=>(0,e.useEffect)(t,CE),CE=[];function SE(t){const n=(0,e.useRef)(void 0);return(0,e.useEffect)((()=>{n.current=t})),n.current}var AE=Symbol.for("Animated:node"),EE=e=>e&&e[AE],_E=(e,t)=>{return n=e,r=AE,s=t,Object.defineProperty(n,r,{value:s,writable:!0,configurable:!0});var n,r,s},IE=e=>e&&e[AE]&&e[AE].getPayload(),TE=class{constructor(){_E(this,this)}getPayload(){return this.payload||[]}},PE=class e extends TE{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,tA.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new e(t)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return tA.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,tA.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},RE=class e extends PE{constructor(e){super(0),this._string=null,this._toString=VA({output:[e,e]})}static create(t){return new e(t)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(tA.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=VA({output:[this.getValue(),e]})),this._value=0,super.reset()}},DE={dependencies:null},ME=class extends TE{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return sA(this.source,((n,r)=>{var s;(s=n)&&s[AE]===s?t[r]=n.getValue(e):XA(n)?t[r]=ZA(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&rA(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return sA(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){DE.dependencies&&XA(e)&&DE.dependencies.add(e);const t=IE(e);t&&rA(t,(e=>this.add(e)))}},LE=class e extends ME{constructor(e){super(e)}static create(t){return new e(t)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(OE)),!0)}};function OE(e){return(wE(e)?RE:PE).create(e)}function FE(e){const t=EE(e);return t?t.constructor:tA.arr(e)?LE:wE(e)?RE:PE}var BE=(t,n)=>{const r=!tA.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,e.forwardRef)(((s,o)=>{const i=(0,e.useRef)(null),a=r&&(0,e.useCallback)((e=>{i.current=function(e,t){e&&(tA.fun(e)?e(t):e.current=t);return t}(o,e)}),[o]),[l,c]=function(e,t){const n=new Set;DE.dependencies=n,e.style&&(e=(0,S.A)((0,S.A)({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new ME(e),DE.dependencies=null,[e,n]}(s,n),u=jE(),d=()=>{const e=i.current;if(r&&!e)return;!1===(!!e&&n.applyAnimatedValues(e,l.getValue(!0)))&&u()},h=new UE(d,c),m=(0,e.useRef)(void 0);NE((()=>(m.current=h,rA(c,(e=>sE(e,h))),()=>{m.current&&(rA(m.current.deps,(e=>oE(e,m.current))),MS.cancel(m.current.update))}))),(0,e.useEffect)(d,[]),kE((()=>()=>{const e=m.current;rA(e.deps,(t=>oE(t,e)))}));const p=n.getComponentProps(l.getValue());return e.createElement(t,(0,S.A)((0,S.A)({},p),{},{ref:a}))}))},UE=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&MS.write(this.update)}};var zE=Symbol.for("AnimatedComponent"),VE=e=>tA.str(e)?e:e&&tA.str(e.displayName)?e.displayName:tA.fun(e)&&e.name||null;function qE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tA.fun(e)?e(...n):e}var WE=(e,t)=>!0===e||!!(t&&e&&(tA.fun(e)?e(t):oA(e).includes(t))),HE=(e,t)=>tA.obj(e)?t&&e[t]:e,GE=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,KE=e=>e,YE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE,n=QE;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const n=t(e[s],s);tA.und(n)||(r[s]=n)}return r},QE=["config","onProps","onStart","onChange","onPause","onResume","onRest"],$E={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function JE(e){const t=function(e){const t={};let n=0;if(sA(e,((e,r)=>{$E[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return sA(e,((e,r)=>r in t||(n[r]=e))),n}return(0,S.A)({},e)}function XE(e){return e=ZA(e),tA.arr(e)?e.map(XE):wE(e)?ZS.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function ZE(e){for(const t in e)return!0;return!1}function e_(e){return tA.fun(e)||tA.arr(e)&&tA.obj(e[0])}function t_(e,t){var n;null===(n=e.ref)||void 0===n||n.delete(e),null===t||void 0===t||t.delete(e)}function n_(e,t){var n;t&&e.ref!==t&&(null===(n=e.ref)||void 0===n||n.delete(e),t.add(e),e.ref=t)}var r_=(0,S.A)((0,S.A)({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:QA.linear,clamp:!1}),s_=class{constructor(){this.velocity=0,Object.assign(this,r_)}};function o_(e,t){if(tA.und(t.decay)){const n=!tA.und(t.tension)||!tA.und(t.friction);!n&&tA.und(t.frequency)&&tA.und(t.damping)&&tA.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var i_=[],a_=class{constructor(){this.changed=!1,this.values=i_,this.toValues=null,this.fromValues=i_,this.config=new s_,this.immediate=!1}};function l_(e,t){let{key:n,props:r,defaultProps:s,state:o,actions:i}=t;return new Promise(((t,a)=>{var l;let c,u,d=WE(null!==(l=r.cancel)&&void 0!==l?l:null===s||void 0===s?void 0:s.cancel,n);if(d)p();else{tA.und(r.pause)||(o.paused=WE(r.pause,n));let e=null===s||void 0===s?void 0:s.pause;!0!==e&&(e=o.paused||WE(e,n)),c=qE(r.delay||0,n),e?(o.resumeQueue.add(m),i.pause()):(i.resume(),m())}function h(){o.resumeQueue.add(m),o.timeouts.delete(u),u.cancel(),c=u.time-MS.now()}function m(){c>0&&!ZS.skipAnimation?(o.delayed=!0,u=MS.setTimeout(p,c),o.pauseQueue.add(h),o.timeouts.add(u)):p()}function p(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(h),o.timeouts.delete(u),e<=(o.cancelId||0)&&(d=!0);try{i.start((0,S.A)((0,S.A)({},r),{},{callId:e,cancel:d}),t)}catch(zZ){a(zZ)}}}))}var c_=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?h_(e.get()):t.every((e=>e.noop))?u_(e.get()):d_(e.get(),t.every((e=>e.finished))),u_=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),d_=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},h_=e=>({value:e,cancelled:!0,finished:!1});function m_(e,t,n,r){const{callId:s,parentId:o,onRest:i}=t,{asyncTo:a,promise:l}=n;return o||e!==a||t.reset?n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const c=YE(t,((e,t)=>"onRest"===t?void 0:e));let u,d;const h=new Promise(((e,t)=>(u=e,d=t))),m=e=>{const t=s<=(n.cancelId||0)&&h_(r)||s!==n.asyncId&&d_(r,!1);if(t)throw e.result=t,d(e),e},p=(e,t)=>{const o=new f_,i=new g_;return(async()=>{if(ZS.skipAnimation)throw p_(n),i.result=d_(r,!1),d(i),i;m(o);const a=tA.obj(e)?(0,S.A)({},e):(0,S.A)((0,S.A)({},t),{},{to:e});a.parentId=s,sA(c,((e,t)=>{tA.und(a[t])&&(a[t]=e)}));const l=await r.start(a);return m(o),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let f;if(ZS.skipAnimation)return p_(n),d_(r,!1);try{let t;t=tA.arr(e)?(async e=>{for(const t of e)await p(t)})(e):Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([t.then(u),h]),f=d_(r.get(),!0,!1)}catch(zZ){if(zZ instanceof f_)f=zZ.result;else{if(!(zZ instanceof g_))throw zZ;f=zZ.result}}finally{s==n.asyncId&&(n.asyncId=o,n.asyncTo=o?a:void 0,n.promise=o?l:void 0)}return tA.fun(i)&&MS.batchedUpdates((()=>{i(f,r,r.item)})),f})():l}function p_(e,t){iA(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var f_=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},g_=class extends Error{constructor(){super("SkipAnimationSignal")}},y_=e=>e instanceof x_,v_=1,x_=class extends nE{constructor(){super(...arguments),this.id=v_++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=EE(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZS.to(this,t)}interpolate(){xE("".concat(yE,'The "interpolate" function is deprecated in v9 (use "to" instead)'));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZS.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){tE(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||xA.sort(this),tE(this,{type:"priority",parent:this,priority:e})}},b_=Symbol.for("SpringPhase"),w_=e=>(1&e[b_])>0,N_=e=>(2&e[b_])>0,j_=e=>(4&e[b_])>0,k_=(e,t)=>t?e[b_]|=3:e[b_]&=-3,C_=(e,t)=>t?e[b_]|=4:e[b_]&=-5,S_=class extends x_{constructor(e,t){if(super(),this.animation=new a_,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!tA.und(e)||!tA.und(t)){const n=tA.obj(e)?(0,S.A)({},e):(0,S.A)((0,S.A)({},t),{},{from:e});tA.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(N_(this)||this._state.asyncTo)||j_(this)}get goal(){return ZA(this.animation.to)}get velocity(){const e=EE(this);return e instanceof PE?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return w_(this)}get isAnimating(){return N_(this)}get isPaused(){return j_(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:o}=r,i=IE(r.to);!i&&XA(r.to)&&(s=oA(ZA(r.to))),r.values.forEach(((a,l)=>{if(a.done)return;const c=a.constructor==RE?1:i?i[l].lastPosition:s[l];let u=r.immediate,d=c;if(!u){if(d=a.lastPosition,o.tension<=0)return void(a.done=!0);let t=a.elapsedTime+=e;const n=r.fromValues[l],s=null!=a.v0?a.v0:a.v0=tA.arr(o.velocity)?o.velocity[l]:o.velocity;let i;const h=o.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(tA.und(o.duration))if(o.decay){const e=!0===o.decay?.998:o.decay,r=Math.exp(-(1-e)*t);d=n+s/(1-e)*(1-r),u=Math.abs(a.lastPosition-d)<=h,i=s*r}else{i=null==a.lastVelocity?s:a.lastVelocity;const t=o.restVelocity||h/10,r=o.clamp?0:o.bounce,l=!tA.und(r),m=n==c?a.v0>0:n<c;let p,f=!1;const g=1,y=Math.ceil(e/g);for(let e=0;e<y&&(p=Math.abs(i)>t,p||(u=Math.abs(c-d)<=h,!u));++e){l&&(f=d==c||d>c==m,f&&(i=-i*r,d=c));i+=(1e-6*-o.tension*(d-c)+.001*-o.friction*i)/o.mass*g,d+=i*g}}else{let r=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,a.durationProgress>0&&(a.elapsedTime=o.duration*a.durationProgress,t=a.elapsedTime+=e)),r=(o.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,a.durationProgress=r),d=n+o.easing(r)*(c-n),i=(d-a.lastPosition)/e,u=1==r}a.lastVelocity=i,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),u=!0)}i&&!i[l].done&&(u=!1),u?a.done=!0:t=!1,a.setValue(d,o.round)&&(n=!0)}));const a=EE(this),l=a.getValue();if(t){const e=ZA(r.to);l===e&&!n||o.decay?n&&o.decay&&this._onChange(l):(a.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return MS.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(N_(this)){const{to:e,config:t}=this.animation;MS.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return tA.und(e)?(n=this.queue||[],this.queue=[]):n=[tA.obj(e)?e:(0,S.A)((0,S.A)({},t),{},{to:e})],Promise.all(n.map((e=>this._update(e)))).then((e=>c_(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),p_(this._state,e&&this._lastCallId),MS.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=tA.obj(n)?n[t]:n,(null==n||e_(n))&&(n=void 0),r=tA.obj(r)?r[t]:r,null==r&&(r=void 0);const s={to:n,from:r};return w_(this)||(e.reverse&&([n,r]=[r,n]),r=ZA(r),tA.und(r)?EE(this)||this._set(n):this._set(r)),s}_update(e,t){let n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const{key:r,defaultProps:s}=this;n.default&&Object.assign(s,YE(n,((e,t)=>/^on/.test(t)?HE(e,r):e))),R_(this,n,"onProps"),D_(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return l_(++this._lastCallId,{key:r,props:n,defaultProps:s,state:i,actions:{pause:()=>{j_(this)||(C_(this,!0),cA(i.pauseQueue),D_(this,"onPause",d_(this,A_(this,this.animation.to)),this))},resume:()=>{j_(this)&&(C_(this,!1),N_(this)&&this._resume(),cA(i.resumeQueue),D_(this,"onResume",d_(this,A_(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=E_(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(h_(this));const r=!tA.und(e.to),s=!tA.und(e.from);if(r||s){if(!(t.callId>this._lastToId))return n(h_(this));this._lastToId=t.callId}const{key:o,defaultProps:i,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=e;!s||r||t.default&&!tA.und(u)||(u=d),t.reverse&&([u,d]=[d,u]);const h=!nA(d,c);h&&(a.from=d),d=ZA(d);const m=!nA(u,l);m&&this._focus(u);const p=e_(t.to),{config:f}=a,{decay:g,velocity:y}=f;(r||s)&&(f.velocity=0),t.config&&!p&&function(e,t,n){n&&(o_(n=(0,S.A)({},n),t),t=(0,S.A)((0,S.A)({},n),t)),o_(e,t),Object.assign(e,t);for(const i in r_)null==e[i]&&(e[i]=r_[i]);let{frequency:r,damping:s}=e;const{mass:o}=e;tA.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*s*o/r)}(f,qE(t.config,o),t.config!==i.config?qE(i.config,o):void 0);let v=EE(this);if(!v||tA.und(u))return n(d_(this,!0));const x=tA.und(t.reset)?s&&!t.default:!tA.und(d)&&WE(t.reset,o),b=x?d:this.get(),w=XE(u),N=tA.num(w)||tA.arr(w)||wE(w),j=!p&&(!N||WE(i.immediate||t.immediate,o));if(m){const e=FE(u);if(e!==v.constructor){if(!j)throw Error("Cannot animate between ".concat(v.constructor.name," and ").concat(e.name,', as the "to" prop suggests'));v=this._set(w)}}const k=v.constructor;let C=XA(u),A=!1;if(!C){const e=x||!w_(this)&&h;(m||e)&&(A=nA(XE(b),w),C=!A),(nA(a.immediate,j)||j)&&nA(f.decay,g)&&nA(f.velocity,y)||(C=!0)}if(A&&N_(this)&&(a.changed&&!x?C=!0:C||this._stop(l)),!p&&((C||XA(l))&&(a.values=v.getPayload(),a.toValues=XA(u)?null:k==RE?[1]:oA(w)),a.immediate!=j&&(a.immediate=j,j||x||this._set(l)),C)){const{onRest:e}=a;rA(P_,(e=>R_(this,t,e)));const r=d_(this,A_(this,l));cA(this._pendingCalls,r),this._pendingCalls.add(n),a.changed&&MS.batchedUpdates((()=>{var t;(a.changed=!x,null===e||void 0===e||e(r,this),x)?qE(i.onRest,r):null===(t=a.onStart)||void 0===t||t.call(a,r,this)}))}x&&this._set(b),p?n(m_(t.to,t,this._state,this)):C?this._start():N_(this)&&!m?this._pendingCalls.add(n):n(u_(b))}_focus(e){const t=this.animation;e!==t.to&&(eE(this)&&this._detach(),t.to=e,eE(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;XA(t)&&(sE(t,this),y_(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;XA(e)&&oE(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ZA(e);if(!tA.und(n)){const e=EE(this);if(!e||!nA(n,e.getValue())){const r=FE(n);e&&e.constructor==r?e.setValue(n):_E(this,r.create(n)),e&&MS.batchedUpdates((()=>{this._onChange(n,t)}))}}return EE(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,D_(this,"onStart",d_(this,A_(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),qE(this.animation.onChange,e,this)),qE(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;EE(this).reset(ZA(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),N_(this)||(k_(this,!0),j_(this)||this._resume())}_resume(){ZS.skipAnimation?this.finish():xA.start(this)}_stop(e,t){if(N_(this)){k_(this,!1);const n=this.animation;rA(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),tE(this,{type:"idle",parent:this});const r=t?h_(this.get()):d_(this.get(),A_(this,null!==e&&void 0!==e?e:n.to));cA(this._pendingCalls,r),n.changed&&(n.changed=!1,D_(this,"onRest",r,this))}}};function A_(e,t){const n=XE(t);return nA(XE(e.get()),n)}function E_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const r=qE(t);if(r){const s=!0!==r&&JE(r),o=(s||e).reverse,i=!s||s.reset;return __((0,S.A)((0,S.A)({},e),{},{loop:t,default:!1,pause:void 0,to:!o||e_(n)?n:void 0,from:i?e.from:void 0,reset:i},s))}}function __(e){const{to:t,from:n}=e=JE(e),r=new Set;return tA.obj(t)&&T_(t,r),tA.obj(n)&&T_(n,r),e.keys=r.size?Array.from(r):null,e}function I_(e){const t=__(e);return tA.und(t.default)&&(t.default=YE(t)),t}function T_(e,t){sA(e,((e,n)=>null!=e&&t.add(n)))}var P_=["onStart","onRest","onChange","onPause","onResume"];function R_(e,t,n){e.animation[n]=t[n]!==GE(t,n)?HE(t[n],e.key):void 0}function D_(e,t){for(var n,r,s,o,i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];null===(n=(r=e.animation)[t])||void 0===n||n.call(r,...a),null===(s=(o=e.defaultProps)[t])||void 0===s||s.call(o,...a)}var M_=["onStart","onChange","onRest"],L_=1,O_=class{constructor(e,t){this.id=L_++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start((0,S.A)({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];tA.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(__(e)),this}start(e){let{queue:t}=this;return e?t=oA(e).map(__):this.queue=[],this._flush?this._flush(this,t):(W_(this,t),F_(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;rA(oA(t),(t=>n[t].stop(!!e)))}else p_(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(tA.und(e))this.start({pause:!0});else{const t=this.springs;rA(oA(e),(e=>t[e].pause()))}return this}resume(e){if(tA.und(e))this.start({pause:!1});else{const t=this.springs;rA(oA(e),(e=>t[e].resume()))}return this}each(e){sA(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,iA(e,(e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)})));const o=!r&&this._started,i=s||o&&n.size?this.get():null;s&&t.size&&iA(t,(e=>{let[t,n]=e;n.value=i,t(n,this,this._item)})),o&&(this._started=!1,iA(n,(e=>{let[t,n]=e;n.value=i,t(n,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}MS.onFrame(this._onFrame)}};function F_(e,t){return Promise.all(t.map((t=>B_(e,t)))).then((t=>c_(e,t)))}async function B_(e,t,n){const{keys:r,to:s,from:o,loop:i,onRest:a,onResolve:l}=t,c=tA.obj(t.default)&&t.default;i&&(t.loop=!1),!1===s&&(t.to=null),!1===o&&(t.from=null);const u=tA.arr(s)||tA.fun(s)?s:void 0;u?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):rA(M_,(n=>{const r=t[n];if(tA.fun(r)){const s=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const o=s.get(r);o?(t||(o.finished=!1),n&&(o.cancelled=!0)):s.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[n]=t[n])}}));const d=e._state;t.pause===!d.paused?(d.paused=t.pause,cA(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const h=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),m=!0===t.cancel||!0===GE(t,"cancel");(u||m&&d.asyncId)&&h.push(l_(++e._lastAsyncId,{props:t,state:d,actions:{pause:eA,resume:eA,start(t,n){m?(p_(d,e._lastAsyncId),n(h_(e))):(t.onRest=a,n(m_(u,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));const p=c_(e,await Promise.all(h));if(i&&p.finished&&(!n||!p.noop)){const n=E_(t,i,s);if(n)return W_(e,[n]),B_(e,n,!0)}return l&&MS.batchedUpdates((()=>l(p,e,e.item))),p}function U_(e,t){const n=(0,S.A)({},e.springs);return t&&rA(oA(t),(e=>{tA.und(e.keys)&&(e=__(e)),tA.obj(e.to)||(e=(0,S.A)((0,S.A)({},e),{},{to:void 0})),q_(n,e,(e=>V_(e)))})),z_(e,n),n}function z_(e,t){sA(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,sE(t,e))}))}function V_(e,t){const n=new S_;return n.key=e,t&&sE(n,t),n}function q_(e,t,n){t.keys&&rA(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function W_(e,t){rA(t,(t=>{q_(e.springs,t,(t=>V_(t,e)))}))}var H_=e.createContext({pause:!1,immediate:!1}),G_=()=>{const e=[],t=function(t){bE("".concat(yE,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));const r=[];return rA(e,((e,s)=>{if(tA.und(t))r.push(e.start());else{const o=n(t,e,s);o&&r.push(e.start(o))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return rA(e,(e=>e.pause(...arguments))),this},t.resume=function(){return rA(e,(e=>e.resume(...arguments))),this},t.set=function(t){rA(e,((e,n)=>{const r=tA.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){const n=[];return rA(e,((e,r)=>{if(tA.und(t))n.push(e.start());else{const s=this._getProps(t,e,r);s&&n.push(e.start(s))}})),n},t.stop=function(){return rA(e,(e=>e.stop(...arguments))),this},t.update=function(t){return rA(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return tA.fun(e)?e(n,t):e};return t._getProps=n,t};function K_(t,n,r){const s=tA.fun(n)&&n;s&&!r&&(r=[]);const o=(0,e.useMemo)((()=>s||3==arguments.length?G_():void 0),[]),i=(0,e.useRef)(0),a=jE(),l=(0,e.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=U_(e,t);return i.current>0&&!l.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?F_(e,t):new Promise((r=>{z_(e,n),l.queue.push((()=>{r(F_(e,t))})),a()}))}})),[]),c=(0,e.useRef)([...l.ctrls]),u=(0,e.useRef)([]),d=SE(t)||0;function h(e,t){for(let r=e;r<t;r++){const e=c.current[r]||(c.current[r]=new O_(null,l.flush)),t=s?s(r,e):n[r];t&&(u.current[r]=I_(t))}}(0,e.useMemo)((()=>{rA(c.current.slice(t,d),(e=>{t_(e,o),e.stop(!0)})),c.current.length=t,h(d,t)}),[t]),(0,e.useMemo)((()=>{h(0,Math.min(d,t))}),r);const m=c.current.map(((e,t)=>U_(e,u.current[t]))),p=(0,e.useContext)(H_),f=SE(p),g=p!==f&&ZE(p);NE((()=>{i.current++,l.ctrls=c.current;const{queue:e}=l;e.length&&(l.queue=[],rA(e,(e=>e()))),rA(c.current,((e,t)=>{null===o||void 0===o||o.add(e),g&&e.start({default:p});const n=u.current[t];n&&(n_(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),kE((()=>()=>{rA(l.ctrls,(e=>e.stop(!0)))}));const y=m.map((e=>(0,S.A)({},e)));return o?[y,o]:y}function Y_(e,t){const n=tA.fun(e),[[r],s]=K_(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,s]:r}function Q_(e,t,n){const r=tA.fun(t)&&t;r&&!n&&(n=[]);let s,o=!0;const i=K_(e,((e,n)=>{const i=r?r(e,n):t;return s=i.ref,o=o&&i.reverse,i}),n||[{}]);if(NE((()=>{rA(i[1].current,((e,t)=>{const n=i[1].current[t+(o?1:-1)];n_(e,s),e.ref?n&&e.update({to:n.springs}):n?e.start({to:n.springs}):e.start()}))}),n),r||3==arguments.length){const e=null!==s&&void 0!==s?s:i[1];return e._getProps=(t,n,r)=>{const s=tA.fun(t)?t(r,n):t;if(s){const t=e.current[r+(s.reverse?1:-1)];return t&&(s.to=t.springs),s}},i}return i[0]}var $_=class extends x_{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=VA(...t);const n=this._get(),r=FE(n);_E(this,r.create(n))}advance(e){const t=this._get();nA(t,this.get())||(EE(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&X_(this._active)&&Z_(this)}_get(){const e=tA.arr(this.source)?this.source.map(ZA):oA(ZA(this.source));return this.calc(...e)}_start(){this.idle&&!X_(this._active)&&(this.idle=!1,rA(IE(this),(e=>{e.done=!1})),ZS.skipAnimation?(MS.batchedUpdates((()=>this.advance())),Z_(this)):xA.start(this))}_attach(){let e=1;rA(oA(this.source),(t=>{XA(t)&&sE(t,this),y_(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){rA(oA(this.source),(e=>{XA(e)&&oE(e,this)})),this._active.clear(),Z_(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=oA(this.source).reduce(((e,t)=>Math.max(e,(y_(t)?t.priority:0)+1)),0))}};function J_(e){return!1!==e.idle}function X_(e){return!e.size||Array.from(e).every(J_)}function Z_(e){e.idle||(e.idle=!0,rA(IE(e),(e=>{e.done=!0})),tE(e,{type:"idle",parent:e}))}ZS.assign({createStringInterpolator:gE,to:(e,t)=>new $_(e,t)});xA.advance;const eI=["className","style","children","scrollTop","scrollLeft","viewBox"],tI=["x","y","z"],nI=["scrollTop","scrollLeft"];var rI=/^--/;function sI(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||rI.test(e)||iI.hasOwnProperty(e)&&iI[e]?(""+t).trim():t+"px"}var oI={};var iI={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aI=["Webkit","Ms","Moz","O"];iI=Object.keys(iI).reduce(((e,t)=>(aI.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),iI);var lI=/^(matrix|translate|scale|rotate|skew)/,cI=/^(translate)/,uI=/^(rotate|skew)/,dI=(e,t)=>tA.num(e)&&0!==e?e+t:e,hI=(e,t)=>tA.arr(e)?e.every((e=>hI(e,t))):tA.num(e)?e===t:parseFloat(e)===t,mI=class extends ME{constructor(e){let{x:t,y:n,z:r}=e,s=E(e,tI);const o=[],i=[];(t||n||r)&&(o.push([t||0,n||0,r||0]),i.push((e=>["translate3d(".concat(e.map((e=>dI(e,"px"))).join(","),")"),hI(e,0)]))),sA(s,((e,t)=>{if("transform"===t)o.push([e||""]),i.push((e=>[e,""===e]));else if(lI.test(t)){if(delete s[t],tA.und(e))return;const n=cI.test(t)?"px":uI.test(t)?"deg":"";o.push(oA(e)),i.push("rotate3d"===t?e=>{let[t,r,s,o]=e;return["rotate3d(".concat(t,",").concat(r,",").concat(s,",").concat(dI(o,n),")"),hI(o,0)]}:e=>["".concat(t,"(").concat(e.map((e=>dI(e,n))).join(","),")"),hI(e,t.startsWith("scale")?1:0)])}})),o.length&&(s.transform=new pI(o,i)),super(s)}},pI=class extends nE{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return rA(this.inputs,((n,r)=>{const s=ZA(n[0]),[o,i]=this.transforms[r](tA.arr(s)?s:n.map(ZA));e+=" "+o,t=t&&i})),t?"none":e}observerAdded(e){1==e&&rA(this.inputs,(e=>rA(e,(e=>XA(e)&&sE(e,this)))))}observerRemoved(e){0==e&&rA(this.inputs,(e=>rA(e,(e=>XA(e)&&oE(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),tE(this,e)}};ZS.assign({batchedUpdates:s.unstable_batchedUpdates,createStringInterpolator:gE,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var fI=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new ME(e),getComponentProps:r=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=e=>{const t=VE(e)||"Anonymous";return(e=tA.str(e)?o[e]||(o[e]=BE(e,s)):e[zE]||(e[zE]=BE(e,s))).displayName="Animated(".concat(t,")"),e};return sA(e,((t,n)=>{tA.arr(e)&&(n=VE(t)),o[n]=o(t)})),{animated:o}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:r,style:s,children:o,scrollTop:i,scrollLeft:a,viewBox:l}=t,c=E(t,eI),u=Object.values(c),d=Object.keys(c).map((t=>n||e.hasAttribute(t)?t:oI[t]||(oI[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==o&&(e.textContent=o);for(const h in s)if(s.hasOwnProperty(h)){const t=sI(h,s[h]);rI.test(h)?e.style.setProperty(h,t):e.style[h]=t}d.forEach(((t,n)=>{e.setAttribute(t,u[n])})),void 0!==r&&(e.className=r),void 0!==i&&(e.scrollTop=i),void 0!==a&&(e.scrollLeft=a),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new mI(e),getComponentProps:e=>{let{scrollTop:t,scrollLeft:n}=e;return E(e,nI)}}),gI=fI.animated;const yI=t=>{let{show:n,message:r,onComplete:s}=t;const o=Y_({opacity:n?1:0,transform:n?"translateY(0)":"translateY(-50px)",config:{tension:300,friction:20}});return(0,e.useEffect)((()=>{if(n){(e=>{Og((0,S.A)((0,S.A)({},{particleCount:100,spread:70,origin:{y:.6},colors:["#FF5757","#47B4FF","#FFD029","#41E097"]}),e))})(),setTimeout((()=>{(()=>{const e={spread:360,ticks:100,gravity:0,decay:.94,startVelocity:30,shapes:["star"],colors:["#FFD029","#FF5757","#47B4FF","#41E097"]};Og((0,S.A)((0,S.A)({},e),{},{particleCount:40,scalar:1.2,shapes:["star"]})),setTimeout((()=>{Og((0,S.A)((0,S.A)({},e),{},{particleCount:20,scalar:.75,shapes:["circle"]}))}),150)})()}),300);const e=setTimeout((()=>{null===s||void 0===s||s()}),4e3);return()=>clearTimeout(e)}}),[n,s]),n?(0,k.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm"}),(0,k.jsxs)(gI.div,{style:o,className:"bg-white rounded-xl shadow-2xl p-8 max-w-md mx-4 text-center relative z-10",children:[(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)("svg",{className:"w-16 h-16 mx-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,k.jsx)("p",{className:"text-gray-700 text-lg mb-6",children:r}),(0,k.jsx)("button",{onClick:s,className:"px-6 py-3 bg-primary-600 text-white rounded-md font-medium hover:bg-primary-700 transition-colors",children:"Continue"})]})]}):null},vI=["title","titleId"];function xI(t,n){let{title:r,titleId:s}=t,o=E(t,vI);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const bI=e.forwardRef(xI),wI=["title","titleId"];function NI(t,n){let{title:r,titleId:s}=t,o=E(t,wI);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const jI=e.forwardRef(NI),kI=["title","titleId"];function CI(t,n){let{title:r,titleId:s}=t,o=E(t,kI);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const SI=e.forwardRef(CI),AI=["title","titleId"];function EI(t,n){let{title:r,titleId:s}=t,o=E(t,AI);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _I=e.forwardRef(EI),II=["title","titleId"];function TI(t,n){let{title:r,titleId:s}=t,o=E(t,II);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{fillRule:"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const PI=e.forwardRef(TI),RI=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];var DI=Object.defineProperty,MI=(e,t,n)=>((e,t,n)=>t in e?DI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),LI=new Map,OI=new WeakMap,FI=0,BI=void 0;function UI(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>"".concat(t,"_").concat("root"===t?function(e){return e?(OI.has(e)||(FI+=1,OI.set(e,FI.toString())),OI.get(e)):"0"}(e.root):e[t]))).toString()}function zI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:BI;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){const s=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:s,observer:o,elements:i}=function(e){const t=UI(e);let n=LI.get(t);if(!n){const r=new Map;let s;const o=new IntersectionObserver((t=>{t.forEach((t=>{var n;const o=t.isIntersecting&&s.some((e=>t.intersectionRatio>=e));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(n=r.get(t.target))||n.forEach((e=>{e(o,t)}))}))}),e);s=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:r},LI.set(t,n)}return n}(n),a=i.get(e)||[];return i.has(e)||i.set(e,a),a.push(t),o.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(i.delete(e),o.unobserve(e)),0===i.size&&(o.disconnect(),LI.delete(s))}}e.Component;function VI(){let{threshold:t,delay:n,trackVisibility:r,rootMargin:s,root:o,triggerOnce:i,skip:a,initialInView:l,fallbackInView:c,onChange:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var d;const[h,m]=e.useState(null),p=e.useRef(u),[f,g]=e.useState({inView:!!l,entry:void 0});p.current=u,e.useEffect((()=>{if(a||!h)return;let e;return e=zI(h,((t,n)=>{g({inView:t,entry:n}),p.current&&p.current(t,n),n.isIntersecting&&i&&e&&(e(),e=void 0)}),{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:n},c),()=>{e&&e()}}),[Array.isArray(t)?t.toString():t,h,o,s,i,a,r,c,n]);const y=null==(d=f.entry)?void 0:d.target,v=e.useRef(void 0);h||!y||i||a||v.current===y||(v.current=y,g({inView:!!l,entry:void 0}));const x=[m,f.inView,f.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const qI=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!0);(0,e.useEffect)((()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");s(!e.matches);const t=()=>{s(!e.matches)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}),[]);return{useStaggeredAnimation:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const[n,r]=VI({triggerOnce:!0,threshold:.1});return{ref:n,trail:Q_(e.length,{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:r?1:0,transform:r?"translateY(0px)":"translateY(20px)"},config:{mass:1,tension:280,friction:20},delay:t})}},useFadeIn:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const[t,n]=VI({triggerOnce:!0,threshold:.1});return{ref:t,props:Y_({from:{opacity:0,transform:"translateY(20px)"},to:n?{opacity:1,transform:"translateY(0px)"}:{opacity:0,transform:"translateY(20px)"},config:{tension:280,friction:20},delay:e})}},useButtonAnimation:()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1);return{props:Y_({transform:r?"scale(0.95)":t?"scale(1.05)":"scale(1)",boxShadow:t?"0 10px 25px rgba(0, 0, 0, 0.15)":"0 5px 15px rgba(0, 0, 0, 0.1)",config:{tension:300,friction:10}}),bind:{onMouseEnter:()=>n(!0),onMouseLeave:()=>{n(!1),s(!1)},onMouseDown:()=>s(!0),onMouseUp:()=>s(!1),onTouchStart:()=>s(!0),onTouchEnd:()=>s(!1)}}},useCardFlip:()=>{const[t,n]=(0,e.useState)(!1),{transform:r,opacity:s}=Y_({opacity:t?1:0,transform:"perspective(1200px) rotateY(".concat(t?180:0,"deg)"),config:{mass:5,tension:500,friction:80}});return{flipped:t,setFlipped:n,frontProps:{style:{opacity:s.to((e=>1-e)),transform:r}},backProps:{style:{opacity:s,transform:r.to((e=>"".concat(e," rotateY(180deg)")))}}}},useSequencedAnimation:function(t){const n=(0,e.useRef)(),r=(0,e.useRef)(),s=Y_({from:{opacity:0},to:{opacity:1},config:{duration:300},ref:n}),o=Q_(t,{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0px)"},config:{mass:1,tension:280,friction:20},ref:r});return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;NE((()=>{if(t){let r=0;rA(e,((e,s)=>{const o=e.current;if(o.length){let i=n*t[s];isNaN(i)?i=r:r=i,rA(o,(e=>{rA(e.queue,(e=>{const t=e.delay;e.delay=e=>i+qE(t||0,e)}))})),e.start()}}))}else{let t=Promise.resolve();rA(e,(e=>{const n=e.current;if(n.length){const r=n.map((e=>{const t=e.queue;return e.queue=[],t}));t=t.then((()=>(rA(n,((e,t)=>rA(r[t]||[],(t=>e.queue.push(t))))),Promise.all(e.start()))))}}))}}))}([n.current||null,r.current||null],[0,.3]),{spring:s,trail:o}},triggerCelebration:()=>{n(!0),setTimeout((()=>{n(!1)}),4e3)},showConfetti:t,animationPreference:r}};if("undefined"!==typeof document){const e=document.createElement("style");e.textContent="\n    .ripple {\n      position: absolute;\n      border-radius: 50%;\n      transform: scale(0);\n      animation: ripple 600ms linear;\n      background-color: rgba(255, 255, 255, 0.7);\n    }\n    \n    @keyframes ripple {\n      to {\n        transform: scale(4);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(e)}const WI=e=>{let{children:t,onClick:n,variant:r="primary",size:s="md",fullWidth:o=!1,disabled:i=!1,className:a="",type:l="button",icon:c,iconPosition:u="left",loading:d=!1,loadingText:h="Loading...",color:m}=e;const{useButtonAnimation:p,animationPreference:f}=qI(),{props:g,bind:y}=p(),v={primary:"bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800 ".concat(i?"opacity-50 cursor-not-allowed":""),secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 active:bg-gray-400 ".concat(i?"opacity-50 cursor-not-allowed":""),outline:"bg-transparent border border-primary-600 text-primary-600 hover:bg-primary-50 active:bg-primary-100 ".concat(i?"opacity-50 cursor-not-allowed":""),ghost:"bg-transparent text-primary-600 hover:bg-primary-50 active:bg-primary-100 ".concat(i?"opacity-50 cursor-not-allowed":"")};let x="";m&&"primary"===r&&(x="bg-".concat(m,"-600 text-white hover:bg-").concat(m,"-700 active:bg-").concat(m,"-800"));const b=(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});return(0,k.jsx)(gI.button,(0,S.A)((0,S.A)({type:l,className:"\n        ".concat("relative overflow-hidden rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2","\n        ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],"\n        ").concat(x||v[r],"\n        ").concat(o?"w-full":"","\n        ").concat(a,"\n      "),onClick:e=>{i||d||(f&&(e=>{const t=e.currentTarget,n=document.createElement("span"),r=Math.max(t.clientWidth,t.clientHeight),s=r/2;n.style.width=n.style.height="".concat(r,"px"),n.style.left="".concat(e.clientX-t.offsetLeft-s,"px"),n.style.top="".concat(e.clientY-t.offsetTop-s,"px"),n.classList.add("ripple");const o=t.getElementsByClassName("ripple")[0];o&&o.remove(),t.appendChild(n)})(e),null===n||void 0===n||n())},disabled:i||d},f?y:{}),{},{style:f?g:void 0,children:d?(0,k.jsxs)(k.Fragment,{children:[b,h||t]}):(0,k.jsxs)(k.Fragment,{children:[c&&"left"===u&&(0,k.jsx)("span",{children:c}),t,c&&"right"===u&&(0,k.jsx)("span",{children:c})]})}))},HI=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),GI=e=>{if(!e)return"N/A";return(e instanceof Date?e:e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},KI=(e,t)=>{if(!t)return 0;const n=e/t*100;return Math.min(n,100)},YI=t=>{let{plan:n,isCurrentPlan:r=!1,onSelectPlan:s,isProcessing:o=!1}=t;const[i,a]=(0,e.useState)(!1),{animationPreference:l}=qI(),c=(e=>{switch(e.toLowerCase()){case"starter":return{background:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",buttonBg:"bg-blue-600",buttonHover:"hover:bg-blue-700",badgeBg:"bg-blue-100",badgeText:"text-blue-800"};case"growth":return{background:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",buttonBg:"bg-purple-600",buttonHover:"hover:bg-purple-700",badgeBg:"bg-purple-100",badgeText:"text-purple-800"};case"professional":return{background:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700",buttonBg:"bg-indigo-600",buttonHover:"hover:bg-indigo-700",badgeBg:"bg-indigo-100",badgeText:"text-indigo-800"};default:return{background:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",buttonBg:"bg-gray-600",buttonHover:"hover:bg-gray-700",badgeBg:"bg-gray-100",badgeText:"text-gray-800"}}})(n.id),u=(e=>{switch(e.toLowerCase()){case"starter":return"Basic";case"growth":return"Popular";case"professional":return"Best Value";default:return""}})(n.id),d=Y_({transform:i&&l?"translateY(-8px)":"translateY(0px)",boxShadow:i&&l?"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",config:{tension:300,friction:20}}),{useStaggeredAnimation:h}=qI(),{ref:m,trail:p}=h(n.features,50);return(0,k.jsxs)(gI.div,{style:l?d:void 0,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),className:"\n        relative rounded-xl overflow-hidden border transition-colors\n        ".concat(r?"border-2 ".concat(c.border):"border-gray-200","\n        ").concat(i?c.background:"bg-white","\n      "),children:[u&&(0,k.jsx)("div",{className:"absolute top-0 right-0 py-1 px-3 text-xs font-medium rounded-bl-lg ".concat(c.badgeText," ").concat(c.badgeBg),children:u}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:n.name}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[HI(n.price,n.currency),(0,k.jsxs)("span",{className:"text-sm text-gray-700 font-medium",children:["/",n.billingCycle]})]}),n.description&&(0,k.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n.description})]}),(0,k.jsx)("ul",{className:"mb-6 space-y-2",ref:m,children:n.features.map(((e,t)=>(0,k.jsxs)(gI.li,{style:l?p[t]:void 0,className:"flex items-center ".concat(e.highlight?"font-medium":""),children:[e.included?(0,k.jsx)(SI,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0"}):(0,k.jsx)(_I,{className:"h-5 w-5 text-gray-400 mr-2 flex-shrink-0"}),(0,k.jsxs)("span",{className:"text-sm ".concat(e.included?"text-gray-800":"text-gray-500"),children:[e.name,e.tooltip&&(0,k.jsx)("span",{className:"ml-1 inline-block text-gray-400 cursor-help",title:e.tooltip,children:(0,k.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]})]},e.id)))}),(0,k.jsx)(WI,{onClick:()=>!r&&s(n.id),disabled:r||o,className:"\n            w-full py-2 px-4 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2\n            ".concat(r?"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-gray-500":"".concat(c.buttonBg," text-white ").concat(c.buttonHover," focus:ring-blue-500"),"\n          "),children:r?"Current Plan":n.ctaText||"Select Plan"}),"starter"!==n.name.toLowerCase()&&(0,k.jsxs)("div",{className:"mt-4 flex items-center justify-center text-xs text-gray-500",children:[(0,k.jsx)(PI,{className:"h-4 w-4 mr-1 text-green-500"}),(0,k.jsx)("span",{children:"Secure payment"})]})]})]})},QI=()=>{const[t,n]=(0,e.useState)(window.innerWidth>=768),[r,s]=(0,e.useState)(window.innerWidth<768),[o,i]=(0,e.useState)("detailed");(0,e.useEffect)((()=>{const e=()=>{const e=window.innerWidth;n(e>=768),s(e<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);return{isDetailedView:t,isCompactView:r,layoutPreference:o,toggleLayoutPreference:()=>{i((e=>"detailed"===e?"compact":"detailed"))},setLayoutPreference:i}},$I=e=>{let{plans:t,currentPlanId:n,onSelectPlan:r,isProcessing:s,onCompareClick:o,showComparisonTable:i,animation:a,animationPreference:l=!0}=e;const{isDetailedView:c}=QI();return t&&0!==t.length?(0,k.jsxs)(gI.div,{style:l?a:{},className:"mb-12",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Pricing Plans"}),(0,k.jsx)("p",{className:"text-gray-500 mt-1",children:"Choose the plan that fits your needs"})]}),(0,k.jsx)("button",{onClick:o,className:"flex items-center mt-4 md:mt-0 text-blue-600 hover:text-blue-800 transition-colors",children:i?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(bI,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Hide Comparison"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(jI,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Compare All Plans"})]})})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((e=>(0,k.jsx)(YI,{plan:e,isCurrentPlan:e.id===n,onSelectPlan:r,isProcessing:s},e.id)))})]}):(0,k.jsx)(gI.div,{style:l?a:{},className:"text-center py-12",children:(0,k.jsx)("p",{className:"text-gray-500",children:"No pricing plans available"})})},JI=t=>{let{plans:n,currentPlanId:r,onSelectPlan:s,animation:o,animationPreference:i=!0}=t;const[a,l]=(0,e.useState)(null),{useFadeIn:c}=qI(),{ref:u,props:d}=c(200),h=Y_({height:"Core Features"===a?"auto":0,opacity:"Core Features"===a?1:0,config:{tension:300,friction:20}}),m=Y_({height:"Advanced Features"===a?"auto":0,opacity:"Advanced Features"===a?1:0,config:{tension:300,friction:20}}),p=Y_({height:"Support"===a?"auto":0,opacity:"Support"===a?1:0,config:{tension:300,friction:20}}),f=e=>{switch(e){case"Core Features":return h;case"Advanced Features":return m;case"Support":return p;default:return{height:0,opacity:0}}};return(0,k.jsxs)(gI.div,{ref:u,style:i?o||d:void 0,className:"mt-12 bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,k.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Plan Comparison"}),(0,k.jsx)("p",{className:"text-gray-600 mt-1",children:"Compare features across different plans"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-4 border-b border-gray-200",children:[(0,k.jsx)("div",{className:"p-4 font-medium text-gray-700",children:"Feature"}),n.map((e=>(0,k.jsxs)("div",{className:"p-4 text-center",children:[(0,k.jsx)("h3",{className:"font-bold text-gray-900",children:e.name}),(0,k.jsxs)("p",{className:"text-gray-700 font-medium",children:[HI(e.price,e.currency),"/",e.billingCycle]}),e.id===r&&(0,k.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full",children:"Current Plan"})]},e.id)))]}),[{name:"Core Features",features:[{id:"coupons",name:"Active Coupons",included:{starter:!0,growth:!0,professional:!0},tooltip:"Number of coupons you can have active at once"},{id:"analytics",name:"Analytics",included:{starter:!1,growth:!0,professional:!0}},{id:"templates",name:"Coupon Templates",included:{starter:!0,growth:!0,professional:!0}}]},{name:"Advanced Features",features:[{id:"loyalty",name:"Loyalty Programs",included:{starter:!1,growth:!0,professional:!0}},{id:"communications",name:"Customer Communications",included:{starter:!1,growth:!0,professional:!0}},{id:"api",name:"API Access",included:{starter:!1,growth:!1,professional:!0},highlight:!0}]},{name:"Support",features:[{id:"email-support",name:"Email Support",included:{starter:!0,growth:!0,professional:!0}},{id:"priority-support",name:"Priority Support",included:{starter:!1,growth:!0,professional:!0}},{id:"dedicated-support",name:"Dedicated Account Manager",included:{starter:!1,growth:!1,professional:!0},highlight:!0}]}].map((e=>(0,k.jsxs)("div",{className:"border-b border-gray-200 last:border-b-0",children:[(0,k.jsxs)("button",{onClick:()=>{return t=e.name,void l(a===t?null:t);var t},className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 focus:outline-none",children:[(0,k.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform ".concat(a===e.name?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,k.jsx)(gI.div,{style:i?f(e.name):void 0,className:"overflow-hidden",children:e.features.map((e=>(0,k.jsxs)("div",{className:"grid grid-cols-4 py-3 px-4 ".concat(e.highlight?"bg-blue-50":""),children:[(0,k.jsx)("div",{className:"flex items-center",children:(0,k.jsx)("span",{className:"text-sm ".concat(e.highlight?"font-medium":""),title:e.tooltip||"",children:e.name})}),n.map((t=>{const n=t.name.toLowerCase(),r=e.included[n];return(0,k.jsx)("div",{className:"flex items-center justify-center",children:r?(0,k.jsx)(SI,{className:"h-5 w-5 text-green-500"}):(0,k.jsx)(_I,{className:"h-5 w-5 text-gray-400"})},"".concat(e.id,"-").concat(t.id))}))]},e.id)))})]},e.name))),(0,k.jsxs)("div",{className:"grid grid-cols-4 p-4 bg-gray-50 border-t border-gray-200",children:[(0,k.jsx)("div",{}),n.map((e=>(0,k.jsx)("div",{className:"flex justify-center",children:(0,k.jsx)("button",{onClick:()=>s(e.id),disabled:e.id===r,className:"\n                px-4 py-2 rounded-md text-sm font-medium\n                ".concat(e.id===r?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700","\n              "),children:e.id===r?"Current Plan":"Select Plan"})},"action-".concat(e.id))))]})]})},XI=["title","titleId"];function ZI(t,n){let{title:r,titleId:s}=t,o=E(t,XI);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const eT=e.forwardRef(ZI),tT=["title","titleId"];function nT(t,n){let{title:r,titleId:s}=t,o=E(t,tT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rT=e.forwardRef(nT),sT=["title","titleId"];function oT(t,n){let{title:r,titleId:s}=t,o=E(t,sT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const iT=e.forwardRef(oT),aT=["title","titleId"];function lT(t,n){let{title:r,titleId:s}=t,o=E(t,aT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const cT=e.forwardRef(lT),uT=["title","titleId"];function dT(t,n){let{title:r,titleId:s}=t,o=E(t,uT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const hT=e.forwardRef(dT),mT=e=>{let{subscription:t,usageMetrics:n,onUpgrade:r,onCancel:s,isProcessing:o,animation:i,animationPreference:a=!0}=e;if(!t)return(0,k.jsx)(gI.div,{style:a?i:{},className:"bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-100",children:(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Active Subscription"}),(0,k.jsx)("p",{className:"text-gray-500 mb-6",children:"Choose a plan below to get started"}),(0,k.jsx)(WI,{onClick:r,className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Choose a Plan"})]})});const l=(e=>{if(!e)return 0;const t=e instanceof Date?e:e.toDate?e.toDate():new Date(e),n=new Date,r=t.getTime()-n.getTime();return Math.ceil(r/864e5)})(t.renewalDate),c=l<=7&&l>0;return(0,k.jsxs)(gI.div,{style:a?i:{},className:"bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-100",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mr-3",children:["Current Plan: ",t.planName]}),(0,k.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"canceled":return"bg-red-100 text-red-800";case"past_due":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),(0,k.jsxs)("p",{className:"text-gray-500",children:[t.currency," ",t.amount.toFixed(2),"/month"]})]}),(0,k.jsxs)("div",{className:"flex mt-4 md:mt-0 space-x-3",children:["active"===t.status&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(WI,{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center",disabled:o,children:[(0,k.jsx)(eT,{className:"h-4 w-4 mr-1"}),"Upgrade"]}),(0,k.jsx)(WI,{onClick:()=>s(t.id),className:"px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",disabled:o,children:"Cancel Plan"})]}),"canceled"===t.status&&(0,k.jsx)(WI,{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:o,children:"Reactivate"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(rT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Started On"})]}),(0,k.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:GI(t.startDate)})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(rT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Renewal Date"})]}),(0,k.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:GI(t.renewalDate)}),c&&(0,k.jsxs)("div",{className:"flex items-center text-yellow-600 mt-1 text-sm",children:[(0,k.jsx)(iT,{className:"h-4 w-4 mr-1"}),(0,k.jsxs)("span",{children:["Renews in ",l," days"]})]})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(cT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Status"})]}),(0,k.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"active"===t.status?"Active":"Canceled"}),"canceled"===t.status&&(0,k.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["Access until ",GI(t.endDate)]})]})]}),n&&(0,k.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Usage Metrics"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(hT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Customers"})]}),(0,k.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[n.customers.used," / ",n.customers.limit]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:(0,k.jsx)("div",{className:"h-1 bg-blue-500 rounded-full transition-all duration-500",style:{width:"".concat(KI(n.customers.used,n.customers.limit),"%")}})})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(hT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Coupons"})]}),(0,k.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[n.coupons.used," / ",n.coupons.limit]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:(0,k.jsx)("div",{className:"h-1 bg-green-500 rounded-full transition-all duration-500",style:{width:"".concat(KI(n.coupons.used,n.coupons.limit),"%")}})})]}),(0,k.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,k.jsx)(hT,{className:"h-5 w-5 mr-2"}),(0,k.jsx)("span",{children:"Communications"})]}),(0,k.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:[n.communications.used," / ",n.communications.limit]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1 mt-2",children:(0,k.jsx)("div",{className:"h-1 bg-purple-500 rounded-full transition-all duration-500",style:{width:"".concat(KI(n.communications.used,n.communications.limit),"%")}})})]})]})]})]})},pT=["title","titleId"];function fT(t,n){let{title:r,titleId:s}=t,o=E(t,pT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const gT=e.forwardRef(fT),yT=e=>{let{history:t,className:n="",animation:r,animationPreference:s=!0}=e;const{useStaggeredAnimation:o}=qI(),{ref:i,trail:a}=o(t,50);return 0===t.length?(0,k.jsxs)(gI.div,{style:s?r:void 0,className:"bg-white rounded-xl border border-gray-200 p-6 ".concat(n),children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payment History"}),(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,k.jsx)(gT,{className:"h-8 w-8 text-gray-400"})}),(0,k.jsx)("p",{className:"text-gray-700 font-medium",children:"No payment history available"}),(0,k.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Your payment history will appear here once you upgrade to a paid plan."})]})]}):(0,k.jsxs)(gI.div,{style:s?r:void 0,className:"bg-white rounded-xl border border-gray-200 p-6 ".concat(n),children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payment History"}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,k.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan"}),(0,k.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,k.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,k.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt"})]})}),(0,k.jsx)("tbody",{ref:i,className:"divide-y divide-gray-200",children:t.map(((e,t)=>(0,k.jsxs)(gI.tr,{style:s?a[t]:void 0,children:[(0,k.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:GI(e.paymentDate)}),(0,k.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:e.planName}),(0,k.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:HI(e.amount,e.currency)}),(0,k.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-medium rounded-full \n                    ".concat("paid"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status})}),(0,k.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:e.receiptUrl?(0,k.jsx)("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-900",children:"View"}):(0,k.jsx)("span",{className:"text-gray-400",children:"N/A"})})]},e.id)))})]})})]})},vT=["title","titleId"];function xT(t,n){let{title:r,titleId:s}=t,o=E(t,vT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const bT=e.forwardRef(xT),wT=["title","titleId"];function NT(t,n){let{title:r,titleId:s}=t,o=E(t,wT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const jT=e.forwardRef(NT),kT=["title","titleId"];function CT(t,n){let{title:r,titleId:s}=t,o=E(t,kT);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const ST=e.forwardRef(CT),AT=()=>{const{pricingPlans:t,subscription:n,billingHistory:r,usageMetrics:s,isLoading:o,error:i,refreshBillingData:a}=(()=>{const t=(0,e.useContext)(IS.c),n=null===t||void 0===t?void 0:t.user,r=null===t||void 0===t?void 0:t.businessProfile,[s,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(null),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)(null),[h,m]=(0,e.useState)(!0),[p,f]=(0,e.useState)(null);return(0,e.useEffect)((()=>{(async()=>{if(n&&r)try{m(!0);const[e,t,n,s]=await Promise.all([TS.getPricingPlans(),TS.getUserSubscription(r.businessId),TS.getBillingHistory(r.businessId),TS.getUsageMetrics(r.businessId)]);if(0===e.length){await RS();const e=await TS.getPricingPlans();o(e)}else o(e);a(t),c(n),d(s),f(null)}catch(zZ){console.error("Error fetching billing data:",zZ),f(zZ.message||"Failed to load billing data")}finally{m(!1)}else m(!1)})()}),[n,r]),{pricingPlans:s,subscription:i,billingHistory:l,usageMetrics:u,isLoading:h,error:p,refreshBillingData:async()=>{if(n&&r)try{m(!0);const[e,t,n,s]=await Promise.all([TS.getPricingPlans(),TS.getUserSubscription(r.businessId),TS.getBillingHistory(r.businessId),TS.getUsageMetrics(r.businessId)]);if(0===e.length){await RS();const e=await TS.getPricingPlans();o(e)}else o(e);a(t),c(n),d(s),f(null)}catch(zZ){console.error("Error fetching billing data:",zZ),f(zZ.message||"Failed to load billing data")}finally{m(!1)}}}})(),{upgradeSubscription:l,cancelSubscription:c,isProcessing:u,success:d,resetState:h}=(()=>{var t;const n=(0,e.useContext)(IS.c),r=null===n||void 0===n?void 0:n.user,s=null===n||void 0===n||null===(t=n.businessProfile)||void 0===t?void 0:t.businessId,[o,i]=(0,e.useState)(null),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),f=(e,t)=>{const n=e.features.find((e=>e.name.toLowerCase().includes(t.toLowerCase())));if(!n)return 0;const r=n.name.match(/(\d+)/);return r?parseInt(r[0],10):0};return(0,e.useEffect)((()=>{(async()=>{if(r&&s)try{l(!0);const e=(0,sl.rJ)(rl.db,"subscriptions"),t=(0,sl.P)(e,(0,sl._M)("businessId","==",s),(0,sl._M)("status","==","active"),(0,sl.My)("startDate","desc"),(0,sl.AB)(1)),n=await(0,sl.GG)(t);if(n.empty){const e=await TS.getPricingPlans(),t=e.find((e=>0===e.price))||e[0];if(t){const e=t,n={businessId:s,userId:r.uid,planId:e.id,planName:e.name,status:"active",startDate:new Date,endDate:new Date(Date.now()+31536e6),renewalDate:new Date(Date.now()+2592e6),amount:e.price,currency:e.currency,features:e.features.filter((e=>e.included)).map((e=>e.name)),limits:{customers:f(e,"customers"),coupons:f(e,"coupons"),communications:f(e,"communications")}},o=(0,sl.rJ)(rl.db,"subscriptions");await(0,sl.gS)(o,n),i(e.id)}}else{const e=(0,S.A)((0,S.A)({id:n.docs[0].id},n.docs[0].data()),{},{planId:n.docs[0].data().planId||""});i(e.planId)}u(null)}catch(zZ){console.error("Error fetching subscription data:",zZ),u(zZ.message||"Failed to load subscription data")}finally{l(!1)}else l(!1)})()}),[r,s]),{currentPlan:o,isLoading:a,error:c,upgradeSubscription:async e=>{if(!r||!s)return{success:!1};h(!0);try{return await new Promise((e=>setTimeout(e,1e3))),i(e),p(!0),{success:!0}}catch(zZ){return u("Failed to upgrade subscription"),{success:!1}}finally{h(!1)}},cancelSubscription:async()=>{if(!r||!s)return{success:!1};h(!0);try{return await new Promise((e=>setTimeout(e,1e3))),p(!0),{success:!0}}catch(zZ){return u("Failed to cancel subscription"),{success:!1}}finally{h(!1)}},isProcessing:d,success:m,resetState:()=>{h(!1),p(!1)}}})(),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(""),[y,v]=(0,e.useState)(!1),[x,b]=(0,e.useState)(!1),w=async e=>{var n;if(u)return;const r="string"===typeof e?e:e.id,s="string"===typeof e?(null===(n=t.find((t=>t.id===e)))||void 0===n?void 0:n.name)||"selected":e.name;(await l(r)).success&&(g("You've successfully upgraded to the ".concat(s," plan!")),p(!0),await a())},N=[{id:"secure",icon:(0,k.jsx)(bT,{className:"h-6 w-6"}),text:"Secure Payments",tooltip:"Your payment information is encrypted and secure"},{id:"cancel",icon:(0,k.jsx)(jT,{className:"h-6 w-6"}),text:"Cancel Anytime",tooltip:"No long-term contracts, cancel your subscription anytime"},{id:"guarantee",icon:(0,k.jsx)(ST,{className:"h-6 w-6"}),text:"30-Day Guarantee",tooltip:"Not satisfied? Get a full refund within 30 days"}];return o?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):i?(0,k.jsxs)("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:[(0,k.jsxs)("p",{children:["Error loading billing information: ",i]}),(0,k.jsx)("button",{onClick:a,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Try Again"})]}):(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,k.jsxs)("div",{className:"text-center mb-12",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Subscription & Billing"}),(0,k.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Choose the perfect plan for your business needs with transparent pricing and flexible options."}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsxs)("button",{className:"text-sm text-gray-500 hover:text-gray-700 flex items-center mx-auto",children:[(0,k.jsxs)("span",{className:"relative inline-block w-10 h-5 mr-2",children:[(0,k.jsx)("input",{type:"checkbox",checked:!0,className:"opacity-0 w-0 h-0"}),(0,k.jsx)("span",{className:"absolute cursor-pointer top-0 left-0 right-0 bottom-0 rounded-full transition-colors duration-300 bg-blue-500",children:(0,k.jsx)("span",{className:"absolute h-4 w-4 left-0.5 bottom-0.5 bg-white rounded-full transition-transform duration-300 transform translate-x-5"})})]}),"Animations On"]})})]}),(0,k.jsx)("div",{className:"mb-16",children:n?(0,k.jsx)(mT,{subscription:n,usageMetrics:s||void 0,onUpgrade:()=>window.scrollTo({top:500,behavior:"smooth"}),onCancel:async e=>{if(u||!n)return;(await c()).success&&await a()},isProcessing:u}):(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8 border border-gray-100",children:(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Active Subscription"}),(0,k.jsx)("p",{className:"text-gray-500 mb-6",children:"Choose a plan below to get started"}),(0,k.jsx)("button",{onClick:()=>window.scrollTo({top:500,behavior:"smooth"}),className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Choose a Plan"})]})})}),(0,k.jsx)("div",{className:"mb-16",children:(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:N.map((e=>(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 flex items-center justify-center border border-gray-100",children:[(0,k.jsx)("div",{className:"mr-4 bg-blue-50 p-3 rounded-full",children:e.icon}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:e.text}),e.tooltip&&(0,k.jsx)("p",{className:"text-sm text-gray-500",children:e.tooltip})]})]},e.id)))})}),(0,k.jsxs)("div",{className:"mb-16",children:[(0,k.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Choose Your Plan"}),(0,k.jsx)("p",{className:"text-gray-500 mt-1",children:"Select the plan that fits your needs"})]})}),t.length>0?(0,k.jsx)($I,{plans:t,currentPlanId:null===n||void 0===n?void 0:n.planId,onSelectPlan:w,isProcessing:u,onCompareClick:()=>v(!y),showComparisonTable:y}):(0,k.jsxs)("div",{className:"text-center py-8 bg-white rounded-lg shadow-md",children:[(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No Plans Available"}),(0,k.jsx)("p",{className:"text-gray-500 mb-6",children:"Please click the button below to load pricing plans."}),(0,k.jsx)("button",{onClick:async()=>{try{b(!0),await(async()=>{try{const e=(0,sl.rJ)(rl.db,"pricing_plans"),t=await(0,sl.GG)(e),n=(0,sl.wP)(rl.db);return t.forEach((e=>{n.delete(e.ref)})),await n.commit(),console.log("Existing pricing plans deleted"),await RS(),Promise.resolve()}catch(i){throw console.error("Error refreshing pricing plans:",i),i}})(),await a(),g("Pricing plans have been successfully loaded!"),p(!0)}catch(i){console.error("Error refreshing pricing plans:",i)}finally{b(!1)}},className:"px-5 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:x,children:x?"Loading...":"Load Pricing Plans"})]})]}),y&&t.length>0&&(0,k.jsx)(JI,{plans:t,currentPlanId:null===n||void 0===n?void 0:n.planId,onSelectPlan:w}),r&&r.length>0&&(0,k.jsx)("div",{className:"mt-16",children:(0,k.jsx)(yT,{history:r})}),(0,k.jsx)(yI,{show:m,message:f,onComplete:()=>{p(!1),h()}})]})};function ET(e){let{props:t,name:n,defaultTheme:r,themeId:s}=e,o=qj(r);return s&&(o=o[s]||o),function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?fN(t.components[n].defaultProps,r):r}({theme:o,name:n,props:t})}const _T=zb(),IT=["className","component","disableGutters","fixed","maxWidth","classes"],TT=Ib(),PT=_T("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(Tx(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),RT=e=>ET({props:e,name:"MuiContainer",defaultTheme:TT});const DT=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=PT,useThemeProps:r=RT,componentName:s="MuiContainer"}=t,o=n((e=>{let{theme:t,ownerState:n}=e;return(0,S.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,s=t.breakpoints.values[r];return 0!==s&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(s).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,S.A)((0,S.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}}),n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})})),i=e.forwardRef((function(e,t){const n=r(e),{className:i,component:a="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg",classes:d}=n,h=E(n,IT),m=(0,S.A)((0,S.A)({},n),{},{component:a,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:s,maxWidth:o}=e;return Sy({root:["root",o&&"maxWidth".concat(Tx(String(o))),r&&"fixed",s&&"disableGutters"]},(e=>kN(t,e)),n)})(m,s);return(0,k.jsx)(o,(0,S.A)({as:a,ownerState:m,className:js(p.root,i),ref:t},h))}));return i}({createStyledComponent:hN("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat(xN(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>vN({props:e,name:"MuiContainer"})}),MT=DT;function LT(){const e=qj(lN);return e[cN]||e}function OT(e){return kN("MuiPaper",e)}CN("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const FT=["className","component","elevation","square","variant"],BT=hN("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(pN((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:"1px solid ".concat((t.vars||t).palette.divider)}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),UT=e.forwardRef((function(e,t){var n;const r=vN({props:e,name:"MuiPaper"}),s=LT(),{className:o,component:i="div",elevation:a=1,square:l=!1,variant:c="elevation"}=r,u=E(r,FT),d=(0,S.A)((0,S.A)({},r),{},{component:i,elevation:a,square:l,variant:c}),h=(e=>{const{square:t,elevation:n,variant:r,classes:s}=e;return Sy({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},OT,s)})(d);return(0,k.jsx)(BT,(0,S.A)((0,S.A)({as:i,ownerState:d,className:js(h.root,o),ref:t},u),{},{style:(0,S.A)((0,S.A)({},"elevation"===c&&(0,S.A)((0,S.A)({"--Paper-shadow":(s.vars||s).shadows[a]},s.vars&&{"--Paper-overlay":null===(n=s.vars.overlays)||void 0===n?void 0:n[a]}),!s.vars&&"dark"===s.palette.mode&&{"--Paper-overlay":"linear-gradient(".concat(Jb("#fff",qw(a)),", ").concat(Jb("#fff",qw(a)),")")})),u.style)}))}));function zT(t,n){var r,s;return e.isValidElement(t)&&-1!==n.indexOf(null!==(r=t.type.muiName)&&void 0!==r?r:null===(s=t.type)||void 0===s||null===(s=s._payload)||void 0===s||null===(s=s.value)||void 0===s?void 0:s.muiName)}const VT=(e,t,n)=>{const r=e.keys[0];if(Array.isArray(t))t.forEach(((t,r)=>{n(((t,n)=>{r<=e.keys.length-1&&(0===r?Object.assign(t,n):t[e.up(e.keys[r])]=n)}),t)}));else if(t&&"object"===typeof t){(Object.keys(t).length>e.keys.length?e.keys:(s=e.keys,o=Object.keys(t),s.filter((e=>o.includes(e))))).forEach((s=>{if(e.keys.includes(s)){const o=t[s];void 0!==o&&n(((t,n)=>{r===s?Object.assign(t,n):t[e.up(s)]=n}),o)}}))}else"number"!==typeof t&&"string"!==typeof t||n(((e,t)=>{Object.assign(e,t)}),t);var s,o};function qT(e){return"--Grid-".concat(e,"Spacing")}function WT(e){return"--Grid-parent-".concat(e,"Spacing")}const HT="--Grid-columns",GT="--Grid-parent-columns",KT=e=>{let{theme:t,ownerState:n}=e;const r={};return VT(t.breakpoints,n.size,((e,t)=>{let n={};"grow"===t&&(n={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(n={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"===typeof t&&(n={flexGrow:0,flexBasis:"auto",width:"calc(100% * ".concat(t," / var(").concat(GT,") - (var(").concat(GT,") - ").concat(t,") * (var(").concat(WT("column"),") / var(").concat(GT,")))")}),e(r,n)})),r},YT=e=>{let{theme:t,ownerState:n}=e;const r={};return VT(t.breakpoints,n.offset,((e,t)=>{let n={};"auto"===t&&(n={marginLeft:"auto"}),"number"===typeof t&&(n={marginLeft:0===t?"0px":"calc(100% * ".concat(t," / var(").concat(GT,") + var(").concat(WT("column"),") * ").concat(t," / var(").concat(GT,"))")}),e(r,n)})),r},QT=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={[HT]:12};return VT(t.breakpoints,n.columns,((e,t)=>{const n=null!==t&&void 0!==t?t:12;e(r,{[HT]:n,"> *":{[GT]:n}})})),r},$T=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return VT(t.breakpoints,n.rowSpacing,((e,n)=>{var s;const o="string"===typeof n?n:null===(s=t.spacing)||void 0===s?void 0:s.call(t,n);e(r,{[qT("row")]:o,"> *":{[WT("row")]:o}})})),r},JT=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return VT(t.breakpoints,n.columnSpacing,((e,n)=>{var s;const o="string"===typeof n?n:null===(s=t.spacing)||void 0===s?void 0:s.call(t,n);e(r,{[qT("column")]:o,"> *":{[WT("column")]:o}})})),r},XT=e=>{let{theme:t,ownerState:n}=e;if(!n.container)return{};const r={};return VT(t.breakpoints,n.direction,((e,t)=>{e(r,{flexDirection:t})})),r},ZT=e=>{let{ownerState:t}=e;return(0,S.A)({minWidth:0,boxSizing:"border-box"},t.container&&(0,S.A)((0,S.A)({display:"flex",flexWrap:"wrap"},t.wrap&&"wrap"!==t.wrap&&{flexWrap:t.wrap}),{},{gap:"var(".concat(qT("row"),") var(").concat(qT("column"),")")}))},eP=e=>{const t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;!1!==r&&void 0!==r&&t.push("grid-".concat(n,"-").concat(String(r)))})),t},tP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"xs";function n(e){return void 0!==e&&("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e&&e>0)}if(n(e))return["spacing-".concat(t,"-").concat(String(e))];if("object"===typeof e&&!Array.isArray(e)){const t=[];return Object.entries(e).forEach((e=>{let[r,s]=e;n(s)&&t.push("spacing-".concat(r,"-").concat(String(s)))})),t}return[]},nP=e=>void 0===e?[]:"object"===typeof e?Object.entries(e).map((e=>{let[t,n]=e;return"direction-".concat(t,"-").concat(n)})):["direction-xs-".concat(String(e))];const rP=["className","children","columns","container","component","direction","wrap","size","offset","spacing","rowSpacing","columnSpacing","unstable_level"],sP=Ib(),oP=_T("div",{name:"MuiGrid",slot:"Root"});function iP(e){return ET({props:e,name:"MuiGrid",defaultTheme:sP})}const aP=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:n=oP,useThemeProps:r=iP,useTheme:s=qj,componentName:o="MuiGrid"}=t;function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const r={};return null===e||(Array.isArray(e)?e.forEach(((e,s)=>{null!==e&&n(e)&&t.keys[s]&&(r[t.keys[s]]=e)})):"object"===typeof e?Object.keys(e).forEach((t=>{const s=e[t];null!==s&&void 0!==s&&n(s)&&(r[t]=s)})):r[t.keys[0]]=e),r}const a=n(QT,JT,$T,KT,XT,ZT,YT),l=e.forwardRef((function(t,n){var l,c,u,d,h,m;const p=s(),f=Uj(r(t));!function(e,t){const n=[];void 0!==e.item&&(delete e.item,n.push("item")),void 0!==e.zeroMinWidth&&(delete e.zeroMinWidth,n.push("zeroMinWidth")),t.keys.forEach((t=>{void 0!==e[t]&&(n.push(t),delete e[t])}))}(f,p.breakpoints);const{className:g,children:y,columns:v=12,container:x=!1,component:b="div",direction:w="row",wrap:N="wrap",size:j={},offset:C={},spacing:A=0,rowSpacing:_=A,columnSpacing:I=A,unstable_level:T=0}=f,P=E(f,rP),R=i(j,p.breakpoints,(e=>!1!==e)),D=i(C,p.breakpoints),M=null!==(l=t.columns)&&void 0!==l?l:T?void 0:v,L=null!==(c=t.spacing)&&void 0!==c?c:T?void 0:A,O=null!==(u=null!==(d=t.rowSpacing)&&void 0!==d?d:t.spacing)&&void 0!==u?u:T?void 0:_,F=null!==(h=null!==(m=t.columnSpacing)&&void 0!==m?m:t.spacing)&&void 0!==h?h:T?void 0:I,B=(0,S.A)((0,S.A)({},f),{},{level:T,columns:M,container:x,direction:w,wrap:N,spacing:L,rowSpacing:O,columnSpacing:F,size:R,offset:D}),U=((e,t)=>{const{container:n,direction:r,spacing:s,wrap:i,size:a}=e;return Sy({root:["root",n&&"container","wrap"!==i&&"wrap-xs-".concat(String(i)),...nP(r),...eP(a),...n?tP(s,t.breakpoints.keys[0]):[]]},(e=>kN(o,e)),{})})(B,p);return(0,k.jsx)(a,(0,S.A)((0,S.A)({ref:n,as:b,ownerState:B,className:js(U.root,g)},P),{},{children:e.Children.map(y,(t=>{var n,r;return e.isValidElement(t)&&zT(t,["Grid"])&&x&&t.props.container?e.cloneElement(t,{unstable_level:null!==(n=null===(r=t.props)||void 0===r?void 0:r.unstable_level)&&void 0!==n?n:T+1}):t}))}))}));return l.muiName="Grid",l}({createStyledComponent:hN("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>vN({props:e,name:"MuiGrid"}),useTheme:LT});const lP=aP;let cP=0;const uP=(0,S.A)({},t).useId;function dP(t){if(void 0!==uP){const e=uP();return null!==t&&void 0!==t?t:e}return function(t){const[n,r]=e.useState(t),s=t||n;return e.useEffect((()=>{null==n&&(cP+=1,r("mui-".concat(cP)))}),[n]),s}(t)}const hP=dP;function mP(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}function pP(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=e.useRef(void 0),o=e.useCallback((e=>{const t=n.map((t=>{if(null==t)return null;if("function"===typeof t){const n=t,r=n(e);return"function"===typeof r?r:()=>{n(null)}}return t.current=e,()=>{t.current=null}}));return()=>{t.forEach((e=>null===e||void 0===e?void 0:e()))}}),n);return e.useMemo((()=>n.every((e=>null==e))?null:e=>{s.current&&(s.current(),s.current=void 0),null!=e&&(s.current=o(e))}),n)}const fP=pP,gP="undefined"!==typeof window?e.useLayoutEffect:e.useEffect;const yP=function(t){const n=e.useRef(t);return gP((()=>{n.current=t})),e.useRef((function(){return(0,n.current)(...arguments)})).current},vP=yP;var xP=n(4467);const bP={};function wP(t,n){const r=e.useRef(bP);return r.current===bP&&(r.current=t(n)),r}class NP{static create(){return new NP}static use(){const t=wP(NP.create).current,[n,r]=e.useState(!1);return t.shouldMount=n,t.setShouldMount=r,e.useEffect(t.mountEffect,[n]),t}constructor(){(0,xP.A)(this,"mountEffect",(()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())})),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.start(...t)}))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.stop(...t)}))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>{var e;return null===(e=this.ref.current)||void 0===e?void 0:e.pulsate(...t)}))}}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jP(e,t)}function kP(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jP(e,t)}const CP=e.createContext(null);function SP(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function AP(e,t,n){return null!=n[t]?n[t]:e.props[t]}function EP(t,n,r){var s=SP(t.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,s=Object.create(null),o=[];for(var i in e)i in t?o.length&&(s[i]=o,o=[]):o.push(i);var a={};for(var l in t){if(s[l])for(r=0;r<s[l].length;r++){var c=s[l][r];a[s[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(n,s);return Object.keys(o).forEach((function(i){var a=o[i];if((0,e.isValidElement)(a)){var l=i in n,c=i in s,u=n[i],d=(0,e.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,e.isValidElement)(u)&&(o[i]=(0,e.cloneElement)(a,{onExited:r.bind(null,a),in:u.props.in,exit:AP(a,"exit",t),enter:AP(a,"enter",t)})):o[i]=(0,e.cloneElement)(a,{in:!1}):o[i]=(0,e.cloneElement)(a,{onExited:r.bind(null,a),in:!0,exit:AP(a,"exit",t),enter:AP(a,"enter",t)})}})),o}var _P=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},IP=function(t){function n(e,n){var r,s=(r=t.call(this,e,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},r}kP(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,s,o=n.children,i=n.handleExited;return{children:n.firstRender?(r=t,s=i,SP(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:s.bind(null,t),in:!0,appear:AP(t,"appear",r),enter:AP(t,"enter",r),exit:AP(t,"exit",r)})}))):EP(t,o,i),firstRender:!1}},r.handleExited=function(e,t){var n=SP(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=ox({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,s=A(t,["component","childFactory"]),o=this.state.contextValue,i=_P(this.state.children).map(r);return delete s.appear,delete s.enter,delete s.exit,null===n?e.createElement(CP.Provider,{value:o},i):e.createElement(CP.Provider,{value:o},e.createElement(n,s,i))},n}(e.Component);IP.propTypes={},IP.defaultProps={component:"div",childFactory:function(e){return e}};const TP=IP,PP=[];class RP{constructor(){(0,xP.A)(this,"currentId",null),(0,xP.A)(this,"clear",(()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)})),(0,xP.A)(this,"disposeEffect",(()=>this.clear))}static create(){return new RP}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function DP(){const t=wP(RP.create).current;var n;return n=t.disposeEffect,e.useEffect(n,PP),t}const MP=function(t){const{className:n,classes:r,pulsate:s=!1,rippleX:o,rippleY:i,rippleSize:a,in:l,onExited:c,timeout:u}=t,[d,h]=e.useState(!1),m=js(n,r.ripple,r.rippleVisible,s&&r.ripplePulsate),p={width:a,height:a,top:-a/2+i,left:-a/2+o},f=js(r.child,d&&r.childLeaving,s&&r.childPulsate);return l||d||h(!0),e.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,k.jsx)("span",{className:m,style:p,children:(0,k.jsx)("span",{className:f})})};const LP=CN("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),OP=["center","classes","className"];var FP,BP,UP,zP;const VP=sx(FP||(FP=(0,Cy.A)(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))),qP=sx(BP||(BP=(0,Cy.A)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))),WP=sx(UP||(UP=(0,Cy.A)(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))),HP=hN("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),GP=hN(MP,{name:"MuiTouchRipple",slot:"Ripple"})(zP||(zP=(0,Cy.A)(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])),LP.rippleVisible,VP,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),LP.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),LP.child,LP.childLeaving,qP,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),LP.childPulsate,WP,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),KP=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:i}=r,a=E(r,OP),[l,c]=e.useState([]),u=e.useRef(0),d=e.useRef(null);e.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=e.useRef(!1),m=DP(),p=e.useRef(null),f=e.useRef(null),g=e.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:s,cb:i}=e;c((e=>[...e,(0,k.jsx)(GP,{classes:{ripple:js(o.ripple,LP.ripple),rippleVisible:js(o.rippleVisible,LP.rippleVisible),ripplePulsate:js(o.ripplePulsate,LP.ripplePulsate),child:js(o.child,LP.child),childLeaving:js(o.childLeaving,LP.childLeaving),childPulsate:js(o.childPulsate,LP.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:s},u.current)])),u.current+=1,d.current=i}),[o]),y=e.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=s||t.pulsate,fakeElement:i=!1}=t;if("mousedown"===(null===e||void 0===e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null===e||void 0===e?void 0:e.type)&&(h.current=!0);const a=i?null:f.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!==e&&void 0!==e&&e.touches?null===p.current&&(p.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},m.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[s,g,m]),v=e.useCallback((()=>{y({},{pulsate:!0})}),[y]),x=e.useCallback(((e,t)=>{if(m.clear(),"touchend"===(null===e||void 0===e?void 0:e.type)&&p.current)return p.current(),p.current=null,void m.start(0,(()=>{x(e,t)}));p.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[m]);return e.useImperativeHandle(n,(()=>({pulsate:v,start:y,stop:x})),[v,y,x]),(0,k.jsx)(HP,(0,S.A)((0,S.A)({className:js(LP.root,o.root,i),ref:f},a),{},{children:(0,k.jsx)(TP,{component:null,exit:!0,children:l})}))})),YP=KP;function QP(e){return kN("MuiButtonBase",e)}const $P=CN("MuiButtonBase",["root","disabled","focusVisible"]),JP=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],XP=hN("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat($P.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});function ZP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vP((s=>(n&&n(s),r||e[t](s),!0)))}const eR=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:i,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:m,LinkComponent:p="a",onBlur:f,onClick:g,onContextMenu:y,onDragLeave:v,onFocus:x,onFocusVisible:b,onKeyDown:w,onKeyUp:N,onMouseDown:j,onMouseLeave:C,onMouseUp:A,onTouchEnd:_,onTouchMove:I,onTouchStart:T,tabIndex:P=0,TouchRippleProps:R,touchRippleRef:D,type:M}=r,L=E(r,JP),O=e.useRef(null),F=NP.use(),B=fP(F.ref,D),[U,z]=e.useState(!1);c&&U&&z(!1),e.useImperativeHandle(s,(()=>({focusVisible:()=>{z(!0),O.current.focus()}})),[]);const V=F.shouldMount&&!u&&!c;e.useEffect((()=>{U&&h&&!u&&F.pulsate()}),[u,h,U,F]);const q=ZP(F,"start",j,d),W=ZP(F,"stop",y,d),H=ZP(F,"stop",v,d),G=ZP(F,"stop",A,d),K=ZP(F,"stop",(e=>{U&&e.preventDefault(),C&&C(e)}),d),Y=ZP(F,"start",T,d),Q=ZP(F,"stop",_,d),$=ZP(F,"stop",I,d),J=ZP(F,"stop",(e=>{mP(e.target)||z(!1),f&&f(e)}),!1),X=vP((e=>{O.current||(O.current=e.currentTarget),mP(e.target)&&(z(!0),b&&b(e)),x&&x(e)})),Z=()=>{const e=O.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},ee=vP((e=>{h&&!e.repeat&&U&&" "===e.key&&F.stop(e,(()=>{F.start(e)})),e.target===e.currentTarget&&Z()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&Z()&&"Enter"===e.key&&!c&&(e.preventDefault(),g&&g(e))})),te=vP((e=>{h&&" "===e.key&&U&&!e.defaultPrevented&&F.stop(e,(()=>{F.pulsate(e)})),N&&N(e),g&&e.target===e.currentTarget&&Z()&&" "===e.key&&!e.defaultPrevented&&g(e)}));let ne=l;"button"===ne&&(L.href||L.to)&&(ne=p);const re={};"button"===ne?(re.type=void 0===M?"button":M,re.disabled=c):(L.href||L.to||(re.role="button"),c&&(re["aria-disabled"]=c));const se=fP(n,O),oe=(0,S.A)((0,S.A)({},r),{},{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:P,focusVisible:U}),ie=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:s}=e,o=Sy({root:["root",t&&"disabled",n&&"focusVisible"]},QP,s);return n&&r&&(o.root+=" ".concat(r)),o})(oe);return(0,k.jsxs)(XP,(0,S.A)((0,S.A)((0,S.A)({as:ne,className:js(ie.root,a),ownerState:oe,onBlur:J,onClick:g,onContextMenu:W,onFocus:X,onKeyDown:ee,onKeyUp:te,onMouseDown:q,onMouseLeave:K,onMouseUp:G,onDragLeave:H,onTouchEnd:Q,onTouchMove:$,onTouchStart:Y,ref:se,tabIndex:c?-1:P,type:M},re),L),{},{children:[i,V?(0,k.jsx)(YP,(0,S.A)({ref:B,center:o},R)):null]}))}));function tR(e){return kN("MuiButton",e)}const nR=CN("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]);const rR=e.createContext({});const sR=e.createContext(void 0),oR=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","id","loading","loadingIndicator","loadingPosition","size","startIcon","type","variant"],iR=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],aR=hN(eR,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(xN(n.color))],t["size".concat(xN(n.size))],t["".concat(n.variant,"Size").concat(xN(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,S.A)((0,S.A)({},t.typography.button),{},{minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},["&.".concat(nR.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},["&.".concat(nR.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]},["&.".concat(nR.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",["&.".concat(nR.disabled)]:{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.5)"):Jb(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(nR.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(nR.disabled)]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),["&.".concat(nR.loading)]:{color:"transparent"}}}]})}))),lR=hN("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t["iconSize".concat(xN(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...iR]}})),cR=hN("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t["iconSize".concat(xN(n.size))]]}})((e=>{let{theme:t}=e;return{display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...iR]}})),uR=hN("span",{name:"MuiButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]}})),dR=hN("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),hR=e.forwardRef((function(t,n){const r=e.useContext(rR),s=e.useContext(sR),o=vN({props:fN(r,t),name:"MuiButton"}),{children:i,color:a="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:m,focusVisibleClassName:p,fullWidth:f=!1,id:g,loading:y=null,loadingIndicator:v,loadingPosition:x="center",size:b="medium",startIcon:w,type:N,variant:j="text"}=o,C=E(o,oR),A=hP(g),_=null!==v&&void 0!==v?v:(0,k.jsx)(zN,{"aria-labelledby":A,color:"inherit",size:16}),I=(0,S.A)((0,S.A)({},o),{},{color:a,component:l,disabled:u,disableElevation:d,disableFocusRipple:h,fullWidth:f,loading:y,loadingIndicator:_,loadingPosition:x,size:b,type:N,variant:j}),T=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:s,variant:o,loading:i,loadingPosition:a,classes:l}=e,c=Sy({root:["root",i&&"loading",o,"".concat(o).concat(xN(t)),"size".concat(xN(s)),"".concat(o,"Size").concat(xN(s)),"color".concat(xN(t)),n&&"disableElevation",r&&"fullWidth",i&&"loadingPosition".concat(xN(a))],startIcon:["icon","startIcon","iconSize".concat(xN(s))],endIcon:["icon","endIcon","iconSize".concat(xN(s))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},tR,l);return(0,S.A)((0,S.A)({},l),c)})(I),P=(w||y&&"start"===x)&&(0,k.jsx)(lR,{className:T.startIcon,ownerState:I,children:w||(0,k.jsx)(dR,{className:T.loadingIconPlaceholder,ownerState:I})}),R=(m||y&&"end"===x)&&(0,k.jsx)(cR,{className:T.endIcon,ownerState:I,children:m||(0,k.jsx)(dR,{className:T.loadingIconPlaceholder,ownerState:I})}),D=s||"",M="boolean"===typeof y?(0,k.jsx)("span",{className:T.loadingWrapper,style:{display:"contents"},children:y&&(0,k.jsx)(uR,{className:T.loadingIndicator,ownerState:I,children:_})}):null;return(0,k.jsxs)(aR,(0,S.A)((0,S.A)({ownerState:I,className:js(r.className,T.root,c,D),component:l,disabled:u||y,focusRipple:!h,focusVisibleClassName:js(T.focusVisible,p),ref:n,type:N,id:y?A:g},C),{},{classes:T,children:[P,"end"!==x&&M,i,"end"===x&&M,R]}))})),mR=hR;function pR(e){return kN("MuiSvgIcon",e)}CN("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const fR=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],gR=hN("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(xN(n.color))],t["fontSize".concat(xN(n.fontSize))]]}})(pN((e=>{var t,n,r,s,o,i,a,l,c,u,d,h,m,p,f;let{theme:g}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=g.transitions)||void 0===t||null===(n=t.create)||void 0===n?void 0:n.call(t,"fill",{duration:null===(r=(null!==(s=g.vars)&&void 0!==s?s:g).transitions)||void 0===r||null===(r=r.duration)||void 0===r?void 0:r.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(o=g.typography)||void 0===o||null===(i=o.pxToRem)||void 0===i?void 0:i.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(a=g.typography)||void 0===a||null===(l=a.pxToRem)||void 0===l?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(c=g.typography)||void 0===c||null===(u=c.pxToRem)||void 0===u?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((null!==(d=g.vars)&&void 0!==d?d:g).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,n;let[r]=e;return{props:{color:r},style:{color:null===(t=(null!==(n=g.vars)&&void 0!==n?n:g).palette)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.main}}})),{props:{color:"action"},style:{color:null===(h=(null!==(m=g.vars)&&void 0!==m?m:g).palette)||void 0===h||null===(h=h.action)||void 0===h?void 0:h.active}},{props:{color:"disabled"},style:{color:null===(p=(null!==(f=g.vars)&&void 0!==f?f:g).palette)||void 0===p||null===(p=p.action)||void 0===p?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),yR=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiSvgIcon"}),{children:s,className:o,color:i="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,m=E(r,fR),p=e.isValidElement(s)&&"svg"===s.type,f=(0,S.A)((0,S.A)({},r),{},{color:i,component:a,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),g={};u||(g.viewBox=h);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return Sy({root:["root","inherit"!==t&&"color".concat(xN(t)),"fontSize".concat(xN(n))]},pR,r)})(f);return(0,k.jsxs)(gR,(0,S.A)((0,S.A)((0,S.A)((0,S.A)({as:a,className:js(y.root,o),focusable:"false",color:c,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:n},g),m),p&&s.props),{},{ownerState:f,children:[p?s.props.children:s,d?(0,k.jsx)("title",{children:d}):null]}))}));yR.muiName="SvgIcon";const vR=yR;function xR(t,n){function r(e,n){return(0,k.jsx)(vR,(0,S.A)((0,S.A)({"data-testid":void 0,ref:n},e),{},{children:t}))}return r.muiName=vR.muiName,e.memo(e.forwardRef(r))}const bR=xR((0,k.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function wR(e){return kN("MuiChip",e)}const NR=CN("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);const jR=function(e){return"string"===typeof e};const kR=function(e,t,n){return void 0===e||jR(e)?t:(0,S.A)((0,S.A)({},t),{},{ownerState:(0,S.A)((0,S.A)({},t.ownerState),n)})};const CR=function(e,t,n){return"function"===typeof e?e(t,n):e};const SR=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const AR=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const ER=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:o}=e;if(!t){const e=js(null===n||void 0===n?void 0:n.className,o,null===s||void 0===s?void 0:s.className,null===r||void 0===r?void 0:r.className),t=(0,S.A)((0,S.A)((0,S.A)({},null===n||void 0===n?void 0:n.style),null===s||void 0===s?void 0:s.style),null===r||void 0===r?void 0:r.style),i=(0,S.A)((0,S.A)((0,S.A)({},n),s),r);return e.length>0&&(i.className=e),Object.keys(t).length>0&&(i.style=t),{props:i,internalRef:void 0}}const i=SR((0,S.A)((0,S.A)({},s),r)),a=AR(r),l=AR(s),c=t(i),u=js(null===c||void 0===c?void 0:c.className,null===n||void 0===n?void 0:n.className,o,null===s||void 0===s?void 0:s.className,null===r||void 0===r?void 0:r.className),d=(0,S.A)((0,S.A)((0,S.A)((0,S.A)({},null===c||void 0===c?void 0:c.style),null===n||void 0===n?void 0:n.style),null===s||void 0===s?void 0:s.style),null===r||void 0===r?void 0:r.style),h=(0,S.A)((0,S.A)((0,S.A)((0,S.A)({},c),n),l),a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}},_R=["className","elementType","ownerState","externalForwardedProps","internalForwardedProps","shouldForwardComponentProp"],IR=["component","slots","slotProps"],TR=["component"];function PR(e,t){const{className:n,elementType:r,ownerState:s,externalForwardedProps:o,internalForwardedProps:i,shouldForwardComponentProp:a=!1}=t,l=E(t,_R),{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0}}=o,h=E(o,IR),m=u[e]||r,p=CR(d[e],s),f=ER((0,S.A)((0,S.A)({className:n},l),{},{externalForwardedProps:"root"===e?h:void 0,externalSlotProps:p})),{props:{component:g},internalRef:y}=f,v=E(f.props,TR),x=pP(y,null===p||void 0===p?void 0:p.ref,t.ref),b="root"===e?g||c:g;return[m,kR(m,(0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)({},"root"===e&&!c&&!u[e]&&i),"root"!==e&&!u[e]&&i),v),b&&!a&&{as:b}),b&&a&&{component:b}),{},{ref:x}),s)]}const RR=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled","slots","slotProps"],DR=hN("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:s,clickable:o,onDelete:i,size:a,variant:l}=n;return[{["& .".concat(NR.avatar)]:t.avatar},{["& .".concat(NR.avatar)]:t["avatar".concat(xN(a))]},{["& .".concat(NR.avatar)]:t["avatarColor".concat(xN(r))]},{["& .".concat(NR.icon)]:t.icon},{["& .".concat(NR.icon)]:t["icon".concat(xN(a))]},{["& .".concat(NR.icon)]:t["iconColor".concat(xN(s))]},{["& .".concat(NR.deleteIcon)]:t.deleteIcon},{["& .".concat(NR.deleteIcon)]:t["deleteIcon".concat(xN(a))]},{["& .".concat(NR.deleteIcon)]:t["deleteIconColor".concat(xN(r))]},{["& .".concat(NR.deleteIcon)]:t["deleteIcon".concat(xN(l),"Color").concat(xN(r))]},t.root,t["size".concat(xN(a))],t["color".concat(xN(r))],o&&t.clickable,o&&"default"!==r&&t["clickableColor".concat(xN(r),")")],i&&t.deletable,i&&"default"!==r&&t["deletableColor".concat(xN(r))],t[l],t["".concat(l).concat(xN(r))]]}})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(NR.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(NR.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},["& .".concat(NR.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(NR.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(NR.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(NR.icon)]:{marginLeft:5,marginRight:-6},["& .".concat(NR.deleteIcon)]:{WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):Jb(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):Jb(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,["& .".concat(NR.icon)]:{fontSize:18,marginLeft:4,marginRight:-4},["& .".concat(NR.deleteIcon)]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(bN(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,["& .".concat(NR.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].contrastTextChannel," / 0.7)"):Jb(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}}})),{props:e=>e.iconColor===e.color,style:{["& .".concat(NR.icon)]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:n}}},{props:e=>e.iconColor===e.color&&"default"!==e.color,style:{["& .".concat(NR.icon)]:{color:"inherit"}}},{props:{onDelete:!0},style:{["&.".concat(NR.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Jb(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(bN(["dark"])).map((e=>{let[n]=e;return{props:{color:n,onDelete:!0},style:{["&.".concat(NR.focusVisible)]:{background:(t.vars||t).palette[n].dark}}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Jb(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(NR.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):Jb(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(bN(["dark"])).map((e=>{let[n]=e;return{props:{color:n,clickable:!0},style:{["&:hover, &.".concat(NR.focusVisible)]:{backgroundColor:(t.vars||t).palette[n].dark}}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(NR.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(NR.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(NR.avatar)]:{marginLeft:4},["& .".concat(NR.avatarSmall)]:{marginLeft:2},["& .".concat(NR.icon)]:{marginLeft:4},["& .".concat(NR.iconSmall)]:{marginLeft:2},["& .".concat(NR.deleteIcon)]:{marginRight:5},["& .".concat(NR.deleteIconSmall)]:{marginRight:3}}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):Jb(t.palette[n].main,.7)),["&.".concat(NR.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette[n].main,t.palette.action.hoverOpacity)},["&.".concat(NR.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):Jb(t.palette[n].main,t.palette.action.focusOpacity)},["& .".concat(NR.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / 0.7)"):Jb(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}}))]}}))),MR=hN("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t["label".concat(xN(r))]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function LR(e){return"Backspace"===e.key||"Delete"===e.key}const OR=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiChip"}),{avatar:s,className:o,clickable:i,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:m,onDelete:p,onKeyDown:f,onKeyUp:g,size:y="medium",variant:v="filled",tabIndex:x,skipFocusWhenDisabled:b=!1,slots:w={},slotProps:N={}}=r,j=E(r,RR),C=e.useRef(null),A=fP(C,n),_=e=>{e.stopPropagation(),p&&p(e)},I=e=>{e.currentTarget===e.target&&LR(e)&&e.preventDefault(),f&&f(e)},T=e=>{e.currentTarget===e.target&&p&&LR(e)&&p(e),g&&g(e)},P=!(!1===i||!m)||i,R=P||p?eR:l||"div",D=(0,S.A)((0,S.A)({},r),{},{component:R,disabled:u,size:y,color:a,iconColor:e.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:P,variant:v}),M=(e=>{const{classes:t,disabled:n,size:r,color:s,iconColor:o,onDelete:i,clickable:a,variant:l}=e;return Sy({root:["root",l,n&&"disabled","size".concat(xN(r)),"color".concat(xN(s)),a&&"clickable",a&&"clickableColor".concat(xN(s)),i&&"deletable",i&&"deletableColor".concat(xN(s)),"".concat(l).concat(xN(s))],label:["label","label".concat(xN(r))],avatar:["avatar","avatar".concat(xN(r)),"avatarColor".concat(xN(s))],icon:["icon","icon".concat(xN(r)),"iconColor".concat(xN(o))],deleteIcon:["deleteIcon","deleteIcon".concat(xN(r)),"deleteIconColor".concat(xN(s)),"deleteIcon".concat(xN(l),"Color").concat(xN(s))]},wR,t)})(D),L=R===eR?(0,S.A)({component:l||"div",focusVisibleClassName:M.focusVisible},p&&{disableRipple:!0}):{};let O=null;p&&(O=c&&e.isValidElement(c)?e.cloneElement(c,{className:js(c.props.className,M.deleteIcon),onClick:_}):(0,k.jsx)(bR,{className:M.deleteIcon,onClick:_}));let F=null;s&&e.isValidElement(s)&&(F=e.cloneElement(s,{className:js(M.avatar,s.props.className)}));let B=null;d&&e.isValidElement(d)&&(B=e.cloneElement(d,{className:js(M.icon,d.props.className)}));const U={slots:w,slotProps:N},[z,V]=PR("root",{elementType:DR,externalForwardedProps:(0,S.A)((0,S.A)({},U),j),ownerState:D,shouldForwardComponentProp:!0,ref:A,className:js(M.root,o),additionalProps:(0,S.A)({disabled:!(!P||!u)||void 0,tabIndex:b&&u?-1:x},L),getSlotProps:e=>(0,S.A)((0,S.A)({},e),{},{onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),null===m||void 0===m||m(t)},onKeyDown:t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),null===I||void 0===I||I(t)},onKeyUp:t=>{var n;null===(n=e.onKeyUp)||void 0===n||n.call(e,t),null===T||void 0===T||T(t)}})}),[q,W]=PR("label",{elementType:MR,externalForwardedProps:U,ownerState:D,className:M.label});return(0,k.jsxs)(z,(0,S.A)((0,S.A)({as:R},V),{},{children:[F||B,(0,k.jsx)(q,(0,S.A)((0,S.A)({},W),{},{children:h})),O]}))})),FR=OR;function BR(e){return kN("MuiDivider",e)}CN("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const UR=["absolute","children","className","orientation","component","flexItem","light","role","textAlign","variant"],zR=hN("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})(pN((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):Jb(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),VR=hN("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})(pN((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}}))),qR=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiDivider"}),{absolute:r=!1,children:s,className:o,orientation:i="horizontal",component:a=(s||"vertical"===i?"div":"hr"),flexItem:l=!1,light:c=!1,role:u=("hr"!==a?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,m=E(n,UR),p=(0,S.A)((0,S.A)({},n),{},{absolute:r,component:a,flexItem:l,light:c,orientation:i,role:u,textAlign:d,variant:h}),f=(e=>{const{absolute:t,children:n,classes:r,flexItem:s,light:o,orientation:i,textAlign:a,variant:l}=e;return Sy({root:["root",t&&"absolute",l,o&&"light","vertical"===i&&"vertical",s&&"flexItem",n&&"withChildren",n&&"vertical"===i&&"withChildrenVertical","right"===a&&"vertical"!==i&&"textAlignRight","left"===a&&"vertical"!==i&&"textAlignLeft"],wrapper:["wrapper","vertical"===i&&"wrapperVertical"]},BR,r)})(p);return(0,k.jsx)(zR,(0,S.A)((0,S.A)({as:a,className:js(f.root,o),role:u,ref:t,ownerState:p,"aria-orientation":"separator"!==u||"hr"===a&&"vertical"!==i?void 0:i},m),{},{children:s?(0,k.jsx)(VR,{className:f.wrapper,ownerState:p,children:s}):null}))}));qR&&(qR.muiSkipListHighlight=!0);const WR=qR,HR=xR((0,k.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),GR=xR((0,k.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),KR=xR((0,k.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),YR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function QR(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const $R={date:QR({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:QR({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:QR({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},JR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function XR(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const ZR={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:XR({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:XR({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:XR({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:XR({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:XR({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function eD(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const tD={ordinalNumber:(nD={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(nD.matchPattern);if(!n)return null;const r=n[0],s=e.match(nD.parsePattern);if(!s)return null;let o=nD.valueCallback?nD.valueCallback(s[0]):s[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:eD({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:eD({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:eD({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:eD({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:eD({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var nD;const rD={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=YR[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:$R,formatRelative:(e,t,n,r)=>JR[e],localize:ZR,match:tD,options:{weekStartsOn:0,firstWeekContainsDate:1}};let sD={};function oD(){return sD}Math.pow(10,8);const iD=6048e5,aD=Symbol.for("constructDateFrom");function lD(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&aD in e?e[aD](t):e instanceof Date?new e.constructor(t):new Date(t)}function cD(e,t){return lD(t||e,e)}function uD(e){const t=cD(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function dD(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function hD(e,t,n){const[r,s]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=lD.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(s)}(null===n||void 0===n?void 0:n.in,e,t),o=dD(r),i=dD(s),a=+o-uD(o),l=+i-uD(i);return Math.round((a-l)/864e5)}function mD(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function pD(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in);return hD(n,mD(n))+1}function fD(e,t){var n,r,s,o,i,a;const l=oD(),c=null!==(n=null!==(r=null!==(s=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==n?n:0,u=cD(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function gD(e,t){return fD(e,(0,S.A)((0,S.A)({},t),{},{weekStartsOn:1}))}function yD(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),s=lD(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=gD(s),i=lD(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=gD(i);return n.getTime()>=o.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function vD(e,t){const n=yD(e,t),r=lD((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),gD(r)}function xD(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in),r=+gD(n)-+vD(n);return Math.round(r/iD)+1}function bD(e,t){var n,r,s,o,i,a;const l=cD(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=oD(),d=null!==(n=null!==(r=null!==(s=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:u.firstWeekContainsDate)&&void 0!==r?r:null===(a=u.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==n?n:1,h=lD((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const m=fD(h,t),p=lD((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,d),p.setHours(0,0,0,0);const f=fD(p,t);return+l>=+m?c+1:+l>=+f?c:c-1}function wD(e,t){var n,r,s,o,i,a;const l=oD(),c=null!==(n=null!==(r=null!==(s=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:l.firstWeekContainsDate)&&void 0!==r?r:null===(a=l.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==n?n:1,u=bD(e,t),d=lD((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return fD(d,t)}function ND(e,t){const n=cD(e,null===t||void 0===t?void 0:t.in),r=+fD(n,t)-+wD(n,t);return Math.round(r/iD)+1}function jD(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const kD={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return jD("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):jD(n+1,2)},d:(e,t)=>jD(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>jD(e.getHours()%12||12,t.length),H:(e,t)=>jD(e.getHours(),t.length),m:(e,t)=>jD(e.getMinutes(),t.length),s:(e,t)=>jD(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return jD(Math.trunc(r*Math.pow(10,n-3)),t.length)}},CD="midnight",SD="noon",AD="morning",ED="afternoon",_D="evening",ID="night",TD={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return kD.y(e,t)},Y:function(e,t,n,r){const s=bD(e,r),o=s>0?s:1-s;if("YY"===t){return jD(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):jD(o,t.length)},R:function(e,t){return jD(yD(e),t.length)},u:function(e,t){return jD(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return jD(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return jD(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return kD.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return jD(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=ND(e,r);return"wo"===t?n.ordinalNumber(s,{unit:"week"}):jD(s,t.length)},I:function(e,t,n){const r=xD(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):jD(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):kD.d(e,t)},D:function(e,t,n){const r=pD(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):jD(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return jD(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return jD(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return jD(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(s=12===r?SD:0===r?CD:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(s=r>=17?_D:r>=12?ED:r>=4?AD:ID,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return kD.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):kD.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):jD(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):jD(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):kD.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):kD.s(e,t)},S:function(e,t){return kD.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return RD(r);case"XXXX":case"XX":return DD(r);default:return DD(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return RD(r);case"xxxx":case"xx":return DD(r);default:return DD(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+PD(r,":");default:return"GMT"+DD(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+PD(r,":");default:return"GMT"+DD(r,":")}},t:function(e,t,n){return jD(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return jD(+e,t.length)}};function PD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return 0===o?n+String(s):n+String(s)+t+jD(o,2)}function RD(e,t){if(e%60===0){return(e>0?"-":"+")+jD(Math.abs(e)/60,2)}return DD(e,t)}function DD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+jD(Math.trunc(r/60),2)+t+jD(r%60,2)}const MD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},LD=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},OD={p:LD,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return MD(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",MD(r,t)).replace("{{time}}",LD(s,t))}},FD=/^D+$/,BD=/^Y+$/,UD=["D","DD","YY","YYYY"];function zD(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function VD(e){return!(!zD(e)&&"number"!==typeof e||isNaN(+cD(e)))}const qD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HD=/^'([^]*?)'?$/,GD=/''/g,KD=/[a-zA-Z]/;function YD(e,t,n){var r,s,o,i,a,l,c,u,d,h,m,p,f,g;const y=oD(),v=null!==(r=null!==(s=null===n||void 0===n?void 0:n.locale)&&void 0!==s?s:y.locale)&&void 0!==r?r:rD,x=null!==(o=null!==(i=null!==(a=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:y.firstWeekContainsDate)&&void 0!==i?i:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:1,b=null!==(d=null!==(h=null!==(m=null!==(p=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==p?p:null===n||void 0===n||null===(f=n.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==m?m:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,w=cD(e,null===n||void 0===n?void 0:n.in);if(!VD(w))throw new RangeError("Invalid time value");let N=t.match(WD).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,OD[t])(e,v.formatLong)}return e})).join("").match(qD).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:QD(e)};if(TD[t])return{isToken:!0,value:e};if(t.match(KD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));v.localize.preprocessor&&(N=v.localize.preprocessor(w,N));const j={firstWeekContainsDate:x,weekStartsOn:b,locale:v};return N.map((r=>{if(!r.isToken)return r.value;const s=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return BD.test(e)}(s))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return FD.test(e)}(s))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),UD.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,TD[s[0]])(w,s,v.localize,j)})).join("")}function QD(e){const t=e.match(HD);return t?t[1].replace(GD,"'"):e}const $D=e=>{let{subscription:t,onUpgradeClick:n}=e;if(!t)return(0,k.jsxs)(Yj,{children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"No Active Subscription"}),(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",paragraph:!0,children:"You're currently not on any plan. Choose a plan to get started."}),(0,k.jsx)(mR,{variant:"contained",color:"primary",onClick:n,startIcon:(0,k.jsx)(GR,{}),children:"Choose a Plan"})]});return(0,k.jsxs)(Yj,{children:[(0,k.jsxs)(Yj,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,k.jsx)(lk,{variant:"h6",children:"Current Plan"}),(0,k.jsx)(FR,{label:t.status.toUpperCase(),color:(e=>{switch(e){case"active":return"success";case"past_due":return"warning";case"canceled":return"error";default:return"default"}})(t.status),size:"small"})]}),(0,k.jsxs)(lP,{container:!0,spacing:3,children:[(0,k.jsxs)(lP,{item:!0,xs:12,md:6,children:[(0,k.jsx)(lk,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:t.planName}),(0,k.jsxs)(lk,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:[t.amount," ",t.currency," / month"]}),(0,k.jsxs)(Yj,{display:"flex",alignItems:"center",mt:2,children:[(0,k.jsx)(HR,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),(0,k.jsxs)(lk,{variant:"body2",color:"text.secondary",children:["Renews on ",(e=>{if(!e)return"N/A";return YD(e.toDate(),"MMM dd, yyyy")})(t.renewalDate)]})]})]}),(0,k.jsx)(lP,{item:!0,xs:12,md:6,children:(0,k.jsxs)(Yj,{display:"flex",flexDirection:"column",gap:1,children:[(0,k.jsx)(mR,{variant:"contained",color:"primary",onClick:n,startIcon:(0,k.jsx)(GR,{}),children:"Change Plan"}),(0,k.jsx)(mR,{variant:"outlined",color:"error",startIcon:(0,k.jsx)(KR,{}),children:"Cancel Subscription"})]})})]}),(0,k.jsx)(WR,{sx:{my:3}}),(0,k.jsx)(lk,{variant:"subtitle2",gutterBottom:!0,children:"Plan Features"}),(0,k.jsx)(lP,{container:!0,spacing:1,children:t.features.map(((e,t)=>(0,k.jsx)(lP,{item:!0,xs:12,sm:6,children:(0,k.jsxs)(lk,{variant:"body2",color:"text.secondary",children:["\u2022 ",e]})},t)))})]})};function JD(e){return kN("MuiCard",e)}CN("MuiCard",["root"]);const XD=["className","raised"],ZD=hN(UT,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),eM=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiCard"}),{className:r,raised:s=!1}=n,o=E(n,XD),i=(0,S.A)((0,S.A)({},n),{},{raised:s}),a=(e=>{const{classes:t}=e;return Sy({root:["root"]},JD,t)})(i);return(0,k.jsx)(ZD,(0,S.A)({className:js(a.root,r),elevation:s?8:void 0,ref:t,ownerState:i},o))}));function tM(e){return kN("MuiCardContent",e)}CN("MuiCardContent",["root"]);const nM=["className","component"],rM=hN("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),sM=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiCardContent"}),{className:r,component:s="div"}=n,o=E(n,nM),i=(0,S.A)((0,S.A)({},n),{},{component:s}),a=(e=>{const{classes:t}=e;return Sy({root:["root"]},tM,t)})(i);return(0,k.jsx)(rM,(0,S.A)({as:s,className:js(a.root,r),ownerState:i,ref:t},o))}));function oM(e){return e&&e.ownerDocument||document}function iM(t){var n;return parseInt(e.version,10)>=19?(null===t||void 0===t||null===(n=t.props)||void 0===n?void 0:n.ref)||null:(null===t||void 0===t?void 0:t.ref)||null}const aM=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function lM(e){const t=[],n=[];return Array.from(e.querySelectorAll(aM)).forEach(((e,r)=>{const s=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==s&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===s?t.push(e):n.push({documentOrder:r,tabIndex:s,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function cM(){return!0}const uM=function(t){const{children:n,disableAutoFocus:r=!1,disableEnforceFocus:s=!1,disableRestoreFocus:o=!1,getTabbable:i=lM,isEnabled:a=cM,open:l}=t,c=e.useRef(!1),u=e.useRef(null),d=e.useRef(null),h=e.useRef(null),m=e.useRef(null),p=e.useRef(!1),f=e.useRef(null),g=pP(iM(n),f),y=e.useRef(null);e.useEffect((()=>{l&&f.current&&(p.current=!r)}),[r,l]),e.useEffect((()=>{if(!l||!f.current)return;const e=oM(f.current);return f.current.contains(e.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex","-1"),p.current&&f.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),e.useEffect((()=>{if(!l||!f.current)return;const e=oM(f.current),t=t=>{y.current=t,!s&&a()&&"Tab"===t.key&&e.activeElement===f.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=f.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(s&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==m.current)m.current=null;else if(null!==m.current)return;if(!p.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=i(f.current)),n.length>0){var r,o;const e=Boolean((null===(r=y.current)||void 0===r?void 0:r.shiftKey)&&"Tab"===(null===(o=y.current)||void 0===o?void 0:o.key)),t=n[0],s=n[n.length-1];"string"!==typeof t&&"string"!==typeof s&&(e?s.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[r,s,o,a,l,i]);const v=e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0};return(0,k.jsxs)(e.Fragment,{children:[(0,k.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0,m.current=e.target;const t=n.props.onFocus;t&&t(e)}}),(0,k.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})};function dM(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const hM=e.forwardRef((function(t,n){const{children:r,container:o,disablePortal:i=!1}=t,[a,l]=e.useState(null),c=pP(e.isValidElement(r)?iM(r):null,n);if(gP((()=>{i||l(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,i]),gP((()=>{if(a&&!i)return dM(n,a),()=>{dM(n,null)}}),[n,a,i]),i){if(e.isValidElement(r)){const t={ref:c};return e.cloneElement(r,t)}return r}return a?s.createPortal(r,a):a})),mM=!1;var pM="unmounted",fM="exited",gM="entering",yM="entered",vM="exiting",xM=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var s,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(s=fM,r.appearStatus=gM):s=yM:s=e.unmountOnExit||e.mountOnEnter?pM:fM,r.state={status:s},r.nextCallback=null,r}kP(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===pM?{status:fM}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==gM&&n!==yM&&(t=gM):n!==gM&&n!==yM||(t=vM)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===gM){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===fM&&this.setState({status:pM})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[s.findDOMNode(this),r],i=o[0],a=o[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||mM?this.safeSetState({status:yM},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:gM},(function(){t.props.onEntering(i,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:yM},(function(){t.props.onEntered(i,a)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!mM?(this.props.onExit(r),this.safeSetState({status:vM},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:fM},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:fM},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===pM)return null;var n=this.props,r=n.children,s=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,A(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(CP.Provider,{value:null},"function"===typeof r?r(t,s):e.cloneElement(e.Children.only(r),s))},n}(e.Component);function bM(){}xM.contextType=CP,xM.propTypes={},xM.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:bM,onEntering:bM,onEntered:bM,onExit:bM,onExiting:bM,onExited:bM},xM.UNMOUNTED=pM,xM.EXITED=fM,xM.ENTERING=gM,xM.ENTERED=yM,xM.EXITING=vM;const wM=xM,NM=e=>e.scrollTop;function jM(e,t){var n,r;const{timeout:s,easing:o,style:i={}}=e;return{duration:null!==(n=i.transitionDuration)&&void 0!==n?n:"number"===typeof s?s:s[t.mode]||0,easing:null!==(r=i.transitionTimingFunction)&&void 0!==r?r:"object"===typeof o?o[t.mode]:o,delay:i.transitionDelay}}const kM=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],CM=["ownerState"],SM={entering:{opacity:1},entered:{opacity:1}},AM=e.forwardRef((function(t,n){const r=LT(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:i=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:m,onExited:p,onExiting:f,style:g,timeout:y=s,TransitionComponent:v=wM}=t,x=E(t,kM),b=e.useRef(null),w=fP(b,iM(a),n),N=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},j=N(h),C=N(((e,t)=>{NM(e);const n=jM({style:g,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),u&&u(e,t)})),A=N(d),_=N(f),I=N((e=>{const t=jM({style:g,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),m&&m(e)})),T=N(p);return(0,k.jsx)(v,(0,S.A)((0,S.A)({appear:i,in:c,nodeRef:b,onEnter:C,onEntered:A,onEntering:j,onExit:I,onExited:T,onExiting:_,addEndListener:e=>{o&&o(b.current,e)},timeout:y},x),{},{children:(t,n)=>{let{ownerState:r}=n,s=E(n,CM);return e.cloneElement(a,(0,S.A)({style:(0,S.A)((0,S.A)((0,S.A)({opacity:0,visibility:"exited"!==t||c?void 0:"hidden"},SM[t]),g),a.props.style),ref:w},s))}}))})),EM=AM;function _M(e){return kN("MuiBackdrop",e)}CN("MuiBackdrop",["root","invisible"]);const IM=["children","className","component","invisible","open","components","componentsProps","slotProps","slots","TransitionComponent","transitionDuration"],TM=hN("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),PM=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiBackdrop"}),{children:r,className:s,component:o="div",invisible:i=!1,open:a,components:l={},componentsProps:c={},slotProps:u={},slots:d={},TransitionComponent:h,transitionDuration:m}=n,p=E(n,IM),f=(0,S.A)((0,S.A)({},n),{},{component:o,invisible:i}),g=(e=>{const{classes:t,invisible:n}=e;return Sy({root:["root",n&&"invisible"]},_M,t)})(f),y={component:o,slots:(0,S.A)({transition:h,root:l.Root},d),slotProps:(0,S.A)((0,S.A)({},c),u)},[v,x]=PR("root",{elementType:TM,externalForwardedProps:y,className:js(g.root,s),ownerState:f}),[b,w]=PR("transition",{elementType:EM,externalForwardedProps:y,ownerState:f});return(0,k.jsx)(b,(0,S.A)((0,S.A)((0,S.A)({in:a,timeout:m},p),w),{},{children:(0,k.jsx)(v,(0,S.A)((0,S.A)({"aria-hidden":!0},x),{},{classes:g,ref:t,children:r}))}))}));function RM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function DM(e){return oM(e).defaultView||window}function MM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function LM(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function OM(e){return parseInt(DM(e).getComputedStyle(e).paddingRight,10)||0}function FM(e,t,n,r,s){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&LM(e,s)}))}function BM(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function UM(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=oM(e);return t.body===e?DM(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=MM(DM(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(OM(r)+e,"px");const t=oM(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(OM(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=oM(r).body;else{const t=r.parentElement,n=DM(r);e="HTML"===(null===t||void 0===t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const zM=()=>{},VM=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&LM(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);FM(t,e.mount,e.modalRef,r,!0);const s=BM(this.containers,(e=>e.container===t));return-1!==s?(this.containers[s].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=BM(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=UM(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=BM(this.containers,(t=>t.modals.includes(e))),s=this.containers[r];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(n,1),0===s.modals.length)s.restore&&s.restore(),e.modalRef&&LM(e.modalRef,t),FM(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=s.modals[s.modals.length-1];e.modalRef&&LM(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const qM=function(t){const{container:n,disableEscapeKeyDown:r=!1,disableScrollLock:s=!1,closeAfterTransition:o=!1,onTransitionEnter:i,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,h=e.useRef({}),m=e.useRef(null),p=e.useRef(null),f=pP(p,d),[g,y]=e.useState(!u),v=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let x=!0;"false"!==t["aria-hidden"]&&!1!==t["aria-hidden"]||(x=!1);const b=()=>(h.current.modalRef=p.current,h.current.mount=m.current,h.current),w=()=>{VM.mount(b(),{disableScrollLock:s}),p.current&&(p.current.scrollTop=0)},N=yP((()=>{const e=function(e){return"function"===typeof e?e():e}(n)||oM(m.current).body;VM.add(b(),e),p.current&&w()})),j=()=>VM.isTopModal(b()),k=yP((e=>{m.current=e,e&&(u&&j()?w():p.current&&LM(p.current,x))})),C=e.useCallback((()=>{VM.remove(b(),x)}),[x]);e.useEffect((()=>()=>{C()}),[C]),e.useEffect((()=>{u?N():v&&o||C()}),[u,C,v,o,N]);const A=e=>t=>{var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),"Escape"===t.key&&229!==t.which&&j()&&(r||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},E=e=>t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=SR(t);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,S.A)((0,S.A)({},n),e);return(0,S.A)((0,S.A)({role:"presentation"},r),{},{onKeyDown:A(r),ref:f})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,S.A)((0,S.A)({"aria-hidden":!0},e),{},{onClick:E(e),open:u})},getTransitionProps:()=>{var e,t;return{onEnter:RM((()=>{y(!1),i&&i()}),null!==(e=null===l||void 0===l?void 0:l.props.onEnter)&&void 0!==e?e:zM),onExited:RM((()=>{y(!0),a&&a(),o&&C()}),null!==(t=null===l||void 0===l?void 0:l.props.onExited)&&void 0!==t?t:zM)}},rootRef:f,portalRef:k,isTopModal:j,exited:g,hasTransition:v}};function WM(e){return kN("MuiModal",e)}CN("MuiModal",["root","hidden","backdrop"]);const HM=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],GM=hN("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(pN((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),KM=hN(PM,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),YM=e.forwardRef((function(t,n){const r=vN({name:"MuiModal",props:t}),{BackdropComponent:s=KM,BackdropProps:o,classes:i,className:a,closeAfterTransition:l=!1,children:c,container:u,component:d,components:h={},componentsProps:m={},disableAutoFocus:p=!1,disableEnforceFocus:f=!1,disableEscapeKeyDown:g=!1,disablePortal:y=!1,disableRestoreFocus:v=!1,disableScrollLock:x=!1,hideBackdrop:b=!1,keepMounted:w=!1,onClose:N,onTransitionEnter:j,onTransitionExited:C,open:A,slotProps:_={},slots:I={},theme:T}=r,P=E(r,HM),R=(0,S.A)((0,S.A)({},r),{},{closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:f,disableEscapeKeyDown:g,disablePortal:y,disableRestoreFocus:v,disableScrollLock:x,hideBackdrop:b,keepMounted:w}),{getRootProps:D,getBackdropProps:M,getTransitionProps:L,portalRef:O,isTopModal:F,exited:B,hasTransition:U}=qM((0,S.A)((0,S.A)({},R),{},{rootRef:n})),z=(0,S.A)((0,S.A)({},R),{},{exited:B}),V=(e=>{const{open:t,exited:n,classes:r}=e;return Sy({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},WM,r)})(z),q={};if(void 0===c.props.tabIndex&&(q.tabIndex="-1"),U){const{onEnter:e,onExited:t}=L();q.onEnter=e,q.onExited=t}const W={slots:(0,S.A)({root:h.Root,backdrop:h.Backdrop},I),slotProps:(0,S.A)((0,S.A)({},m),_)},[H,G]=PR("root",{ref:n,elementType:GM,externalForwardedProps:(0,S.A)((0,S.A)((0,S.A)({},W),P),{},{component:d}),getSlotProps:D,ownerState:z,className:js(a,null===V||void 0===V?void 0:V.root,!z.open&&z.exited&&(null===V||void 0===V?void 0:V.hidden))}),[K,Y]=PR("backdrop",{ref:null===o||void 0===o?void 0:o.ref,elementType:s,externalForwardedProps:W,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:e=>M((0,S.A)((0,S.A)({},e),{},{onClick:t=>{null!==e&&void 0!==e&&e.onClick&&e.onClick(t)}})),className:js(null===o||void 0===o?void 0:o.className,null===V||void 0===V?void 0:V.backdrop),ownerState:z});return w||A||U&&!B?(0,k.jsx)(hM,{ref:O,container:u,disablePortal:y,children:(0,k.jsxs)(H,(0,S.A)((0,S.A)({},G),{},{children:[!b&&s?(0,k.jsx)(K,(0,S.A)({},Y)):null,(0,k.jsx)(uM,{disableEnforceFocus:f,disableAutoFocus:p,disableRestoreFocus:v,isEnabled:F,open:A,children:e.cloneElement(c,q)})]}))}):null})),QM=YM;function $M(e){return kN("MuiDialog",e)}const JM=CN("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const XM=e.createContext({}),ZM=["aria-describedby","aria-labelledby","aria-modal","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onClick","onClose","open","PaperComponent","PaperProps","scroll","slots","slotProps","TransitionComponent","transitionDuration","TransitionProps"],eL=hN(PM,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),tL=hN(QM,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),nL=hN("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat(xN(n.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),rL=hN(UT,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat(xN(n.scroll))],t["paperWidth".concat(xN(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(pN((e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(JM.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(JM.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(JM.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}}))),sL=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiDialog"}),s=LT(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":a,"aria-modal":l=!0,BackdropComponent:c,BackdropProps:u,children:d,className:h,disableEscapeKeyDown:m=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:g="sm",onClick:y,onClose:v,open:x,PaperComponent:b=UT,PaperProps:w={},scroll:N="paper",slots:j={},slotProps:C={},TransitionComponent:A=EM,transitionDuration:_=o,TransitionProps:I}=r,T=E(r,ZM),P=(0,S.A)((0,S.A)({},r),{},{disableEscapeKeyDown:m,fullScreen:p,fullWidth:f,maxWidth:g,scroll:N}),R=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:s,fullScreen:o}=e;return Sy({root:["root"],container:["container","scroll".concat(xN(n))],paper:["paper","paperScroll".concat(xN(n)),"paperWidth".concat(xN(String(r))),s&&"paperFullWidth",o&&"paperFullScreen"]},$M,t)})(P),D=e.useRef(),M=dP(a),L=e.useMemo((()=>({titleId:M})),[M]),O={slots:(0,S.A)({transition:A},j),slotProps:(0,S.A)({transition:I,paper:w,backdrop:u},C)},[F,B]=PR("root",{elementType:tL,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:P,className:js(R.root,h),ref:n}),[U,z]=PR("backdrop",{elementType:eL,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:P}),[V,q]=PR("paper",{elementType:rL,shouldForwardComponentProp:!0,externalForwardedProps:O,ownerState:P,className:js(R.paper,w.className)}),[W,H]=PR("container",{elementType:nL,externalForwardedProps:O,ownerState:P,className:R.container}),[G,K]=PR("transition",{elementType:EM,externalForwardedProps:O,ownerState:P,additionalProps:{appear:!0,in:x,timeout:_,role:"presentation"}});return(0,k.jsx)(F,(0,S.A)((0,S.A)((0,S.A)({closeAfterTransition:!0,slots:{backdrop:U},slotProps:{backdrop:(0,S.A)({transitionDuration:_,as:c},z)},disableEscapeKeyDown:m,onClose:v,open:x,onClick:e=>{y&&y(e),D.current&&(D.current=null,v&&v(e,"backdropClick"))}},B),T),{},{children:(0,k.jsx)(G,(0,S.A)((0,S.A)({},K),{},{children:(0,k.jsx)(W,(0,S.A)((0,S.A)({onMouseDown:e=>{D.current=e.target===e.currentTarget}},H),{},{children:(0,k.jsx)(V,(0,S.A)((0,S.A)({as:b,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":M,"aria-modal":l},q),{},{children:(0,k.jsx)(XM.Provider,{value:L,children:d})}))}))}))}))})),oL=sL;function iL(e){return kN("MuiDialogTitle",e)}const aL=CN("MuiDialogTitle",["root"]),lL=["className","id"],cL=hN(lk,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),uL=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiDialogTitle"}),{className:s,id:o}=r,i=E(r,lL),a=r,l=(e=>{const{classes:t}=e;return Sy({root:["root"]},iL,t)})(a),{titleId:c=o}=e.useContext(XM);return(0,k.jsx)(cL,(0,S.A)({component:"h2",className:js(l.root,s),ownerState:a,ref:n,variant:"h6",id:null!==o&&void 0!==o?o:c},i))}));function dL(e){return kN("MuiDialogContent",e)}CN("MuiDialogContent",["root","dividers"]);const hL=["className","dividers"],mL=hN("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(pN((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(aL.root," + &")]:{paddingTop:0}}}]}}))),pL=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiDialogContent"}),{className:r,dividers:s=!1}=n,o=E(n,hL),i=(0,S.A)((0,S.A)({},n),{},{dividers:s}),a=(e=>{const{classes:t,dividers:n}=e;return Sy({root:["root",n&&"dividers"]},dL,t)})(i);return(0,k.jsx)(mL,(0,S.A)({className:js(a.root,r),ownerState:i,ref:t},o))}));function fL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,s)}),n)}return r.clear=()=>{clearTimeout(t)},r}const gL=["onChange","maxRows","minRows","style","value"];function yL(e){return parseInt(e,10)||0}const vL={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function xL(e){return function(e){for(const t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}const bL=e.forwardRef((function(t,n){const{onChange:r,maxRows:s,minRows:o=1,style:i,value:a}=t,l=E(t,gL),{current:c}=e.useRef(null!=a),u=e.useRef(null),d=pP(n,u),h=e.useRef(null),m=e.useRef(null),p=e.useCallback((()=>{const e=u.current,n=m.current;if(!e||!n)return;const r=DM(e).getComputedStyle(e);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};n.style.width=r.width,n.value=e.value||t.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const i=r.boxSizing,a=yL(r.paddingBottom)+yL(r.paddingTop),l=yL(r.borderBottomWidth)+yL(r.borderTopWidth),c=n.scrollHeight;n.value="x";const d=n.scrollHeight;let h=c;o&&(h=Math.max(Number(o)*d,h)),s&&(h=Math.min(Number(s)*d,h)),h=Math.max(h,d);return{outerHeightStyle:h+("border-box"===i?a+l:0),overflowing:Math.abs(h-c)<=1}}),[s,o,t.placeholder]),f=yP((()=>{const e=u.current,t=p();if(!e||!t||xL(t))return!1;const n=t.outerHeightStyle;return null!=h.current&&h.current!==n})),g=e.useCallback((()=>{const e=u.current,t=p();if(!e||!t||xL(t))return;const n=t.outerHeightStyle;h.current!==n&&(h.current=n,e.style.height="".concat(n,"px")),e.style.overflow=t.overflowing?"hidden":""}),[p]),y=e.useRef(-1);gP((()=>{const e=fL(g),t=null===u||void 0===u?void 0:u.current;if(!t)return;const n=DM(t);let r;return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(r=new ResizeObserver((()=>{f()&&(r.unobserve(t),cancelAnimationFrame(y.current),g(),y.current=requestAnimationFrame((()=>{r.observe(t)})))})),r.observe(t)),()=>{e.clear(),cancelAnimationFrame(y.current),n.removeEventListener("resize",e),r&&r.disconnect()}}),[p,g,f]),gP((()=>{g()}));return(0,k.jsxs)(e.Fragment,{children:[(0,k.jsx)("textarea",(0,S.A)({value:a,onChange:e=>{c||g();const t=e.target,n=t.value.length,s=t.value.endsWith("\n"),o=t.selectionStart===n;s&&o&&t.setSelectionRange(n,n),r&&r(e)},ref:d,rows:o,style:i},l)),(0,k.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:m,tabIndex:-1,style:(0,S.A)((0,S.A)((0,S.A)({},vL),i),{},{paddingTop:0,paddingBottom:0})})]})})),wL=bL;const NL=function(e){return"string"===typeof e};function jL(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const kL=e.createContext(void 0);function CL(){return e.useContext(kL)}const SL=gP;function AL(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function EL(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(AL(e.value)&&""!==e.value||t&&AL(e.defaultValue)&&""!==e.defaultValue)}function _L(e){return kN("MuiInputBase",e)}const IL=CN("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),TL=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"];var PL;const RL=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat(xN(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},DL=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},ML=hN("div",{name:"MuiInputBase",slot:"Root",overridesResolver:RL})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)({},t.typography.body1),{},{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(IL.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]})}))),LL=hN("input",{name:"MuiInputBase",slot:"Input",overridesResolver:DL})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=(0,S.A)((0,S.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5}),{},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),s={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(IL.formControl," &")]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},["&.".concat(IL.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),OL=function(e){return function(t){return(0,k.jsx)(Xj,{styles:"function"===typeof e?n=>e((0,S.A)({theme:n},t)):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),FL=e.forwardRef((function(t,n){var r;const s=vN({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:i,autoFocus:a,className:l,color:c,components:u={},componentsProps:d={},defaultValue:h,disabled:m,disableInjectingGlobalStyles:p,endAdornment:f,error:g,fullWidth:y=!1,id:v,inputComponent:x="input",inputProps:b={},inputRef:w,margin:N,maxRows:j,minRows:C,multiline:A=!1,name:_,onBlur:I,onChange:T,onClick:P,onFocus:R,onKeyDown:D,onKeyUp:M,placeholder:L,readOnly:O,renderSuffix:F,rows:B,size:U,slotProps:z={},slots:V={},startAdornment:q,type:W="text",value:H}=s,G=E(s,TL),K=null!=b.value?b.value:H,{current:Y}=e.useRef(null!=K),Q=e.useRef(),$=e.useCallback((e=>{0}),[]),J=fP(Q,w,b.ref,$),[X,Z]=e.useState(!1),ee=CL();const te=jL({props:s,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});te.focused=ee?ee.focused:X,e.useEffect((()=>{!ee&&m&&X&&(Z(!1),I&&I())}),[ee,m,X,I]);const ne=ee&&ee.onFilled,re=ee&&ee.onEmpty,se=e.useCallback((e=>{EL(e)?ne&&ne():re&&re()}),[ne,re]);SL((()=>{Y&&se({value:K})}),[K,se,Y]);e.useEffect((()=>{se(Q.current)}),[]);let oe=x,ie=b;A&&"input"===oe&&(ie=B?(0,S.A)({type:void 0,minRows:B,maxRows:B},ie):(0,S.A)({type:void 0,maxRows:j,minRows:C},ie),oe=wL);e.useEffect((()=>{ee&&ee.setAdornedStart(Boolean(q))}),[ee,q]);const ae=(0,S.A)((0,S.A)({},s),{},{color:te.color||"primary",disabled:te.disabled,endAdornment:f,error:te.error,focused:te.focused,formControl:ee,fullWidth:y,hiddenLabel:te.hiddenLabel,multiline:A,size:te.size,startAdornment:q,type:W}),le=(e=>{const{classes:t,color:n,disabled:r,error:s,endAdornment:o,focused:i,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:m,type:p}=e;return Sy({root:["root","color".concat(xN(n)),r&&"disabled",s&&"error",l&&"fullWidth",i&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat(xN(h)),u&&"multiline",m&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",m&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]},_L,t)})(ae),ce=V.root||u.Root||ML,ue=z.root||d.root||{},de=V.input||u.Input||LL;return ie=(0,S.A)((0,S.A)({},ie),null!==(r=z.input)&&void 0!==r?r:d.input),(0,k.jsxs)(e.Fragment,{children:[!p&&"function"===typeof OL&&(PL||(PL=(0,k.jsx)(OL,{}))),(0,k.jsxs)(ce,(0,S.A)((0,S.A)((0,S.A)((0,S.A)({},ue),{},{ref:n,onClick:e=>{Q.current&&e.currentTarget===e.target&&Q.current.focus(),P&&P(e)}},G),!NL(ce)&&{ownerState:(0,S.A)((0,S.A)({},ae),ue.ownerState)}),{},{className:js(le.root,ue.className,l,O&&"MuiInputBase-readOnly"),children:[q,(0,k.jsx)(kL.Provider,{value:null,children:(0,k.jsx)(de,(0,S.A)((0,S.A)((0,S.A)({"aria-invalid":te.error,"aria-describedby":o,autoComplete:i,autoFocus:a,defaultValue:h,disabled:te.disabled,id:v,onAnimationStart:e=>{se("mui-auto-fill-cancel"===e.animationName?Q.current:{value:"x"})},name:_,placeholder:L,readOnly:O,required:te.required,rows:B,value:K,onKeyDown:D,onKeyUp:M,type:W},ie),!NL(de)&&{as:oe,ownerState:(0,S.A)((0,S.A)({},ae),ie.ownerState)}),{},{ref:J,className:js(le.input,ie.className,O&&"MuiInputBase-readOnly"),onBlur:e=>{I&&I(e),b.onBlur&&b.onBlur(e),ee&&ee.onBlur?ee.onBlur(e):Z(!1)},onChange:function(e){if(!Y){const t=e.target||Q.current;if(null==t)throw new Error(Ix(1));se({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.onChange&&b.onChange(e,...n),T&&T(e,...n)},onFocus:e=>{R&&R(e),b.onFocus&&b.onFocus(e),ee&&ee.onFocus?ee.onFocus(e):Z(!0)}}))}),f,F?F((0,S.A)((0,S.A)({},te),{},{startAdornment:q})):null]}))]})})),BL=FL;function UL(e){return kN("MuiInput",e)}const zL=(0,S.A)((0,S.A)({},IL),CN("MuiInput",["root","underline","input"])),VL=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],qL=hN(ML,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...RL(e,t),!n.disableUnderline&&t.underline]}})(pN((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(zL.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(zL.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(zL.disabled,", .").concat(zL.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}},["&.".concat(zL.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n].main)}}}}))]}}))),WL=hN(LL,{name:"MuiInput",slot:"Input",overridesResolver:DL})({}),HL=e.forwardRef((function(e,t){var n,r,s,o;const i=vN({props:e,name:"MuiInput"}),{disableUnderline:a=!1,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:m,slots:p={},type:f="text"}=i,g=E(i,VL),y=(e=>{const{classes:t,disableUnderline:n}=e,r=Sy({root:["root",!n&&"underline"],input:["input"]},UL,t);return(0,S.A)((0,S.A)({},t),r)})(i),v={root:{ownerState:{disableUnderline:a}}},x=(null!==m&&void 0!==m?m:c)?xx(null!==m&&void 0!==m?m:c,v):v,b=null!==(n=null!==(r=p.root)&&void 0!==r?r:l.Root)&&void 0!==n?n:qL,w=null!==(s=null!==(o=p.input)&&void 0!==o?o:l.Input)&&void 0!==s?s:WL;return(0,k.jsx)(BL,(0,S.A)((0,S.A)({slots:{root:b,input:w},slotProps:x,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:f},g),{},{classes:y}))}));HL.muiName="Input";const GL=HL;function KL(e){return kN("MuiFilledInput",e)}const YL=(0,S.A)((0,S.A)({},IL),CN("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])),QL=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],$L=hN(ML,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...RL(e,t),!n.disableUnderline&&t.underline]}})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(YL.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(YL.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:i},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(YL.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(YL.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(YL.disabled,", .").concat(YL.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(YL.disabled,":before")]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(bN()).map((e=>{var n;let[r]=e;return{props:{disableUnderline:!1,color:r},style:{"&::after":{borderBottom:"2px solid ".concat(null===(n=(t.vars||t).palette[r])||void 0===n?void 0:n.main)}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),JL=hN(LL,{name:"MuiFilledInput",slot:"Input",overridesResolver:DL})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)((0,S.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]})}))),XL=e.forwardRef((function(e,t){var n,r,s,o;const i=vN({props:e,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:l={},componentsProps:c,fullWidth:u=!1,hiddenLabel:d,inputComponent:h="input",multiline:m=!1,slotProps:p,slots:f={},type:g="text"}=i,y=E(i,QL),v=(0,S.A)((0,S.A)({},i),{},{disableUnderline:a,fullWidth:u,inputComponent:h,multiline:m,type:g}),x=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:s,size:o,hiddenLabel:i,multiline:a}=e,l=Sy({root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd","small"===o&&"size".concat(xN(o)),i&&"hiddenLabel",a&&"multiline"],input:["input"]},KL,t);return(0,S.A)((0,S.A)({},t),l)})(i),b={root:{ownerState:v},input:{ownerState:v}},w=(null!==p&&void 0!==p?p:c)?xx(b,null!==p&&void 0!==p?p:c):b,N=null!==(n=null!==(r=f.root)&&void 0!==r?r:l.Root)&&void 0!==n?n:$L,j=null!==(s=null!==(o=f.input)&&void 0!==o?o:l.Input)&&void 0!==s?s:JL;return(0,k.jsx)(BL,(0,S.A)((0,S.A)({slots:{root:N,input:j},slotProps:w,fullWidth:u,inputComponent:h,multiline:m,ref:t,type:g},y),{},{classes:x}))}));XL.muiName="Input";const ZL=XL,eO=["children","classes","className","label","notched"];var tO;const nO=hN("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:dN})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),rO=hN("legend",{name:"MuiNotchedOutlined",shouldForwardProp:dN})(pN((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function sO(e){return kN("MuiOutlinedInput",e)}const oO=(0,S.A)((0,S.A)({},IL),CN("MuiOutlinedInput",["root","notchedOutline","input"])),iO=["components","fullWidth","inputComponent","label","multiline","notched","slots","slotProps","type"],aO=hN(ML,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:RL})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(oO.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(oO.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}},["&.".concat(oO.focused," .").concat(oO.notchedOutline)]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(oO.focused," .").concat(oO.notchedOutline)]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(oO.error," .").concat(oO.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(oO.disabled," .").concat(oO.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),lO=hN((function(e){const{children:t,classes:n,className:r,label:s,notched:o}=e,i=E(e,eO),a=null!=s&&""!==s,l=(0,S.A)((0,S.A)({},e),{},{notched:o,withLabel:a});return(0,k.jsx)(nO,(0,S.A)((0,S.A)({"aria-hidden":!0,className:r,ownerState:l},i),{},{children:(0,k.jsx)(rO,{ownerState:l,children:a?(0,k.jsx)("span",{children:s}):tO||(tO=(0,k.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline"})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}))),cO=hN(LL,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:DL})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)((0,S.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}}),t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}}),{},{variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]})}))),uO=e.forwardRef((function(t,n){var r,s,o,i;const a=vN({props:t,name:"MuiOutlinedInput"}),{components:l={},fullWidth:c=!1,inputComponent:u="input",label:d,multiline:h=!1,notched:m,slots:p={},slotProps:f={},type:g="text"}=a,y=E(a,iO),v=(e=>{const{classes:t}=e,n=Sy({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},sO,t);return(0,S.A)((0,S.A)({},t),n)})(a),x=CL(),b=jL({props:a,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w=(0,S.A)((0,S.A)({},a),{},{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:x,fullWidth:c,hiddenLabel:b.hiddenLabel,multiline:h,size:b.size,type:g}),N=null!==(r=null!==(s=p.root)&&void 0!==s?s:l.Root)&&void 0!==r?r:aO,j=null!==(o=null!==(i=p.input)&&void 0!==i?i:l.Input)&&void 0!==o?o:cO,[C,A]=PR("notchedOutline",{elementType:lO,className:v.notchedOutline,shouldForwardComponentProp:!0,ownerState:w,externalForwardedProps:{slots:p,slotProps:f},additionalProps:{label:null!=d&&""!==d&&b.required?(0,k.jsxs)(e.Fragment,{children:[d,"\u2009","*"]}):d}});return(0,k.jsx)(BL,(0,S.A)((0,S.A)({slots:{root:N,input:j},slotProps:f,renderSuffix:e=>(0,k.jsx)(C,(0,S.A)((0,S.A)({},A),{},{notched:"undefined"!==typeof m?m:Boolean(e.startAdornment||e.filled||e.focused)})),fullWidth:c,inputComponent:u,multiline:h,ref:n,type:g},y),{},{classes:(0,S.A)((0,S.A)({},v),{},{notchedOutline:null})}))}));uO.muiName="Input";const dO=uO;function hO(e){return kN("MuiFormLabel",e)}const mO=CN("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),pO=["children","className","color","component","disabled","error","filled","focused","required"],fO=hN("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled]}})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1),{},{lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(mO.focused)]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{["&.".concat(mO.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(mO.error)]:{color:(t.vars||t).palette.error.main}}}]})}))),gO=hN("span",{name:"MuiFormLabel",slot:"Asterisk"})(pN((e=>{let{theme:t}=e;return{["&.".concat(mO.error)]:{color:(t.vars||t).palette.error.main}}}))),yO=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiFormLabel"}),{children:r,className:s,color:o,component:i="label",disabled:a,error:l,filled:c,focused:u,required:d}=n,h=E(n,pO),m=jL({props:n,muiFormControl:CL(),states:["color","required","focused","disabled","error","filled"]}),p=(0,S.A)((0,S.A)({},n),{},{color:m.color||"primary",component:i,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required}),f=(e=>{const{classes:t,color:n,focused:r,disabled:s,error:o,filled:i,required:a}=e;return Sy({root:["root","color".concat(xN(n)),s&&"disabled",o&&"error",i&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]},hO,t)})(p);return(0,k.jsxs)(fO,(0,S.A)((0,S.A)({as:i,ownerState:p,className:js(f.root,s),ref:t},h),{},{children:[r,m.required&&(0,k.jsxs)(gO,{ownerState:p,"aria-hidden":!0,className:f.asterisk,children:["\u2009","*"]})]}))})),vO=yO;function xO(e){return kN("MuiInputLabel",e)}CN("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const bO=["disableAnimation","margin","shrink","variant","className"],wO=hN(vO,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(mO.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(pN((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),NO=e.forwardRef((function(e,t){const n=vN({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:s,shrink:o,variant:i,className:a}=n,l=E(n,bO),c=CL();let u=o;"undefined"===typeof u&&c&&(u=c.filled||c.focused||c.adornedStart);const d=jL({props:n,muiFormControl:c,states:["size","variant","required","focused"]}),h=(0,S.A)((0,S.A)({},n),{},{disableAnimation:r,formControl:c,shrink:u,size:d.size,variant:d.variant,required:d.required,focused:d.focused}),m=(e=>{const{classes:t,formControl:n,size:r,shrink:s,disableAnimation:o,variant:i,required:a}=e,l=Sy({root:["root",n&&"formControl",!o&&"animated",s&&"shrink",r&&"medium"!==r&&"size".concat(xN(r)),i],asterisk:[a&&"asterisk"]},xO,t);return(0,S.A)((0,S.A)({},t),l)})(h);return(0,k.jsx)(wO,(0,S.A)((0,S.A)({"data-shrink":u,ref:t,className:js(m.root,a)},l),{},{ownerState:h,classes:m}))})),jO=NO,kO=zT;function CO(e){return kN("MuiFormControl",e)}CN("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const SO=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],AO=hN("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["margin".concat(xN(n.margin))],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),EO=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiFormControl"}),{children:s,className:o,color:i="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:m="none",required:p=!1,size:f="medium",variant:g="outlined"}=r,y=E(r,SO),v=(0,S.A)((0,S.A)({},r),{},{color:i,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:m,required:p,size:f,variant:g}),x=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return Sy({root:["root","none"!==n&&"margin".concat(xN(n)),r&&"fullWidth"]},CO,t)})(v),[b,w]=e.useState((()=>{let t=!1;return s&&e.Children.forEach(s,(e=>{if(!kO(e,["Input","Select"]))return;const n=kO(e,["Select"])?e.props.input:e;n&&n.props.startAdornment&&(t=!0)})),t})),[N,j]=e.useState((()=>{let t=!1;return s&&e.Children.forEach(s,(e=>{kO(e,["Input","Select"])&&(EL(e.props,!0)||EL(e.props.inputProps,!0))&&(t=!0)})),t})),[C,A]=e.useState(!1);l&&C&&A(!1);const _=void 0===u||l?C:u;let I;e.useRef(!1);const T=e.useCallback((()=>{j(!0)}),[]),P=e.useCallback((()=>{j(!1)}),[]),R=e.useMemo((()=>({adornedStart:b,setAdornedStart:w,color:i,disabled:l,error:c,filled:N,focused:_,fullWidth:d,hiddenLabel:h,size:f,onBlur:()=>{A(!1)},onFocus:()=>{A(!0)},onEmpty:P,onFilled:T,registerEffect:I,required:p,variant:g})),[b,i,l,c,N,_,d,h,I,P,T,p,f,g]);return(0,k.jsx)(kL.Provider,{value:R,children:(0,k.jsx)(AO,(0,S.A)((0,S.A)({as:a,ownerState:v,className:js(x.root,o),ref:n},y),{},{children:s}))})})),_O=EO;function IO(e){return kN("MuiFormHelperText",e)}const TO=CN("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),PO=["children","className","component","disabled","error","filled","focused","margin","required","variant"];var RO;const DO=hN("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat(xN(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption),{},{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(TO.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(TO.error)]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]})}))),MO=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiFormHelperText"}),{children:r,className:s,component:o="p",disabled:i,error:a,filled:l,focused:c,margin:u,required:d,variant:h}=n,m=E(n,PO),p=jL({props:n,muiFormControl:CL(),states:["variant","size","disabled","error","filled","focused","required"]}),f=(0,S.A)((0,S.A)({},n),{},{component:o,contained:"filled"===p.variant||"outlined"===p.variant,variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required});delete f.ownerState;const g=(e=>{const{classes:t,contained:n,size:r,disabled:s,error:o,filled:i,focused:a,required:l}=e;return Sy({root:["root",s&&"disabled",o&&"error",r&&"size".concat(xN(r)),n&&"contained",a&&"focused",i&&"filled",l&&"required"]},IO,t)})(f);return(0,k.jsx)(DO,(0,S.A)((0,S.A)({as:o,className:js(g.root,s),ref:t},m),{},{ownerState:f,children:" "===r?RO||(RO=(0,k.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):r}))})),LO=MO,OO=oM,FO=e.createContext();const BO=()=>{const t=e.useContext(FO);return null!==t&&void 0!==t&&t},UO=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const zO=function(e){var t;const{elementType:n,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:o=!1}=e,i=E(e,UO),a=o?{}:CR(r,s),{props:l,internalRef:c}=ER((0,S.A)((0,S.A)({},i),{},{externalSlotProps:a})),u=pP(c,null===a||void 0===a?void 0:a.ref,null===(t=e.additionalProps)||void 0===t?void 0:t.ref);return kR(n,(0,S.A)((0,S.A)({},l),{},{ref:u}),s)};const VO=e.createContext({});function qO(e){return kN("MuiList",e)}CN("MuiList",["root","padding","dense","subheader"]);const WO=["children","className","component","dense","disablePadding","subheader"],HO=hN("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),GO=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiList"}),{children:s,className:o,component:i="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=E(r,WO),d=e.useMemo((()=>({dense:a})),[a]),h=(0,S.A)((0,S.A)({},r),{},{component:i,dense:a,disablePadding:l}),m=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:s}=e;return Sy({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},qO,t)})(h);return(0,k.jsx)(VO.Provider,{value:d,children:(0,k.jsxs)(HO,(0,S.A)((0,S.A)({as:i,className:js(m.root,o),ref:n,ownerState:h},u),{},{children:[c,s]}))})})),KO=MM,YO=DM,QO=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function $O(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function JO(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function XO(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function ZO(e,t,n,r,s,o){let i=!1,a=s(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(i)return!1;i=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&XO(a,o)&&!t)return a.focus(),!0;a=s(e,a,n)}return!1}const eF=e.forwardRef((function(t,n){const{actions:r,autoFocus:s=!1,autoFocusItem:o=!1,children:i,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=t,h=E(t,QO),m=e.useRef(null),p=e.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});SL((()=>{s&&m.current.focus()}),[s]),e.useImperativeHandle(r,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!m.current.style.width;if(e.clientHeight<m.current.clientHeight&&r){const t="".concat(KO(YO(e)),"px");m.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,m.current.style.width="calc(100% + ".concat(t,")")}return m.current}})),[]);const f=fP(m,n);let g=-1;e.Children.forEach(i,((t,n)=>{e.isValidElement(t)?(t.props.disabled||("selectedMenu"===d&&t.props.selected||-1===g)&&(g=n),g===n&&(t.props.disabled||t.props.muiSkipListHighlight||t.type.muiSkipListHighlight)&&(g+=1,g>=i.length&&(g=-1))):g===n&&(g+=1,g>=i.length&&(g=-1))}));const y=e.Children.map(i,((t,n)=>{if(n===g){const n={};return o&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===d&&(n.tabIndex=0),e.cloneElement(t,n)}return t}));return(0,k.jsx)(GO,(0,S.A)((0,S.A)({role:"menu",ref:f,className:a,onKeyDown:e=>{const t=m.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(u&&u(e));const r=OO(t).activeElement;if("ArrowDown"===n)e.preventDefault(),ZO(t,r,c,l,$O);else if("ArrowUp"===n)e.preventDefault(),ZO(t,r,c,l,JO);else if("Home"===n)e.preventDefault(),ZO(t,null,c,l,$O);else if("End"===n)e.preventDefault(),ZO(t,null,c,l,JO);else if(1===n.length){const s=p.current,o=n.toLowerCase(),i=performance.now();s.keys.length>0&&(i-s.lastTime>500?(s.keys=[],s.repeating=!0,s.previousKeyMatched=!0):s.repeating&&o!==s.keys[0]&&(s.repeating=!1)),s.lastTime=i,s.keys.push(o);const a=r&&!s.repeating&&XO(r,s);s.previousKeyMatched&&(a||ZO(t,r,!1,l,$O,s))?e.preventDefault():s.previousKeyMatched=!1}u&&u(e)},tabIndex:s?0:-1},h),{},{children:y}))})),tF=eF,nF=fL,rF=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],sF=["ownerState"];function oF(e){return"scale(".concat(e,", ").concat(e**2,")")}const iF={entering:{opacity:1,transform:oF(1)},entered:{opacity:1,transform:"none"}},aF="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),lF=e.forwardRef((function(t,n){const{addEndListener:r,appear:s=!0,children:o,easing:i,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:m,style:p,timeout:f="auto",TransitionComponent:g=wM}=t,y=E(t,rF),v=DP(),x=e.useRef(),b=LT(),w=e.useRef(null),N=fP(w,iM(o),n),j=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=j(u),A=j(((e,t)=>{NM(e);const{duration:n,delay:r,easing:s}=jM({style:p,timeout:f,easing:i},{mode:"enter"});let o;"auto"===f?(o=b.transitions.getAutoHeightDuration(e.clientHeight),x.current=o):o=n,e.style.transition=[b.transitions.create("opacity",{duration:o,delay:r}),b.transitions.create("transform",{duration:aF?o:.666*o,delay:r,easing:s})].join(","),l&&l(e,t)})),_=j(c),I=j(m),T=j((e=>{const{duration:t,delay:n,easing:r}=jM({style:p,timeout:f,easing:i},{mode:"exit"});let s;"auto"===f?(s=b.transitions.getAutoHeightDuration(e.clientHeight),x.current=s):s=t,e.style.transition=[b.transitions.create("opacity",{duration:s,delay:n}),b.transitions.create("transform",{duration:aF?s:.666*s,delay:aF?n:n||.333*s,easing:r})].join(","),e.style.opacity=0,e.style.transform=oF(.75),d&&d(e)})),P=j(h);return(0,k.jsx)(g,(0,S.A)((0,S.A)({appear:s,in:a,nodeRef:w,onEnter:A,onEntered:_,onEntering:C,onExit:T,onExited:P,onExiting:I,addEndListener:e=>{"auto"===f&&v.start(x.current||0,e),r&&r(w.current,e)},timeout:"auto"===f?null:f},y),{},{children:(t,n)=>{let{ownerState:r}=n,s=E(n,sF);return e.cloneElement(o,(0,S.A)({style:(0,S.A)((0,S.A)((0,S.A)({opacity:0,transform:oF(.75),visibility:"exited"!==t||a?void 0:"hidden"},iF[t]),p),o.props.style),ref:N},s))}}))}));lF&&(lF.muiSupportAuto=!0);const cF=lF;function uF(e){return kN("MuiPopover",e)}CN("MuiPopover",["root","paper"]);function dF(e,t){if(!e)return t;function n(e,t){const n={};return Object.keys(t).forEach((r=>{(function(e,t){const n=e.charCodeAt(2);return"o"===e[0]&&"n"===e[1]&&n>=65&&n<=90&&"function"===typeof t})(r,t[r])&&"function"===typeof e[r]&&(n[r]=function(){e[r](...arguments),t[r](...arguments)})})),n}if("function"===typeof e||"function"===typeof t)return r=>{const s="function"===typeof t?t(r):t,o="function"===typeof e?e((0,S.A)((0,S.A)({},r),s)):e,i=js(null===r||void 0===r?void 0:r.className,null===s||void 0===s?void 0:s.className,null===o||void 0===o?void 0:o.className),a=n(o,s);return(0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)({},s),o),a),!!i&&{className:i}),(null===s||void 0===s?void 0:s.style)&&(null===o||void 0===o?void 0:o.style)&&{style:(0,S.A)((0,S.A)({},s.style),o.style)}),(null===s||void 0===s?void 0:s.sx)&&(null===o||void 0===o?void 0:o.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]})};const r=t,s=n(e,r),o=js(null===r||void 0===r?void 0:r.className,null===e||void 0===e?void 0:e.className);return(0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)((0,S.A)({},t),e),s),!!o&&{className:o}),(null===r||void 0===r?void 0:r.style)&&(null===e||void 0===e?void 0:e.style)&&{style:(0,S.A)((0,S.A)({},r.style),e.style)}),(null===r||void 0===r?void 0:r.sx)&&(null===e||void 0===e?void 0:e.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]})}const hF=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],mF=["slots","slotProps"];function pF(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function fF(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function gF(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function yF(e){return"function"===typeof e?e():e}const vF=hN(QM,{name:"MuiPopover",slot:"Root"})({}),xF=hN(UT,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),bF=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiPopover"}),{action:s,anchorEl:o,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:m=16,open:p,PaperProps:f={},slots:g={},slotProps:y={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:x,transitionDuration:b="auto",TransitionProps:w={},disableScrollLock:N=!1}=r,j=E(r,hF),C=e.useRef(),A=(0,S.A)((0,S.A)({},r),{},{anchorOrigin:i,anchorReference:l,elevation:h,marginThreshold:m,transformOrigin:v,TransitionComponent:x,transitionDuration:b,TransitionProps:w}),_=(e=>{const{classes:t}=e;return Sy({root:["root"],paper:["paper"]},uF,t)})(A),I=e.useCallback((()=>{if("anchorPosition"===l)return a;const e=yF(o),t=(e&&1===e.nodeType?e:OO(C.current).body).getBoundingClientRect();return{top:t.top+pF(t,i.vertical),left:t.left+fF(t,i.horizontal)}}),[o,i.horizontal,i.vertical,a,l]),T=e.useCallback((e=>({vertical:pF(e,v.vertical),horizontal:fF(e,v.horizontal)})),[v.horizontal,v.vertical]),P=e.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=T(t);if("none"===l)return{top:null,left:null,transformOrigin:gF(n)};const r=I();let s=r.top-n.vertical,i=r.left-n.horizontal;const a=s+t.height,c=i+t.width,u=YO(yF(o)),d=u.innerHeight-m,h=u.innerWidth-m;if(null!==m&&s<m){const e=s-m;s-=e,n.vertical+=e}else if(null!==m&&a>d){const e=a-d;s-=e,n.vertical+=e}if(null!==m&&i<m){const e=i-m;i-=e,n.horizontal+=e}else if(c>h){const e=c-h;i-=e,n.horizontal+=e}return{top:"".concat(Math.round(s),"px"),left:"".concat(Math.round(i),"px"),transformOrigin:gF(n)}}),[o,l,I,T,m]),[R,D]=e.useState(p),M=e.useCallback((()=>{const e=C.current;if(!e)return;const t=P(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,D(!0)}),[P]);e.useEffect((()=>(N&&window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M))),[o,N,M]);e.useEffect((()=>{p&&M()})),e.useImperativeHandle(s,(()=>p?{updatePosition:()=>{M()}}:null),[p,M]),e.useEffect((()=>{if(!p)return;const e=nF((()=>{M()})),t=YO(yF(o));return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[o,p,M]);let L=b;const O={slots:(0,S.A)({transition:x},g),slotProps:(0,S.A)({transition:w,paper:f},y)},[F,B]=PR("transition",{elementType:cF,externalForwardedProps:O,ownerState:A,getSlotProps:e=>(0,S.A)((0,S.A)({},e),{},{onEntering:(t,n)=>{var r;null===(r=e.onEntering)||void 0===r||r.call(e,t,n),M()},onExited:t=>{var n;null===(n=e.onExited)||void 0===n||n.call(e,t),D(!1)}}),additionalProps:{appear:!0,in:p}});"auto"!==b||F.muiSupportAuto||(L=void 0);const U=d||(o?OO(yF(o)).body:void 0),[z,V]=PR("root",{ref:n,elementType:vF,externalForwardedProps:(0,S.A)((0,S.A)({},O),j),shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:g.backdrop},slotProps:{backdrop:dF("function"===typeof y.backdrop?y.backdrop(A):y.backdrop,{invisible:!0})},container:U,open:p},ownerState:A,className:js(_.root,u)}),{slots:q,slotProps:W}=V,H=E(V,mF),[G,K]=PR("paper",{ref:C,className:_.paper,elementType:xF,externalForwardedProps:O,shouldForwardComponentProp:!0,additionalProps:{elevation:h,style:R?void 0:{opacity:0}},ownerState:A});return(0,k.jsx)(z,(0,S.A)((0,S.A)((0,S.A)({},H),!NL(z)&&{slots:q,slotProps:W,disableScrollLock:N}),{},{children:(0,k.jsx)(F,(0,S.A)((0,S.A)({},B),{},{timeout:L,children:(0,k.jsx)(G,(0,S.A)((0,S.A)({},K),{},{children:c}))}))}))})),wF=bF;function NF(e){return kN("MuiMenu",e)}CN("MuiMenu",["root","paper","list"]);const jF=["onEntering"],kF=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],CF={vertical:"top",horizontal:"right"},SF={vertical:"top",horizontal:"left"},AF=hN(wF,{shouldForwardProp:e=>dN(e)||"classes"===e,name:"MuiMenu",slot:"Root"})({}),EF=hN(xF,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_F=hN(tF,{name:"MuiMenu",slot:"List"})({outline:0}),IF=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:o,className:i,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:d={},PopoverClasses:h,transitionDuration:m="auto",TransitionProps:{onEntering:p}={},variant:f="selectedMenu",slots:g={},slotProps:y={}}=r,v=E(r.TransitionProps,jF),x=E(r,kF),b=BO(),w=(0,S.A)((0,S.A)({},r),{},{autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:d,transitionDuration:m,TransitionProps:v,variant:f}),N=(e=>{const{classes:t}=e;return Sy({root:["root"],paper:["paper"],list:["list"]},NF,t)})(w),j=s&&!a&&u,C=e.useRef(null);let A=-1;e.Children.map(o,((t,n)=>{e.isValidElement(t)&&(t.props.disabled||("selectedMenu"===f&&t.props.selected||-1===A)&&(A=n))}));const _={slots:g,slotProps:(0,S.A)({list:l,transition:v,paper:d},y)},I=zO({elementType:g.root,externalSlotProps:y.root,ownerState:w,className:[N.root,i]}),[T,P]=PR("paper",{className:N.paper,elementType:EF,externalForwardedProps:_,shouldForwardComponentProp:!0,ownerState:w}),[R,D]=PR("list",{className:js(N.list,l.className),elementType:_F,shouldForwardComponentProp:!0,externalForwardedProps:_,getSlotProps:e=>(0,S.A)((0,S.A)({},e),{},{onKeyDown:t=>{var n;(e=>{"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))})(t),null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}}),ownerState:w}),M="function"===typeof _.slotProps.transition?_.slotProps.transition(w):_.slotProps.transition;return(0,k.jsx)(AF,(0,S.A)((0,S.A)({onClose:c,anchorOrigin:{vertical:"bottom",horizontal:b?"right":"left"},transformOrigin:b?CF:SF,slots:(0,S.A)({root:g.root,paper:T,backdrop:g.backdrop},g.transition&&{transition:g.transition}),slotProps:{root:I,paper:P,backdrop:"function"===typeof y.backdrop?y.backdrop(w):y.backdrop,transition:(0,S.A)((0,S.A)({},M),{},{onEntering:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];((e,t)=>{C.current&&C.current.adjustStyleForScrollbar(e,{direction:b?"rtl":"ltr"}),p&&p(e,t)})(...n),null===M||void 0===M||null===(e=M.onEntering)||void 0===e||e.call(M,...n)}})},open:u,ref:n,transitionDuration:m,ownerState:w},x),{},{classes:h,children:(0,k.jsx)(R,(0,S.A)((0,S.A)({actions:C,autoFocus:s&&(-1===A||a),autoFocusItem:j,variant:f},D),{},{children:o}))}))})),TF=IF;function PF(e){return kN("MuiNativeSelect",e)}const RF=CN("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),DF=["className","disabled","error","IconComponent","inputRef","variant"],MF=hN("select",{name:"MuiNativeSelect"})((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},["&.".concat(RF.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),LF=hN(MF,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:dN,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(RF.multiple)]:t.multiple}]}})({}),OF=hN("svg",{name:"MuiNativeSelect"})((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,["&.".concat(RF.disabled)]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),FF=hN(OF,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(xN(n.variant))],n.open&&t.iconOpen]}})({}),BF=e.forwardRef((function(t,n){const{className:r,disabled:s,error:o,IconComponent:i,inputRef:a,variant:l="standard"}=t,c=E(t,DF),u=(0,S.A)((0,S.A)({},t),{},{disabled:s,variant:l,error:o}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:o,error:i}=e;return Sy({select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon","icon".concat(xN(n)),o&&"iconOpen",r&&"disabled"]},PF,t)})(u);return(0,k.jsxs)(e.Fragment,{children:[(0,k.jsx)(LF,(0,S.A)({ownerState:u,className:js(d.select,r),disabled:s,ref:a||n},c)),t.multiple?null:(0,k.jsx)(FF,{as:i,ownerState:u,className:d.icon})]})}));const UF=function(t){const{controlled:n,default:r,name:s,state:o="value"}=t,{current:i}=e.useRef(void 0!==n),[a,l]=e.useState(r);return[i?n:a,e.useCallback((e=>{i||l(e)}),[])]};function zF(e){return kN("MuiSelect",e)}const VF=CN("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),qF=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"];var WF;const HF=hN(MF,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(VF.select)]:t.select},{["&.".concat(VF.select)]:t[n.variant]},{["&.".concat(VF.error)]:t.error},{["&.".concat(VF.multiple)]:t.multiple}]}})({["&.".concat(VF.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),GF=hN(OF,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat(xN(n.variant))],n.open&&t.iconOpen]}})({}),KF=hN("input",{shouldForwardProp:e=>uN(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function YF(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function QF(e){return null==e||"string"===typeof e&&!e.trim()}const $F=e.forwardRef((function(t,n){var r,s;const{"aria-describedby":o,"aria-label":i,autoFocus:a,autoWidth:l,children:c,className:u,defaultOpen:d,defaultValue:h,disabled:m,displayEmpty:p,error:f=!1,IconComponent:g,inputRef:y,labelId:v,MenuProps:x={},multiple:b,name:w,onBlur:N,onChange:j,onClose:C,onFocus:A,onOpen:_,open:I,readOnly:T,renderValue:P,required:R,SelectDisplayProps:D={},tabIndex:M,type:L,value:O,variant:F="standard"}=t,B=E(t,qF),[U,z]=UF({controlled:O,default:h,name:"Select"}),[V,q]=UF({controlled:I,default:d,name:"Select"}),W=e.useRef(null),H=e.useRef(null),[G,K]=e.useState(null),{current:Y}=e.useRef(null!=I),[Q,$]=e.useState(),J=fP(n,y),X=e.useCallback((e=>{H.current=e,e&&K(e)}),[]),Z=null===G||void 0===G?void 0:G.parentNode;e.useImperativeHandle(J,(()=>({focus:()=>{H.current.focus()},node:W.current,value:U})),[U]),e.useEffect((()=>{d&&V&&G&&!Y&&($(l?null:Z.clientWidth),H.current.focus())}),[G,l]),e.useEffect((()=>{a&&H.current.focus()}),[a]),e.useEffect((()=>{if(!v)return;const e=OO(H.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&H.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const ee=(e,t)=>{e?_&&_(t):C&&C(t),Y||($(l?null:Z.clientWidth),q(e))},te=e.Children.toArray(c),ne=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(b){n=Array.isArray(U)?U.slice():[];const t=U.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),U!==n&&(z(n),j)){const r=t.nativeEvent||t,s=new r.constructor(r.type,r);Object.defineProperty(s,"target",{writable:!0,value:{value:n,name:w}}),j(s,e)}b||ee(!1,t)}},re=null!==G&&V;let se,oe;delete B["aria-invalid"];const ie=[];let ae=!1,le=!1;(EL({value:U})||p)&&(P?se=P(U):ae=!0);const ce=te.map((t=>{if(!e.isValidElement(t))return null;let n;if(b){if(!Array.isArray(U))throw new Error(Ix(2));n=U.some((e=>YF(e,t.props.value))),n&&ae&&ie.push(t.props.children)}else n=YF(U,t.props.value),n&&ae&&(oe=t.props.children);return n&&(le=!0),e.cloneElement(t,{"aria-selected":n?"true":"false",onClick:ne(t),onKeyUp:e=>{" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:n,value:void 0,"data-value":t.props.value})}));ae&&(se=b?0===ie.length?null:ie.reduce(((e,t,n)=>(e.push(t),n<ie.length-1&&e.push(", "),e)),[]):oe);let ue,de=Q;!l&&Y&&G&&(de=Z.clientWidth),ue="undefined"!==typeof M?M:m?null:0;const he=D.id||(w?"mui-component-select-".concat(w):void 0),me=(0,S.A)((0,S.A)({},t),{},{variant:F,value:U,open:re,error:f}),pe=(e=>{const{classes:t,variant:n,disabled:r,multiple:s,open:o,error:i}=e;return Sy({select:["select",n,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon","icon".concat(xN(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},zF,t)})(me),fe=(0,S.A)((0,S.A)({},x.PaperProps),null===(r=x.slotProps)||void 0===r?void 0:r.paper),ge=(0,S.A)((0,S.A)({},x.MenuListProps),null===(s=x.slotProps)||void 0===s?void 0:s.list),ye=dP();return(0,k.jsxs)(e.Fragment,{children:[(0,k.jsx)(HF,(0,S.A)((0,S.A)({as:"div",ref:X,tabIndex:ue,role:"combobox","aria-controls":re?ye:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":re?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[v,he].filter(Boolean).join(" ")||void 0,"aria-describedby":o,"aria-required":R?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:e=>{if(!T){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),ee(!0,e))}},onMouseDown:m||T?null:e=>{0===e.button&&(e.preventDefault(),H.current.focus(),ee(!0,e))},onBlur:e=>{!re&&N&&(Object.defineProperty(e,"target",{writable:!0,value:{value:U,name:w}}),N(e))},onFocus:A},D),{},{ownerState:me,className:js(D.className,pe.select,u),id:he,children:QF(se)?WF||(WF=(0,k.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):se})),(0,k.jsx)(KF,(0,S.A)((0,S.A)({"aria-invalid":f,value:Array.isArray(U)?U.join(","):U,name:w,ref:W,"aria-hidden":!0,onChange:e=>{const t=te.find((t=>t.props.value===e.target.value));void 0!==t&&(z(t.props.value),j&&j(e,t))},tabIndex:-1,disabled:m,className:pe.nativeInput,autoFocus:a,required:R},B),{},{ownerState:me})),(0,k.jsx)(GF,{as:g,className:pe.icon,ownerState:me}),(0,k.jsx)(TF,(0,S.A)((0,S.A)({id:"menu-".concat(w||""),anchorEl:Z,open:re,onClose:e=>{ee(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x),{},{slotProps:(0,S.A)((0,S.A)({},x.slotProps),{},{list:(0,S.A)({"aria-labelledby":v,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:ye},ge),paper:(0,S.A)((0,S.A)({},fe),{},{style:(0,S.A)({minWidth:de},null!=fe?fe.style:null)})}),children:ce}))]})})),JF=$F,XF=xR((0,k.jsx)("path",{d:"M7 10l5 5 5-5z"})),ZF=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],eB=["root"],tB={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>dN(e)&&"variant"!==e},nB=hN(GL,tB)(""),rB=hN(dO,tB)(""),sB=hN(ZL,tB)(""),oB=e.forwardRef((function(t,n){const r=vN({name:"MuiSelect",props:t}),{autoWidth:s=!1,children:o,classes:i={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=XF,id:d,input:h,inputProps:m,label:p,labelId:f,MenuProps:g,multiple:y=!1,native:v=!1,onClose:x,onOpen:b,open:w,renderValue:N,SelectDisplayProps:j,variant:C="outlined"}=r,A=E(r,ZF),_=v?BF:JF,I=jL({props:r,muiFormControl:CL(),states:["variant","error"]}),T=I.variant||C,P=(0,S.A)((0,S.A)({},r),{},{variant:T,classes:i}),R=(e=>{const{classes:t}=e,n=Sy({root:["root"]},zF,t);return(0,S.A)((0,S.A)({},t),n)})(P),{root:D}=R,M=E(R,eB),L=h||{standard:(0,k.jsx)(nB,{ownerState:P}),outlined:(0,k.jsx)(rB,{label:p,ownerState:P}),filled:(0,k.jsx)(sB,{ownerState:P})}[T],O=fP(n,iM(L));return(0,k.jsx)(e.Fragment,{children:e.cloneElement(L,(0,S.A)((0,S.A)((0,S.A)({inputComponent:_,inputProps:(0,S.A)((0,S.A)((0,S.A)({children:o,error:I.error,IconComponent:u,variant:T,type:void 0,multiple:y},v?{id:d}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:f,MenuProps:g,onClose:x,onOpen:b,open:w,renderValue:N,SelectDisplayProps:(0,S.A)({id:d},j)}),m),{},{classes:m?xx(M,m.classes):M},h?h.props.inputProps:{})},(y&&v||c)&&"outlined"===T?{notched:!0}:{}),{},{ref:O,className:js(L.props.className,a,R.root)},!h&&{variant:T}),A))})}));oB.muiName="Select";const iB=oB;function aB(e){return kN("MuiTextField",e)}CN("MuiTextField",["root"]);const lB=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","slots","slotProps","type","value","variant"],cB={standard:GL,filled:ZL,outlined:dO},uB=hN(_O,{name:"MuiTextField",slot:"Root"})({}),dB=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:s=!1,children:o,className:i,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:m,id:p,InputLabelProps:f,inputProps:g,InputProps:y,inputRef:v,label:x,maxRows:b,minRows:w,multiline:N=!1,name:j,onBlur:C,onChange:A,onFocus:_,placeholder:I,required:T=!1,rows:P,select:R=!1,SelectProps:D,slots:M={},slotProps:L={},type:O,value:F,variant:B="outlined"}=n,U=E(n,lB),z=(0,S.A)((0,S.A)({},n),{},{autoFocus:s,color:a,disabled:c,error:u,fullWidth:h,multiline:N,required:T,select:R,variant:B}),V=(e=>{const{classes:t}=e;return Sy({root:["root"]},aB,t)})(z);const q=dP(p),W=m&&q?"".concat(q,"-helper-text"):void 0,H=x&&q?"".concat(q,"-label"):void 0,G=cB[B],K={slots:M,slotProps:(0,S.A)({input:y,inputLabel:f,htmlInput:g,formHelperText:d,select:D},L)},Y={},Q=K.slotProps.inputLabel;"outlined"===B&&(Q&&"undefined"!==typeof Q.shrink&&(Y.notched=Q.shrink),Y.label=x),R&&(D&&D.native||(Y.id=void 0),Y["aria-describedby"]=void 0);const[$,J]=PR("root",{elementType:uB,shouldForwardComponentProp:!0,externalForwardedProps:(0,S.A)((0,S.A)({},K),U),ownerState:z,className:js(V.root,i),ref:t,additionalProps:{disabled:c,error:u,fullWidth:h,required:T,color:a,variant:B}}),[X,Z]=PR("input",{elementType:G,externalForwardedProps:K,additionalProps:Y,ownerState:z}),[ee,te]=PR("inputLabel",{elementType:jO,externalForwardedProps:K,ownerState:z}),[ne,re]=PR("htmlInput",{elementType:"input",externalForwardedProps:K,ownerState:z}),[se,oe]=PR("formHelperText",{elementType:LO,externalForwardedProps:K,ownerState:z}),[ie,ae]=PR("select",{elementType:iB,externalForwardedProps:K,ownerState:z}),le=(0,k.jsx)(X,(0,S.A)({"aria-describedby":W,autoComplete:r,autoFocus:s,defaultValue:l,fullWidth:h,multiline:N,name:j,rows:P,maxRows:b,minRows:w,type:O,value:F,id:q,inputRef:v,onBlur:C,onChange:A,onFocus:_,placeholder:I,inputProps:re,slots:{input:M.htmlInput?ne:void 0}},Z));return(0,k.jsxs)($,(0,S.A)((0,S.A)({},J),{},{children:[null!=x&&""!==x&&(0,k.jsx)(ee,(0,S.A)((0,S.A)({htmlFor:q,id:H},te),{},{children:x})),R?(0,k.jsx)(ie,(0,S.A)((0,S.A)({"aria-describedby":W,id:q,labelId:H,value:F,input:le},ae),{},{children:o})):le,m&&(0,k.jsx)(se,(0,S.A)((0,S.A)({id:W},oe),{},{children:m}))]}))})),hB=dB;function mB(e){return kN("MuiDialogActions",e)}CN("MuiDialogActions",["root","spacing"]);const pB=["className","disableSpacing"],fB=hN("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),gB=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:s=!1}=n,o=E(n,pB),i=(0,S.A)((0,S.A)({},n),{},{disableSpacing:s}),a=(e=>{const{classes:t,disableSpacing:n}=e;return Sy({root:["root",!n&&"spacing"]},mB,t)})(i);return(0,k.jsx)(fB,(0,S.A)({className:js(a.root,r),ownerState:i,ref:t},o))})),yB=xR((0,k.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),vB=xR((0,k.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),xB=xR((0,k.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),bB=t=>{let{subscription:n}=t;const[r,s]=(0,e.useState)(!1),[o,i]=(0,e.useState)(!1),a=null!==n&&void 0!==n&&n.paymentMethod?{type:"card",brand:"visa",last4:"4242",expMonth:12,expYear:2025}:null,l=()=>{s(!1)},c=()=>{i(!1)};return(0,k.jsxs)(Yj,{children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"Payment Methods"}),a?(0,k.jsx)(Yj,{mt:2,children:(0,k.jsx)(eM,{variant:"outlined",children:(0,k.jsx)(sM,{children:(0,k.jsxs)(Yj,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,k.jsxs)(Yj,{display:"flex",alignItems:"center",children:[(0,k.jsx)(yB,{sx:{mr:2}}),(0,k.jsxs)(Yj,{children:[(0,k.jsxs)(lk,{variant:"subtitle1",children:[a.brand.charAt(0).toUpperCase()+a.brand.slice(1)," \u2022\u2022\u2022\u2022 ",a.last4]}),(0,k.jsxs)(lk,{variant:"body2",color:"text.secondary",children:["Expires ",a.expMonth,"/",a.expYear]})]})]}),(0,k.jsx)(mR,{startIcon:(0,k.jsx)(xB,{}),onClick:()=>{i(!0)},size:"small",children:"Edit"})]})})})}):(0,k.jsx)(Yj,{mt:2,mb:2,children:(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",children:"No payment method on file."})}),(0,k.jsx)(Yj,{mt:3,children:(0,k.jsx)(mR,{variant:"outlined",startIcon:(0,k.jsx)(vB,{}),onClick:()=>{s(!0)},children:"Add Payment Method"})}),(0,k.jsxs)(oL,{open:r,onClose:l,children:[(0,k.jsx)(uL,{children:"Add Payment Method"}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Adding new card"),l()},children:[(0,k.jsx)(pL,{children:(0,k.jsxs)(lP,{container:!0,spacing:2,children:[(0,k.jsx)(lP,{item:!0,xs:12,children:(0,k.jsx)(hB,{label:"Card Number",fullWidth:!0,required:!0,placeholder:"1234 5678 9012 3456"})}),(0,k.jsx)(lP,{item:!0,xs:6,children:(0,k.jsx)(hB,{label:"Expiration Date",fullWidth:!0,required:!0,placeholder:"MM/YY"})}),(0,k.jsx)(lP,{item:!0,xs:6,children:(0,k.jsx)(hB,{label:"CVC",fullWidth:!0,required:!0,placeholder:"123"})}),(0,k.jsx)(lP,{item:!0,xs:12,children:(0,k.jsx)(hB,{label:"Cardholder Name",fullWidth:!0,required:!0})})]})}),(0,k.jsxs)(gB,{children:[(0,k.jsx)(mR,{onClick:l,children:"Cancel"}),(0,k.jsx)(mR,{type:"submit",variant:"contained",color:"primary",children:"Add Card"})]})]})]}),(0,k.jsxs)(oL,{open:o,onClose:c,children:[(0,k.jsx)(uL,{children:"Update Payment Method"}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Updating card"),c()},children:[(0,k.jsx)(pL,{children:(0,k.jsxs)(lP,{container:!0,spacing:2,children:[(0,k.jsx)(lP,{item:!0,xs:6,children:(0,k.jsx)(hB,{label:"Expiration Date",fullWidth:!0,required:!0,defaultValue:a?"".concat(a.expMonth,"/").concat(a.expYear.toString().slice(-2)):"",placeholder:"MM/YY"})}),(0,k.jsx)(lP,{item:!0,xs:6,children:(0,k.jsx)(hB,{label:"CVC",fullWidth:!0,required:!0,placeholder:"123"})}),(0,k.jsx)(lP,{item:!0,xs:12,children:(0,k.jsx)(hB,{label:"Cardholder Name",fullWidth:!0,required:!0})})]})}),(0,k.jsxs)(gB,{children:[(0,k.jsx)(mR,{onClick:c,children:"Cancel"}),(0,k.jsx)(mR,{type:"submit",variant:"contained",color:"primary",children:"Update Card"})]})]})]})]})};function wB(e){return kN("MuiTableContainer",e)}CN("MuiTableContainer",["root"]);const NB=["className","component"],jB=hN("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),kB=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiTableContainer"}),{className:r,component:s="div"}=n,o=E(n,NB),i=(0,S.A)((0,S.A)({},n),{},{component:s}),a=(e=>{const{classes:t}=e;return Sy({root:["root"]},wB,t)})(i);return(0,k.jsx)(jB,(0,S.A)({ref:t,as:s,className:js(a.root,r),ownerState:i},o))}));const CB=e.createContext();function SB(e){return kN("MuiTable",e)}CN("MuiTable",["root","stickyHeader"]);const AB=["className","component","padding","size","stickyHeader"],EB=hN("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(pN((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,S.A)((0,S.A)({},t.typography.body2),{},{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"}),variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),_B="table",IB=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiTable"}),{className:s,component:o=_B,padding:i="normal",size:a="medium",stickyHeader:l=!1}=r,c=E(r,AB),u=(0,S.A)((0,S.A)({},r),{},{component:o,padding:i,size:a,stickyHeader:l}),d=(e=>{const{classes:t,stickyHeader:n}=e;return Sy({root:["root",n&&"stickyHeader"]},SB,t)})(u),h=e.useMemo((()=>({padding:i,size:a,stickyHeader:l})),[i,a,l]);return(0,k.jsx)(CB.Provider,{value:h,children:(0,k.jsx)(EB,(0,S.A)({as:o,role:o===_B?null:"table",ref:n,className:js(d.root,s),ownerState:u},c))})})),TB=IB;const PB=e.createContext();function RB(e){return kN("MuiTableHead",e)}CN("MuiTableHead",["root"]);const DB=["className","component"],MB=hN("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),LB={variant:"head"},OB="thead",FB=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiTableHead"}),{className:r,component:s=OB}=n,o=E(n,DB),i=(0,S.A)((0,S.A)({},n),{},{component:s}),a=(e=>{const{classes:t}=e;return Sy({root:["root"]},RB,t)})(i);return(0,k.jsx)(PB.Provider,{value:LB,children:(0,k.jsx)(MB,(0,S.A)({as:s,className:js(a.root,r),ref:t,role:s===OB?null:"rowgroup",ownerState:i},o))})}));function BB(e){return kN("MuiTableRow",e)}const UB=CN("MuiTableRow",["root","selected","hover","head","footer"]),zB=["className","component","hover","selected"],VB=hN("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(pN((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(UB.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(UB.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):Jb(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):Jb(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),qB="tr",WB=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiTableRow"}),{className:s,component:o=qB,hover:i=!1,selected:a=!1}=r,l=E(r,zB),c=e.useContext(PB),u=(0,S.A)((0,S.A)({},r),{},{component:o,hover:i,selected:a,head:c&&"head"===c.variant,footer:c&&"footer"===c.variant}),d=(e=>{const{classes:t,selected:n,hover:r,head:s,footer:o}=e;return Sy({root:["root",n&&"selected",r&&"hover",s&&"head",o&&"footer"]},BB,t)})(u);return(0,k.jsx)(VB,(0,S.A)({as:o,ref:n,className:js(d.root,s),role:o===qB?null:"row",ownerState:u},l))})),HB=WB;function GB(e){return kN("MuiTableCell",e)}const KB=CN("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),YB=["align","className","component","padding","scope","size","sortDirection","variant"],QB=hN("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat(xN(n.size))],"normal"!==n.padding&&t["padding".concat(xN(n.padding))],"inherit"!==n.align&&t["align".concat(xN(n.align))],n.stickyHeader&&t.stickyHeader]}})(pN((e=>{let{theme:t}=e;return(0,S.A)((0,S.A)({},t.typography.body2),{},{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?tw(Jb(t.palette.divider,1),.88):Zb(Jb(t.palette.divider,1),.68)),textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",["&.".concat(KB.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]})}))),$B=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiTableCell"}),{align:s="inherit",className:o,component:i,padding:a,scope:l,size:c,sortDirection:u,variant:d}=r,h=E(r,YB),m=e.useContext(CB),p=e.useContext(PB),f=p&&"head"===p.variant;let g;g=i||(f?"th":"td");let y=l;"td"===g?y=void 0:!y&&f&&(y="col");const v=d||p&&p.variant,x=(0,S.A)((0,S.A)({},r),{},{align:s,component:g,padding:a||(m&&m.padding?m.padding:"normal"),size:c||(m&&m.size?m.size:"medium"),sortDirection:u,stickyHeader:"head"===v&&m&&m.stickyHeader,variant:v}),b=(e=>{const{classes:t,variant:n,align:r,padding:s,size:o,stickyHeader:i}=e;return Sy({root:["root",n,i&&"stickyHeader","inherit"!==r&&"align".concat(xN(r)),"normal"!==s&&"padding".concat(xN(s)),"size".concat(xN(o))]},GB,t)})(x);let w=null;return u&&(w="asc"===u?"ascending":"descending"),(0,k.jsx)(QB,(0,S.A)({as:g,ref:n,className:js(b.root,o),"aria-sort":w,scope:y,ownerState:x},h))})),JB=$B;function XB(e){return kN("MuiTableBody",e)}CN("MuiTableBody",["root"]);const ZB=["className","component"],eU=hN("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),tU={variant:"body"},nU="tbody",rU=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiTableBody"}),{className:r,component:s=nU}=n,o=E(n,ZB),i=(0,S.A)((0,S.A)({},n),{},{component:s}),a=(e=>{const{classes:t}=e;return Sy({root:["root"]},XB,t)})(i);return(0,k.jsx)(PB.Provider,{value:tU,children:(0,k.jsx)(eU,(0,S.A)({className:js(a.root,r),as:s,ref:t,role:s===nU?null:"rowgroup",ownerState:i},o))})}));function sU(e){return kN("MuiIconButton",e)}const oU=CN("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),iU=["edge","children","className","color","disabled","disableFocusRipple","size","id","loading","loadingIndicator"],aU=hN(eR,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,"default"!==n.color&&t["color".concat(xN(n.color))],n.edge&&t["edge".concat(xN(n.edge))],t["size".concat(xN(n.size))]]}})(pN((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),pN((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{"--IconButton-hoverBg":t.vars?"rgba(".concat((t.vars||t).palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):Jb((t.vars||t).palette[n].main,t.palette.action.hoverOpacity)}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],["&.".concat(oU.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},["&.".concat(oU.loading)]:{color:"transparent"}}}))),lU=hN("span",{name:"MuiIconButton",slot:"LoadingIndicator"})((e=>{let{theme:t}=e;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}})),cU=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiIconButton"}),{edge:r=!1,children:s,className:o,color:i="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium",id:u,loading:d=null,loadingIndicator:h}=n,m=E(n,iU),p=hP(u),f=null!==h&&void 0!==h?h:(0,k.jsx)(zN,{"aria-labelledby":p,color:"inherit",size:16}),g=(0,S.A)((0,S.A)({},n),{},{edge:r,color:i,disabled:a,disableFocusRipple:l,loading:d,loadingIndicator:f,size:c}),y=(e=>{const{classes:t,disabled:n,color:r,edge:s,size:o,loading:i}=e;return Sy({root:["root",i&&"loading",n&&"disabled","default"!==r&&"color".concat(xN(r)),s&&"edge".concat(xN(s)),"size".concat(xN(o))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},sU,t)})(g);return(0,k.jsxs)(aU,(0,S.A)((0,S.A)({id:d?p:u,className:js(y.root,o),centerRipple:!0,focusRipple:!l,disabled:a||d,ref:t},m),{},{ownerState:g,children:["boolean"===typeof d&&(0,k.jsx)("span",{className:y.loadingWrapper,style:{display:"contents"},children:(0,k.jsx)(lU,{className:y.loadingIndicator,ownerState:g,children:d&&f})}),s]}))})),uU=cU,dU=xR((0,k.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),hU=e=>{let{history:t}=e;const n=e=>{if(!e)return"N/A";return YD(e.toDate(),"MMM dd, yyyy")},r=e=>{switch(e){case"paid":return"success";case"pending":return"warning";case"failed":return"error";default:return"default"}};return(0,k.jsxs)(Yj,{children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"Billing History"}),0===t.length?(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",sx:{mt:2},children:"No billing history available."}):(0,k.jsx)(kB,{children:(0,k.jsxs)(TB,{size:"small",children:[(0,k.jsx)(FB,{children:(0,k.jsxs)(HB,{children:[(0,k.jsx)(JB,{children:"Date"}),(0,k.jsx)(JB,{children:"Description"}),(0,k.jsx)(JB,{align:"right",children:"Amount"}),(0,k.jsx)(JB,{align:"center",children:"Status"}),(0,k.jsx)(JB,{align:"center",children:"Invoice"})]})}),(0,k.jsx)(rU,{children:t.map((e=>(0,k.jsxs)(HB,{children:[(0,k.jsx)(JB,{children:n(e.paymentDate)}),(0,k.jsx)(JB,{children:"Payment for ".concat(e.planName)}),(0,k.jsxs)(JB,{align:"right",children:[e.amount," ",e.currency]}),(0,k.jsx)(JB,{align:"center",children:(0,k.jsx)(FR,{label:e.status.toUpperCase(),color:r(e.status),size:"small"})}),(0,k.jsx)(JB,{align:"center",children:e.receiptUrl?(0,k.jsx)(uU,{size:"small",href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",children:(0,k.jsx)(dU,{fontSize:"small"})}):(0,k.jsx)(lk,{variant:"body2",color:"text.secondary",children:"-"})})]},e.id)))})]})})]})};function mU(e){return kN("MuiLinearProgress",e)}CN("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const pU=["className","color","value","valueBuffer","variant"];var fU,gU,yU,vU,xU,bU;const wU=sx(fU||(fU=(0,Cy.A)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"]))),NU="string"!==typeof wU?rx(gU||(gU=(0,Cy.A)(["\n        animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n      "])),wU):null,jU=sx(yU||(yU=(0,Cy.A)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"]))),kU="string"!==typeof jU?rx(vU||(vU=(0,Cy.A)(["\n        animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n      "])),jU):null,CU=sx(xU||(xU=(0,Cy.A)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"]))),SU="string"!==typeof CU?rx(bU||(bU=(0,Cy.A)(["\n        animation: "," 3s infinite linear;\n      "])),CU):null,AU=(e,t)=>e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?tw(e.palette[t].main,.62):Zb(e.palette[t].main,.5),EU=hN("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat(xN(n.color))],t[n.variant]]}})(pN((e=>{let{theme:t}=e;return{position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:AU(t,n)}}})),{props:e=>{let{ownerState:t}=e;return"inherit"===t.color&&"buffer"!==t.variant},style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}}))),_U=hN("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t["dashedColor".concat(xN(n.color))]]}})(pN((e=>{let{theme:t}=e;return{position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;const r=AU(t,n);return{props:{color:n},style:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)")}}}))]}})),SU||{animation:"".concat(CU," 3s infinite linear")}),IU=hN("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t["barColor".concat(xN(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})(pN((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main}}})),{props:{variant:"determinate"},style:{transition:"transform .".concat(4,"s linear")}},{props:{variant:"buffer"},style:{zIndex:1,transition:"transform .".concat(4,"s linear")}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:NU||{animation:"".concat(wU," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite")}}]}}))),TU=hN("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t["barColor".concat(xN(n.color))],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})(pN((e=>{let{theme:t}=e;return{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[n].main}}})),{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"!==t.color},style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:e=>{let{ownerState:t}=e;return"buffer"!==t.variant&&"inherit"===t.color},style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(bN()).map((e=>{let[n]=e;return{props:{color:n,variant:"buffer"},style:{backgroundColor:AU(t,n),transition:"transform .".concat(4,"s linear")}}})),{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant||"query"===t.variant},style:kU||{animation:"".concat(jU," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite")}}]}}))),PU=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiLinearProgress"}),{className:r,color:s="primary",value:o,valueBuffer:i,variant:a="indeterminate"}=n,l=E(n,pU),c=(0,S.A)((0,S.A)({},n),{},{color:s,variant:a}),u=(e=>{const{classes:t,variant:n,color:r}=e;return Sy({root:["root","color".concat(xN(r)),n],dashed:["dashed","dashedColor".concat(xN(r))],bar1:["bar","bar1","barColor".concat(xN(r)),("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","bar2","buffer"!==n&&"barColor".concat(xN(r)),"buffer"===n&&"color".concat(xN(r)),("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]},mU,t)})(c),d=BO(),h={},m={bar1:{},bar2:{}};if("determinate"===a||"buffer"===a)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;d&&(e=-e),m.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===a)if(void 0!==i){let e=(i||0)-100;d&&(e=-e),m.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,k.jsxs)(EU,(0,S.A)((0,S.A)((0,S.A)({className:js(u.root,r),ownerState:c,role:"progressbar"},h),{},{ref:t},l),{},{children:["buffer"===a?(0,k.jsx)(_U,{className:u.dashed,ownerState:c}):null,(0,k.jsx)(IU,{className:u.bar1,ownerState:c,style:m.bar1}),"determinate"===a?null:(0,k.jsx)(TU,{className:u.bar2,ownerState:c,style:m.bar2})]}))})),RU=PU,DU=e=>{let{metrics:t}=e;if(!t)return(0,k.jsxs)(Yj,{children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"Usage Metrics"}),(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",children:"No usage data available."})]});const n=(e,t,n)=>{const r=((e,t)=>Math.min(Math.round(e/t*100),100))(t,n),s=(e=>e<70?"success":e<90?"warning":"error")(r);return(0,k.jsxs)(Yj,{mb:2,children:[(0,k.jsxs)(Yj,{display:"flex",justifyContent:"space-between",mb:.5,children:[(0,k.jsx)(lk,{variant:"body2",children:e}),(0,k.jsxs)(lk,{variant:"body2",fontWeight:"medium",children:[t," / ",n]})]}),(0,k.jsx)(RU,{variant:"determinate",value:r,color:s,sx:{height:8,borderRadius:1}})]})};return(0,k.jsxs)(Yj,{children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"Usage Metrics"}),(0,k.jsxs)(Yj,{mt:2,children:[n("Customers",t.customers.used,t.customers.limit),n("Coupons",t.coupons.used,t.coupons.limit),n("Communications",t.communications.used,t.communications.limit)]})]})};function MU(e){return kN("MuiListItem",e)}CN("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const LU=CN("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function OU(e){return kN("MuiListItemSecondaryAction",e)}CN("MuiListItemSecondaryAction",["root","disableGutters"]);const FU=["className"],BU=hN("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:e=>{let{ownerState:t}=e;return t.disableGutters},style:{right:0}}]}),UU=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiListItemSecondaryAction"}),{className:s}=r,o=E(r,FU),i=e.useContext(VO),a=(0,S.A)((0,S.A)({},r),{},{disableGutters:i.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e;return Sy({root:["root",t&&"disableGutters"]},OU,n)})(a);return(0,k.jsx)(BU,(0,S.A)({className:js(l.root,s),ownerState:a,ref:n},o))}));UU.muiName="ListItemSecondaryAction";const zU=UU,VU=["className"],qU=["alignItems","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disableGutters","disablePadding","divider","secondaryAction","slotProps","slots"],WU=hN("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]}})(pN((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&t.dense},style:{paddingTop:4,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!!t.secondaryAction},style:{paddingRight:48}},{props:e=>{let{ownerState:t}=e;return!!t.secondaryAction},style:{["& > .".concat(LU.root)]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return t.button},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:e=>{let{ownerState:t}=e;return t.hasSecondaryAction},style:{paddingRight:48}}]}}))),HU=hN("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),GU=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiListItem"}),{alignItems:s="center",children:o,className:i,component:a,components:l={},componentsProps:c={},ContainerComponent:u="li",ContainerProps:{className:d}={},dense:h=!1,disableGutters:m=!1,disablePadding:p=!1,divider:f=!1,secondaryAction:g,slotProps:y={},slots:v={}}=r,x=E(r.ContainerProps,VU),b=E(r,qU),w=e.useContext(VO),N=e.useMemo((()=>({dense:h||w.dense||!1,alignItems:s,disableGutters:m})),[s,w.dense,h,m]),j=e.useRef(null),C=e.Children.toArray(o),A=C.length&&kO(C[C.length-1],["ListItemSecondaryAction"]),_=(0,S.A)((0,S.A)({},r),{},{alignItems:s,dense:N.dense,disableGutters:m,disablePadding:p,divider:f,hasSecondaryAction:A}),I=(e=>{const{alignItems:t,classes:n,dense:r,disableGutters:s,disablePadding:o,divider:i,hasSecondaryAction:a}=e;return Sy({root:["root",r&&"dense",!s&&"gutters",!o&&"padding",i&&"divider","flex-start"===t&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},MU,n)})(_),T=fP(j,n),P=v.root||l.Root||WU,R=y.root||c.root||{},D=(0,S.A)({className:js(I.root,R.className,i)},b);let M=a||"li";return A?(M=D.component||a?M:"div","li"===u&&("li"===M?M="div":"li"===D.component&&(D.component="div")),(0,k.jsx)(VO.Provider,{value:N,children:(0,k.jsxs)(HU,(0,S.A)((0,S.A)({as:u,className:js(I.container,d),ref:T,ownerState:_},x),{},{children:[(0,k.jsx)(P,(0,S.A)((0,S.A)((0,S.A)((0,S.A)({},R),!NL(P)&&{as:M,ownerState:(0,S.A)((0,S.A)({},_),R.ownerState)}),D),{},{children:C})),C.pop()]}))})):(0,k.jsx)(VO.Provider,{value:N,children:(0,k.jsxs)(P,(0,S.A)((0,S.A)((0,S.A)((0,S.A)({},R),{},{as:M,ref:T},!NL(P)&&{ownerState:(0,S.A)((0,S.A)({},_),R.ownerState)}),D),{},{children:[C,g&&(0,k.jsx)(zU,{children:g})]}))})})),KU=GU;function YU(e){return kN("MuiListItemIcon",e)}CN("MuiListItemIcon",["root","alignItemsFlexStart"]);const QU=["className"],$U=hN("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(pN((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),JU=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiListItemIcon"}),{className:s}=r,o=E(r,QU),i=e.useContext(VO),a=(0,S.A)((0,S.A)({},r),{},{alignItems:i.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e;return Sy({root:["root","flex-start"===t&&"alignItemsFlexStart"]},YU,n)})(a);return(0,k.jsx)($U,(0,S.A)({className:js(l.root,s),ownerState:a,ref:n},o))}));function XU(e){return kN("MuiListItemText",e)}const ZU=CN("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ez=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps","slots","slotProps"],tz=hN("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(ZU.primary)]:t.primary},{["& .".concat(ZU.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[".".concat(ek.root,":where(& .").concat(ZU.primary,")")]:{display:"block"},[".".concat(ek.root,":where(& .").concat(ZU.secondary,")")]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),nz=e.forwardRef((function(t,n){const r=vN({props:t,name:"MuiListItemText"}),{children:s,className:o,disableTypography:i=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d,slots:h={},slotProps:m={}}=r,p=E(r,ez),{dense:f}=e.useContext(VO);let g=null!=l?l:s,y=u;const v=(0,S.A)((0,S.A)({},r),{},{disableTypography:i,inset:a,primary:!!g,secondary:!!y,dense:f}),x=(e=>{const{classes:t,inset:n,primary:r,secondary:s,dense:o}=e;return Sy({root:["root",n&&"inset",o&&"dense",r&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},XU,t)})(v),b={slots:h,slotProps:(0,S.A)({primary:c,secondary:d},m)},[w,N]=PR("root",{className:js(x.root,o),elementType:tz,externalForwardedProps:(0,S.A)((0,S.A)({},b),p),ownerState:v,ref:n}),[j,C]=PR("primary",{className:x.primary,elementType:lk,externalForwardedProps:b,ownerState:v}),[A,_]=PR("secondary",{className:x.secondary,elementType:lk,externalForwardedProps:b,ownerState:v});return null==g||g.type===lk||i||(g=(0,k.jsx)(j,(0,S.A)((0,S.A)({variant:f?"body2":"body1",component:null!==C&&void 0!==C&&C.variant?void 0:"span"},C),{},{children:g}))),null==y||y.type===lk||i||(y=(0,k.jsx)(A,(0,S.A)((0,S.A)({variant:"body2",color:"textSecondary"},_),{},{children:y}))),(0,k.jsxs)(w,(0,S.A)((0,S.A)({},N),{},{children:[g,y]}))}));function rz(e){return kN("MuiCardHeader",e)}const sz=CN("MuiCardHeader",["root","avatar","action","content","title","subheader"]),oz=["action","avatar","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps","slots","slotProps"],iz=hN("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(sz.title)]:t.title},{["& .".concat(sz.subheader)]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),az=hN("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),lz=hN("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),cz=hN("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[".".concat(ek.root,":where(& .").concat(sz.title,")")]:{display:"block"},[".".concat(ek.root,":where(& .").concat(sz.subheader,")")]:{display:"block"}}),uz=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiCardHeader"}),{action:r,avatar:s,component:o="div",disableTypography:i=!1,subheader:a,subheaderTypographyProps:l,title:c,titleTypographyProps:u,slots:d={},slotProps:h={}}=n,m=E(n,oz),p=(0,S.A)((0,S.A)({},n),{},{component:o,disableTypography:i}),f=(e=>{const{classes:t}=e;return Sy({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},rz,t)})(p),g={slots:d,slotProps:(0,S.A)({title:u,subheader:l},h)};let y=c;const[v,x]=PR("title",{className:f.title,elementType:lk,externalForwardedProps:g,ownerState:p,additionalProps:{variant:s?"body2":"h5",component:"span"}});null==y||y.type===lk||i||(y=(0,k.jsx)(v,(0,S.A)((0,S.A)({},x),{},{children:y})));let b=a;const[w,N]=PR("subheader",{className:f.subheader,elementType:lk,externalForwardedProps:g,ownerState:p,additionalProps:{variant:s?"body2":"body1",color:"textSecondary",component:"span"}});null==b||b.type===lk||i||(b=(0,k.jsx)(w,(0,S.A)((0,S.A)({},N),{},{children:b})));const[j,C]=PR("root",{ref:t,className:f.root,elementType:iz,externalForwardedProps:(0,S.A)((0,S.A)((0,S.A)({},g),m),{},{component:o}),ownerState:p}),[A,_]=PR("avatar",{className:f.avatar,elementType:az,externalForwardedProps:g,ownerState:p}),[I,T]=PR("content",{className:f.content,elementType:cz,externalForwardedProps:g,ownerState:p}),[P,R]=PR("action",{className:f.action,elementType:lz,externalForwardedProps:g,ownerState:p});return(0,k.jsxs)(j,(0,S.A)((0,S.A)({},C),{},{children:[s&&(0,k.jsx)(A,(0,S.A)((0,S.A)({},_),{},{children:s})),(0,k.jsxs)(I,(0,S.A)((0,S.A)({},T),{},{children:[y,b]})),r&&(0,k.jsx)(P,(0,S.A)((0,S.A)({},R),{},{children:r}))]}))}));function dz(e){return kN("MuiCardActions",e)}CN("MuiCardActions",["root","spacing"]);const hz=["disableSpacing","className"],mz=hN("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),pz=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:s}=n,o=E(n,hz),i=(0,S.A)((0,S.A)({},n),{},{disableSpacing:r}),a=(e=>{const{classes:t,disableSpacing:n}=e;return Sy({root:["root",!n&&"spacing"]},dz,t)})(i);return(0,k.jsx)(mz,(0,S.A)({className:js(a.root,s),ownerState:i,ref:t},o))})),fz=xR((0,k.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),gz=xR((0,k.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),yz=t=>{let{currentSubscription:n,availablePlans:r,onClose:s,businessId:o}=t;const[i,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,m]=(0,e.useState)(r),[p,f]=(0,e.useState)(0===r.length);(0,e.useEffect)((()=>{(async()=>{if(0===r.length)try{f(!0);const e=await TS.getPricingPlans();m(e),d(null)}catch(zZ){console.error("Error fetching pricing plans:",zZ),d("Failed to load pricing plans. Please try again.")}finally{f(!1)}})()}),[r]);return(0,k.jsxs)(oL,{open:!0,onClose:s,maxWidth:"lg",fullWidth:!0,children:[(0,k.jsxs)(uL,{children:["Choose Your Plan",(0,k.jsx)(lk,{variant:"body2",color:"text.secondary",children:"Select the plan that best fits your business needs."})]}),(0,k.jsx)(pL,{children:p?(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:(0,k.jsx)(zN,{})}):u?(0,k.jsx)(lk,{color:"error",align:"center",sx:{py:4},children:u}):0===h.length?(0,k.jsx)(Yj,{sx:{textAlign:"center",py:4},children:(0,k.jsx)(lk,{paragraph:!0,children:"No pricing plans are available. Please contact your administrator."})}):(0,k.jsx)(lP,{container:!0,spacing:3,sx:{mt:1},children:h.map((e=>(0,k.jsx)(lP,{item:!0,xs:12,md:4,children:(0,k.jsxs)(eM,{variant:"outlined",sx:(0,S.A)({height:"100%",display:"flex",flexDirection:"column",borderColor:i===e.id?"primary.main":"divider",borderWidth:i===e.id?2:1,position:"relative"},e.popularPlan?{boxShadow:3,borderColor:"primary.main"}:{}),children:[e.popularPlan&&(0,k.jsx)("div",{style:{position:"absolute",top:0,right:0,backgroundColor:"#1976d2",color:"white",padding:"4px 12px",borderBottomLeftRadius:8,fontSize:"0.75rem",fontWeight:"bold"},children:"MOST POPULAR"}),(0,k.jsx)(uz,{title:e.name,titleTypographyProps:{variant:"h6"},sx:{backgroundColor:i===e.id?"rgba(25, 118, 210, 0.1)":"background.default",pb:1}}),(0,k.jsxs)(sM,{sx:{flexGrow:1},children:[(0,k.jsxs)(lk,{variant:"h5",component:"div",gutterBottom:!0,children:[0===e.price?"Free":"$".concat(e.price),(0,k.jsxs)(lk,{variant:"caption",component:"span",sx:{ml:1},children:["/",e.billingCycle]})]}),e.description&&(0,k.jsx)(lk,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),(0,k.jsx)(GO,{dense:!0,children:e.features&&e.features.slice(0,5).map((e=>(e=>(0,k.jsxs)(KU,{sx:{py:.5},children:[(0,k.jsx)(JU,{sx:{minWidth:36},children:e.included?(0,k.jsx)(fz,{color:"success",fontSize:"small"}):(0,k.jsx)(gz,{color:"error",fontSize:"small"})}),(0,k.jsx)(nz,{primary:e.name,primaryTypographyProps:{variant:"body2",fontWeight:e.highlight?"bold":"normal"}})]},e.name))(e)))}),e.features&&e.features.length>5&&(0,k.jsxs)(lk,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["+",e.features.length-5," more features"]})]}),(0,k.jsx)(pz,{sx:{p:2,pt:0},children:(0,k.jsx)(mR,{variant:i===e.id?"contained":"outlined",color:"primary",fullWidth:!0,onClick:()=>{return t=e.id,void a(t);var t},disabled:(null===n||void 0===n?void 0:n.planId)===e.id,children:(null===n||void 0===n?void 0:n.planId)===e.id?"Current Plan":e.ctaText||"Select Plan"})})]})},e.id)))})}),(0,k.jsxs)(gB,{sx:{px:3,pb:3},children:[(0,k.jsx)(mR,{onClick:s,disabled:l,children:"Cancel"}),(0,k.jsx)(mR,{variant:"contained",color:"primary",onClick:async()=>{if(i)try{c(!0),setTimeout((()=>{c(!1),s(),window.location.reload()}),1500)}catch(zZ){console.error("Error changing plan:",zZ),d("Failed to change plan. Please try again."),c(!1)}},disabled:!i||l||i===(null===n||void 0===n?void 0:n.planId),children:l?(0,k.jsx)(zN,{size:24}):"Confirm Selection"})]})]})};function vz(e){return kN("MuiAlert",e)}const xz=CN("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),bz=xR((0,k.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),wz=xR((0,k.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Nz=xR((0,k.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),jz=xR((0,k.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),kz=xR((0,k.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Cz=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Sz=hN(UT,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat(xN(n.color||n.severity))]]}})(pN((e=>{let{theme:t}=e;const n="light"===t.palette.mode?Zb:tw,r="light"===t.palette.mode?tw:Zb;return(0,S.A)((0,S.A)({},t.typography.body2),{},{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(bN(["light"])).map((e=>{let[s]=e;return{props:{colorSeverity:s,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(s,"Color")]:n(t.palette[s].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(s,"StandardBg")]:r(t.palette[s].light,.9),["& .".concat(xz.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(s,"IconColor")]}:{color:t.palette[s].main}}}})),...Object.entries(t.palette).filter(bN(["light"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:n(t.palette[r].light,.6),border:"1px solid ".concat((t.vars||t).palette[r].light),["& .".concat(xz.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter(bN(["dark"])).map((e=>{let[n]=e;return{props:{colorSeverity:n,variant:"filled"},style:(0,S.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(n,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(n,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[n].dark:t.palette[n].main,color:t.palette.getContrastText(t.palette[n].main)})}}))]})}))),Az=hN("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ez=hN("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),_z=hN("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Iz={success:(0,k.jsx)(bz,{fontSize:"inherit"}),warning:(0,k.jsx)(wz,{fontSize:"inherit"}),error:(0,k.jsx)(Nz,{fontSize:"inherit"}),info:(0,k.jsx)(jz,{fontSize:"inherit"})},Tz=e.forwardRef((function(e,t){const n=vN({props:e,name:"MuiAlert"}),{action:r,children:s,className:o,closeText:i="Close",color:a,components:l={},componentsProps:c={},icon:u,iconMapping:d=Iz,onClose:h,role:m="alert",severity:p="success",slotProps:f={},slots:g={},variant:y="standard"}=n,v=E(n,Cz),x=(0,S.A)((0,S.A)({},n),{},{color:a,severity:p,variant:y,colorSeverity:a||p}),b=(e=>{const{variant:t,color:n,severity:r,classes:s}=e;return Sy({root:["root","color".concat(xN(n||r)),"".concat(t).concat(xN(n||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},vz,s)})(x),w={slots:(0,S.A)({closeButton:l.CloseButton,closeIcon:l.CloseIcon},g),slotProps:(0,S.A)((0,S.A)({},c),f)},[N,j]=PR("root",{ref:t,shouldForwardComponentProp:!0,className:js(b.root,o),elementType:Sz,externalForwardedProps:(0,S.A)((0,S.A)({},w),v),ownerState:x,additionalProps:{role:m,elevation:0}}),[C,A]=PR("icon",{className:b.icon,elementType:Az,externalForwardedProps:w,ownerState:x}),[_,I]=PR("message",{className:b.message,elementType:Ez,externalForwardedProps:w,ownerState:x}),[T,P]=PR("action",{className:b.action,elementType:_z,externalForwardedProps:w,ownerState:x}),[R,D]=PR("closeButton",{elementType:uU,externalForwardedProps:w,ownerState:x}),[M,L]=PR("closeIcon",{elementType:kz,externalForwardedProps:w,ownerState:x});return(0,k.jsxs)(N,(0,S.A)((0,S.A)({},j),{},{children:[!1!==u?(0,k.jsx)(C,(0,S.A)((0,S.A)({},A),{},{children:u||d[p]||Iz[p]})):null,(0,k.jsx)(_,(0,S.A)((0,S.A)({},I),{},{children:s})),null!=r?(0,k.jsx)(T,(0,S.A)((0,S.A)({},P),{},{children:r})):null,null==r&&h?(0,k.jsx)(T,(0,S.A)((0,S.A)({},P),{},{children:(0,k.jsx)(R,(0,S.A)((0,S.A)({size:"small","aria-label":i,title:i,color:"inherit",onClick:h},D),{},{children:(0,k.jsx)(M,(0,S.A)({fontSize:"small"},L))}))})):null]}))})),Pz=Tz,Rz=xR((0,k.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),Dz=e=>{let{message:t,onRetry:n}=e;return(0,k.jsxs)(Yj,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"200px",padding:4,children:[(0,k.jsxs)(Pz,{severity:"error",icon:(0,k.jsx)(Rz,{fontSize:"large"}),sx:{mb:2,width:"100%",maxWidth:500},children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,children:"Something went wrong"}),(0,k.jsx)(lk,{variant:"body2",children:t})]}),n&&(0,k.jsx)(mR,{variant:"contained",color:"primary",onClick:n,sx:{mt:2},children:"Try Again"})]})},Mz=()=>{var t,n,r,s,o,i;const a=(0,N.A)();console.log("Auth context:",a),console.log("User:",a.user),console.log("Business Profile:",null===(t=a.user)||void 0===t?void 0:t.businessProfile);const l=(null===(n=a.user)||void 0===n?void 0:n.businessId)||(null===(r=a.user)||void 0===r||null===(s=r.businessProfile)||void 0===s?void 0:s.businessId)||(null===(o=a.businessProfile)||void 0===o?void 0:o.businessId)||(null===(i=a.user)||void 0===i?void 0:i.uid)||"";console.log("Selected businessId:",l);const[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)([]),[m,p]=(0,e.useState)(null),[f,g]=(0,e.useState)([]),[y,v]=(0,e.useState)(!0),[x,b]=(0,e.useState)(null),[w,j]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{if(!l)return b("Business ID is missing. Please ensure you are logged in with a business account."),void v(!1);try{v(!0);const[e,t,n,r]=await Promise.all([TS.getUserSubscription(l),TS.getBillingHistory(l),TS.getUsageMetrics(l),TS.getPricingPlans()]);u(e),h(t),p(n),g(r)}catch(zZ){console.error("Error fetching billing data:",zZ),b("Failed to load billing information. Please try again later.")}finally{v(!1)}})()}),[l]);var C;return l?y?(0,k.jsx)(ck,{}):x?(0,k.jsx)(Dz,{message:x}):(0,k.jsxs)(MT,{maxWidth:"lg",sx:{py:4},children:[(0,k.jsx)(lk,{variant:"h4",component:"h1",gutterBottom:!0,children:"Subscription & Billing"}),(0,k.jsx)(lk,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Manage your subscription, payment methods, and billing history."}),(0,k.jsxs)(lP,{container:!0,spacing:4,children:[(0,k.jsx)(lP,{item:!0,xs:12,md:8,children:(0,k.jsx)(UT,{elevation:1,sx:{p:3,mb:4},children:(0,k.jsx)($D,{subscription:c,onUpgradeClick:()=>{j(!0)}})})}),(0,k.jsx)(lP,{item:!0,xs:12,md:4,children:(0,k.jsx)(UT,{elevation:1,sx:{p:3,mb:4},children:(0,k.jsx)(DU,{metrics:m})})}),(0,k.jsx)(lP,{item:!0,xs:12,md:6,children:(0,k.jsx)(UT,{elevation:1,sx:{p:3,mb:4},children:(0,k.jsx)(bB,{subscription:c})})}),(0,k.jsx)(lP,{item:!0,xs:12,md:6,children:(0,k.jsx)(UT,{elevation:1,sx:{p:3,mb:4},children:(0,k.jsx)(hU,{history:d})})})]}),w&&(0,k.jsx)(yz,{currentSubscription:c,availablePlans:f,onClose:()=>{j(!1)},businessId:l})]}):(0,k.jsxs)(MT,{maxWidth:"lg",sx:{py:4},children:[(0,k.jsx)(lk,{variant:"h4",component:"h1",gutterBottom:!0,children:"Authentication Debug"}),(0,k.jsxs)(UT,{elevation:1,sx:{p:3,mb:4},children:[(0,k.jsx)(lk,{variant:"h6",gutterBottom:!0,color:"error",children:"Business ID is missing"}),(0,k.jsx)(lk,{variant:"body1",paragraph:!0,children:"We couldn't find your business ID. Here's the authentication information we have:"}),(0,k.jsx)(Yj,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1,overflowX:"auto"},children:(0,k.jsx)("pre",{style:{margin:0},children:JSON.stringify({user:a.user,businessProfile:a.businessProfile||(null===(C=a.user)||void 0===C?void 0:C.businessProfile)},null,2)})}),(0,k.jsx)(lk,{variant:"body2",sx:{mt:2},children:"Please ensure you are logged in with a business account and try again."})]})]})};var Lz=n(8021);class Oz{static async generateCouponQRCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";try{let n,r="All Coupons";if("string"===typeof e)try{const t=JSON.parse(e);n=e,"business"===t.type&&(r="Business QR")}catch(UZ){n=JSON.stringify({type:"coupon",code:e}),r="Coupon: ".concat(e)}else n=JSON.stringify({type:"coupon",code:e.code}),r=e.title||"Coupon";switch(t.toLowerCase()){case"svg":return this.generateSvgQRCode(n);case"pdf":const e=await this.generateSvgQRCode(n,!1);return this.generatePdfWithQRCode(e,r);default:return this.generatePngQRCode(n)}}catch(n){throw console.error("Error generating QR code:",n),new Error("Failed to generate QR code")}}static async generatePngQRCode(e){return Lz.toDataURL(e,{errorCorrectionLevel:"H",margin:4,width:300,color:{dark:"#000000",light:"#ffffff"}})}static async generateSvgQRCode(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=await Lz.toString(e,{type:"svg",errorCorrectionLevel:"H",margin:4,width:300});return t?"data:image/svg+xml;base64,".concat(btoa(n)):n}static generatePdfWithQRCode(e,t){const n="\n%PDF-1.4\n1 0 obj\n<</Type /Catalog /Pages 2 0 R>>\nendobj\n2 0 obj\n<</Type /Pages /Kids [3 0 R] /Count 1>>\nendobj\n3 0 obj\n<</Type /Page /Parent 2 0 R /Resources 4 0 R /MediaBox [0 0 612 792] /Contents 6 0 R>>\nendobj\n4 0 obj\n<</Font <</F1 5 0 R>>>>\nendobj\n5 0 obj\n<</Type /Font /Subtype /Type1 /BaseFont /Helvetica>>\nendobj\n6 0 obj\n<</Length 170>>\nstream\nBT\n/F1 24 Tf\n50 700 Td\n(".concat(t,") Tj\n/F1 12 Tf\n0 -30 Td\n(Scan this QR code to access your coupon) Tj\nET\nendstream\nendobj\nxref\n0 7\n0000000000 65535 f\n0000000009 00000 n\n0000000056 00000 n\n0000000111 00000 n\n0000000212 00000 n\n0000000250 00000 n\n0000000317 00000 n\ntrailer\n<</Size 7/Root 1 0 R>>\nstartxref\n490\n%%EOF\n");return"data:application/pdf;base64,".concat(btoa(n))}static parseQRCodeData(e){try{const t=JSON.parse(e);if(t&&t.type){if("coupon"===t.type&&t.code)return{type:"coupon",code:t.code};if("business"===t.type&&t.id)return{type:"business",id:t.id}}return null}catch(t){return"string"===typeof e&&e.trim().length>0?{type:"coupon",code:e.trim()}:null}}}class Fz{static async generateScannableQRCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";const n=this.formatContentForScanner(e);return Oz.generateCouponQRCode(n,t)}static formatContentForScanner(e){try{const t=JSON.parse(e);return"coupon"===t.type&&t.code||"business"===t.type&&t.id?e:JSON.stringify({type:"coupon",code:"string"===typeof t.code?t.code:e})}catch(UZ){return JSON.stringify({type:"coupon",code:e})}}static isValidScanContent(e){try{const t=JSON.parse(e);return"coupon"===t.type&&"string"===typeof t.code||"business"===t.type&&"string"===typeof t.id}catch(UZ){return!1}}}class Bz{static async recordScan(e){try{const t=(0,S.A)((0,S.A)({},e),{},{scannedAt:sl.Dc.now()});return(await(0,sl.gS)((0,sl.rJ)(rl.db,"qrCodeScans"),t)).id}catch(t){throw console.error("Error recording QR code scan:",t),new Error("Failed to record QR code scan")}}static async getBusinessQRCodeAnalytics(e){try{const t=(0,sl.rJ)(rl.db,"qrCodeScans"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e),(0,sl.My)("scannedAt","desc")),r=await(0,sl.GG)(n);return r.empty?{totalScans:0,uniqueCustomers:0,conversionRate:0}:this.calculateAnalytics(r,e)}catch(t){throw console.error("Error fetching QR code analytics:",t),new Error("Failed to fetch QR code analytics")}}static async getCouponQRCodeAnalytics(e,t){try{const n=(0,sl.rJ)(rl.db,"qrCodeScans"),r=(0,sl.P)(n,(0,sl._M)("businessId","==",e),(0,sl._M)("couponId","==",t),(0,sl.My)("scannedAt","desc")),s=await(0,sl.GG)(r);return s.empty?{totalScans:0,uniqueCustomers:0,conversionRate:0}:this.calculateAnalytics(s,e)}catch(n){throw console.error("Error fetching coupon QR code analytics:",n),new Error("Failed to fetch coupon QR code analytics")}}static calculateAnalytics(e,t){const n=e.size,r=new Set;let s=0;e.docs.forEach((e=>{const t=e.data();t.customerId&&r.add(t.customerId),t.converted&&s++}));const o=r.size,i=n>0?Math.round(s/n*100):0,a=e.docs.slice(0,5).map((e=>e.data())),l={};return e.docs.forEach((e=>{const t=e.data().scannedAt.toDate().toISOString().split("T")[0];l[t]=(l[t]||0)+1})),{totalScans:n,uniqueCustomers:o,conversionRate:i,recentScans:a,scansByDate:l}}}const Uz=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)("all"),[s,o]=(0,e.useState)("png"),[i,a]=(0,e.useState)([{id:"all",name:"All Coupons",code:""}]),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(!1),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)(null),[g,y]=(0,e.useState)((new Date).toLocaleDateString()),[v,x]=(0,e.useState)(0),[b,w]=(0,e.useState)(0),[j,k]=(0,e.useState)(0),[C,S]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.businessId){d(!0);try{const e=(0,sl.rJ)(rl.db,"coupons"),n=(0,sl.P)(e,(0,sl._M)("businessId","==",t.businessId),(0,sl._M)("active","==",!0)),r=await(0,sl.GG)(n);if(!r.empty){const e=r.docs.map((e=>{const t=e.data();return{id:e.id,name:t.title,code:t.code}}));a([{id:"all",name:"All Coupons",code:""},...e])}A("all"),S(!0)}catch(zZ){console.error("Error fetching coupons:",zZ),f("Failed to load coupons. Please try again.")}finally{d(!1)}}})()}),[null===t||void 0===t?void 0:t.businessId]),(0,e.useEffect)((()=>{n&&C&&(async()=>{if(C){d(!0);try{const e=i.find((e=>e.id===n));if(!e)throw new Error("Selected coupon not found");if("all"===n){const e=JSON.stringify({type:"business",id:null===t||void 0===t?void 0:t.businessId}),n=await Fz.generateScannableQRCode(e,s);c(n)}else{const t=await Fz.generateScannableQRCode(e.code,s);c(t)}y((new Date).toLocaleDateString()),A(n)}catch(zZ){console.error("Error generating QR code:",zZ),f("Failed to generate QR code. Please try again.")}finally{d(!1)}}})()}),[n,s,i,null===t||void 0===t?void 0:t.businessId,C]);const A=async e=>{if(null!==t&&void 0!==t&&t.businessId){m(!0);try{let n;n="all"===e?await Bz.getBusinessQRCodeAnalytics(t.businessId):await Bz.getCouponQRCodeAnalytics(t.businessId,e),x(n.totalScans),w(n.uniqueCustomers),k(n.conversionRate)}catch(zZ){console.error("Error fetching analytics:",zZ),x(0),w(0),k(0)}finally{m(!1)}}};return[{selectedCoupon:n,downloadFormat:s,coupons:i,qrCodeDataUrl:l,isLoading:u,error:p,generatedDate:g,totalScans:v,uniqueCustomers:b,conversionRate:j,isLoadingAnalytics:h},{setSelectedCoupon:r,setDownloadFormat:o,handleDownload:()=>{if(!l)return;const e=s.toLowerCase(),t=document.createElement("a");t.href=l,t.download="coupon-qrcode-".concat(n,"-").concat((new Date).getTime(),".").concat(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)},handleShare:async()=>{if(l&&navigator.share)try{const e=await fetch(l),t=await e.blob(),n=new File([t],"coupon-qrcode.".concat(s.toLowerCase()),{type:"pdf"===s.toLowerCase()?"application/pdf":"svg"===s.toLowerCase()?"image/svg+xml":"image/png"});await navigator.share({title:"Coupon QR Code",text:"Scan this QR code to access your coupon!",files:[n]})}catch(zZ){console.error("Error sharing QR code:",zZ),alert("Could not share QR code. Try downloading it instead.")}}}]},zz=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)({}),o=(0,e.useCallback)((e=>{const t={id:"celebration-".concat(Date.now()),message:e,type:"generation",timestamp:Date.now()};n((e=>[...e,t])),"undefined"!==typeof window&&window.confetti&&window.confetti({particleCount:100,spread:70,origin:{y:.6}}),setTimeout((()=>{n((e=>e.filter((e=>e.id!==t.id))))}),5e3)}),[]),i=(0,e.useCallback)(((e,t)=>{Object.entries({"scans-50":{threshold:50,message:"\ud83c\udfaf 50 scans milestone reached!"},"scans-100":{threshold:100,message:"\ud83c\udf89 Century milestone! 100 scans!"},"scans-500":{threshold:500,message:"\ud83d\ude80 500 scans! Your QR codes are taking off!"},"customers-25":{threshold:25,message:"\ud83d\udc65 25 unique customers milestone!"},"customers-50":{threshold:50,message:"\ud83c\udf1f 50 unique customers! Growing community!"},"customers-100":{threshold:100,message:"\ud83c\udfc6 100 unique customers! You're a QR champion!"}}).filter((n=>{let[s,o]=n;return s.startsWith("scans-")?e>=o.threshold&&(!r[s]||Date.now()-r[s]>864e5):!!s.startsWith("customers-")&&(t>=o.threshold&&(!r[s]||Date.now()-r[s]>864e5))})).forEach((e=>{let[t,r]=e;const o={id:"milestone-".concat(t,"-").concat(Date.now()),message:r.message,type:"milestone",timestamp:Date.now()};n((e=>[...e,o])),s((e=>(0,S.A)((0,S.A)({},e),{},{[t]:Date.now()}))),setTimeout((()=>{n((e=>e.filter((e=>e.id!==o.id))))}),5e3)}))}),[r]),a=(0,e.useCallback)((()=>{const e={id:"share-".concat(Date.now()),message:"\ud83d\ude80 Sharing the magic! Your QR code is on its way!",type:"share",timestamp:Date.now()};n((t=>[...t,e])),setTimeout((()=>{n((t=>t.filter((t=>t.id!==e.id))))}),5e3)}),[]);return{celebrations:t,celebrateGeneration:o,celebrateMilestones:i,celebrateShare:a}},Vz=t=>{let{coupons:n,selectedCoupon:r,downloadFormat:s,onCouponSelect:o,onFormatSelect:i,onGenerate:a,isLoading:l}=t;const{celebrateGeneration:c}=(null===zz||void 0===zz?void 0:zz())||{celebrateGeneration:void 0},[u,d]=(0,e.useState)(!1);return(0,k.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl shadow-lg border border-purple-100 overflow-hidden transition-all duration-300 hover:shadow-xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex items-start mb-4",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 w-10 h-10 rounded-lg flex items-center justify-center shadow-md mr-3",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83c\udfa8 Create Your Digital Bridge"}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Transform your coupons into scannable magic \u2728"})]})]}),(0,k.jsxs)("div",{className:"space-y-5",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("label",{htmlFor:"coupon-select",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Select Coupon"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("select",{id:"coupon-select",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 pr-8 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",value:r,onChange:e=>{o(e.target.value),setTimeout((()=>a()),100)},disabled:l,children:n.map((e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id)))}),(0,k.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("label",{htmlFor:"download-format",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Download Format"}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsxs)("select",{id:"download-format",className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-2.5 pr-8 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",value:s,onChange:e=>{i(e.target.value),setTimeout((()=>a()),100)},disabled:l,children:[(0,k.jsx)("option",{value:"png",children:"PNG Image"}),(0,k.jsx)("option",{value:"svg",children:"SVG Vector"}),(0,k.jsx)("option",{value:"pdf",children:"PDF Document"})]}),(0,k.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),(0,k.jsx)("button",{onClick:()=>{d(!0),a(),c&&c("QR Code created! \ud83c\udf89"),setTimeout((()=>d(!1)),1e3)},disabled:l,className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 disabled:opacity-70 disabled:cursor-not-allowed ".concat(u?"animate-pulse":""),children:l?(0,k.jsxs)("div",{className:"flex items-center justify-center",children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Magic..."]}):(0,k.jsxs)("div",{className:"flex items-center justify-center",children:[(0,k.jsx)("span",{className:"mr-1",children:"\u2728"})," Generate Magic"]})})]})]})})},qz=()=>{const t=(0,e.useCallback)((e=>{const t=document.querySelector(".qr-code-container");t?(t.classList.add("animate-pulse"),setTimeout((()=>{t.classList.remove("animate-pulse"),e&&e()}),800)):e&&e()}),[]),n=(0,e.useCallback)((()=>{const e=document.querySelector(".qr-code-container");e&&(e.classList.add("transition-transform","duration-500"),e.classList.add("scale-105"),setTimeout((()=>{e.classList.remove("scale-105")}),500));document.querySelectorAll(".qr-action-button").forEach((e=>{e.classList.add("animate-pulse"),setTimeout((()=>{e.classList.remove("animate-pulse")}),1e3)}))}),[]),r=(0,e.useCallback)((e=>{console.log("QR generation progress: ".concat(e,"%"))}),[]);return{animateGeneration:t,animateSuccess:n,animateProgress:r}},Wz=t=>{let{qrCodeDataUrl:n,isLoading:r,selectedCouponName:s,generatedDate:o,onDownload:i,onShare:a,analytics:l}=t;const[c,u]=(0,e.useState)(!1),{animateSuccess:d}=(null===qz||void 0===qz?void 0:qz())||{animateSuccess:void 0};return(0,e.useEffect)((()=>{if(n&&!r){u(!0),d&&d();const e=setTimeout((()=>u(!1)),3e3);return()=>clearTimeout(e)}}),[n,r,d]),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl shadow-lg border border-purple-100 overflow-hidden transition-all duration-300 hover:shadow-xl relative",children:[c&&(0,k.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,k.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2",children:(0,k.jsx)("div",{className:"animate-bounce-slow",children:(0,k.jsx)("span",{className:"text-3xl",children:"\ud83c\udf89"})})}),(0,k.jsx)("div",{className:"absolute top-0 right-1/4 transform -translate-x-1/2",children:(0,k.jsx)("div",{className:"animate-bounce-slow",style:{animationDelay:"0.3s"},children:(0,k.jsx)("span",{className:"text-3xl",children:"\u2728"})})}),(0,k.jsx)("div",{className:"absolute top-0 left-1/4 transform -translate-x-1/2",children:(0,k.jsx)("div",{className:"animate-bounce-slow",style:{animationDelay:"0.5s"},children:(0,k.jsx)("span",{className:"text-3xl",children:"\ud83c\udf1f"})})})]}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex items-start mb-5",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-pink-500 to-purple-600 w-10 h-10 rounded-lg flex items-center justify-center shadow-md mr-3",children:(0,k.jsxs)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u2728 Your Digital Creation"}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Ready to connect with your customers"})]})]}),(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:"w-64 h-64 bg-white rounded-xl flex items-center justify-center mb-6 border-2 border-purple-100 shadow-inner relative overflow-hidden",children:r?(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-purple-600 rounded-full animate-spin"}),(0,k.jsx)("p",{className:"mt-4 text-sm text-gray-500",children:"Creating your magic..."})]}):n?(0,k.jsxs)("div",{className:"relative w-full h-full p-3 flex items-center justify-center",children:[(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-100/30 to-pink-100/30 rounded-lg"}),(0,k.jsx)("img",{src:n,alt:"QR Code",className:"w-full h-full object-contain z-10 drop-shadow-sm transition-all duration-500 transform hover:scale-105"})]}):(0,k.jsx)("div",{className:"w-48 h-48 bg-white p-2",children:(0,k.jsx)("div",{className:"w-full h-full border-2 border-gray-300 border-dashed p-4 flex items-center justify-center rounded-lg",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("svg",{className:"w-24 h-24 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),(0,k.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"QR Code Preview"})]})})})}),(0,k.jsxs)("div",{className:"text-center mb-6",children:[(0,k.jsx)("p",{className:"text-sm text-gray-700 font-medium mb-1",children:s}),(0,k.jsxs)("p",{className:"text-xs text-gray-500",children:["Generated on ",o]})]}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsxs)("button",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 disabled:opacity-70 disabled:cursor-not-allowed flex items-center",onClick:i,disabled:!n||r,children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),(0,k.jsxs)("button",{className:"border border-purple-300 bg-white text-purple-700 px-4 py-2.5 rounded-lg font-medium transition-all duration-200 hover:bg-purple-50 hover:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 disabled:opacity-70 disabled:cursor-not-allowed flex items-center",onClick:a,disabled:!n||r||!navigator.share,children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]})]})]}),l.totalScans>0&&!l.isLoading&&(0,k.jsx)("div",{className:"mt-5 pt-4 border-t border-purple-100",children:(0,k.jsx)("div",{className:"bg-gradient-to-r from-purple-100/50 to-indigo-100/50 rounded-lg p-3 text-center",children:(0,k.jsxs)("p",{className:"text-sm font-medium text-purple-800",children:["\ud83c\udf89 ",l.totalScans," magical connections made!"]})})})]})]})},Hz=e=>{let{label:t,value:n,icon:r,isLoading:s,celebration:o=null,color:i="purple"}=e;return(0,k.jsx)("div",{className:"relative",children:(0,k.jsxs)("div",{className:"p-4 bg-white rounded-lg border border-".concat(i,"-100 shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-[1.02]"),children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-".concat(i,"-100 to-").concat(i,"-200 w-10 h-10 rounded-lg flex items-center justify-center shadow-sm mr-3"),children:(0,k.jsx)("span",{className:"text-xl",children:r})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:t}),s?(0,k.jsx)("div",{className:"h-7 w-16 bg-gray-200 animate-pulse rounded mt-1"}):(0,k.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]}),o&&!s&&(0,k.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:(0,k.jsxs)("p",{className:"text-xs font-medium text-purple-700 flex items-center",children:[(0,k.jsx)("span",{className:"mr-1",children:"\ud83c\udf89"})," ",o]})})]})})},Gz=e=>{let{totalScans:t,uniqueCustomers:n,conversionRate:r,isLoading:s}=e;const o=n>0&&t>0?Math.round(n/t*100):0;return(0,k.jsx)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl shadow-lg border border-purple-100 overflow-hidden transition-all duration-300 hover:shadow-xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex items-start mb-5",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 w-10 h-10 rounded-lg flex items-center justify-center shadow-md mr-3",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udcca Your Impact Story"}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"See how your QR codes are performing"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsx)(Hz,{label:"Total Scans",value:t,icon:"\ud83c\udfaf",isLoading:s,celebration:t>100?"Century milestone!":null}),(0,k.jsx)(Hz,{label:"Unique Customers",value:n,icon:"\ud83d\udc65",isLoading:s,celebration:n>50?"Growing community!":null}),(0,k.jsx)(Hz,{label:"Conversion Rate",value:"".concat(r,"%"),icon:"\u2705",isLoading:s,color:"indigo"}),(0,k.jsx)(Hz,{label:"Engagement Rate",value:"".concat(o,"%"),icon:"\ud83d\udcab",isLoading:s,color:"indigo"})]}),(0,k.jsx)("div",{className:"mt-5 pt-4 border-t border-purple-100",children:(0,k.jsxs)("button",{className:"text-purple-600 hover:text-purple-800 text-sm font-medium flex items-center transition-colors duration-200",children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"View Detailed Analytics"]})})]})})},Kz=()=>{const[t,n]=(0,e.useState)(null);return(0,k.jsx)("div",{className:"bg-gradient-to-br from-white to-purple-50 rounded-xl shadow-lg border border-purple-100 overflow-hidden transition-all duration-300 hover:shadow-xl",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex items-start mb-5",children:[(0,k.jsx)("div",{className:"bg-gradient-to-br from-indigo-400 to-purple-500 w-10 h-10 rounded-lg flex items-center justify-center shadow-md mr-3",children:(0,k.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udca1 Usage Inspiration"}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Creative ways to share your magical QR codes"})]})]}),(0,k.jsx)("div",{className:"space-y-3",children:[{title:"In-Store Display",content:"Print your QR code and display it at your business location. Place it near checkout counters, on tables, or in waiting areas for maximum visibility.",icon:"\ud83c\udfea",color:"purple"},{title:"Print Materials",content:"Include the QR code in your print advertisements, business cards, flyers, and brochures to bridge the gap between offline and online experiences.",icon:"\ud83d\udcc4",color:"indigo"},{title:"Social Media",content:"Share the QR code on your social media accounts. It works great as a profile banner, in posts, or as part of your Instagram stories.",icon:"\ud83d\udcf1",color:"blue"},{title:"Email Marketing",content:"Add the QR code to your email signature and newsletters. This gives recipients a quick way to access your offers without typing URLs.",icon:"\ud83d\udce7",color:"pink"}].map(((e,r)=>(0,k.jsxs)("div",{className:"bg-white rounded-lg border border-".concat(e.color,"-100 overflow-hidden transition-all duration-300 ").concat(t===r?"shadow-md":"hover:shadow-sm"),children:[(0,k.jsxs)("button",{onClick:()=>(e=>{n(t===e?null:e)})(r),className:"w-full px-4 py-3 flex items-center justify-between text-left focus:outline-none",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"text-xl mr-3",children:e.icon}),(0,k.jsx)("span",{className:"font-medium text-gray-800",children:e.title})]}),(0,k.jsx)("svg",{className:"w-5 h-5 text-gray-500 transition-transform duration-300 ".concat(t===r?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),(0,k.jsx)("div",{className:"px-4 pb-3 transition-all duration-300 overflow-hidden ".concat(t===r?"max-h-40 opacity-100":"max-h-0 opacity-0"),children:(0,k.jsx)("p",{className:"text-gray-600 text-sm pl-8",children:e.content})})]},r)))}),(0,k.jsx)("div",{className:"mt-5 pt-4 border-t border-purple-100",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("p",{className:"text-xs text-gray-500 italic",children:"Tap on each tip for more details"}),(0,k.jsxs)("button",{className:"text-purple-600 hover:text-purple-800 text-sm font-medium flex items-center transition-colors duration-200",children:[(0,k.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Marketing Guide"]})]})})]})})},Yz=t=>{let{totalScans:n,uniqueCustomers:r,isGenerating:s}=t;const[o,i]=(0,e.useState)(!1),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)("none"),[d,h]=(0,e.useState)(n),[m,p]=(0,e.useState)(r);(0,e.useEffect)((()=>{d===n&&m===r||((n>d||r>m)&&f(),h(n),p(r))}),[n,r]),(0,e.useEffect)((()=>{let e;return!s&&d>0&&(e=setTimeout((()=>{l("Your QR code is ready to share! \u2728"),i(!0),u("sparkle"),setTimeout((()=>{i(!1)}),3e3)}),500)),()=>{e&&clearTimeout(e)}}),[s]);const f=()=>{100===n?g("\ud83c\udf89 Century milestone! 100 scans reached!","confetti"):50===n?g("\ud83c\udf1f 50 scans milestone reached!","sparkle"):50===r?g("\ud83d\udc65 50 unique customers milestone!","confetti"):25===r&&g("\ud83c\udf31 Growing community! 25 unique customers!","sparkle")},g=(e,t)=>{l(e),u(t),i(!0),setTimeout((()=>{i(!1)}),5e3)};return o?(0,k.jsx)("div",{className:"fixed bottom-6 right-6 z-50 pointer-events-none",children:(0,k.jsx)("div",{className:"transform transition-all duration-500 ".concat(o?"translate-y-0 opacity-100":"translate-y-10 opacity-0"),children:(0,k.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-5 py-4 rounded-xl shadow-lg max-w-md",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsxs)("div",{className:"flex-shrink-0 mr-3",children:["confetti"===c&&(0,k.jsx)("span",{className:"text-2xl",children:"\ud83c\udf89"}),"sparkle"===c&&(0,k.jsx)("span",{className:"text-2xl",children:"\u2728"})]}),(0,k.jsx)("div",{children:(0,k.jsx)("p",{className:"font-medium",children:a})})]})})})}):null},Qz=t=>{let{businessId:n,showInstructions:r=!0}=t;const{user:s}=(0,N.A)(),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({primary:"#3B82F6",secondary:"#10B981"}),[m,p]=(0,e.useState)(""),f=(0,e.useRef)(null);(0,e.useEffect)((()=>{(()=>{const e=(()=>{let e="".concat(window.location.origin,"/store");return n&&(e+="?businessId=".concat(n)),e})(),t="https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl=".concat(encodeURIComponent(e),"&choe=UTF-8");p(t)})()}),[n]),(0,e.useEffect)((()=>{(async()=>{if(s)try{i(!0);const e=n||s.uid,t=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",e));if(t.exists()){const e=t.data();l(e.businessName||"Your Business"),u(e.logo||""),e.colors&&h(e.colors)}}catch(e){console.error("Error fetching business details:",e)}finally{i(!1)}})()}),[s,n]);return o?(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:(0,k.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,k.jsx)("div",{className:"w-40 h-40 bg-gray-200 rounded-lg mb-4"}),(0,k.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,k.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,k.jsx)("div",{className:"px-6 py-4 border-b",style:{borderColor:"".concat(d.primary,"40")},children:(0,k.jsx)("h2",{className:"text-lg font-medium",style:{color:d.primary},children:"Store QR Code"})}),(0,k.jsxs)("div",{className:"p-6",id:"qr-code-container",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[c&&(0,k.jsx)("img",{src:c,alt:a,className:"w-16 h-16 rounded-full object-cover mb-3"}),(0,k.jsx)("div",{className:"business-name text-xl font-semibold text-gray-800 mb-1",children:a}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"Scan to access coupons & loyalty"})]}),(0,k.jsx)("div",{className:"flex justify-center mb-6",children:(0,k.jsx)("div",{className:"p-4 bg-white rounded-lg shadow-sm border",style:{borderColor:"".concat(d.primary,"30")},ref:f,children:(0,k.jsx)("img",{src:m,alt:"Store QR Code",className:"w-full h-auto"})})}),r&&(0,k.jsxs)("div",{className:"instructions bg-gray-50 rounded-lg p-4 text-sm text-gray-600 mb-6",children:[(0,k.jsx)("p",{className:"font-medium mb-2",children:"Instructions:"}),(0,k.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,k.jsx)("li",{children:"Print this QR code and display it in your store"}),(0,k.jsx)("li",{children:"Customers can scan it with their phone camera"}),(0,k.jsx)("li",{children:"They'll see a simplified dashboard for quick access to coupons and loyalty cards"})]})]})]}),(0,k.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t flex justify-end space-x-3",children:[(0,k.jsx)("button",{onClick:()=>{const e=document.createElement("a");e.download="".concat(a.replace(/\s+/g,"-").toLowerCase(),"-store-qr.png"),e.href=m,e.click()},className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 text-sm font-medium hover:bg-gray-50",children:"Download"}),(0,k.jsx)("button",{onClick:()=>{const e=document.getElementById("qr-code-container"),t=(new Date).getTime().toString(),n=window.open("about:blank",t,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=500,height=700");null===n||void 0===n||n.document.write("<html><head><title>Store QR Code</title>"),null===n||void 0===n||n.document.write("<style>"),null===n||void 0===n||n.document.write("\n      body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }\n      .qr-container { margin: 20px auto; max-width: 300px; }\n      .business-name { font-size: 24px; font-weight: bold; margin-bottom: 10px; }\n      .instructions { font-size: 16px; margin-top: 20px; color: #555; }\n    "),null===n||void 0===n||n.document.write("</style>"),null===n||void 0===n||n.document.write("</head><body>"),e&&(null===n||void 0===n||n.document.write(e.innerHTML)),null===n||void 0===n||n.document.write("</body></html>"),null===n||void 0===n||n.document.close(),setTimeout((()=>{null===n||void 0===n||n.print(),null===n||void 0===n||n.close()}),500)},className:"px-4 py-2 bg-indigo-600 border border-transparent rounded-md text-white text-sm font-medium hover:bg-indigo-700",style:{backgroundColor:d.primary},children:"Print"})]})]})},$z=()=>{const{user:e}=(0,N.A)(),t=null===e||void 0===e?void 0:e.uid;return(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-6 shadow-sm border border-indigo-100",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-indigo-800 mb-2",children:"\ud83c\udfea In-Store Experience"}),(0,k.jsx)("p",{className:"text-gray-700 mb-4",children:"Generate a QR code for your physical store that customers can scan to quickly access their coupons and loyalty cards."}),(0,k.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,k.jsxs)("div",{className:"flex items-center bg-white px-3 py-2 rounded-full shadow-sm border border-indigo-100",children:[(0,k.jsx)("span",{className:"text-indigo-600 mr-2",children:"\u2728"}),(0,k.jsx)("span",{children:"Simplified customer interface"})]}),(0,k.jsxs)("div",{className:"flex items-center bg-white px-3 py-2 rounded-full shadow-sm border border-indigo-100",children:[(0,k.jsx)("span",{className:"text-indigo-600 mr-2",children:"\ud83d\udd04"}),(0,k.jsx)("span",{children:"Quick access to coupons"})]}),(0,k.jsxs)("div",{className:"flex items-center bg-white px-3 py-2 rounded-full shadow-sm border border-indigo-100",children:[(0,k.jsx)("span",{className:"text-indigo-600 mr-2",children:"\ud83c\udfc6"}),(0,k.jsx)("span",{children:"Easy loyalty card display"})]})]})]}),(0,k.jsx)(Qz,{businessId:t}),(0,k.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"font-medium",children:"Pro Tip"}),(0,k.jsx)("p",{className:"mt-1",children:"Place this QR code near your checkout counter or entrance for maximum visibility. Encourage customers to scan it for quick access to their coupons and loyalty cards."})]})]})})]})},Jz=()=>{const[t,n]=(0,e.useState)("undefined"!==typeof window?window.innerWidth:0);return(0,e.useEffect)((()=>{const e=()=>n(window.innerWidth);return window.addEventListener("resize",e),n(window.innerWidth),()=>window.removeEventListener("resize",e)}),[]),{width:t,isMobile:t<768,isTablet:t>=768&&t<1024,isDesktop:t>=1024}},Xz=()=>{var t;const[n,r]=(0,e.useState)("coupon"),[{selectedCoupon:s,downloadFormat:o,coupons:i,qrCodeDataUrl:a,isLoading:l,generatedDate:c,totalScans:u,uniqueCustomers:d,conversionRate:h,isLoadingAnalytics:m,error:p},{setSelectedCoupon:f,setDownloadFormat:g,handleDownload:y,handleShare:v}]=Uz(),{isMobile:x}=Jz(),b={totalScans:u,uniqueCustomers:d,conversionRate:h,isLoading:m},w="all"===s?"All Coupons":(null===(t=i.find((e=>e.id===s)))||void 0===t?void 0:t.name)||"",N=()=>(0,k.jsx)("div",{className:"mb-6",children:(0,k.jsx)("div",{className:"border-b border-gray-200",children:(0,k.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,k.jsxs)("button",{onClick:()=>r("coupon"),className:"whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ".concat("coupon"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83c\udf9f\ufe0f"}),"Coupon QR Codes"]}),(0,k.jsxs)("button",{onClick:()=>r("store"),className:"whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm ".concat("store"===n?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83c\udfea"}),"Store QR Code"]})]})})});return x?(0,k.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 p-4",children:[(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud83c\udfa8 Your QR Code Studio"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Create magical connections, one scan at a time \u2728"}),u>0&&"coupon"===n&&(0,k.jsx)("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-lg border border-purple-200",children:(0,k.jsxs)("p",{className:"text-sm font-medium text-purple-800",children:["Your QR codes have created ",u," magical moments! \ud83c\udf1f"]})})]}),N(),"coupon"===n?(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsx)(Vz,{coupons:i,selectedCoupon:s,downloadFormat:o,onCouponSelect:f,onFormatSelect:g,onGenerate:y,isLoading:l}),(0,k.jsx)(Wz,{qrCodeDataUrl:a,isLoading:l,selectedCouponName:w,generatedDate:c,onDownload:y,onShare:v,analytics:b}),(0,k.jsx)(Gz,{totalScans:u,uniqueCustomers:d,conversionRate:h,isLoading:m}),(0,k.jsx)(Kz,{}),(0,k.jsx)(Yz,{totalScans:u,uniqueCustomers:d,isGenerating:l})]}):(0,k.jsx)($z,{})]}):(0,k.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 p-6",children:[(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\ud83c\udfa8 Your QR Code Studio"}),(0,k.jsx)("p",{className:"text-gray-600 max-w-2xl",children:"Create magical connections, one scan at a time \u2728"})]}),N(),"coupon"===n?(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,k.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,k.jsx)(Vz,{coupons:i,selectedCoupon:s,downloadFormat:o,onCouponSelect:f,onFormatSelect:g,onGenerate:y,isLoading:l}),(0,k.jsx)(Gz,{totalScans:u,uniqueCustomers:d,conversionRate:h,isLoading:m}),(0,k.jsx)(Kz,{})]}),(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsx)(Wz,{qrCodeDataUrl:a,isLoading:l,selectedCouponName:w,generatedDate:c,onDownload:y,onShare:v,analytics:b})})]}):(0,k.jsx)($z,{}),"coupon"===n&&(0,k.jsx)(Yz,{totalScans:u,uniqueCustomers:d,isGenerating:l})]})},Zz=()=>(0,k.jsx)(Xz,{}),eV=()=>(0,k.jsx)(Zz,{}),tV=()=>{const t=(0,i.Zp)(),{user:n,businessProfile:r}=(0,N.A)(),s=tl(),o=(null===s||void 0===s?void 0:s.viewMode)||"default",[a,l]=(0,e.useState)({todayCoupons:0,weekCoupons:0,monthCoupons:0,totalCoupons:0,returningCustomers:0}),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(!0),[m,p]=(0,e.useState)(window.innerWidth<768);(0,e.useEffect)((()=>{const e=()=>{p(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,e.useEffect)((()=>{(async()=>{if(null!==n&&void 0!==n&&n.businessId)try{h(!0);const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e);r.setDate(e.getDate()-7);const s=new Date(e);s.setMonth(e.getMonth()-1);const o=(0,sl.rJ)(rl.db,"couponDistributions"),i=(0,sl.P)(o,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("status","==","redeemed")),a=(await(0,sl.GG)(i)).docs.map((e=>(0,S.A)({id:e.id},e.data()))),c=a.filter((e=>(e.redeemedAt instanceof sl.Dc?e.redeemedAt.toDate():new Date)>=t)).length,d=a.filter((e=>(e.redeemedAt instanceof sl.Dc?e.redeemedAt.toDate():new Date)>=r)).length,m=a.filter((e=>(e.redeemedAt instanceof sl.Dc?e.redeemedAt.toDate():new Date)>=s)).length,p=(0,sl.rJ)(rl.db,"customers"),f=(0,sl.P)(p,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("totalVisits",">",1)),g=(await(0,sl.GG)(f)).docs.length,y=(0,sl.P)(o,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("status","==","redeemed"),(0,sl.My)("redeemedAt","desc"),(0,sl.AB)(5)),v=(await(0,sl.GG)(y)).docs.map((e=>(0,S.A)({id:e.id},e.data()))),x=await Promise.all(v.map((async e=>{var t,r;const s=await(0,sl.GG)((0,sl.P)((0,sl.rJ)(rl.db,"customers"),(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("__name__","==",e.customerId))),o=await(0,sl.GG)((0,sl.P)((0,sl.rJ)(rl.db,"coupons"),(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("__name__","==",e.couponId))),i=(null===(t=s.docs[0])||void 0===t?void 0:t.data())||{},a=(null===(r=o.docs[0])||void 0===r?void 0:r.data())||{};return(0,S.A)((0,S.A)({},e),{},{customer:(0,S.A)({id:e.customerId,firstName:i.firstName||"Unknown",lastName:i.lastName||"Customer",phone:i.phone},i),coupon:(0,S.A)({id:e.couponId,title:a.title||"Unknown Coupon",description:a.description},a)})})));l({todayCoupons:c,weekCoupons:d,monthCoupons:m,totalCoupons:a.length,returningCustomers:g}),u(x)}catch(e){console.error("Error fetching results:",e)}finally{h(!1)}})()}),[null===n||void 0===n?void 0:n.businessId]);const f=m||"simple"===o;return(0,k.jsxs)("div",{className:"flex flex-col ".concat(f?"h-full":"h-screen"," bg-white"),children:[(0,k.jsxs)("header",{className:"p-4 border-b flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("button",{onClick:()=>{t("simple"===o?"/business/dashboard/simple":"/business/dashboard")},className:"mr-4 text-gray-600",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,k.jsx)("h1",{className:"text-xl font-bold",children:"Results"})]}),m&&(0,k.jsx)("div",{children:(0,k.jsx)(C,{onChange:e=>{null!==s&&void 0!==s&&s.onViewChange&&s.onViewChange(e)},initialView:o})})]}),d?(0,k.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,k.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin"})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"".concat(f?"p-4":"p-6"," grid ").concat(f?"grid-cols-2":"grid-cols-4"," gap-4"),children:[(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg shadow-sm",children:[(0,k.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"TODAY"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:a.todayCoupons}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Coupons Used"})]}),(0,k.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg shadow-sm",children:[(0,k.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"THIS WEEK"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:a.weekCoupons}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Coupons Used"})]}),(0,k.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg shadow-sm",children:[(0,k.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"THIS MONTH"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:a.monthCoupons}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Coupons Used"})]}),(0,k.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg shadow-sm ".concat(f?"col-span-2":""),children:(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-orange-600 font-medium",children:"ALL TIME"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:a.totalCoupons}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Total Redemptions"})]}),f&&(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-indigo-600 font-medium",children:"RETURNING"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-right",children:a.returningCustomers}),(0,k.jsx)("p",{className:"text-sm text-gray-600 text-right",children:"Customers"})]})]})}),!f&&(0,k.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg shadow-sm",children:[(0,k.jsx)("p",{className:"text-sm text-indigo-600 font-medium",children:"RETURNING"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:a.returningCustomers}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Customers"})]})]}),(0,k.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,k.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-b",children:(0,k.jsx)("h2",{className:"font-medium",children:"Recent Redemptions"})}),(0,k.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===c.length?(0,k.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No recent redemptions"}):(0,k.jsx)("ul",{className:"divide-y",children:c.map((e=>{var t,n,r,s,o,i,a,l,c;return(0,k.jsxs)("li",{className:"p-4",children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:(0,k.jsxs)("span",{className:"text-gray-600 font-medium",children:[(null===(t=e.customer)||void 0===t||null===(n=t.firstName)||void 0===n?void 0:n.charAt(0))||"?",(null===(r=e.customer)||void 0===r||null===(s=r.lastName)||void 0===s?void 0:s.charAt(0))||"?"]})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{className:"font-medium",children:[null===(o=e.customer)||void 0===o?void 0:o.firstName," ",null===(i=e.customer)||void 0===i?void 0:i.lastName]}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:(c=e.redeemedAt,c instanceof sl.Dc||c&&"function"===typeof c.toDate?c.toDate().toLocaleString():c&&c.seconds?new Date(1e3*c.seconds).toLocaleString():"Unknown date")})]})]}),(0,k.jsxs)("div",{className:"ml-13 pl-10",children:[(0,k.jsx)("p",{className:"text-blue-600 font-medium",children:(null===(a=e.coupon)||void 0===a?void 0:a.title)||"Unknown Coupon"}),!f&&(null===(l=e.coupon)||void 0===l?void 0:l.description)&&(0,k.jsx)("p",{className:"text-sm text-gray-500",children:e.coupon.description})]})]},e.id)}))})})]})]})]})};var nV=n(9987);n(7704);new class{constructor(){this.memoryCache=new Map,this.MAX_MEMORY_ENTRIES=1e3}async get(e){const t=this.memoryCache.get(e);if(t&&this.isValidEntry(t))return t.data;try{const t=localStorage.getItem("cache_".concat(e));if(t){const n=JSON.parse(t);if(this.isValidEntry(n))return this.memoryCache.set(e,n),n.data;localStorage.removeItem("cache_".concat(e))}}catch(n){console.warn("Cache retrieval error:",n)}return null}async set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5;const r={data:t,timestamp:Date.now(),ttl:n};this.memoryCache.set(e,r),this.enforceMemoryLimit();try{localStorage.setItem("cache_".concat(e),JSON.stringify(r))}catch(s){this.clearOldestLocalStorageEntries();try{localStorage.setItem("cache_".concat(e),JSON.stringify(r))}catch(o){console.warn("Failed to cache in localStorage:",o)}}}invalidate(e){const t=[];Array.from(this.memoryCache.keys()).forEach((n=>{n.includes(e)&&t.push(n)})),t.forEach((e=>this.memoryCache.delete(e)));const n=[];for(let r=0;r<localStorage.length;r++){const t=localStorage.key(r);t&&t.startsWith("cache_")&&t.includes(e)&&n.push(t)}n.forEach((e=>localStorage.removeItem(e)))}clear(){this.memoryCache.clear();const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith("cache_")&&e.push(n)}e.forEach((e=>localStorage.removeItem(e)))}isValidEntry(e){return Date.now()-e.timestamp<e.ttl}enforceMemoryLimit(){if(this.memoryCache.size>this.MAX_MEMORY_ENTRIES){const e=Array.from(this.memoryCache.entries());e.sort(((e,t)=>e[1].timestamp-t[1].timestamp));e.slice(0,Math.floor(.2*this.MAX_MEMORY_ENTRIES)).forEach((e=>{let[t]=e;return this.memoryCache.delete(t)}))}}clearOldestLocalStorageEntries(){const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith("cache_"))try{const t=JSON.parse(localStorage.getItem(r)||"{}");e.push({key:r,timestamp:t.timestamp||0})}catch(t){localStorage.removeItem(r)}}e.sort(((e,t)=>e.timestamp-t.timestamp));e.slice(0,Math.floor(.2*e.length)).forEach((e=>{let{key:t}=e;return localStorage.removeItem(t)}))}};var rV=n(5734),sV=n(5344);const oV=(0,e.createContext)(rV.E);console.log("[coupons2Service] Cache completely disabled - fetching fresh data only");const iV=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3?arguments[3]:void 0;if(console.log("[coupons2Service] Fetching fresh coupons for business:",e,"status:",t),!e)return console.error("[coupons2Service] No business ID provided"),{coupons:[],lastDoc:null,hasMore:!1};try{const s=(0,sl.rJ)(rl.db,"coupons");let o=(0,sl.P)(s,(0,sl._M)("businessId","==",e),(0,sl.My)("createdAt","desc"),(0,sl.AB)(n));"active"===t?o=(0,sl.P)(s,(0,sl._M)("businessId","==",e),(0,sl._M)("active","==",!0),(0,sl.My)("createdAt","desc"),(0,sl.AB)(n)):"expired"===t&&(o=(0,sl.P)(s,(0,sl._M)("businessId","==",e),(0,sl._M)("active","==",!1),(0,sl.My)("createdAt","desc"),(0,sl.AB)(n))),r&&(o=(0,sl.P)(o,(0,sl.HM)(r))),console.log("[coupons2Service] Executing Firestore query...");const i=await(0,sl.GG)(o),a=[];i.forEach((e=>{const t=e.data();a.push((0,S.A)({id:e.id},t))}));const l=i.docs[i.docs.length-1]||null,c=i.docs.length===n;return console.log("[coupons2Service] Successfully fetched",a.length,"coupons"),console.log("[coupons2Service] Coupon titles:",a.map((e=>e.title))),{coupons:a,lastDoc:l,hasMore:c}}catch(s){throw console.error("[coupons2Service] Error fetching coupons:",s),s}},aV=e=>{let{searchTerm:t,filterStatus:n}=e;return(0,k.jsx)("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:(0,k.jsxs)("p",{children:["Search: ",t," | Filter: ",n]})})},lV=()=>(0,k.jsx)("div",{className:"mb-4 p-2 bg-gray-100 rounded",children:(0,k.jsx)("p",{children:"View Toggle Component"})}),cV=()=>(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("p",{className:"text-gray-500",children:"No coupons found"}),(0,k.jsx)("p",{className:"text-sm text-gray-400",children:"Get started by creating your first coupon."})]}),uV=e=>{let{coupons:t}=e;return(0,k.jsx)("div",{className:"space-y-4",children:t.map((e=>(0,k.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,k.jsx)("h3",{className:"font-semibold",children:e.title}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,k.jsxs)("p",{className:"text-xs text-gray-500",children:["Code: ",e.code]})]},e.id)))})},dV=e=>{let{coupons:t}=e;return(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.title}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.code}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.active?"Active":"Inactive"})]},e.id)))})]})})},hV=e=>{let{isOpen:t,onClose:n,onCouponCreated:r}=e;return t?(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create New Coupon"}),(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:"Coupon creation form would go here."}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,k.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,k.jsx)("button",{onClick:()=>{r(),n()},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Create"})]})]})}):null},mV=()=>{const{user:t}=(()=>{const t=(0,e.useContext)(oV);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t})(),n=(null===t||void 0===t?void 0:t.businessId)||"",[r,s]=(0,e.useState)(""),[o,i]=(0,e.useState)("all"),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(window.innerWidth<768),{coupons:m,loading:p,error:f,refresh:g}=(t=>{let{businessId:n,status:r,active:s,maxResults:o=20,autoLoad:i=!0}=t;const[a,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(null),y=(0,e.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){u(!0),h(null);try{let t;console.log("[useOptimizedCoupons] Fetching coupons for business:",n),void 0!==s?t=s?"active":"expired":"active"!==r&&"expired"!==r&&"scheduled"!==r||(t=r);const i=await iV(n,t,o,e?void 0:f);if(!i)return console.error("[useOptimizedCoupons] Received null result from getCoupons2"),h(new Error("Failed to fetch coupons: null result")),l([]),p(!1),void g(null);if(!i.coupons)return console.error("[useOptimizedCoupons] Received null coupons array from getCoupons2"),h(new Error("Failed to fetch coupons: null coupons array")),l([]),p(!1),void g(null);console.log("[useOptimizedCoupons] Successfully fetched",i.coupons.length,"coupons"),console.log("[useOptimizedCoupons] Coupon titles:",i.coupons.map((e=>e.title))),l(e?i.coupons:e=>[...e,...i.coupons]),p(i.hasMore),g(i.lastDoc)}catch(zZ){console.error("[useOptimizedCoupons] Error fetching coupons:",zZ),h(zZ instanceof Error?zZ:new Error("Unknown error occurred")),l([]),p(!1),g(null)}finally{u(!1)}}else console.error("[useOptimizedCoupons] No business ID provided")}),[n,r,s,o,f]),v=(0,e.useCallback)((()=>{console.log("[useOptimizedCoupons] Refreshing coupons..."),g(null),y(!0)}),[y]),x=(0,e.useCallback)((()=>{!c&&m&&y(!1)}),[y,c,m]);return(0,e.useEffect)((()=>{i&&n&&(console.log("[useOptimizedCoupons] Auto-loading coupons for business:",n),v())}),[i,n,v]),{coupons:a,loading:c,error:d,hasMore:m,loadMore:x,refresh:v}})({businessId:n,status:"all"===o?void 0:o,maxResults:20});(0,e.useEffect)((()=>{const e=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const y=m.filter((e=>{var t,n,s;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(r.toLowerCase()))||(null===(s=e.code)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))}));return p?(0,k.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,k.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Coupons 2.0"}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:async()=>{try{await(async()=>{console.log("[coupons2Service] Cache clearing requested - but cache is already disabled"),"undefined"!==typeof window&&(Object.keys(localStorage).forEach((e=>{(e.includes("coupon")||e.includes("cache_"))&&(localStorage.removeItem(e),console.log("[coupons2Service] Removed localStorage key:",e))})),Object.keys(sessionStorage).forEach((e=>{(e.includes("coupon")||e.includes("cache_"))&&(sessionStorage.removeItem(e),console.log("[coupons2Service] Removed sessionStorage key:",e))})))})(),await g(),console.log("[Coupons2] Cache cleared and data refreshed")}catch(f){console.error("[Coupons2] Error clearing cache:",f)}},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Clear Cache"}),(0,k.jsx)("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Coupon"})]})]}),(0,k.jsxs)("div",{className:"mb-4 p-3 bg-gray-100 rounded text-sm",children:[(0,k.jsx)("strong",{children:"Debug Info:"})," Business ID: ",n,", Coupons: ",m.length,", Loading: ",p.toString(),", Error: ",f?"Error occurred":"None"]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-green-600",children:"Active"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:m.filter((e=>e.active)).length})]}),(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-blue-600",children:"Scheduled"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:"0"})]}),(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-red-600",children:"Expired"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:"0"})]}),(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-purple-600",children:"Redemptions"}),(0,k.jsx)("p",{className:"text-2xl font-bold",children:"0"})]})]}),(0,k.jsx)(aV,{searchTerm:r,filterStatus:o}),(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)(lV,{})}),f&&(0,k.jsxs)("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:[(0,k.jsx)("strong",{children:"Error:"})," ",f.message]}),!p&&0===m.length&&!f&&(0,k.jsx)(cV,{}),m.length>0&&(0,k.jsx)("div",{className:"bg-white rounded-lg shadow",children:d?(0,k.jsx)(uV,{coupons:y}):(0,k.jsx)(dV,{coupons:y})}),a&&(0,k.jsx)(hV,{isOpen:a,onClose:()=>{l(!1),u(null)},onCouponCreated:()=>{g()}})]})},pV=e=>{switch(e){case"business":return"/business/dashboard";case"customer":default:return"/customer/dashboard";case"staff":return"/staff/dashboard";case"admin":return"/admin/dashboard"}},fV=t=>{let{children:n,requiredRole:r,allowedRoles:s=[]}=t;const{user:o,isLoading:a,businessProfile:l}=(0,N.A)(),c=(0,i.zy)();(0,e.useEffect)((()=>{console.log("[ProtectedRoute] Path:",c.pathname),console.log("[ProtectedRoute] User:",o?{uid:o.uid,email:o.email,role:o.role,businessId:o.businessId,businesses:o.businesses}:null),console.log("[ProtectedRoute] Business Profile:",l),console.log("[ProtectedRoute] Required Role:",r),console.log("[ProtectedRoute] Allowed Roles:",s),console.log("[ProtectedRoute] Is Loading:",a)}),[o,l,r,s,c,a]);const u=(0,e.useMemo)((()=>o?{uid:o.uid,email:o.email,role:o.role,businessId:o.businessId,businesses:o.businesses,currentBusinessId:o.currentBusinessId,businessProfile:l}:null),[o,l]),d=(0,e.useMemo)((()=>{if(!u)return"";const e=((e,t)=>{if(!e)return console.log("[DEBUG][Role] No user provided, defaulting to customer"),"customer";if(console.log("[DEBUG][Role] Starting role determination for user:",{uid:e.uid,email:e.email,explicitRole:e.role,businessId:e.businessId,hasBusinesses:e.businesses?"Yes (".concat(e.businesses.length," businesses)"):"No",currentBusinessId:e.currentBusinessId||"None"}),console.log("[DEBUG][Role] User object keys:",Object.keys(e)),console.log("[DEBUG][Role] Business profile:",t?(0,S.A)((0,S.A)({businessId:t.businessId,businessName:t.businessName},t.industry&&{industry:t.industry}),t.subscriptionTier&&{subscriptionTier:t.subscriptionTier}):"None"),e.role)return console.log("[DEBUG][Role] Using explicit role from user data: ".concat(e.role)),e.role;if(e.businessId&&"string"===typeof e.businessId&&""!==e.businessId.trim())return console.log("[DEBUG][Role] Using businessId to determine role as business:",e.businessId),"business";if(e.businesses&&Array.isArray(e.businesses)&&e.businesses.length>0){const t=e.businesses.filter((e=>e&&"string"===typeof e&&""!==e.trim()));if(t.length>0)return console.log("[DEBUG][Role] User has valid businesses array with entries:",t),"business"}if(t&&t.businessId&&"string"===typeof t.businessId)return console.log("[DEBUG][Role] Using business profile to determine role as business:",t.businessId),"business";if(e.email){var n;const t=null===(n=e.email.split("@")[1])||void 0===n?void 0:n.toLowerCase();console.log("[DEBUG][Role] Checking email domain:",t),t&&!["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","aol.com"].includes(t)&&console.log("[DEBUG][Role] Email domain appears to be a business domain, but no other business indicators found - still defaulting to customer")}return console.log("[DEBUG][Role] No valid business indicators found, defaulting to customer role"),"customer"})(u,l);return console.log("[ProtectedRoute] Determined user role:",e),e}),[u,l]);if(a)return console.log("[ProtectedRoute] Still loading auth state"),(0,k.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(!o)return console.log("[ProtectedRoute] No user, redirecting to homepage"),(0,k.jsx)(i.C5,{to:"/",replace:!0,state:{from:c}});if(!d)return console.log("[ProtectedRoute] User exists but role not determined yet"),(0,k.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(r&&r!==d){console.log("[ProtectedRoute] Required role ".concat(r," doesn't match user role ").concat(d));const e=pV(d);return console.log("[ProtectedRoute] Redirecting to default route: ".concat(e)),(0,k.jsx)(i.C5,{to:e,replace:!0})}if(s.length>0&&d&&!s.includes(d)){console.log("[ProtectedRoute] User role ".concat(d," not in allowed roles:"),s);const e=pV(d);return console.log("[ProtectedRoute] Redirecting to default route: ".concat(e)),(0,k.jsx)(i.C5,{to:e,replace:!0})}return console.log("[ProtectedRoute] Access granted for role:",d),n?(0,k.jsx)(k.Fragment,{children:n}):(0,k.jsx)(i.sv,{})},gV=e=>{let{children:t}=e;const{user:n,isLoading:r}=(0,N.A)();return r?(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):n?"admin"!==n.role?(0,k.jsx)(i.C5,{to:"/unauthorized",replace:!0}):(0,k.jsx)(k.Fragment,{children:t}):(0,k.jsx)(i.C5,{to:"/login",replace:!0})};var yV=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===vV}(e)}(e)};var vV="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function xV(e,t){return!1!==t.clone&&t.isMergeableObject(e)?wV((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function bV(e,t,n){return e.concat(t).map((function(e){return xV(e,n)}))}function wV(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||bV,n.isMergeableObject=n.isMergeableObject||yV;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=xV(e[t],n)})),Object.keys(t).forEach((function(s){n.isMergeableObject(t[s])&&e[s]?r[s]=wV(e[s],t[s],n):r[s]=xV(t[s],n)})),r}(e,t,n):xV(t,n)}wV.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return wV(e,n,t)}),{})};const NV=wV;const jV="object"==typeof global&&global&&global.Object===Object&&global;var kV="object"==typeof self&&self&&self.Object===Object&&self;const CV=jV||kV||Function("return this")();const SV=CV.Symbol;var AV=Object.prototype,EV=AV.hasOwnProperty,_V=AV.toString,IV=SV?SV.toStringTag:void 0;const TV=function(e){var t=EV.call(e,IV),n=e[IV];try{e[IV]=void 0;var r=!0}catch(UZ){}var s=_V.call(e);return r&&(t?e[IV]=n:delete e[IV]),s};var PV=Object.prototype.toString;const RV=function(e){return PV.call(e)};var DV=SV?SV.toStringTag:void 0;const MV=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":DV&&DV in Object(e)?TV(e):RV(e)};const LV=function(e,t){return function(n){return e(t(n))}};const OV=LV(Object.getPrototypeOf,Object);const FV=function(e){return null!=e&&"object"==typeof e};var BV=Function.prototype,UV=Object.prototype,zV=BV.toString,VV=UV.hasOwnProperty,qV=zV.call(Object);const WV=function(e){if(!FV(e)||"[object Object]"!=MV(e))return!1;var t=OV(e);if(null===t)return!0;var n=VV.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&zV.call(n)==qV};const HV=function(){this.__data__=[],this.size=0};const GV=function(e,t){return e===t||e!==e&&t!==t};const KV=function(e,t){for(var n=e.length;n--;)if(GV(e[n][0],t))return n;return-1};var YV=Array.prototype.splice;const QV=function(e){var t=this.__data__,n=KV(t,e);return!(n<0)&&(n==t.length-1?t.pop():YV.call(t,n,1),--this.size,!0)};const $V=function(e){var t=this.__data__,n=KV(t,e);return n<0?void 0:t[n][1]};const JV=function(e){return KV(this.__data__,e)>-1};const XV=function(e,t){var n=this.__data__,r=KV(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ZV(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ZV.prototype.clear=HV,ZV.prototype.delete=QV,ZV.prototype.get=$V,ZV.prototype.has=JV,ZV.prototype.set=XV;const eq=ZV;const tq=function(){this.__data__=new eq,this.size=0};const nq=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const rq=function(e){return this.__data__.get(e)};const sq=function(e){return this.__data__.has(e)};const oq=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const iq=function(e){if(!oq(e))return!1;var t=MV(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const aq=CV["__core-js_shared__"];var lq=function(){var e=/[^.]+$/.exec(aq&&aq.keys&&aq.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const cq=function(e){return!!lq&&lq in e};var uq=Function.prototype.toString;const dq=function(e){if(null!=e){try{return uq.call(e)}catch(UZ){}try{return e+""}catch(UZ){}}return""};var hq=/^\[object .+?Constructor\]$/,mq=Function.prototype,pq=Object.prototype,fq=mq.toString,gq=pq.hasOwnProperty,yq=RegExp("^"+fq.call(gq).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const vq=function(e){return!(!oq(e)||cq(e))&&(iq(e)?yq:hq).test(dq(e))};const xq=function(e,t){return null==e?void 0:e[t]};const bq=function(e,t){var n=xq(e,t);return vq(n)?n:void 0};const wq=bq(CV,"Map");const Nq=bq(Object,"create");const jq=function(){this.__data__=Nq?Nq(null):{},this.size=0};const kq=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Cq=Object.prototype.hasOwnProperty;const Sq=function(e){var t=this.__data__;if(Nq){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Cq.call(t,e)?t[e]:void 0};var Aq=Object.prototype.hasOwnProperty;const Eq=function(e){var t=this.__data__;return Nq?void 0!==t[e]:Aq.call(t,e)};const _q=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Nq&&void 0===t?"__lodash_hash_undefined__":t,this};function Iq(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Iq.prototype.clear=jq,Iq.prototype.delete=kq,Iq.prototype.get=Sq,Iq.prototype.has=Eq,Iq.prototype.set=_q;const Tq=Iq;const Pq=function(){this.size=0,this.__data__={hash:new Tq,map:new(wq||eq),string:new Tq}};const Rq=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Dq=function(e,t){var n=e.__data__;return Rq(t)?n["string"==typeof t?"string":"hash"]:n.map};const Mq=function(e){var t=Dq(this,e).delete(e);return this.size-=t?1:0,t};const Lq=function(e){return Dq(this,e).get(e)};const Oq=function(e){return Dq(this,e).has(e)};const Fq=function(e,t){var n=Dq(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Bq(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bq.prototype.clear=Pq,Bq.prototype.delete=Mq,Bq.prototype.get=Lq,Bq.prototype.has=Oq,Bq.prototype.set=Fq;const Uq=Bq;const zq=function(e,t){var n=this.__data__;if(n instanceof eq){var r=n.__data__;if(!wq||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Uq(r)}return n.set(e,t),this.size=n.size,this};function Vq(e){var t=this.__data__=new eq(e);this.size=t.size}Vq.prototype.clear=tq,Vq.prototype.delete=nq,Vq.prototype.get=rq,Vq.prototype.has=sq,Vq.prototype.set=zq;const qq=Vq;const Wq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const Hq=function(){try{var e=bq(Object,"defineProperty");return e({},"",{}),e}catch(UZ){}}();const Gq=function(e,t,n){"__proto__"==t&&Hq?Hq(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var Kq=Object.prototype.hasOwnProperty;const Yq=function(e,t,n){var r=e[t];Kq.call(e,t)&&GV(r,n)&&(void 0!==n||t in e)||Gq(e,t,n)};const Qq=function(e,t,n,r){var s=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),s?Gq(n,a,l):Yq(n,a,l)}return n};const $q=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const Jq=function(e){return FV(e)&&"[object Arguments]"==MV(e)};var Xq=Object.prototype,Zq=Xq.hasOwnProperty,eW=Xq.propertyIsEnumerable;const tW=Jq(function(){return arguments}())?Jq:function(e){return FV(e)&&Zq.call(e,"callee")&&!eW.call(e,"callee")};const nW=Array.isArray;const rW=function(){return!1};var sW="object"==typeof exports&&exports&&!exports.nodeType&&exports,oW=sW&&"object"==typeof module&&module&&!module.nodeType&&module,iW=oW&&oW.exports===sW?CV.Buffer:void 0;const aW=(iW?iW.isBuffer:void 0)||rW;var lW=/^(?:0|[1-9]\d*)$/;const cW=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&lW.test(e))&&e>-1&&e%1==0&&e<t};const uW=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var dW={};dW["[object Float32Array]"]=dW["[object Float64Array]"]=dW["[object Int8Array]"]=dW["[object Int16Array]"]=dW["[object Int32Array]"]=dW["[object Uint8Array]"]=dW["[object Uint8ClampedArray]"]=dW["[object Uint16Array]"]=dW["[object Uint32Array]"]=!0,dW["[object Arguments]"]=dW["[object Array]"]=dW["[object ArrayBuffer]"]=dW["[object Boolean]"]=dW["[object DataView]"]=dW["[object Date]"]=dW["[object Error]"]=dW["[object Function]"]=dW["[object Map]"]=dW["[object Number]"]=dW["[object Object]"]=dW["[object RegExp]"]=dW["[object Set]"]=dW["[object String]"]=dW["[object WeakMap]"]=!1;const hW=function(e){return FV(e)&&uW(e.length)&&!!dW[MV(e)]};const mW=function(e){return function(t){return e(t)}};var pW="object"==typeof exports&&exports&&!exports.nodeType&&exports,fW=pW&&"object"==typeof module&&module&&!module.nodeType&&module,gW=fW&&fW.exports===pW&&jV.process,yW=function(){try{var e=fW&&fW.require&&fW.require("util").types;return e||gW&&gW.binding&&gW.binding("util")}catch(UZ){}}();const vW=yW;var xW=vW&&vW.isTypedArray;const bW=xW?mW(xW):hW;var wW=Object.prototype.hasOwnProperty;const NW=function(e,t){var n=nW(e),r=!n&&tW(e),s=!n&&!r&&aW(e),o=!n&&!r&&!s&&bW(e),i=n||r||s||o,a=i?$q(e.length,String):[],l=a.length;for(var c in e)!t&&!wW.call(e,c)||i&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||cW(c,l))||a.push(c);return a};var jW=Object.prototype;const kW=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jW)};const CW=LV(Object.keys,Object);var SW=Object.prototype.hasOwnProperty;const AW=function(e){if(!kW(e))return CW(e);var t=[];for(var n in Object(e))SW.call(e,n)&&"constructor"!=n&&t.push(n);return t};const EW=function(e){return null!=e&&uW(e.length)&&!iq(e)};const _W=function(e){return EW(e)?NW(e):AW(e)};const IW=function(e,t){return e&&Qq(t,_W(t),e)};const TW=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var PW=Object.prototype.hasOwnProperty;const RW=function(e){if(!oq(e))return TW(e);var t=kW(e),n=[];for(var r in e)("constructor"!=r||!t&&PW.call(e,r))&&n.push(r);return n};const DW=function(e){return EW(e)?NW(e,!0):RW(e)};const MW=function(e,t){return e&&Qq(t,DW(t),e)};var LW="object"==typeof exports&&exports&&!exports.nodeType&&exports,OW=LW&&"object"==typeof module&&module&&!module.nodeType&&module,FW=OW&&OW.exports===LW?CV.Buffer:void 0,BW=FW?FW.allocUnsafe:void 0;const UW=function(e,t){if(t)return e.slice();var n=e.length,r=BW?BW(n):new e.constructor(n);return e.copy(r),r};const zW=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const VW=function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[s++]=i)}return o};const qW=function(){return[]};var WW=Object.prototype.propertyIsEnumerable,HW=Object.getOwnPropertySymbols,GW=HW?function(e){return null==e?[]:(e=Object(e),VW(HW(e),(function(t){return WW.call(e,t)})))}:qW;const KW=GW;const YW=function(e,t){return Qq(e,KW(e),t)};const QW=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e};var $W=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)QW(t,KW(e)),e=OV(e);return t}:qW;const JW=$W;const XW=function(e,t){return Qq(e,JW(e),t)};const ZW=function(e,t,n){var r=t(e);return nW(e)?r:QW(r,n(e))};const eH=function(e){return ZW(e,_W,KW)};const tH=function(e){return ZW(e,DW,JW)};const nH=bq(CV,"DataView");const rH=bq(CV,"Promise");const sH=bq(CV,"Set");const oH=bq(CV,"WeakMap");var iH="[object Map]",aH="[object Promise]",lH="[object Set]",cH="[object WeakMap]",uH="[object DataView]",dH=dq(nH),hH=dq(wq),mH=dq(rH),pH=dq(sH),fH=dq(oH),gH=MV;(nH&&gH(new nH(new ArrayBuffer(1)))!=uH||wq&&gH(new wq)!=iH||rH&&gH(rH.resolve())!=aH||sH&&gH(new sH)!=lH||oH&&gH(new oH)!=cH)&&(gH=function(e){var t=MV(e),n="[object Object]"==t?e.constructor:void 0,r=n?dq(n):"";if(r)switch(r){case dH:return uH;case hH:return iH;case mH:return aH;case pH:return lH;case fH:return cH}return t});const yH=gH;var vH=Object.prototype.hasOwnProperty;const xH=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&vH.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const bH=CV.Uint8Array;const wH=function(e){var t=new e.constructor(e.byteLength);return new bH(t).set(new bH(e)),t};const NH=function(e,t){var n=t?wH(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var jH=/\w*$/;const kH=function(e){var t=new e.constructor(e.source,jH.exec(e));return t.lastIndex=e.lastIndex,t};var CH=SV?SV.prototype:void 0,SH=CH?CH.valueOf:void 0;const AH=function(e){return SH?Object(SH.call(e)):{}};const EH=function(e,t){var n=t?wH(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const _H=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return wH(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return NH(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return EH(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return kH(e);case"[object Symbol]":return AH(e)}};var IH=Object.create,TH=function(){function e(){}return function(t){if(!oq(t))return{};if(IH)return IH(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const PH=TH;const RH=function(e){return"function"!=typeof e.constructor||kW(e)?{}:PH(OV(e))};const DH=function(e){return FV(e)&&"[object Map]"==yH(e)};var MH=vW&&vW.isMap;const LH=MH?mW(MH):DH;const OH=function(e){return FV(e)&&"[object Set]"==yH(e)};var FH=vW&&vW.isSet;const BH=FH?mW(FH):OH;var UH="[object Arguments]",zH="[object Function]",VH="[object Object]",qH={};qH[UH]=qH["[object Array]"]=qH["[object ArrayBuffer]"]=qH["[object DataView]"]=qH["[object Boolean]"]=qH["[object Date]"]=qH["[object Float32Array]"]=qH["[object Float64Array]"]=qH["[object Int8Array]"]=qH["[object Int16Array]"]=qH["[object Int32Array]"]=qH["[object Map]"]=qH["[object Number]"]=qH[VH]=qH["[object RegExp]"]=qH["[object Set]"]=qH["[object String]"]=qH["[object Symbol]"]=qH["[object Uint8Array]"]=qH["[object Uint8ClampedArray]"]=qH["[object Uint16Array]"]=qH["[object Uint32Array]"]=!0,qH["[object Error]"]=qH[zH]=qH["[object WeakMap]"]=!1;const WH=function e(t,n,r,s,o,i){var a,l=1&n,c=2&n,u=4&n;if(r&&(a=o?r(t,s,o,i):r(t)),void 0!==a)return a;if(!oq(t))return t;var d=nW(t);if(d){if(a=xH(t),!l)return zW(t,a)}else{var h=yH(t),m=h==zH||"[object GeneratorFunction]"==h;if(aW(t))return UW(t,l);if(h==VH||h==UH||m&&!o){if(a=c||m?{}:RH(t),!l)return c?XW(t,MW(a,t)):YW(t,IW(a,t))}else{if(!qH[h])return o?t:{};a=_H(t,h,l)}}i||(i=new qq);var p=i.get(t);if(p)return p;i.set(t,a),BH(t)?t.forEach((function(s){a.add(e(s,n,r,s,t,i))})):LH(t)&&t.forEach((function(s,o){a.set(o,e(s,n,r,o,t,i))}));var f=d?void 0:(u?c?tH:eH:c?DW:_W)(t);return Wq(f||t,(function(s,o){f&&(s=t[o=s]),Yq(a,o,e(s,n,r,o,t,i))})),a};const HH=function(e){return WH(e,5)};var GH=n(4901),KH=n.n(GH);const YH=function(e,t){};const QH=function(e){return WH(e,4)};const $H=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s};const JH=function(e){return"symbol"==typeof e||FV(e)&&"[object Symbol]"==MV(e)};function XH(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var i=e.apply(this,r);return n.cache=o.set(s,i)||o,i};return n.cache=new(XH.Cache||Uq),n}XH.Cache=Uq;const ZH=XH;const eG=function(e){var t=ZH(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var tG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nG=/\\(\\)?/g,rG=eG((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(tG,(function(e,n,r,s){t.push(r?s.replace(nG,"$1"):n||e)})),t}));const sG=rG;const oG=function(e){if("string"==typeof e||JH(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var iG=SV?SV.prototype:void 0,aG=iG?iG.toString:void 0;const lG=function e(t){if("string"==typeof t)return t;if(nW(t))return $H(t,e)+"";if(JH(t))return aG?aG.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const cG=function(e){return null==e?"":lG(e)};const uG=function(e){return nW(e)?$H(e,oG):JH(e)?[e]:zW(sG(cG(e)))};function dG(){return dG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dG.apply(this,arguments)}function hG(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function mG(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function pG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fG=(0,e.createContext)(void 0);fG.displayName="FormikContext";fG.Provider,fG.Consumer;function gG(){var t=(0,e.useContext)(fG);return t||YH(!1),t}var yG=function(e){return Array.isArray(e)&&0===e.length},vG=function(e){return"function"===typeof e},xG=function(e){return null!==e&&"object"===typeof e},bG=function(e){return String(Math.floor(Number(e)))===e},wG=function(e){return"[object String]"===Object.prototype.toString.call(e)},NG=function(t){return 0===e.Children.count(t)},jG=function(e){return xG(e)&&vG(e.then)};function kG(e,t,n,r){void 0===r&&(r=0);for(var s=uG(t);e&&r<s.length;)e=e[s[r++]];return r===s.length||e?void 0===e?n:e:n}function CG(e,t,n){for(var r=QH(e),s=r,o=0,i=uG(t);o<i.length-1;o++){var a=i[o],l=kG(e,i.slice(0,o+1));if(l&&(xG(l)||Array.isArray(l)))s=s[a]=QH(l);else{var c=i[o+1];s=s[a]=bG(c)&&Number(c)>=0?[]:{}}}return(0===o?e:s)[i[o]]===n?e:(void 0===n?delete s[i[o]]:s[i[o]]=n,0===o&&void 0===n&&delete r[i[o]],r)}function SG(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var s=0,o=Object.keys(e);s<o.length;s++){var i=o[s],a=e[i];xG(a)?n.get(a)||(n.set(a,!0),r[i]=Array.isArray(a)?[]:{},SG(a,t,n,r[i])):r[i]=t}return r}var AG={},EG={};function _G(t){var n=t.validateOnChange,r=void 0===n||n,s=t.validateOnBlur,o=void 0===s||s,i=t.validateOnMount,a=void 0!==i&&i,l=t.isInitialValid,c=t.enableReinitialize,u=void 0!==c&&c,d=t.onSubmit,h=mG(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),m=dG({validateOnChange:r,validateOnBlur:o,validateOnMount:a,onSubmit:d},h),p=(0,e.useRef)(m.initialValues),f=(0,e.useRef)(m.initialErrors||AG),g=(0,e.useRef)(m.initialTouched||EG),y=(0,e.useRef)(m.initialStatus),v=(0,e.useRef)(!1),x=(0,e.useRef)({});(0,e.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var b=(0,e.useState)(0)[1],w=(0,e.useRef)({values:HH(m.initialValues),errors:HH(m.initialErrors)||AG,touched:HH(m.initialTouched)||EG,status:HH(m.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),N=w.current,j=(0,e.useCallback)((function(e){var t=w.current;w.current=function(e,t){switch(t.type){case"SET_VALUES":return dG({},e,{values:t.payload});case"SET_TOUCHED":return dG({},e,{touched:t.payload});case"SET_ERRORS":return KH()(e.errors,t.payload)?e:dG({},e,{errors:t.payload});case"SET_STATUS":return dG({},e,{status:t.payload});case"SET_ISSUBMITTING":return dG({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return dG({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return dG({},e,{values:CG(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return dG({},e,{touched:CG(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return dG({},e,{errors:CG(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return dG({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return dG({},e,{touched:SG(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return dG({},e,{isSubmitting:!1});default:return e}}(t,e),t!==w.current&&b((function(e){return e+1}))}),[]),k=(0,e.useCallback)((function(e,t){return new Promise((function(n,r){var s=m.validate(e,t);null==s?n(AG):jG(s)?s.then((function(e){n(e||AG)}),(function(e){r(e)})):n(s)}))}),[m.validate]),C=(0,e.useCallback)((function(e,t){var n=m.validationSchema,r=vG(n)?n(t):n,s=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);var s=IG(e);return t[n?"validateSync":"validate"](s,{abortEarly:!1,context:r||s})}(e,r);return new Promise((function(e,t){s.then((function(){e(AG)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return CG(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),s=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}var i=o;kG(t,i.path)||(t=CG(t,i.path,i.message))}}return t}(n)):t(n)}))}))}),[m.validationSchema]),S=(0,e.useCallback)((function(e,t){return new Promise((function(n){return n(x.current[e].validate(t))}))}),[]),A=(0,e.useCallback)((function(e){var t=Object.keys(x.current).filter((function(e){return vG(x.current[e].validate)})),n=t.length>0?t.map((function(t){return S(t,kG(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=CG(e,t[r],n)),e}),{})}))}),[S]),E=(0,e.useCallback)((function(e){return Promise.all([A(e),m.validationSchema?C(e):{},m.validate?k(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return NV.all([t,n,r],{arrayMerge:TG})}))}),[m.validate,m.validationSchema,A,k,C]),_=RG((function(e){return void 0===e&&(e=N.values),j({type:"SET_ISVALIDATING",payload:!0}),E(e).then((function(e){return v.current&&(j({type:"SET_ISVALIDATING",payload:!1}),j({type:"SET_ERRORS",payload:e})),e}))}));(0,e.useEffect)((function(){a&&!0===v.current&&KH()(p.current,m.initialValues)&&_(p.current)}),[a,_]);var I=(0,e.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:f.current?f.current:m.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:m.initialTouched||{},s=e&&e.status?e.status:y.current?y.current:m.initialStatus;p.current=t,f.current=n,g.current=r,y.current=s;var o=function(){j({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:s,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(m.onReset){var i=m.onReset(N.values,Q);jG(i)?i.then(o):o()}else o()}),[m.initialErrors,m.initialStatus,m.initialTouched,m.onReset]);(0,e.useEffect)((function(){!0!==v.current||KH()(p.current,m.initialValues)||u&&(p.current=m.initialValues,I(),a&&_(p.current))}),[u,m.initialValues,I,a,_]),(0,e.useEffect)((function(){u&&!0===v.current&&!KH()(f.current,m.initialErrors)&&(f.current=m.initialErrors||AG,j({type:"SET_ERRORS",payload:m.initialErrors||AG}))}),[u,m.initialErrors]),(0,e.useEffect)((function(){u&&!0===v.current&&!KH()(g.current,m.initialTouched)&&(g.current=m.initialTouched||EG,j({type:"SET_TOUCHED",payload:m.initialTouched||EG}))}),[u,m.initialTouched]),(0,e.useEffect)((function(){u&&!0===v.current&&!KH()(y.current,m.initialStatus)&&(y.current=m.initialStatus,j({type:"SET_STATUS",payload:m.initialStatus}))}),[u,m.initialStatus,m.initialTouched]);var T=RG((function(e){if(x.current[e]&&vG(x.current[e].validate)){var t=kG(N.values,e),n=x.current[e].validate(t);return jG(n)?(j({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){j({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),j({type:"SET_ISVALIDATING",payload:!1})}))):(j({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return m.validationSchema?(j({type:"SET_ISVALIDATING",payload:!0}),C(N.values,e).then((function(e){return e})).then((function(t){j({type:"SET_FIELD_ERROR",payload:{field:e,value:kG(t,e)}}),j({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),P=(0,e.useCallback)((function(e,t){var n=t.validate;x.current[e]={validate:n}}),[]),R=(0,e.useCallback)((function(e){delete x.current[e]}),[]),D=RG((function(e,t){return j({type:"SET_TOUCHED",payload:e}),(void 0===t?o:t)?_(N.values):Promise.resolve()})),M=(0,e.useCallback)((function(e){j({type:"SET_ERRORS",payload:e})}),[]),L=RG((function(e,t){var n=vG(e)?e(N.values):e;return j({type:"SET_VALUES",payload:n}),(void 0===t?r:t)?_(n):Promise.resolve()})),O=(0,e.useCallback)((function(e,t){j({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),F=RG((function(e,t,n){return j({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===n?r:n)?_(CG(N.values,e,t)):Promise.resolve()})),B=(0,e.useCallback)((function(e,t){var n,r=t,s=e;if(!wG(e)){e.persist&&e.persist();var o=e.target?e.target:e.currentTarget,i=o.type,a=o.name,l=o.id,c=o.value,u=o.checked,d=(o.outerHTML,o.options),h=o.multiple;r=t||(a||l),s=/number|range/.test(i)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(i)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],s=!1,o=-1;if(Array.isArray(e))r=e,s=(o=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!s)return r.concat(n);if(!s)return r;return r.slice(0,o).concat(r.slice(o+1))}(kG(N.values,r),u,c):d&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(d):c}r&&F(r,s)}),[F,N.values]),U=RG((function(e){if(wG(e))return function(t){return B(t,e)};B(e)})),z=RG((function(e,t,n){return void 0===t&&(t=!0),j({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?o:n)?_(N.values):Promise.resolve()})),V=(0,e.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,s=n.id,o=(n.outerHTML,t||(r||s));z(o,!0)}),[z]),q=RG((function(e){if(wG(e))return function(t){return V(t,e)};V(e)})),W=(0,e.useCallback)((function(e){vG(e)?j({type:"SET_FORMIK_STATE",payload:e}):j({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),H=(0,e.useCallback)((function(e){j({type:"SET_STATUS",payload:e})}),[]),G=(0,e.useCallback)((function(e){j({type:"SET_ISSUBMITTING",payload:e})}),[]),K=RG((function(){return j({type:"SUBMIT_ATTEMPT"}),_().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=$()))return}catch(r){throw r}return Promise.resolve(n).then((function(e){return v.current&&j({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(v.current)throw j({type:"SUBMIT_FAILURE"}),e}))}if(v.current&&(j({type:"SUBMIT_FAILURE"}),t))throw e}))})),Y=RG((function(e){e&&e.preventDefault&&vG(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&vG(e.stopPropagation)&&e.stopPropagation(),K().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Q={resetForm:I,validateForm:_,validateField:T,setErrors:M,setFieldError:O,setFieldTouched:z,setFieldValue:F,setStatus:H,setSubmitting:G,setTouched:D,setValues:L,setFormikState:W,submitForm:K},$=RG((function(){return d(N.values,Q)})),J=RG((function(e){e&&e.preventDefault&&vG(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&vG(e.stopPropagation)&&e.stopPropagation(),I()})),X=(0,e.useCallback)((function(e){return{value:kG(N.values,e),error:kG(N.errors,e),touched:!!kG(N.touched,e),initialValue:kG(p.current,e),initialTouched:!!kG(g.current,e),initialError:kG(f.current,e)}}),[N.errors,N.touched,N.values]),Z=(0,e.useCallback)((function(e){return{setValue:function(t,n){return F(e,t,n)},setTouched:function(t,n){return z(e,t,n)},setError:function(t){return O(e,t)}}}),[F,z,O]),ee=(0,e.useCallback)((function(e){var t=xG(e),n=t?e.name:e,r=kG(N.values,n),s={name:n,value:r,onChange:U,onBlur:q};if(t){var o=e.type,i=e.value,a=e.as,l=e.multiple;"checkbox"===o?void 0===i?s.checked=!!r:(s.checked=!(!Array.isArray(r)||!~r.indexOf(i)),s.value=i):"radio"===o?(s.checked=r===i,s.value=i):"select"===a&&l&&(s.value=s.value||[],s.multiple=!0)}return s}),[q,U,N.values]),te=(0,e.useMemo)((function(){return!KH()(p.current,N.values)}),[p.current,N.values]),ne=(0,e.useMemo)((function(){return"undefined"!==typeof l?te?N.errors&&0===Object.keys(N.errors).length:!1!==l&&vG(l)?l(m):l:N.errors&&0===Object.keys(N.errors).length}),[l,te,N.errors,m]);return dG({},N,{initialValues:p.current,initialErrors:f.current,initialTouched:g.current,initialStatus:y.current,handleBlur:q,handleChange:U,handleReset:J,handleSubmit:Y,resetForm:I,setErrors:M,setFormikState:W,setFieldTouched:z,setFieldValue:F,setFieldError:O,setStatus:H,setSubmitting:G,setTouched:D,setValues:L,submitForm:K,validateForm:_,validateField:T,isValid:ne,dirty:te,unregisterField:R,registerField:P,getFieldProps:ee,getFieldMeta:X,getFieldHelpers:Z,validateOnBlur:o,validateOnChange:r,validateOnMount:a})}function IG(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||WV(e)?IG(e):""!==e?e:void 0})):WV(e[r])?t[r]=IG(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function TG(e,t,n){var r=e.slice();return t.forEach((function(t,s){if("undefined"===typeof r[s]){var o=!1!==n.clone&&n.isMergeableObject(t);r[s]=o?NV(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[s]=NV(e[s],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var PG="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?e.useLayoutEffect:e.useEffect;function RG(t){var n=(0,e.useRef)(t);return PG((function(){n.current=t})),(0,e.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(void 0,t)}),[])}(0,e.forwardRef)((function(t,n){var r=t.action,s=mG(t,["action"]),o=null!=r?r:"#",i=gG(),a=i.handleReset,l=i.handleSubmit;return(0,e.createElement)("form",dG({onSubmit:l,ref:n,onReset:a,action:o},s))})).displayName="Form";var DG=function(e,t,n){var r=MG(e);return r.splice(t,0,n),r},MG=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(dG({},e,{length:t+1}))}return[]},LG=function(e,t){var n="function"===typeof e?e:t;return function(e){if(Array.isArray(e)||xG(e)){var t=MG(e);return n(t)}return e}},OG=function(t){function n(e){var n;return(n=t.call(this,e)||this).updateArrayField=function(e,t,r){var s=n.props,o=s.name;(0,s.formik.setFormikState)((function(n){var s=LG(r,e),i=LG(t,e),a=CG(n.values,o,e(kG(n.values,o))),l=r?s(kG(n.errors,o)):void 0,c=t?i(kG(n.touched,o)):void 0;return yG(l)&&(l=void 0),yG(c)&&(c=void 0),dG({},n,{values:a,errors:r?CG(n.errors,o,l):n.errors,touched:t?CG(n.touched,o,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(MG(t),[HH(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=MG(e),s=r[t];return r[t]=r[n],r[n]=s,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=MG(e),s=r[t];return r.splice(t,1),r.splice(n,0,s),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return DG(n,e,t)}),(function(t){return DG(t,e,null)}),(function(t){return DG(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=MG(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t=r.length,r}),(function(e){return e?[null].concat(e):[null]}),(function(e){return e?[null].concat(e):[null]})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(pG(n)),n.pop=n.pop.bind(pG(n)),n}hG(n,t);var r=n.prototype;return r.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!KH()(kG(e.formik.values,e.name),kG(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},r.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?MG(n):[];return t||(t=r[e]),vG(r.splice)&&r.splice(e,1),vG(r.every)&&r.every((function(e){return void 0===e}))?[]:r}),!0,!0),t},r.pop=function(){var e;return this.updateArrayField((function(t){var n=t.slice();return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},r.render=function(){var t={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},n=this.props,r=n.component,s=n.render,o=n.children,i=n.name,a=dG({},t,{form:mG(n.formik,["validate","validationSchema"]),name:i});return r?(0,e.createElement)(r,a):s?s(a):o?"function"===typeof o?o(a):NG(o)?null:e.Children.only(o):null},n}(e.Component);OG.defaultProps={validateOnChange:!0};var FG,BG;try{FG=Map}catch(qZ){}try{BG=Set}catch(qZ){}function UG(e,t,n){if(!e||"object"!==typeof e||"function"===typeof e)return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(zG);if(FG&&e instanceof FG)return new Map(Array.from(e.entries()));if(BG&&e instanceof BG)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var r=Object.create(e);for(var s in n.push(r),e){var o=t.findIndex((function(t){return t===e[s]}));r[s]=o>-1?n[o]:UG(e[s],t,n)}return r}return e}function zG(e){return UG(e,[],[])}const VG=Object.prototype.toString,qG=Error.prototype.toString,WG=RegExp.prototype.toString,HG="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",GG=/^Symbol\((.*)\)(.*)$/;function KG(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return HG.call(e).replace(GG,"Symbol($1)");const r=VG.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+qG.call(e)+"]":"RegExp"===r?WG.call(e):null}function YG(e,t){let n=KG(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=KG(this[e],t);return null!==r?r:n}),2)}let QG={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:s}=e,o=null!=s&&s!==r,i="".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(YG(r,!0),"`")+(o?" (cast from the value `".concat(YG(s,!0),"`)."):".");return null===r&&(i+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),i},defined:"${path} must be defined"},$G={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},JG={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},XG={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},ZG={isValue:"${path} field must be ${value}"},eK={noUnknown:"${path} field has unspecified keys: ${unknown}"},tK={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:QG,string:$G,number:JG,date:XG,object:eK,array:tK,boolean:ZG});var nK=n(6094),rK=n.n(nK);const sK=e=>e&&e.__isYupSchema__;const oK=class{constructor(e,t){if(this.fn=void 0,this.refs=e,this.refs=e,"function"===typeof t)return void(this.fn=t);if(!rK()(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:s}=t,o="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every((e=>e===n))};this.fn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t.pop(),a=t.pop(),l=o(...t)?r:s;if(l)return"function"===typeof l?l(a):a.concat(l.resolve(i))}}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn.apply(e,n.concat(e,t));if(void 0===r||r===e)return e;if(!sK(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}};function iK(e){return null==e?[]:[].concat(e)}function aK(){return aK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aK.apply(this,arguments)}let lK=/\$\{\s*(\w+)\s*\}/g;class cK extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=aK({},t,{path:n})),"string"===typeof e?e.replace(lK,((e,n)=>YG(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],iK(e).forEach((e=>{cK.isError(e)?(this.errors.push(...e.errors),this.inner=this.inner.concat(e.inner.length?e.inner:e)):this.errors.push(e)})),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,cK)}}function uK(e,t){let{endEarly:n,tests:r,args:s,value:o,errors:i,sort:a,path:l}=e,c=(e=>{let t=!1;return function(){t||(t=!0,e(...arguments))}})(t),u=r.length;const d=[];if(i=i||[],!u)return i.length?c(new cK(i,o,l)):c(null,o);for(let h=0;h<r.length;h++){(0,r[h])(s,(function(e){if(e){if(!cK.isError(e))return c(e,o);if(n)return e.value=o,c(e,o);d.push(e)}if(--u<=0){if(d.length&&(a&&d.sort(a),i.length&&d.push(...i),i=d),i.length)return void c(new cK(i,o,l),o);c(null,o)}}))}}var dK=n(6638),hK=n.n(dK),mK=n(8974);const pK="$",fK=".";function gK(e,t){return new yK(e,t)}class yK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===pK,this.isValue=this.key[0]===fK,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?pK:this.isValue?fK:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,mK.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}function vK(){return vK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vK.apply(this,arguments)}function xK(e){function t(t,n){let{value:r,path:s="",label:o,options:i,originalValue:a,sync:l}=t,c=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,["value","path","label","options","originalValue","sync"]);const{name:u,test:d,params:h,message:m}=e;let{parent:p,context:f}=i;function g(e){return yK.isRef(e)?e.getValue(r,p,f):e}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=hK()(vK({value:r,originalValue:a,label:o,path:e.path||s},h,e.params),g),n=new cK(cK.formatError(e.message||m,t),r,t.path,e.type||u);return n.params=t,n}let v,x=vK({path:s,parent:p,type:u,createError:y,resolve:g,options:i,originalValue:a},c);if(l){try{var b;if(v=d.call(x,r,x),"function"===typeof(null==(b=v)?void 0:b.then))throw new Error('Validation test of type: "'.concat(x.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(zZ){return void n(zZ)}cK.isError(v)?n(v):v?n(null,v):n(y())}else try{Promise.resolve(d.call(x,r,x)).then((e=>{cK.isError(e)?n(e):e?n(null,e):n(y())})).catch(n)}catch(zZ){n(zZ)}}return t.OPTIONS=e,t}yK.prototype.__isYupRef=!0;function bK(e,t,n){let r,s,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,mK.forEach)(t,((a,l,c)=>{let u=l?(e=>e.substr(0,e.length-1).substr(1))(a):a;if((e=e.resolve({context:i,parent:r,value:n})).innerType){let s=c?parseInt(u,10):0;if(n&&s>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(a,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[s],e=e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(o,' which is a type: "').concat(e._type,'")'));r=n,n=n&&n[u],e=e.fields[u]}s=u,o=l?"["+a+"]":"."+a})),{schema:e,parent:r,parentPath:s}):{parent:r,parentPath:t,schema:e}}class wK{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(e){return this.toArray().reduce(((t,n)=>t.concat(yK.isRef(n)?e(n):n)),[])}add(e){yK.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){yK.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}clone(){const e=new wK;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach((e=>n.add(e))),e.refs.forEach((e=>n.add(e))),t.list.forEach((e=>n.delete(e))),t.refs.forEach((e=>n.delete(e))),n}}function NK(){return NK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NK.apply(this,arguments)}class jK{constructor(e){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new wK,this._blacklist=new wK,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(QG.notType)})),this.type=(null==e?void 0:e.type)||"mixed",this.spec=NK({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},null==e?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=NK({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=zG(NK({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const r=NK({},t.spec,n.spec);return n.spec=r,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return!(!this.spec.nullable||null!==e)||this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(NK({value:e},t)),r=n._cast(e,t);if(void 0!==e&&!1!==t.assert&&!0!==n.isType(r)){let s=YG(e),o=YG(r);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n._type,'". \n\n')+"attempted value: ".concat(s," \n")+(o!==s?"result of cast: ".concat(o):""))}return r}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault()),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{sync:r,path:s,from:o=[],originalValue:i=e,strict:a=this.spec.strict,abortEarly:l=this.spec.abortEarly}=t,c=e;a||(c=this._cast(c,NK({assert:!1},t)));let u={value:c,path:s,options:t,originalValue:i,schema:this,label:this.spec.label,sync:r,from:o},d=[];this._typeError&&d.push(this._typeError);let h=[];this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),uK({args:u,value:c,path:s,sync:r,tests:d,endEarly:l},(e=>{e?n(e,c):uK({tests:this.tests.concat(h),args:u,path:s,sync:r,value:c,endEarly:l},n)}))}validate(e,t,n){let r=this.resolve(NK({},t,{value:e}));return"function"===typeof n?r._validate(e,t,n):new Promise(((n,s)=>r._validate(e,t,((e,t)=>{e?s(e):n(t)}))))}validateSync(e,t){let n;return this.resolve(NK({},t,{value:e}))._validate(e,NK({},t,{sync:!0}),((e,t)=>{if(e)throw e;n=t})),n}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(cK.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(zZ){if(cK.isError(zZ))return!1;throw zZ}}_getDefault(){let e=this.spec.default;return null==e?e:"function"===typeof e?e.call(this):zG(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strict=e,t}_isPresent(e){return null!=e}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QG.defined;return this.test({message:e,name:"defined",exclusive:!0,test:e=>void 0!==e})}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QG.required;return this.clone({presence:"required"}).withMutation((t=>t.test({message:e,name:"required",exclusive:!0,test(e){return this.schema._isPresent(e)}})))}notRequired(){let e=this.clone({presence:"optional"});return e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e}nullable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({nullable:!1!==e})}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=QG.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=xK(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=iK(e).map((e=>new yK(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push(new oK(r,t)),n}typeError(e){let t=this.clone();return t._typeError=xK({message:e,name:"typeError",test(e){return!(void 0!==e&&!this.schema.isType(e))||this.createError({params:{type:this.schema._type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QG.oneOf,n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n._whitelistError=xK({message:t,name:"oneOf",test(e){if(void 0===e)return!0;let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QG.notOneOf,n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n._blacklistError=xK({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:t.toArray().join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec;return{meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))}}}jK.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])jK.prototype["".concat(n,"At")]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:s,parentPath:o,schema:i}=bK(this,e,t,r.context);return i[n](s&&s[o],NK({},r,{parent:s,path:e}))};for(const n of["equals","is"])jK.prototype[n]=jK.prototype.oneOf;for(const n of["not","nope"])jK.prototype[n]=jK.prototype.notOneOf;jK.prototype.optional=jK.prototype.notRequired;const kK=jK;kK.prototype;const CK=e=>null==e;class SK extends jK{constructor(){super({type:"boolean"}),this.withMutation((()=>{this.transform((function(e){if(!this.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))}))}_typeCheck(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}isTrue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZG.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>CK(e)||!0===e})}isFalse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZG.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>CK(e)||!1===e})}}SK.prototype;let AK=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,EK=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,_K=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,IK=e=>CK(e)||e===e.trim(),TK={}.toString();function PK(){return new RK}class RK extends jK{constructor(){super({type:"string"}),this.withMutation((()=>{this.transform((function(e){if(this.isType(e))return e;if(Array.isArray(e))return e;const t=null!=e&&e.toString?e.toString():e;return t===TK?e:t}))}))}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$G.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return CK(t)||t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$G.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return CK(t)||t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$G.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(t){return CK(t)||t.length<=this.resolve(e)}})}matches(e,t){let n,r,s=!1;return t&&("object"===typeof t?({excludeEmptyString:s=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||$G.matches,params:{regex:e},test:t=>CK(t)||""===t&&s||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.email;return this.matches(AK,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.url;return this.matches(EK,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.uuid;return this.matches(_K,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.trim;return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:IK})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.lowercase;return this.transform((e=>CK(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>CK(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G.uppercase;return this.transform((e=>CK(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,test:e=>CK(e)||e===e.toUpperCase()})}}PK.prototype=RK.prototype;class DK extends jK{constructor(){super({type:"number"}),this.withMutation((()=>{this.transform((function(e){let t=e;if("string"===typeof t){if(t=t.replace(/\s/g,""),""===t)return NaN;t=+t}return this.isType(t)?t:parseFloat(t)}))}))}_typeCheck(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e)}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JG.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return CK(t)||t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JG.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return CK(t)||t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JG.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test(t){return CK(t)||t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JG.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test(t){return CK(t)||t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JG.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JG.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JG.integer;return this.test({name:"integer",message:e,test:e=>CK(e)||Number.isInteger(e)})}truncate(){return this.transform((e=>CK(e)?e:0|e))}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((t=>CK(t)?t:Math[e](t)))}}DK.prototype;var MK=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;let LK=new Date("");function OK(){return new FK}class FK extends jK{constructor(){super({type:"date"}),this.withMutation((()=>{this.transform((function(e){return this.isType(e)?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],s=0;if(n=MK.exec(e)){for(var o,i=0;o=r[i];++i)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(s=60*n[10]+n[11],"+"===n[9]&&(s=0-s)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+s,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?LK:new Date(e))}))}))}_typeCheck(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}prepareParam(e,t){let n;if(yK.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XG.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(e){return CK(e)||e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XG.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(e){return CK(e)||e<=this.resolve(n)}})}}FK.INVALID_DATE=LK,OK.prototype=FK.prototype,OK.INVALID_DATE=LK;var BK=n(1170),UK=n.n(BK),zK=n(6808),VK=n.n(zK),qK=n(6540),WK=n.n(qK),HK=n(2551),GK=n.n(HK);function KK(e,t){let n=1/0;return e.some(((e,r)=>{var s;if(-1!==(null==(s=t.path)?void 0:s.indexOf(e)))return n=r,!0})),n}function YK(e){return(t,n)=>KK(e,t)-KK(e,n)}function QK(){return QK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QK.apply(this,arguments)}let $K=e=>"[object Object]"===Object.prototype.toString.call(e);const JK=YK([]);class XK extends jK{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=JK,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{this.transform((function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(zZ){e=null}return this.isType(e)?e:null})),e&&this.shape(e)}))}_typeCheck(e){return $K(e)||"function"===typeof e}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault();if(!this._typeCheck(r))return r;let s=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,i=this._nodes.concat(Object.keys(r).filter((e=>-1===this._nodes.indexOf(e)))),a={},l=QK({},t,{parent:a,__validating:t.__validating||!1}),c=!1;for(const u of i){let e=s[u],n=rK()(r,u);if(e){let n,s=r[u];l.path=(t.path?"".concat(t.path,"."):"")+u,e=e.resolve({value:s,context:t.context,parent:a});let o="spec"in e?e.spec:void 0,i=null==o?void 0:o.strict;if(null==o?void 0:o.strip){c=c||u in r;continue}n=t.__validating&&i?r[u]:e.cast(r[u],l),void 0!==n&&(a[u]=n)}else n&&!o&&(a[u]=r[u]);a[u]!==r[u]&&(c=!0)}return c?a:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=[],{sync:s,from:o=[],originalValue:i=e,abortEarly:a=this.spec.abortEarly,recursive:l=this.spec.recursive}=t;o=[{schema:this,value:i},...o],t.__validating=!0,t.originalValue=i,t.from=o,super._validate(e,t,((e,c)=>{if(e){if(!cK.isError(e)||a)return void n(e,c);r.push(e)}if(!l||!$K(c))return void n(r[0]||null,c);i=i||c;let u=this._nodes.map((e=>(n,r)=>{let s=-1===e.indexOf(".")?(t.path?"".concat(t.path,"."):"")+e:"".concat(t.path||"",'["').concat(e,'"]'),a=this.fields[e];a&&"validate"in a?a.validate(c[e],QK({},t,{path:s,from:o,strict:!0,parent:c,originalValue:i[e]}),r):r(null)}));uK({sync:s,tests:u,value:c,errors:r,endEarly:a,sort:this._sortErrors,path:t.path},n)}))}clone(e){const t=super.clone(e);return t.fields=QK({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,s]of Object.entries(this.fields)){const e=n[r];void 0===e?n[r]=s:e instanceof jK&&s instanceof jK&&(n[r]=s.concat(e))}return t.withMutation((()=>t.shape(n,this._excludedEdges)))}getDefaultFromShape(){let e={};return this._nodes.forEach((t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0})),e}_getDefault(){return"default"in this.spec?super._getDefault():this._nodes.length?this.getDefaultFromShape():void 0}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.clone(),r=Object.assign(n.fields,e);return n.fields=r,n._sortErrors=YK(Object.keys(r)),t.length&&(Array.isArray(t[0])||(t=[t]),n._excludedEdges=[...n._excludedEdges,...t]),n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,s=new Set(t.map((e=>{let[t,n]=e;return"".concat(t,"-").concat(n)})));function o(e,t){let o=(0,mK.split)(e)[0];r.add(o),s.has("".concat(t,"-").concat(o))||n.push([t,o])}for(const i in e)if(rK()(e,i)){let t=e[i];r.add(i),yK.isRef(t)&&t.isSibling?o(t.path,i):sK(t)&&"deps"in t&&t.deps.forEach((e=>o(e,i)))}return GK().array(Array.from(r),n).reverse()}(r,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation((e=>(e.fields={},e.shape(t))))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const r of e)delete n[r];return t.withMutation((()=>t.shape(n)))}from(e,t,n){let r=(0,mK.getter)(e,!0);return this.transform((s=>{if(null==s)return s;let o=s;return rK()(s,e)&&(o=QK({},s),n||delete o[e],o[t]=r(s)),o}))}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eK.noUnknown;"string"===typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eK.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>t&&WK()(t,((t,n)=>e(n)))))}camelCase(){return this.transformKeys(VK())}snakeCase(){return this.transformKeys(UK())}constantCase(){return this.transformKeys((e=>UK()(e).toUpperCase()))}describe(){let e=super.describe();return e.fields=hK()(this.fields,(e=>e.describe())),e}}function ZK(e){return new XK(e)}function eY(){return eY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eY.apply(this,arguments)}ZK.prototype=XK.prototype;class tY extends jK{constructor(e){super({type:"array"}),this.innerType=void 0,this.innerType=e,this.withMutation((()=>{this.transform((function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(zZ){e=null}return this.isType(e)?e:null}))}))}_typeCheck(e){return Array.isArray(e)}get _subType(){return this.innerType}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const s=n.map(((e,n)=>{const s=this.innerType.cast(e,eY({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return s!==e&&(r=!0),s}));return r?s:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;var r,s;let o=[],i=t.sync,a=t.path,l=this.innerType,c=null!=(r=t.abortEarly)?r:this.spec.abortEarly,u=null!=(s=t.recursive)?s:this.spec.recursive,d=null!=t.originalValue?t.originalValue:e;super._validate(e,t,((e,r)=>{if(e){if(!cK.isError(e)||c)return void n(e,r);o.push(e)}if(!u||!l||!this._typeCheck(r))return void n(o[0]||null,r);d=d||r;let s=new Array(r.length);for(let n=0;n<r.length;n++){let e=r[n],o="".concat(t.path||"","[").concat(n,"]"),i=eY({},t,{path:o,strict:!0,parent:r,index:n,originalValue:d[n]});s[n]=(t,n)=>l.validate(e,i,n)}uK({sync:i,path:a,value:r,errors:o,endEarly:c,tests:s},n)}))}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!sK(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+YG(e));return t.innerType=e,t}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tK.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(t){return CK(t)||t.length===this.resolve(e)}})}min(e,t){return t=t||tK.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(t){return CK(t)||t.length>=this.resolve(e)}})}max(e,t){return t=t||tK.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(t){return CK(t)||t.length<=this.resolve(e)}})}ensure(){return this.default((()=>[])).transform(((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t)))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform((e=>null!=e?e.filter(t):e))}describe(){let e=super.describe();return this.innerType&&(e.innerType=this.innerType.describe()),e}nullable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return super.nullable(e)}defined(){return super.defined()}required(e){return super.required(e)}}tY.prototype;const nY=e=>{let{formik:t,isLoading:n,onSubmit:r}=e;return(0,k.jsxs)("form",{onSubmit:r,className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",value:t.values.email,onChange:t.handleChange,onBlur:t.handleBlur}),t.touched.email&&t.errors.email?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.email}):null]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",value:t.values.password,onChange:t.handleChange,onBlur:t.handleBlur}),t.touched.password&&t.errors.password?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.password}):null]})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,k.jsx)("div",{className:"text-sm",children:(0,k.jsx)(y,{to:"/forgot-password",className:"font-medium text-primary hover:text-primary/80",children:"Forgot your password?"})})]}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",onClick:()=>{console.log("[LoginPage] Sign in button clicked"),t.isValid||console.log("[LoginPage] Form validation errors:",t.errors)},children:[n?(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,"Sign in"]})})]})},rY=e=>{let{onGoogleSignIn:t,onFacebookSignIn:n,onMicrosoftSignIn:r,onLinkedInSignIn:s,isLoading:o}=e;return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,k.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,k.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,k.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,k.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"button",onClick:t,disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,k.jsx)("span",{className:"sr-only",children:"Sign in with Google"}),(0,k.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})})]})}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"button",onClick:n,disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,k.jsx)("span",{className:"sr-only",children:"Sign in with Facebook"}),(0,k.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]})}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"button",onClick:r,disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,k.jsx)("span",{className:"sr-only",children:"Sign in with Microsoft"}),(0,k.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{d:"M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zM24 11.4H12.6V0H24v11.4z"})})]})}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"button",onClick:s,disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,k.jsx)("span",{className:"sr-only",children:"Sign in with LinkedIn"}),(0,k.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})]})})]})]})},sY=e=>{let{formik:t}=e;return null},oY=()=>(()=>{if("undefined"===typeof window)return!1;const e=navigator.userAgent||navigator.vendor||window.opera||"",t=window.innerWidth<768;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)||t})()?"/business/dashboard/simple":"/business/dashboard/",iY=()=>{const{isLoading:t,loginError:n,handleLogin:r,handleGoogleSignIn:s,handleFacebookSignIn:o,handleMicrosoftSignIn:a,handleLinkedInSignIn:l}=(()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),o=(0,i.Zp)(),{googleSignIn:a}=(0,N.A)(),l=e=>{if(console.log("[DEBUG][useLoginLogic] Auth success, user:",e),"business"===(null===e||void 0===e?void 0:e.role)){const e=oY();o(e)}else if("customer"===(null===e||void 0===e?void 0:e.role))o("/customer/dashboard");else{console.warn("[DEBUG][useLoginLogic] User role unclear, defaulting to business dashboard. User:",e);const t=oY();o(t)}};return{isLoading:t,loginError:r,handleLogin:async e=>{n(!0),s(null);try{console.log("[DEBUG][useLoginLogic] Starting email/password login");const t=await(0,sV._h)(e.email,e.password);console.log("[DEBUG][useLoginLogic] Email/password login successful:",t),l(t)}catch(t){console.error("[DEBUG][useLoginLogic] Email/password login error:",t),s(t.message||"Login failed. Please try again.")}finally{n(!1)}},handleGoogleSignIn:async()=>{n(!0),s(null);try{console.log("[DEBUG][useLoginLogic] Starting direct Google sign-in");const e=await a();if(console.log("[DEBUG][useLoginLogic] Direct Google sign-in returned:",e),!e||!e.uid)throw console.error("[DEBUG][useLoginLogic] No valid user object returned from Google sign-in"),new Error("Failed to retrieve valid user data after Google sign-in");e.role||(console.warn("[DEBUG][useLoginLogic] User role is missing, defaulting to customer"),e.role="customer"),console.log("[DEBUG][useLoginLogic] Direct Google sign-in successful, user ID:",e.uid,"role:",e.role),l(e)}catch(e){console.error("[DEBUG][useLoginLogic] Direct Google sign-in error:",e),s(e.message||"Google sign-in failed. Please try again.")}finally{n(!1)}},handleFacebookSignIn:async()=>{n(!0),s(null);try{console.log("[DEBUG][useLoginLogic] Facebook sign-in not implemented yet"),s("Facebook sign-in is not available yet.")}catch(e){console.error("[DEBUG][useLoginLogic] Facebook sign-in error:",e),s(e.message||"Facebook sign-in failed. Please try again.")}finally{n(!1)}},handleMicrosoftSignIn:async()=>{n(!0),s(null);try{console.log("[DEBUG][useLoginLogic] Microsoft sign-in not implemented yet"),s("Microsoft sign-in is not available yet.")}catch(e){console.error("[DEBUG][useLoginLogic] Microsoft sign-in error:",e),s(e.message||"Microsoft sign-in failed. Please try again.")}finally{n(!1)}},handleLinkedInSignIn:async()=>{n(!0),s(null);try{console.log("[DEBUG][useLoginLogic] LinkedIn sign-in not implemented yet"),s("LinkedIn sign-in is not available yet.")}catch(e){console.error("[DEBUG][useLoginLogic] LinkedIn sign-in error:",e),s(e.message||"LinkedIn sign-in failed. Please try again.")}finally{n(!1)}}}})(),c=_G({initialValues:{email:"",password:""},validationSchema:ZK({email:PK().email("Invalid email address").required("Email is required"),password:PK().required("Password is required")}),onSubmit:r});return(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,k.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,k.jsx)(y,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]}),n&&(0,k.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,k.jsx)("p",{className:"text-red-600 text-sm",children:n})}),(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsx)(nY,{formik:c,isLoading:t,onSubmit:e=>{e.preventDefault(),console.log("[LoginPage] Form submitted"),c.handleSubmit(e)}}),(0,k.jsx)(sY,{formik:c}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsx)(rY,{onGoogleSignIn:s,onFacebookSignIn:o,onMicrosoftSignIn:a,onLinkedInSignIn:l,isLoading:t})})]})})]})},aY=e=>{let{accountType:t,setAccountType:n}=e;return(0,k.jsxs)("div",{className:"mt-4 flex justify-center space-x-4",children:[(0,k.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md transition-colors ".concat("customer"===t?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>n("customer"),"aria-pressed":"customer"===t,children:"Customer"}),(0,k.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md transition-colors ".concat("business"===t?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"),onClick:()=>n("business"),"aria-pressed":"business"===t,children:"Business"})]})},lY=e=>{let{formik:t,accountType:n,isLoading:r}=e;return(0,k.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:t.handleSubmit,noValidate:!0,children:[(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Full Name"}),(0,k.jsx)("input",(0,S.A)({id:"name",type:"text",autoComplete:"name",className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Full Name"},t.getFieldProps("name"))),t.touched.name&&t.errors.name&&(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.name})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,k.jsx)("input",(0,S.A)({id:"email",type:"email",autoComplete:"email",className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"},t.getFieldProps("email"))),t.touched.email&&t.errors.email&&(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.email})]}),"customer"===n&&(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"phone",className:"sr-only",children:"Phone Number"}),(0,k.jsx)("input",(0,S.A)({id:"phone",type:"tel",autoComplete:"tel",className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Phone Number (to link your existing coupons)"},t.getFieldProps("phone"))),t.touched.phone&&t.errors.phone&&(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.phone}),(0,k.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Enter the phone number where you received your coupon to link your account"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,k.jsx)("input",(0,S.A)({id:"password",type:"password",autoComplete:"new-password",className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"},t.getFieldProps("password"))),t.touched.password&&t.errors.password&&(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.password})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),(0,k.jsx)("input",(0,S.A)({id:"confirmPassword",type:"password",autoComplete:"new-password",className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password"},t.getFieldProps("confirmPassword"))),t.touched.confirmPassword&&t.errors.confirmPassword&&(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:t.errors.confirmPassword})]})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Sign up"})})]})},cY=e=>{let{onGoogleSignIn:t,onFacebookSignIn:n,onMicrosoftSignIn:r,onLinkedInSignIn:s,isLoading:o}=e;return(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,k.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,k.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,k.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,k.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,k.jsxs)("button",{type:"button",onClick:t,disabled:o,className:"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Sign up with Google",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,k.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})}),"Google"]}),(0,k.jsxs)("button",{type:"button",onClick:n,disabled:o,className:"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Sign up with Facebook",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,k.jsx)("path",{d:"M20.007,3H3.993C3.445,3,3,3.445,3,3.993v16.013C3,20.555,3.445,21,3.993,21h8.621v-6.971h-2.346v-2.717h2.346V9.31 c0-2.325,1.42-3.591,3.494-3.591c0.993,0,1.847,0.074,2.096,0.107v2.43l-1.438,0.001c-1.128,0-1.346,0.536-1.346,1.323v1.734h2.69 l-0.35,2.717h-2.34V21h4.587C20.555,21,21,20.555,21,20.007V3.993C21,3.445,20.555,3,20.007,3z"})}),"Facebook"]}),(0,k.jsxs)("button",{type:"button",onClick:r,disabled:o,className:"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Sign up with Microsoft",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,k.jsx)("path",{d:"M11.4,24H0V12.6h11.4V24z M24,24H12.6V12.6H24V24z M11.4,11.4H0V0h11.4V11.4z M24,11.4H12.6V0H24V11.4z"})}),"Microsoft"]}),(0,k.jsxs)("button",{type:"button",onClick:s,disabled:o,className:"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Sign up with LinkedIn",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:(0,k.jsx)("path",{d:"M19.7,3H4.3C3.582,3,3,3.582,3,4.3v15.4C3,20.418,3.582,21,4.3,21h15.4c0.718,0,1.3-0.582,1.3-1.3V4.3 C21,3.582,20.418,3,19.7,3z M8.339,18.338H5.667v-8.59h2.672V18.338z M7.004,8.574c-0.857,0-1.549-0.694-1.549-1.548 c0-0.855,0.691-1.548,1.549-1.548c0.854,0,1.547,0.694,1.547,1.548C8.551,7.881,7.858,8.574,7.004,8.574z M18.339,18.338h-2.669 v-4.177c0-0.996-0.017-2.278-1.387-2.278c-1.389,0-1.601,1.086-1.601,2.206v4.249h-2.667v-8.59h2.559v1.174h0.037 c0.356-0.675,1.227-1.387,2.526-1.387c2.703,0,3.203,1.779,3.203,4.092V18.338z"})}),"LinkedIn"]})]})]})},uY=ZK({name:PK().required("Name is required"),email:PK().email("Invalid email address").required("Email is required"),phone:PK().when(["accountType"],{is:e=>"customer"===e,then:e=>e.required("Phone number is required for customer accounts")}),password:PK().min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character").required("Password is required"),confirmPassword:PK().oneOf([gK("password")],"Passwords must match").required("Confirm password is required")}),dY=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"My Business";try{const n=await(0,sl.x7)((0,sl.H9)(rl.db,"users",e));if(!n.exists())throw new Error("User document does not exist");const r=n.data();if(r.businessId)return console.log("[BusinessRegistration] User already has business:",r.businessId),r.businessId;if(r.businesses&&r.businesses.length>0){const t=r.businesses[0];return await(0,sl.mZ)((0,sl.H9)(rl.db,"users",e),{businessId:t,currentBusinessId:t,updatedAt:(0,sl.O5)()}),console.log("[BusinessRegistration] Set existing business as current:",t),t}return console.log("[BusinessRegistration] No business found, creating new one"),await(async(e,t)=>{try{console.log("[BusinessRegistration] Creating business for user:",e);const n=(0,sl.H9)((0,sl.rJ)(rl.db,"businesses")),r=n.id,s={businessId:r,businessName:t.businessName||"My Business",industry:t.industry||"",address:t.address||"",phone:t.phone||"",website:t.website||"",description:t.description||"",createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)(),ownerId:e,active:!0};await(0,sl.BN)(n,s),console.log("[BusinessRegistration] Created business document:",r);const o=(0,sl.H9)(rl.db,"users",e);return await(0,sl.mZ)(o,{businessId:r,businesses:[r],currentBusinessId:r,updatedAt:(0,sl.O5)()}),console.log("[BusinessRegistration] Updated user with business reference"),(0,rl.$F)("business_created",{businessId:r,userId:e,hasIndustry:!!t.industry}),r}catch(n){throw console.error("[BusinessRegistration] Error creating business:",n),new Error("Failed to create business: ".concat((null===n||void 0===n?void 0:n.message)||"Unknown error"))}})(e,{businessName:r.displayName||t})}catch(n){throw console.error("[BusinessRegistration] Error ensuring business:",n),new Error("Failed to ensure business: ".concat((null===n||void 0===n?void 0:n.message)||"Unknown error"))}},hY=async e=>{const t=[];let n=null,r=null,s=!1;try{console.log("\ud83d\udd0d [Diagnostics] Checking registration for user:",e);const o=await(0,sl.x7)((0,sl.H9)(rl.db,"users",e));if(!o.exists())return t.push("User document does not exist in Firestore"),{success:!1,issues:t,userData:null,businessData:null};n=o.data(),console.log("\u2705 [Diagnostics] User document exists:",n),n.role?"business"!==n.role&&t.push("User has incorrect role: ".concat(n.role," (expected: business)")):t.push("User document has no role defined");const i=n.businessId||n.currentBusinessId;if(!i)return t.push("User has no businessId or currentBusinessId"),{success:!1,issues:t,userData:n,businessData:null};const a=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",i));return a.exists()?(r=a.data(),console.log("\u2705 [Diagnostics] Business document exists:",r),r.ownerId!==e&&t.push("Business has incorrect ownerId: ".concat(r.ownerId," (expected: ").concat(e,")")),!0!==r.active&&t.push("Business is not active"),s=0===t.length,(0,rl.$F)("business_registration_diagnostics",{success:s,issueCount:t.length,issues:t.join(", "),userId:e}),{success:s,issues:t,userData:n,businessData:r}):(t.push("Business document does not exist for ID: ".concat(i)),{success:!1,issues:t,userData:n,businessData:null})}catch(o){return console.error("\u274c [Diagnostics] Error diagnosing registration:",o),t.push("Error during diagnostics: ".concat((null===o||void 0===o?void 0:o.message)||"Unknown error")),{success:!1,issues:t,userData:n,businessData:r}}},mY=()=>{const t=(0,i.zy)(),n=new URLSearchParams(t.search),r=n.get("email")||"",s=n.get("type")||"",[o,a]=(0,e.useState)("business"===s?"business":"customer"),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!1),{googleSignIn:h,facebookSignIn:m,microsoftSignIn:p,linkedInSignIn:f}=(0,N.A)();(0,i.Zp)();(0,e.useEffect)((()=>{(0,rl.$F)("page_view",{page_title:"Enhanced Registration",page_location:window.location.href,has_email_param:!!r,account_type:o})}),[r,o]);const g=async e=>{try{const t=(0,sl.rJ)(rl.db,"leadCapture"),n=(0,sl.P)(t,(0,sl._M)("email","==",e)),r=await(0,sl.GG)(n);if(!r.empty){const t=(0,sl.H9)(rl.db,"leadCapture",r.docs[0].id);await(0,sl.mZ)(t,{completed:!0,completedAt:new Date}),console.log("[EnhancedRegisterPage] Updated lead record for:",e)}}catch(t){console.error("[EnhancedRegisterPage] Error updating lead record:",t)}},v=_G({initialValues:{name:"",email:r,phone:"",password:"",confirmPassword:"",accountType:o},validationSchema:uY,enableReinitialize:!0,onSubmit:async e=>{c(!0);try{console.log("[EnhancedRegisterPage] Starting direct registration for ".concat(e.email," as ").concat(o));const n=await(async(e,t,n,r)=>{try{console.log("[DirectRegister] Registering user ".concat(e," as ").concat(r));const o=(await(0,zg.eJ)(rl.j2,e,t)).user;if(!o||!o.uid)throw new Error("Failed to create user account");console.log("[DirectRegister] User created with ID: ".concat(o.uid));const i={uid:o.uid,email:o.email,displayName:n,role:r,createdAt:(0,sl.O5)(),updatedAt:(0,sl.O5)()};if(await(0,sl.BN)((0,sl.H9)(rl.db,"users",o.uid),i),console.log("[DirectRegister] User document created in Firestore"),"business"===r)try{const e=await dY(o.uid,n);console.log("[DirectRegister] Business created with ID: ".concat(e)),await(0,sl.mZ)((0,sl.H9)(rl.db,"users",o.uid),{businessId:e,currentBusinessId:e,businesses:[e]})}catch(s){console.error("[DirectRegister] Error creating business:",s)}return o}catch(o){throw console.error("[DirectRegister] Registration error:",o),o}})(e.email,e.password,e.name,o);if(!n||!n.uid)throw new Error("Registration failed: Invalid user credential");if(console.log("[EnhancedRegisterPage] User registered successfully with ID:",n.uid),e.email&&await g(e.email),"business"===o)try{console.log("[EnhancedRegisterPage] Running business diagnostics"),await hY(n.uid)}catch(t){console.error("[EnhancedRegisterPage] Diagnostics error:",t)}bj.success("Account created successfully!");const r="business"===o?"/business/dashboard":"/customer/dashboard";sessionStorage.setItem("auth_redirect",r),window.location.href=r}catch(n){console.error("[EnhancedRegisterPage] Registration error:",n),"auth/email-already-in-use"===n.code?bj.error("This email is already registered. Please login instead."):"auth/weak-password"===n.code?bj.error("Please use a stronger password (at least 6 characters)."):bj.error(n.message||"Failed to create account")}finally{c(!1)}}});(0,e.useEffect)((()=>{v.setFieldValue("accountType",o)}),[o]);const x=async(e,t)=>{c(!0);try{console.log("[EnhancedRegisterPage] Starting ".concat(t," sign-in as ").concat(o));if(!await e()||!rl.j2.currentUser)throw new Error("".concat(t," sign-in failed"));const s=rl.j2.currentUser.uid;console.log("[EnhancedRegisterPage] ".concat(t," sign-in successful:"),s);const i=(0,sl.H9)(rl.db,"users",s);if(await(0,sl.mZ)(i,{role:o,updatedAt:(0,sl.O5)()}),"business"===o)try{await dY(s,rl.j2.currentUser.displayName||"My Business")}catch(n){console.error("[EnhancedRegisterPage] Error setting up business:",n)}r&&await g(r),bj.success("Signed in successfully with ".concat(t,"!"));const a="business"===o?"/business/dashboard":"/customer/dashboard";sessionStorage.setItem("auth_redirect",a),window.location.href=a}catch(n){console.error("[EnhancedRegisterPage] ".concat(t," sign-in error:"),n),bj.error("Failed to sign in with ".concat(t))}finally{c(!1)}};return(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,k.jsx)(aY,{accountType:o,setAccountType:a})]}),(0,k.jsx)(lY,{formik:v,accountType:o,isLoading:l}),(0,k.jsx)(cY,{onGoogleSignIn:()=>x(h,"Google"),onFacebookSignIn:()=>x(m,"Facebook"),onMicrosoftSignIn:()=>x(p,"Microsoft"),onLinkedInSignIn:()=>x(f,"LinkedIn"),isLoading:l}),(0,k.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,k.jsx)(y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})]})})},pY=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),{resetPassword:o}=(0,N.A)(),i=_G({initialValues:{email:""},validationSchema:ZK({email:PK().email("Invalid email address").required("Email is required")}),onSubmit:async e=>{n(!0);try{await o(e.email),s(!0),bj.success("Password reset email sent!")}catch(t){bj.error(t.message||"Failed to send reset email")}finally{n(!1)}}});return(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),(0,k.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,k.jsx)(y,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your account"})]}),(0,k.jsx)("div",{className:"mt-8",children:r?(0,k.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Email sent"}),(0,k.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,k.jsx)("p",{children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."})}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsx)("div",{className:"-mx-2 -my-1.5 flex",children:(0,k.jsx)(y,{to:"/login",className:"bg-green-50 px-2 py-1.5 rounded-md text-sm font-medium text-green-800 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Return to login"})})})]})]})}):(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsxs)("form",{onSubmit:i.handleSubmit,className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"form-input",value:i.values.email,onChange:i.handleChange,onBlur:i.handleBlur}),i.touched.email&&i.errors.email?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:i.errors.email}):null]})]}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"submit",disabled:t,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[t?(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,"Send reset link"]})})]})})})]})},fY=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!0),[o,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(""),u=(0,i.Zp)(),d=(0,i.zy)(),h=new URLSearchParams(d.search).get("oobCode");(0,e.useEffect)((()=>{(async()=>{if(!h)return s(!1),void bj.error("Invalid or expired password reset link");try{const e=await(0,zg.RE)(rl.j2,h);c(e),a(!0),s(!1)}catch(e){s(!1),bj.error("Invalid or expired password reset link")}})()}),[h]);const m=_G({initialValues:{password:"",confirmPassword:""},validationSchema:ZK({password:PK().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:PK().oneOf([gK("password")],"Passwords must match").required("Confirm password is required")}),onSubmit:async e=>{if(h){n(!0);try{await(0,zg.R4)(rl.j2,h,e.password),bj.success("Password has been reset successfully!"),u("/login")}catch(t){bj.error(t.message||"Failed to reset password")}finally{n(!1)}}}});return r?(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsxs)("svg",{className:"animate-spin mx-auto h-8 w-8 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,k.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Verifying your reset link..."})]}):o?(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),(0,k.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["For account: ",l]}),(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsxs)("form",{onSubmit:m.handleSubmit,className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"form-input",value:m.values.password,onChange:m.handleChange,onBlur:m.handleBlur}),m.touched.password&&m.errors.password?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:m.errors.password}):null]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"form-input",value:m.values.confirmPassword,onChange:m.handleChange,onBlur:m.handleBlur}),m.touched.confirmPassword&&m.errors.confirmPassword?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:m.errors.confirmPassword}):null]})]}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"submit",disabled:t,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[t?(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,"Reset Password"]})})]})})})]}):(0,k.jsx)("div",{className:"text-center",children:(0,k.jsx)("div",{className:"rounded-md bg-red-50 p-4 mx-auto max-w-md",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Invalid reset link"}),(0,k.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,k.jsx)("p",{children:"The password reset link is invalid or has expired. Please request a new password reset link."})}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsx)(y,{to:"/forgot-password",className:"text-sm font-medium text-red-800 hover:text-red-700",children:"Request a new password reset link"})})]})]})})})},gY=()=>{const{logout:t}=(0,N.A)();return(0,e.useEffect)((()=>{(async()=>{try{await t()}catch(e){console.error("Error during logout:",e)}})()}),[t]),(0,k.jsx)(i.C5,{to:"/",replace:!0})},yY=()=>(0,k.jsx)("div",{className:"min-h-screen bg-white px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,k.jsx)("div",{className:"max-w-max mx-auto",children:(0,k.jsxs)("main",{className:"sm:flex",children:[(0,k.jsx)("p",{className:"text-4xl font-extrabold text-primary-600 sm:text-5xl",children:"404"}),(0,k.jsxs)("div",{className:"sm:ml-6",children:[(0,k.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,k.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl",children:"Page not found"}),(0,k.jsx)("p",{className:"mt-1 text-base text-gray-500",children:"Please check the URL in the address bar and try again."})]}),(0,k.jsxs)("div",{className:"mt-10 flex space-x-3 sm:border-l sm:border-transparent sm:pl-6",children:[(0,k.jsx)(y,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Go back home"}),(0,k.jsx)(y,{to:"/contact",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Contact support"})]})]})]})})}),vY=["title","titleId"];function xY(t,n){let{title:r,titleId:s}=t,o=E(t,vY);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const bY=e.forwardRef(xY),wY=()=>{const{user:e}=(0,N.A)();return(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:(0,k.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8 text-center",children:[(0,k.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100",children:(0,k.jsx)(bY,{className:"h-10 w-10 text-red-600"})}),(0,k.jsx)("h1",{className:"mt-5 text-2xl font-bold text-gray-900",children:"Access Denied"}),(0,k.jsx)("p",{className:"mt-3 text-gray-600",children:"You don't have permission to access this page. This area is restricted to administrators only."}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsx)(y,{to:e?"business"===e.role?"/business/dashboard":"customer"===e.role?"/customer/dashboard":"/":"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Go to Dashboard"})})]})})},NY=()=>(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,k.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,k.jsx)(y,{to:"/",children:(0,k.jsx)("img",{className:"mx-auto h-12 w-auto",src:"/logo-full.png",alt:"TYCA"})})}),(0,k.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,k.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:(0,k.jsx)(i.sv,{})})})]}),jY=e=>{let{variant:t="default",withTagline:n=!1,className:r=""}=e;return(0,k.jsxs)("div",{className:"flex flex-col items-start ".concat(r),children:[(0,k.jsx)(y,{to:"/",className:"flex items-center",children:(0,k.jsx)("img",{src:"/logo.png",alt:nV.qt.name,className:"".concat((()=>{switch(t){case"white":return"filter brightness-0 invert";case"small":return"h-8";default:return"h-10"}})())})}),n&&(0,k.jsx)("div",{className:"text-xs mt-1 ".concat("white"===t?"text-white":"text-secondary-500"),children:nV.qt.tagline})]})},kY=()=>{const{user:t,businessProfile:n,userBusinesses:r,switchBusiness:s,fetchUserBusinesses:o}=(0,N.A)(),[i,a]=(0,e.useState)(!1);(0,e.useEffect)((()=>{o()}),[o]);return!t||!t.businesses||t.businesses.length<=1?null:(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsxs)("button",{onClick:()=>a(!i),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:[(0,k.jsx)("span",{children:(null===n||void 0===n?void 0:n.businessName)||"Select Business"}),(0,k.jsx)("svg",{className:"ml-1 h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),i&&(0,k.jsx)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,k.jsx)("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:r.map((e=>(0,k.jsx)("button",{onClick:()=>(async e=>{try{await s(e),a(!1)}catch(t){console.error("Error switching business:",t)}})(e.businessId),className:"block w-full text-left px-4 py-2 text-sm ".concat(e.businessId===t.businessId?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-100"),role:"menuitem",children:e.businessName},e.businessId)))})})]})},CY=t=>{let{onViewChange:n,currentView:r="default"}=t;const{user:s,businessProfile:o}=(0,N.A)(),a=(0,i.zy)(),[l,c]=(0,e.useState)(!1),u=a.pathname.includes("/business/dashboard")||a.pathname.includes("/business/coupons")||a.pathname.includes("/business/results")||a.pathname.includes("/business/communications"),d=e=>{n&&n(e)};if(!s||!s.businesses||0===s.businesses.length)return null;const h=[{name:"Dashboard",path:"/business/dashboard",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Customers",path:"/business/customers",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{name:"Coupons",path:"/business/coupons",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},{name:"Loyalty",path:"/business/loyalty",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{name:"Communications",path:"/business/communications",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{name:"Analytics",path:"/business/analytics",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{name:"Settings",path:"/business/settings",icon:(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];return(0,k.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"flex justify-between h-16",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,k.jsx)(jY,{variant:"small"})}),(0,k.jsx)("div",{className:"hidden md:ml-6 md:flex",children:(0,k.jsx)(kY,{})})]}),(0,k.jsx)("div",{className:"hidden md:flex md:items-center md:space-x-1",children:o&&h.map((e=>(0,k.jsxs)(v,{to:e.path,className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm font-medium flex items-center transition-colors duration-150 ".concat(t?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600")},children:[(0,k.jsx)("span",{className:"mr-1.5",children:e.icon}),e.name]},e.name)))}),(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[u&&n&&(0,k.jsx)("div",{className:"hidden md:block",children:(0,k.jsx)(C,{onChange:d,initialView:r})}),(0,k.jsx)("div",{className:"relative",children:(0,k.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:null!==s&&void 0!==s&&s.displayName?(0,k.jsx)("span",{className:"font-medium text-sm text-primary-700",children:s.displayName.charAt(0).toUpperCase()}):(0,k.jsx)("span",{className:"font-medium text-sm text-primary-700",children:"U"})})}),(0,k.jsx)("a",{href:"/logout",className:"hidden md:block text-gray-700 hover:text-gray-900 text-sm font-medium",children:"Logout"}),(0,k.jsxs)("button",{type:"button",className:"md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>c(!l),children:[(0,k.jsx)("span",{className:"sr-only",children:"Open main menu"}),l?(0,k.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,k.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})]})]})}),l&&(0,k.jsx)("div",{className:"md:hidden",children:(0,k.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,k.jsx)("div",{className:"px-3 py-2",children:(0,k.jsx)(kY,{})}),o&&h.map((e=>(0,k.jsxs)(v,{to:e.path,className:e=>{let{isActive:t}=e;return"block px-3 py-2 rounded-md text-base font-medium flex items-center ".concat(t?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600")},onClick:()=>c(!1),children:[(0,k.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.name))),u&&n&&(0,k.jsx)("div",{className:"px-3 py-2",children:(0,k.jsx)(C,{onChange:d,initialView:r})}),(0,k.jsx)("a",{href:"/logout",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50",onClick:()=>c(!1),children:"Logout"})]})})]})},SY=L("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),AY=L("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function EY(e){let{className:t}=e;return(0,k.jsx)("div",{className:Po("flex items-center",t),children:(0,k.jsx)("img",{src:"/logo.png",alt:nV.qt.name+" logo",className:"h-10 w-auto"})})}const _Y=[{name:"Features",href:"/features"},{name:"Testimonials",href:"/testimonials"},{name:"Pricing",href:"/pricing"},{name:"About",href:"/about"}],IY=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,k.jsx)("header",{children:(0,k.jsx)("nav",{"data-state":t&&"active",className:"fixed group z-20 w-full px-2",children:(0,k.jsx)("div",{className:Po("mx-auto mt-2 max-w-6xl px-6 transition-all duration-300 lg:px-12",r&&"bg-background/50 max-w-4xl rounded-2xl border backdrop-blur-lg lg:px-5"),children:(0,k.jsxs)("div",{className:"relative flex flex-wrap items-center justify-between gap-6 py-3 lg:gap-0 lg:py-4",children:[(0,k.jsx)(TY,{setMenuState:n,menuState:t}),(0,k.jsx)(PY,{}),(0,k.jsx)(RY,{menuState:t,isScrolled:r})]})})})})};function TY(e){let{setMenuState:t,menuState:n}=e;return(0,k.jsxs)("div",{className:"flex w-full justify-between lg:w-auto",children:[(0,k.jsx)(y,{to:"/","aria-label":"home",className:"flex items-center space-x-2",children:(0,k.jsx)(EY,{})}),(0,k.jsxs)("button",{onClick:()=>t(!n),"aria-label":n?"Close Menu":"Open Menu",className:"relative z-20 -m-2.5 -mr-4 block cursor-pointer p-2.5 lg:hidden",children:[(0,k.jsx)(SY,{className:"group-data-[state=active]:rotate-180 group-data-[state=active]:scale-0 group-data-[state=active]:opacity-0 m-auto size-6 duration-200"}),(0,k.jsx)(AY,{className:"group-data-[state=active]:rotate-0 group-data-[state=active]:scale-100 group-data-[state=active]:opacity-100 absolute inset-0 m-auto size-6 -rotate-180 scale-0 opacity-0 duration-200"})]})]})}function PY(){return(0,k.jsx)("div",{className:"absolute inset-0 m-auto hidden size-fit lg:block",children:(0,k.jsx)("ul",{className:"flex gap-8 text-sm",children:_Y.map(((e,t)=>(0,k.jsx)("li",{children:(0,k.jsx)(y,{to:e.href,className:"text-muted-foreground hover:text-accent-foreground block duration-150",children:(0,k.jsx)("span",{children:e.name})})},t)))})})}function RY(e){let{menuState:t,isScrolled:n}=e;return(0,k.jsxs)("div",{className:"bg-background group-data-[state=active]:block lg:group-data-[state=active]:flex mb-6 hidden w-full flex-wrap items-center justify-end space-y-8 rounded-3xl border p-6 shadow-2xl shadow-zinc-300/20 md:flex-nowrap lg:m-0 lg:flex lg:w-fit lg:gap-6 lg:space-y-0 lg:border-transparent lg:bg-transparent lg:p-0 lg:shadow-none dark:shadow-none dark:lg:bg-transparent",children:[(0,k.jsx)(DY,{}),(0,k.jsx)("div",{className:"flex items-center gap-4",children:(0,k.jsx)(MY,{isScrolled:n})})]})}function DY(){return(0,k.jsxs)("div",{className:"lg:hidden",children:[(0,k.jsx)("ul",{className:"space-y-6 text-base",children:_Y.map(((e,t)=>(0,k.jsx)("li",{children:(0,k.jsx)(y,{to:e.href,className:"text-muted-foreground hover:text-accent-foreground block duration-150",children:(0,k.jsx)("span",{children:e.name})})},t)))}),(0,k.jsx)("div",{className:"mt-6 w-full",children:(0,k.jsx)("div",{id:"currency-region-selector",children:(0,k.jsx)(Ja,{})})})]})}function MY(e){let{isScrolled:t}=e;return(0,k.jsxs)("div",{className:"flex w-full flex-col space-y-3 sm:flex-row sm:gap-3 sm:space-y-0 md:w-fit",children:[(0,k.jsx)($a,{asChild:!0,variant:"outline",size:"sm",className:Po(t&&"lg:hidden"),children:(0,k.jsx)(y,{to:"/login",children:(0,k.jsx)("span",{children:"Login"})})}),(0,k.jsx)($a,{asChild:!0,size:"sm",variant:"default",className:Po("bg-primary-700 hover:bg-primary-600 text-white",t&&"lg:hidden"),children:(0,k.jsx)(y,{to:"/register?type=business",children:(0,k.jsx)("span",{children:"Sign Up"})})}),(0,k.jsx)($a,{asChild:!0,size:"sm",variant:"default",className:Po("bg-primary-700 hover:bg-primary-600 text-white",t?"lg:inline-flex":"hidden"),children:(0,k.jsx)(y,{to:"/register?type=business",children:(0,k.jsx)("span",{children:"Get Started"})})})]})}const LY=()=>{const[t,n]=(0,e.useState)("default"),{user:r}=(0,N.A)();return(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r?(0,k.jsx)(CY,{onViewChange:e=>{n(e)},currentView:t}):(0,k.jsx)(IY,{}),(0,k.jsx)("main",{className:"flex-1",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,k.jsx)(i.sv,{context:{view:t}})})}),(0,k.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"py-4 text-center text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," TYCA. All rights reserved."]})})})]})},OY=["title","titleId"];function FY(t,n){let{title:r,titleId:s}=t,o=E(t,OY);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const BY=e.forwardRef(FY),UY=["title","titleId"];function zY(t,n){let{title:r,titleId:s}=t,o=E(t,UY);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const VY=e.forwardRef(zY),qY=["title","titleId"];function WY(t,n){let{title:r,titleId:s}=t,o=E(t,qY);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const HY=e.forwardRef(WY),GY=["title","titleId"];function KY(t,n){let{title:r,titleId:s}=t,o=E(t,GY);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const YY=e.forwardRef(KY),QY=t=>{let{children:n}=t;const{user:r,logout:s}=(0,N.A)(),o=(0,i.Zp)(),a=(0,i.zy)(),[l,c]=(0,e.useState)(!1),u=async()=>{await s(),o("/login")},d=[{name:"Dashboard",path:"/admin/dashboard",icon:(0,k.jsx)(hT,{className:"h-6 w-6"})},{name:"Homepage Management",path:"/admin/homepage",icon:(0,k.jsx)(BY,{className:"h-6 w-6"}),subItems:[{name:"Timeline",path:"/admin/homepage/timeline",icon:(0,k.jsx)(rT,{className:"h-5 w-5"})}]},{name:"User Management",path:"/admin/users",icon:(0,k.jsx)(VY,{className:"h-6 w-6"})},{name:"Role Management",path:"/admin/roles",icon:(0,k.jsx)(ST,{className:"h-6 w-6"})},{name:"Settings",path:"/admin/settings",icon:(0,k.jsx)(HY,{className:"h-6 w-6"})}],h=e=>a.pathname===e||"/admin/dashboard"!==e&&a.pathname.startsWith(e);return(0,k.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,k.jsxs)("nav",{className:"bg-white shadow-sm",children:[(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"flex justify-between h-16",children:[(0,k.jsx)("div",{className:"flex",children:(0,k.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,k.jsx)(y,{to:"/admin/dashboard",className:"text-xl font-bold text-primary",children:"TYCA Admin"})})}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"hidden md:ml-4 md:flex-shrink-0 md:flex md:items-center",children:(0,k.jsx)("div",{className:"ml-3 relative",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"mr-3 text-sm text-gray-700",children:null===r||void 0===r?void 0:r.email}),(0,k.jsx)("button",{onClick:u,className:"px-3 py-1 rounded-md text-sm font-medium text-white bg-primary hover:bg-primary/80",children:"Logout"})]})})}),(0,k.jsx)("div",{className:"-mr-2 flex items-center md:hidden",children:(0,k.jsxs)("button",{onClick:()=>c(!l),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary",children:[(0,k.jsx)("span",{className:"sr-only",children:"Open main menu"}),l?(0,k.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,k.jsx)("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})]})}),l&&(0,k.jsxs)("div",{className:"md:hidden",children:[(0,k.jsx)("div",{className:"pt-2 pb-3 space-y-1",children:d.map((t=>(0,k.jsxs)(e.Fragment,{children:[(0,k.jsx)(y,{to:t.path,className:"block pl-3 pr-4 py-2 border-l-4 ".concat(h(t.path)?"border-primary text-primary bg-primary/5":"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300"," text-base font-medium"),onClick:()=>c(!1),children:t.name}),t.subItems&&h(t.path)&&(0,k.jsx)("div",{className:"pl-6 space-y-1",children:t.subItems.map((e=>(0,k.jsx)(y,{to:e.path,className:"block pl-3 pr-4 py-2 border-l-4 ".concat(a.pathname===e.path?"border-primary text-primary bg-primary/5":"border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300"," text-sm font-medium"),onClick:()=>c(!1),children:e.name},e.name)))})]},t.name)))}),(0,k.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[(0,k.jsxs)("div",{className:"flex items-center px-4",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)(YY,{className:"h-10 w-10 text-gray-400"})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("div",{className:"text-base font-medium text-gray-800",children:(null===r||void 0===r?void 0:r.displayName)||"Admin User"}),(0,k.jsx)("div",{className:"text-sm font-medium text-gray-500",children:null===r||void 0===r?void 0:r.email})]})]}),(0,k.jsx)("div",{className:"mt-3 space-y-1",children:(0,k.jsx)("button",{onClick:u,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",children:"Logout"})})]})]})]}),(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,k.jsx)("div",{className:"flex flex-col w-64 border-r border-gray-200 pt-5 pb-4 bg-white",children:(0,k.jsx)("div",{className:"flex-1 flex flex-col overflow-y-auto",children:(0,k.jsx)("nav",{className:"flex-1 px-2 bg-white space-y-1",children:d.map((t=>(0,k.jsxs)(e.Fragment,{children:[(0,k.jsxs)(y,{to:t.path,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(h(t.path)?"bg-primary/10 text-primary":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,k.jsx)("div",{className:"mr-3 ".concat(h(t.path)?"text-primary":"text-gray-400 group-hover:text-gray-500"),children:t.icon}),t.name]}),t.subItems&&(0,k.jsx)("div",{className:"ml-6 space-y-1 ".concat(!h(t.path)&&"hidden"),children:t.subItems.map((e=>(0,k.jsxs)(y,{to:e.path,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(a.pathname===e.path?"bg-primary/5 text-primary":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"),children:[(0,k.jsx)("div",{className:"mr-3 ".concat(a.pathname===e.path?"text-primary":"text-gray-400 group-hover:text-gray-500"),children:e.icon}),e.name]},e.name)))})]},t.name)))})})})}),(0,k.jsx)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:(0,k.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none p-6",children:n||(0,k.jsx)(i.sv,{})})})]})]})},$Y=["title","titleId"];function JY(t,n){let{title:r,titleId:s}=t,o=E(t,$Y);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const XY=e.forwardRef(JY),ZY=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(""),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(0);(0,e.useEffect)((()=>{(async()=>{s(!0);try{const e=(0,sl.rJ)(rl.db,"users"),t=(0,sl.P)(e),r=await(0,sl.GG)(t),s=[];r.forEach((e=>{s.push((0,S.A)({id:e.id},e.data()))})),n(s)}catch(zZ){console.error("Error fetching users:",zZ),l("Failed to load users. Please try again later.")}finally{s(!1)}})()}),[d]);return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"py-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Admin Dashboard"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage admin users and system settings"})]}),(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Add New Admin"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Grant admin privileges to a user by email"})]}),(0,k.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o){s(!0),l(""),u("");try{const e=await(async e=>{try{const t=(0,sl.rJ)(rl.db,"users"),n=(0,sl.P)(t,(0,sl._M)("email","==",e)),r=await(0,sl.GG)(n);if(r.empty)return console.error("No user found with email: ".concat(e)),!1;const s=r.docs[0];return await(0,sl.mZ)(s.ref,{role:"admin"}),console.log("User ".concat(e," has been set as admin")),!0}catch(a){return console.error("Error setting user as admin:",a),!1}})(o);e?(u("User ".concat(o," has been successfully set as admin")),i(""),h((e=>e+1))):l("User ".concat(o," not found"))}catch(zZ){console.error("Error setting admin role:",zZ),l("Failed to set admin role. Please try again later.")}finally{s(!1)}}else l("Please enter an email address")},className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),(0,k.jsx)("div",{className:"mt-1 flex rounded-md shadow-sm",children:(0,k.jsx)("input",{type:"email",name:"email",id:"email",value:o,onChange:e=>i(e.target.value),className:"focus:ring-primary focus:border-primary flex-1 block w-full rounded-md sm:text-sm border-gray-300",placeholder:"user@example.com"})})]}),a&&(0,k.jsx)("div",{className:"text-sm text-red-600",children:a}),c&&(0,k.jsx)("div",{className:"text-sm text-green-600",children:c}),(0,k.jsx)("div",{children:(0,k.jsxs)("button",{type:"submit",disabled:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:[(0,k.jsx)(ST,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),r?"Processing...":"Make Admin"]})})]})})]}),(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Admin Users"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"List of all users with admin privileges"})]}),(0,k.jsx)("div",{className:"border-t border-gray-200",children:r?(0,k.jsx)("div",{className:"px-4 py-5 sm:p-6 flex justify-center",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"})}):(0,k.jsxs)("ul",{className:"divide-y divide-gray-200",children:[t.filter((e=>"admin"===e.role)).map((e=>(0,k.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.displayName||"No Name"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,k.jsxs)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Are you sure you want to remove admin privileges from ".concat(t,"?"))){s(!0);try{const n=(0,sl.H9)(rl.db,"users",e);await(0,sl.mZ)(n,{role:"business"}),u("Admin privileges removed from ".concat(t)),h((e=>e+1))}catch(zZ){console.error("Error removing admin role:",zZ),l("Failed to remove admin role. Please try again later.")}finally{s(!1)}}})(e.id,e.email),className:"inline-flex items-center px-3 py-1 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,k.jsx)(XY,{className:"-ml-1 mr-1 h-4 w-4","aria-hidden":"true"}),"Remove Admin"]})]})},e.id))),0===t.filter((e=>"admin"===e.role)).length&&(0,k.jsx)("li",{className:"px-4 py-5 sm:px-6 text-center text-gray-500",children:"No admin users found"})]})})]}),(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Homepage Management"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage website content, pricing, and more"})]}),(0,k.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,k.jsxs)(y,{to:"/admin/homepage",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[(0,k.jsx)(gT,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Manage Homepage Content"]})})]})]})},eQ=["title","titleId"];function tQ(t,n){let{title:r,titleId:s}=t,o=E(t,eQ);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nQ=e.forwardRef(tQ),rQ=e=>{let{title:t,description:n,icon:r,to:s,disabled:o}=e;return(0,k.jsx)(y,{to:s,className:"block bg-white overflow-hidden shadow rounded-lg transition-all ".concat(o?"cursor-not-allowed opacity-60":"hover:shadow-md hover:bg-gray-50"),onClick:e=>o&&e.preventDefault(),children:(0,k.jsx)("div",{className:"p-6",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0 bg-primary/10 rounded-md p-3",children:r}),(0,k.jsxs)("div",{className:"ml-5",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]})})})},sQ=()=>{const e=[{title:"Timeline Management",description:"Manage the company timeline displayed on the About page",icon:(0,k.jsx)(rT,{className:"h-6 w-6 text-primary"}),to:"/admin/homepage/timeline"},{title:"Pricing Management",description:"Configure pricing plans and currency options",icon:(0,k.jsx)(nQ,{className:"h-6 w-6 text-primary"}),to:"/admin/homepage/pricing"},{title:"Content Blocks",description:"Manage content blocks throughout the site (Coming soon)",icon:(0,k.jsx)(gT,{className:"h-6 w-6 text-gray-400"}),to:"#",disabled:!0}];return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"py-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Homepage Management"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage content that appears on the public-facing pages of the website"})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(((e,t)=>(0,k.jsxs)("div",{children:[(0,k.jsx)(rQ,{title:e.title,description:e.description,icon:e.icon,to:e.to,disabled:e.disabled}),e.disabled&&(0,k.jsx)("div",{className:"mt-1 text-xs text-center text-gray-500",children:"Coming soon"})]},t)))})]})};const oQ=new class{constructor(){this.collectionName="timeline"}async getTimelineEntries(){try{const e=(0,sl.P)((0,sl.rJ)(rl.db,this.collectionName),(0,sl.My)("year","desc"));return(await(0,sl.GG)(e)).docs.map((e=>(0,S.A)({id:e.id},e.data())))}catch(e){return console.error("Error fetching timeline entries:",e),[]}}async addTimelineEntry(e){try{const t=(0,S.A)((0,S.A)({},e),{},{createdAt:sl.Dc.now()});return(await(0,sl.gS)((0,sl.rJ)(rl.db,this.collectionName),t)).id}catch(t){return console.error("Error adding timeline entry:",t),null}}async updateTimelineEntry(e,t){try{return await(0,sl.mZ)((0,sl.H9)(rl.db,this.collectionName,e),t),!0}catch(n){return console.error("Error updating timeline entry:",n),!1}}async deleteTimelineEntry(e){try{return await(0,sl.kd)((0,sl.H9)(rl.db,this.collectionName,e)),!0}catch(t){return console.error("Error deleting timeline entry:",t),!1}}},iQ=["title","titleId"];function aQ(t,n){let{title:r,titleId:s}=t,o=E(t,iQ);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const lQ=e.forwardRef(aQ),cQ=["title","titleId"];function uQ(t,n){let{title:r,titleId:s}=t,o=E(t,cQ);return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},o),r?e.createElement("title",{id:s},r):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const dQ=e.forwardRef(uQ),hQ=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(!1),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)({year:(new Date).getFullYear().toString(),title:"",description:""}),[m,p]=(0,e.useState)(""),[f,g]=(0,e.useState)(""),[y,v]=(0,e.useState)(!1);(0,e.useEffect)((()=>{x()}),[]);const x=async()=>{s(!0);try{const e=await oQ.getTimelineEntries();n(e)}catch(zZ){console.error("Error fetching timeline entries:",zZ),p("Failed to load timeline entries")}finally{s(!1)}},b=e=>{const{name:t,value:n}=e.target;h((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))};return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"py-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Timeline Management"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage timeline entries that appear on the About page"})]}),(0,k.jsx)("div",{className:"mb-6",children:(0,k.jsxs)("button",{onClick:()=>{i(!0),l(!1),u(null),h({year:(new Date).getFullYear().toString(),title:"",description:""}),p(""),g("")},disabled:o||a,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:[(0,k.jsx)(lQ,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Add Timeline Entry"]})}),(o||a)&&(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[(0,k.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:a?"Edit Timeline Entry":"Add Timeline Entry"})}),(0,k.jsx)("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.year&&d.title){v(!0),p(""),g("");try{a&&null!==c&&void 0!==c&&c.id?(await oQ.updateTimelineEntry(c.id,d),g("Timeline entry updated successfully")):(await oQ.addTimelineEntry(d),g("Timeline entry added successfully")),i(!1),l(!1),u(null),x()}catch(zZ){console.error("Error saving timeline entry:",zZ),p("Failed to save timeline entry")}finally{v(!1)}}else p("Year and title are required")},className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700",children:["Year ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"text",id:"year",name:"year",value:d.year,onChange:b,className:"mt-1 focus:ring-primary focus:border-primary block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"e.g., 2025",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Title ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"text",id:"title",name:"title",value:d.title,onChange:b,className:"mt-1 focus:ring-primary focus:border-primary block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"e.g., Built and Launched TYCA",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,k.jsx)("textarea",{id:"description",name:"description",rows:3,value:d.description||"",onChange:b,className:"mt-1 focus:ring-primary focus:border-primary block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Add more details about this milestone..."})]}),m&&(0,k.jsx)("div",{className:"text-sm text-red-600",children:m}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsx)("button",{type:"submit",disabled:y,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:y?"Saving...":a?"Update Entry":"Add Entry"}),(0,k.jsx)("button",{type:"button",onClick:()=>{i(!1),l(!1),u(null),p("")},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"})]})]})})]}),f&&(0,k.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm text-green-700",children:f})})]})}),(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Timeline Entries"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All timeline entries sorted by year (newest first)"})]}),(0,k.jsx)("div",{className:"border-t border-gray-200",children:r?(0,k.jsx)("div",{className:"px-4 py-5 sm:p-6 flex justify-center",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"})}):(0,k.jsx)("ul",{className:"divide-y divide-gray-200",children:0===t.length?(0,k.jsx)("li",{className:"px-4 py-5 sm:px-6 text-center text-gray-500",children:"No timeline entries found. Add your first entry to get started."}):t.map((e=>(0,k.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:e.year}),(0,k.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title})]}),e.description&&(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:e.description})]}),(0,k.jsxs)("div",{className:"ml-5 flex-shrink-0 flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>(e=>{l(!0),i(!1),u(e),h({year:e.year,title:e.title,description:e.description||""}),p(""),g("")})(e),className:"p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:(0,k.jsx)(dQ,{className:"h-5 w-5","aria-hidden":"true"})}),(0,k.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this timeline entry?")){s(!0);try{await oQ.deleteTimelineEntry(e),g("Timeline entry deleted successfully"),x()}catch(zZ){console.error("Error deleting timeline entry:",zZ),p("Failed to delete timeline entry")}finally{s(!1)}}})(e.id),className:"p-1 rounded-full text-gray-400 hover:text-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,k.jsx)(XY,{className:"h-5 w-5","aria-hidden":"true"})})]})]})},e.id)))})})]})]})},mQ=t=>{let{onSuccess:n,onError:r,onMigrationComplete:s}=t;const[o,i]=(0,e.useState)(!1),[a,l]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5 bg-gray-50",children:[(0,k.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"Collection Management Tools"}),(0,k.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,k.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to migrate pricing plans from the old collection to the new pricing_plans collection?")){l(!0);try{const e=(0,sl.rJ)(rl.db,"pricingPlans"),t=await(0,sl.GG)(e);if(t.empty)return n("No documents found in old pricingPlans collection."),void l(!1);const r=(0,sl.rJ)(rl.db,"pricing_plans");for(const n of t.docs){const e=n.data();void 0===e.active&&(e.active=!0),await(0,sl.gS)(r,(0,S.A)((0,S.A)({},e),{},{createdAt:new Date,updatedAt:new Date}))}n("Successfully migrated pricing plans to the new collection."),s()}catch(zZ){console.error("Error migrating pricing plans:",zZ),r("Error migrating plans: ".concat(zZ instanceof Error?zZ.message:String(zZ)))}finally{l(!1)}}},disabled:a,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:a?"Migrating...":"Migrate from Old Collection"}),(0,k.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete all documents in the old pricingPlans collection?")){i(!0);try{const e=(0,sl.rJ)(rl.db,"pricingPlans"),t=await(0,sl.GG)(e);if(t.empty)return n("No documents found in old pricingPlans collection. Nothing to delete."),void i(!1);const r=t.docs.map((e=>(0,sl.kd)(e.ref)));await Promise.all(r),n("Successfully deleted all documents in the old pricingPlans collection.")}catch(zZ){console.error("Error deleting old pricing plans:",zZ),r("Error deleting collection: ".concat(zZ instanceof Error?zZ.message:String(zZ)))}finally{i(!1)}}},disabled:o,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:o?"Deleting...":"Delete Old Collection"})]}),(0,k.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Use these tools to migrate pricing plans from the old 'pricingPlans' collection to the new 'pricing_plans' collection."})]})},pQ=t=>{var n;let{plan:r,currencies:s,onSave:o,onCancel:i,onError:a,onSuccess:l}=t;const[c,u]=(0,e.useState)(r),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)({}),[f,g]=(0,e.useState)(r.price.toString()),[y,v]=(0,e.useState)(r.currency);(0,e.useEffect)((()=>{var e;const t={};s.forEach((e=>{e.code!==y&&(t[e.code]="")})),null===(e=c.currencyPrices)||void 0===e||e.forEach((e=>{t[e.currencyCode]=e.price.toString()})),p(t)}),[c.id,s,y]);const x={};s.forEach((e=>{if(e.code===y)return;const t=e.region||"Other";x[t]||(x[t]=[]),x[t].push(e)}));const b=[...s].sort(((e,t)=>e.code.localeCompare(t.code)));return(0,k.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5",children:[(0,k.jsxs)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:["Edit Pricing for ",c.name]}),(0,k.jsx)("div",{className:"mb-6",children:(0,k.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,k.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,k.jsx)("label",{htmlFor:"baseCurrency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Currency"}),(0,k.jsx)("select",{id:"baseCurrency",value:y,onChange:e=>{const t=e.target.value;v(t),p((e=>{const n=(0,S.A)({},e);return void 0!==n[t]&&delete n[t],y!==t&&(n[y]=f),n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",disabled:d,children:b.map((e=>(0,k.jsxs)("option",{value:e.code,children:[e.code," - ",e.name," (",e.symbol,")"]},e.code)))})]}),(0,k.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,k.jsxs)("label",{htmlFor:"basePrice",className:"block text-sm font-medium text-gray-700 mb-1",children:["Base Price (",y,")"]}),(0,k.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,k.jsx)("input",{type:"number",id:"basePrice",value:f,onChange:e=>{g(e.target.value)},className:"block w-full rounded-md border-gray-300 pl-7 pr-12 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"0.00",step:"0.01",min:"0",disabled:d}),(0,k.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,k.jsx)("span",{className:"text-gray-500 sm:text-sm pr-4",children:(null===(n=s.find((e=>e.code===y)))||void 0===n?void 0:n.symbol)||y})})]})]})]})}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-2",children:"Additional Currency Prices"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Set prices for additional currencies. Leave blank to exclude a currency."}),Object.entries(x).length>0?Object.entries(x).map((e=>{let[t,n]=e;return(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:t}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e=>(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("div",{className:"w-16 flex-shrink-0",children:(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.code})}),(0,k.jsx)("div",{className:"flex-grow",children:(0,k.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,k.jsx)("input",{type:"number",value:m[e.code]||"",onChange:t=>{return n=e.code,r=t.target.value,void p((e=>(0,S.A)((0,S.A)({},e),{},{[n]:r})));var n,r},className:"block w-full rounded-md border-gray-300 pl-7 pr-12 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"0.00",step:"0.01",min:"0",disabled:d}),(0,k.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center",children:(0,k.jsx)("span",{className:"text-gray-500 sm:text-sm pr-4",children:e.symbol})})]})})]},e.code)))})]},t)})):(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"No additional currencies available."})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,k.jsx)("button",{type:"button",onClick:i,className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:d,children:"Cancel"}),(0,k.jsx)("button",{type:"button",onClick:async()=>{try{h(!0);const e=parseFloat(f);if(isNaN(e)||e<0)return a("Base price must be a valid number"),void h(!1);const t=Object.entries(m).filter((e=>{let[t,n]=e;return""!==n&&t!==y})).map((e=>{let[t,n]=e;return{currencyCode:t,price:parseFloat(n)}})),n=(0,S.A)((0,S.A)({},c),{},{price:e,currency:y,currencyPrices:t}),r=(0,sl.H9)(rl.db,"pricing_plans",c.id);await(0,sl.mZ)(r,{price:e,currency:y,currencyPrices:t,updatedAt:new Date}),l('Pricing for "'.concat(c.name,'" has been updated successfully')),o(n)}catch(zZ){console.error("Error saving plan prices:",zZ),a("Failed to save pricing information")}finally{h(!1)}},className:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:d,children:d?"Saving...":"Save Pricing"})]})]})},fQ=e=>{let{plans:t,currencies:n,onEditPlan:r}=e;const s=[...t].sort(((e,t)=>(void 0!==e.displayOrder?e.displayOrder:999)-(void 0!==t.displayOrder?t.displayOrder:999)));return 0===s.length?(0,k.jsx)("div",{className:"border-t border-gray-200",children:(0,k.jsx)("div",{className:"px-4 py-5 sm:px-6 text-center text-gray-500",children:"No pricing plans found"})}):(0,k.jsx)("div",{className:"border-t border-gray-200",children:(0,k.jsx)("ul",{className:"divide-y divide-gray-200",children:s.map((e=>(0,k.jsx)("li",{className:"px-4 py-5 sm:px-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),void 0!==e.displayOrder&&(0,k.jsxs)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["Order: ",e.displayOrder]}),e.popularPlan&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Popular"}),!1===e.active&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})]}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),(0,k.jsxs)("p",{className:"text-base font-medium mt-2",children:[e.price," ",e.currency," per ",e.billingCycle]}),e.currencyPrices&&e.currencyPrices.length>0&&(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Currency-specific prices:"}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:e.currencyPrices.map((e=>{const t=n.find((t=>t.code===e.currencyCode));return(0,k.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[null===t||void 0===t?void 0:t.symbol,e.price," ",e.currencyCode]},e.currencyCode)}))})]})]}),(0,k.jsx)("button",{onClick:()=>r(e),className:"inline-flex items-center px-3 py-1.5 border border-transparent rounded-md text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Edit Prices"})]})},e.id)))})})},gQ=e=>{let{notification:t}=e;const{error:n,success:r}=t;return(0,k.jsxs)(k.Fragment,{children:[n&&(0,k.jsx)("div",{className:"border-t border-gray-200 px-4 py-3 bg-red-50 text-red-700",children:n}),r&&(0,k.jsx)("div",{className:"border-t border-gray-200 px-4 py-3 bg-green-50 text-green-700",children:r})]})},yQ=t=>{let{currencies:n,existingPlansCount:r,onSuccess:s,onError:o,onPlanCreated:i,onCancel:a}=t;const[l,c]=(0,e.useState)(function(e){return{name:"",description:"",price:0,currency:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",billingCycle:"month",popularPlan:!1,active:!0,displayOrder:e,features:[],currencyPrices:[]}}(r)),[u,d]=(0,e.useState)(!1),[h,m]=(0,e.useState)(""),[p,f]=(0,e.useState)(!0),[g,y]=(0,e.useState)(!1),v=(e,t)=>{c((n=>(0,S.A)((0,S.A)({},n),{},{[e]:t})))},x=(e,t)=>{const n=""===t?0:parseFloat(t);v(e,n)};return(0,k.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Create New Pricing Plan"}),(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plan Name*"}),(0,k.jsx)("input",{type:"text",value:l.name,onChange:e=>v("name",e.target.value),placeholder:"e.g., Starter, Professional",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,k.jsx)("input",{type:"text",value:l.description||"",onChange:e=>v("description",e.target.value),placeholder:"e.g., Perfect for small businesses",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price"}),(0,k.jsx)("input",{type:"number",min:"0",step:"0.01",value:l.price,onChange:e=>x("price",e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Currency"}),(0,k.jsx)("select",{value:l.currency,onChange:e=>v("currency",e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",children:n.map((e=>(0,k.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code)))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Cycle"}),(0,k.jsxs)("select",{value:l.billingCycle,onChange:e=>v("billingCycle",e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary",children:[(0,k.jsx)("option",{value:"month",children:"Monthly"}),(0,k.jsx)("option",{value:"year",children:"Yearly"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,k.jsx)("input",{type:"number",min:"0",step:"1",value:l.displayOrder,onChange:e=>x("displayOrder",e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"}),(0,k.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first"})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{id:"popularPlan",type:"checkbox",checked:l.popularPlan||!1,onChange:e=>v("popularPlan",e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"popularPlan",className:"ml-2 block text-sm text-gray-700",children:"Popular Plan (Highlight on pricing page)"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{id:"activePlan",type:"checkbox",checked:l.active||!1,onChange:e=>v("active",e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"activePlan",className:"ml-2 block text-sm text-gray-700",children:"Active (Visible to users)"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Currency-Specific Prices"}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e=>{var t;if(e.code===l.currency)return null;const n=null===(t=l.currencyPrices)||void 0===t?void 0:t.find((t=>t.currencyCode===e.code));return(0,k.jsxs)("div",{className:"border rounded-md p-4",children:[(0,k.jsxs)("div",{className:"flex items-center mb-2",children:[(0,k.jsx)("span",{className:"font-medium mr-2",children:e.code}),(0,k.jsxs)("span",{className:"text-sm text-gray-500",children:[e.name," (",e.symbol,")"]})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:e.symbol}),(0,k.jsx)("input",{type:"number",min:"0",step:"0.01",value:(null===n||void 0===n?void 0:n.price)||"",onChange:t=>((e,t)=>{const n=""===t?0:parseFloat(t),r=[...l.currencyPrices||[]],s=r.findIndex((t=>t.currencyCode===e));s>=0?r[s]=(0,S.A)((0,S.A)({},r[s]),{},{price:n}):r.push({currencyCode:e,price:n}),c((e=>(0,S.A)((0,S.A)({},e),{},{currencyPrices:r})))})(e.code,t.target.value),placeholder:"Enter price",className:"mt-1 focus:ring-primary focus:border-primary block w-full rounded-md sm:text-sm border-gray-300"})]})]},e.code)}))})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Plan Features"}),l.features.length>0&&(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)("ul",{className:"divide-y divide-gray-200 border rounded-md",children:l.features.map((e=>(0,k.jsxs)("li",{className:"px-4 py-3 flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"".concat(e.highlight?"font-medium":""),children:e.name}),(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.included?"Included":"Not Included"}),e.highlight&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Highlighted"})]}),(0,k.jsx)("button",{onClick:()=>{return t=e.id,void c((e=>(0,S.A)((0,S.A)({},e),{},{features:e.features.filter((e=>e.id!==t))})));var t},className:"text-red-600 hover:text-red-800",children:"Remove"})]},e.id)))})}),(0,k.jsxs)("div",{className:"border rounded-md p-4 bg-gray-50",children:[(0,k.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Feature"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[(0,k.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Feature name (e.g., Up to 500 customers)",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary"}),(0,k.jsxs)("div",{className:"flex space-x-4",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{id:"featureIncluded",type:"checkbox",checked:p,onChange:e=>f(e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"featureIncluded",className:"ml-2 block text-sm text-gray-700",children:"Included"})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("input",{id:"featureHighlight",type:"checkbox",checked:g,onChange:e=>y(e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,k.jsx)("label",{htmlFor:"featureHighlight",className:"ml-2 block text-sm text-gray-700",children:"Highlight"})]})]})]}),(0,k.jsx)("button",{type:"button",onClick:()=>{if(!h.trim())return;const e={id:"feature-".concat(Date.now()),name:h,included:p,highlight:g};c((t=>(0,S.A)((0,S.A)({},t),{},{features:[...t.features,e]}))),m(""),f(!0),y(!1)},disabled:!h.trim(),className:"px-3 py-1.5 text-sm font-medium text-white bg-gray-600 hover:bg-gray-700 rounded-md disabled:opacity-50",children:"Add Feature"})]})]})]}),(0,k.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[(0,k.jsx)("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,k.jsx)("button",{onClick:async()=>{if(l.name.trim()){d(!0);try{const e=(0,sl.rJ)(rl.db,"pricing_plans");await(0,sl.gS)(e,(0,S.A)((0,S.A)({},l),{},{createdAt:new Date,updatedAt:new Date})),s("Successfully created new pricing plan: ".concat(l.name)),i()}catch(zZ){console.error("Error creating pricing plan:",zZ),o("Failed to create pricing plan: ".concat(zZ instanceof Error?zZ.message:String(zZ)))}finally{d(!1)}}else o("Plan name is required")},disabled:u||!l.name.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:u?"Creating...":"Create Plan"})]})]})},vQ=t=>{let{plans:n,onSuccess:r,onError:s,onOrderUpdated:o}=t;const[i,a]=(0,e.useState)([...n].sort(((e,t)=>(void 0!==e.displayOrder?e.displayOrder:999)-(void 0!==t.displayOrder?t.displayOrder:999)))),[l,c]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"border-t border-gray-200 px-4 py-5 bg-gray-50",children:[(0,k.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3",children:"Manage Display Order"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Drag and drop or use the arrows to change the order in which pricing plans appear on the pricing page."}),(0,k.jsx)("div",{className:"bg-white rounded-md border border-gray-200 overflow-hidden",children:(0,k.jsx)("ul",{className:"divide-y divide-gray-200",children:i.map(((e,t)=>(0,k.jsxs)("li",{className:"px-4 py-3 flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"inline-flex items-center justify-center h-6 w-6 rounded-full bg-gray-200 text-gray-600 text-sm font-medium mr-3",children:t+1}),(0,k.jsx)("span",{className:"font-medium",children:e.name}),e.popularPlan&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Popular"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>(e=>{if(e<=0)return;const t=[...i],n=t[e];t[e]=t[e-1],t[e-1]=n,a(t)})(t),disabled:0===t,className:"p-1 rounded-md hover:bg-gray-100 disabled:opacity-30",title:"Move up",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,k.jsx)("button",{onClick:()=>(e=>{if(e>=i.length-1)return;const t=[...i],n=t[e];t[e]=t[e+1],t[e+1]=n,a(t)})(t),disabled:t===i.length-1,className:"p-1 rounded-md hover:bg-gray-100 disabled:opacity-30",title:"Move down",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 011.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]},e.id)))})}),(0,k.jsx)("div",{className:"mt-4 flex justify-end",children:(0,k.jsx)("button",{onClick:async()=>{c(!0);try{const e=(0,sl.wP)(rl.db);i.forEach(((t,n)=>{const r=(0,sl.H9)(rl.db,"pricing_plans",t.id);e.update(r,{displayOrder:n,updatedAt:new Date})})),await e.commit(),r("Plan display order updated successfully"),o()}catch(zZ){console.error("Error updating plan order:",zZ),s("Failed to update plan order: ".concat(zZ instanceof Error?zZ.message:String(zZ)))}finally{c(!1)}},disabled:l,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:l?"Saving...":"Save Display Order"})})]})},xQ=()=>{const[t,n]=(0,e.useState)({plans:[],currencies:[],loading:!0,editingPlan:null,notification:{error:null,success:null},isManagingOrder:!1}),[r,s]=(0,e.useState)(!1);(0,e.useEffect)((()=>{o()}),[]);const o=async()=>{n((e=>(0,S.A)((0,S.A)({},e),{},{loading:!0})));try{const e=(0,sl.rJ)(rl.db,"pricing_plans"),t=(await(0,sl.GG)(e)).docs.map((e=>(0,S.A)({id:e.id},e.data()))),r=await i();n((e=>(0,S.A)((0,S.A)({},e),{},{plans:t,currencies:r,loading:!1})))}catch(zZ){console.error("Error fetching data:",zZ),a({error:"Failed to load pricing plans or currencies",success:null}),n((e=>(0,S.A)((0,S.A)({},e),{},{loading:!1})))}},i=async()=>{try{const e=(0,sl.rJ)(rl.db,"currencies"),t=await(0,sl.GG)(e);if(t.empty)return console.log("No currencies found"),[];const n=t.docs.map((e=>{var t;return{code:e.id,name:e.data().name,symbol:e.data().symbol,isActive:null===(t=e.data().isActive)||void 0===t||t,updatedAt:e.data().updatedAt,updatedBy:e.data().updatedBy}}));return n.sort(((e,t)=>e.code.localeCompare(t.code))),n}catch(e){return console.error("Error fetching currencies:",e),[]}},a=e=>{n((t=>(0,S.A)((0,S.A)({},t),{},{notification:e})))};return t.loading?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,k.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Pricing Plan Management"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Set different prices for each currency by plan"})]}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[!r&&!t.editingPlan&&!t.isManagingOrder&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("button",{onClick:()=>{n((e=>(0,S.A)((0,S.A)({},e),{},{isManagingOrder:!0,editingPlan:null,notification:{error:null,success:null}}))),s(!1)},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Manage Display Order"}),(0,k.jsx)("button",{onClick:()=>{s(!0),n((e=>(0,S.A)((0,S.A)({},e),{},{editingPlan:null,notification:{error:null,success:null},isManagingOrder:!1})))},className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Create New Plan"})]}),t.isManagingOrder&&(0,k.jsx)("button",{onClick:()=>{n((e=>(0,S.A)((0,S.A)({},e),{},{isManagingOrder:!1})))},className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Plans"})]})]}),!r&&!t.editingPlan&&!t.isManagingOrder&&(0,k.jsx)(mQ,{onSuccess:e=>a({success:e,error:null}),onError:e=>a({error:e,success:null}),onMigrationComplete:o}),(0,k.jsx)(gQ,{notification:t.notification}),t.isManagingOrder?(0,k.jsx)(vQ,{plans:t.plans,onSuccess:e=>a({success:e,error:null}),onError:e=>a({error:e,success:null}),onOrderUpdated:o}):r?(0,k.jsx)(yQ,{currencies:t.currencies,existingPlansCount:t.plans.length,onSuccess:e=>a({success:e,error:null}),onError:e=>a({error:e,success:null}),onPlanCreated:()=>{o(),s(!1)},onCancel:()=>{s(!1)}}):t.editingPlan?(0,k.jsx)(pQ,{plan:t.editingPlan,currencies:t.currencies,onSave:e=>{const r=t.plans.map((t=>t.id===e.id?e:t));n((e=>(0,S.A)((0,S.A)({},e),{},{plans:r,editingPlan:null})))},onCancel:()=>{n((e=>(0,S.A)((0,S.A)({},e),{},{editingPlan:null,notification:{error:null,success:null}})))},onError:e=>a({error:e,success:null}),onSuccess:e=>a({success:e,error:null})}):(0,k.jsx)(fQ,{plans:t.plans,currencies:t.currencies,onEditPlan:e=>{const t=(0,S.A)((0,S.A)({},e),{},{currencyPrices:e.currencyPrices||[]});n((e=>(0,S.A)((0,S.A)({},e),{},{editingPlan:t,notification:{error:null,success:null},isManagingOrder:!1}))),s(!1)}})]})},bQ=t=>{let{onComplete:n}=t;const{user:r}=(0,N.A)(),[s,o]=(0,e.useState)(!1),[i,a]=(0,e.useState)([]),[l,c]=(0,e.useState)({added:[],skipped:[]}),[u,d]=(0,e.useState)(!1);(0,e.useEffect)((()=>{h()}),[]);const h=async()=>{try{const e=(0,sl.rJ)(rl.db,"currencies"),t=(await(0,sl.GG)(e)).docs.map((e=>e.id));a(t)}catch(e){console.error("Error checking existing currencies:",e),bj.error("Failed to check existing currencies")}},m=[{code:"USD",name:"US Dollar",symbol:"$",region:"North America",isActive:!0},{code:"CAD",name:"Canadian Dollar",symbol:"C$",region:"North America",isActive:!0},{code:"MXN",name:"Mexican Peso",symbol:"$",region:"North America",isActive:!0},{code:"EUR",name:"Euro",symbol:"\u20ac",region:"Europe",isActive:!0},{code:"GBP",name:"British Pound",symbol:"\xa3",region:"Europe",isActive:!0},{code:"CHF",name:"Swiss Franc",symbol:"CHF",region:"Europe",isActive:!0},{code:"NOK",name:"Norwegian Krone",symbol:"kr",region:"Europe",isActive:!0},{code:"SEK",name:"Swedish Krona",symbol:"kr",region:"Europe",isActive:!0},{code:"JPY",name:"Japanese Yen",symbol:"\xa5",region:"Asia-Pacific",isActive:!0},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5",region:"Asia-Pacific",isActive:!0},{code:"AUD",name:"Australian Dollar",symbol:"A$",region:"Asia-Pacific",isActive:!0},{code:"SGD",name:"Singapore Dollar",symbol:"S$",region:"Asia-Pacific",isActive:!0},{code:"HKD",name:"Hong Kong Dollar",symbol:"HK$",region:"Asia-Pacific",isActive:!0},{code:"AED",name:"UAE Dirham",symbol:"\u062f.\u0625",region:"Middle East & Africa",isActive:!0},{code:"SAR",name:"Saudi Riyal",symbol:"\ufdfc",region:"Middle East & Africa",isActive:!0},{code:"ZAR",name:"South African Rand",symbol:"R",region:"Middle East & Africa",isActive:!0},{code:"BRL",name:"Brazilian Real",symbol:"R$",region:"Latin America",isActive:!0},{code:"ARS",name:"Argentine Peso",symbol:"$",region:"Latin America",isActive:!0},{code:"CLP",name:"Chilean Peso",symbol:"$",region:"Latin America",isActive:!0}];return(0,k.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Currency Initializer"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"This tool will add all required currencies to your Firestore database. Existing currencies will be skipped."}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h3",{className:"text-md font-medium mb-2",children:"Currencies to be added:"}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-sm",children:m.map((e=>(0,k.jsxs)("div",{className:"p-2 rounded ".concat(i.includes(e.code)?"bg-green-50 text-green-700":"bg-gray-50"),children:[(0,k.jsx)("span",{className:"font-medium",children:e.code})," - ",e.name,i.includes(e.code)&&" (already exists)"]},e.code)))})]}),(0,k.jsx)("button",{onClick:async()=>{if(null===r||void 0===r||!r.uid)return void bj.error("You must be logged in to perform this action");o(!0);const e=[],t=[];try{for(const n of m){if(i.includes(n.code)){t.push(n.code);continue}const s=(0,sl.H9)(rl.db,"currencies",n.code);await(0,sl.BN)(s,{name:n.name,symbol:n.symbol,region:n.region,isActive:n.isActive,updatedAt:new Date,updatedBy:r.uid}),e.push(n.code)}c({added:e,skipped:t}),d(!0),e.length>0?bj.success("Successfully added ".concat(e.length," currencies")):bj.info("All currencies already exist in the database"),h(),n&&n()}catch(s){console.error("Error initializing currencies:",s),bj.error("Failed to initialize currencies")}finally{o(!1)}},disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:s?"Initializing...":"Initialize Currencies"}),u&&(0,k.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,k.jsx)("h3",{className:"text-md font-medium mb-2",children:"Results:"}),l.added.length>0&&(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("h4",{className:"text-sm font-medium text-green-600 mb-1",children:["Added (",l.added.length,"):"]}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2",children:l.added.map((e=>(0,k.jsx)("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:e},e)))})]}),l.skipped.length>0&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("h4",{className:"text-sm font-medium text-gray-600 mb-1",children:["Skipped (",l.skipped.length,"):"]}),(0,k.jsx)("div",{className:"flex flex-wrap gap-2",children:l.skipped.map((e=>(0,k.jsx)("span",{className:"inline-block bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:e},e)))})]})]})]})},wQ=["code"],NQ=["code"],jQ=(e,t)=>{try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}catch(n){return console.error("Error formatting currency ".concat(t,":"),n),"".concat(t," ").concat(e.toFixed(2))}},kQ=t=>{var n;let{currency:r,onSubmit:s,onCancel:o,isSubmitting:i,onChange:a,isNew:l}=t;const[c,u]=(0,e.useState)(r),[d,h]=(0,e.useState)({});(0,e.useEffect)((()=>{u(r)}),[r]);const m=e=>{const{name:t,value:n}=e.target;u((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))),a&&a(t,n),d[t]&&h((e=>(0,S.A)((0,S.A)({},e),{},{[t]:""})))};return(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{var e,t,n;const r={};return null!==(e=c.code)&&void 0!==e&&e.trim()?/^[A-Z]{3}$/.test(c.code)||(r.code="Currency code must be 3 uppercase letters (e.g., USD)"):r.code="Currency code is required",null!==(t=c.name)&&void 0!==t&&t.trim()||(r.name="Currency name is required"),null!==(n=c.symbol)&&void 0!==n&&n.trim()||(r.symbol="Currency symbol is required"),c.region||(r.region="Region is required"),h(r),0===Object.keys(r).length})()&&s(c)},className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-4",children:l?"Add New Currency":"Edit Currency"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Currency Code"}),(0,k.jsx)("input",{type:"text",name:"code",id:"code",value:c.code||"",onChange:m,disabled:!l,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm disabled:bg-gray-100",placeholder:"USD"}),d.code&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.code})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Currency Name"}),(0,k.jsx)("input",{type:"text",name:"name",id:"name",value:c.name||"",onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",placeholder:"US Dollar"}),d.name&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"symbol",className:"block text-sm font-medium text-gray-700",children:"Currency Symbol"}),(0,k.jsx)("input",{type:"text",name:"symbol",id:"symbol",value:c.symbol||"",onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",placeholder:"$"}),d.symbol&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.symbol})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"region",className:"block text-sm font-medium text-gray-700",children:"Region"}),(0,k.jsxs)("select",{name:"region",id:"region",value:c.region||"",onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm",children:[(0,k.jsx)("option",{value:"",children:"Select a region"}),["North America","Europe","Asia-Pacific","Middle East & Africa","Latin America","Other"].map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]}),d.region&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.region})]}),(0,k.jsxs)("div",{className:"flex items-center h-full pt-6",children:[(0,k.jsx)("input",{type:"checkbox",name:"isActive",id:"isActive",checked:null===(n=c.isActive)||void 0===n||n,onChange:e=>{const{name:t,checked:n}=e.target;u((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n}))),a&&a(t,n)},className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),(0,k.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Active"})]})]}),(0,k.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[(0,k.jsx)("button",{type:"button",onClick:o,className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:"Cancel"}),(0,k.jsx)("button",{type:"submit",disabled:i,className:"inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})},CQ=e=>{let{currencies:t,onEditCurrency:n,onDeleteCurrency:r,onToggleActive:s,isDeleting:o}=e;return(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Example"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,k.jsxs)("tr",{className:e.isActive?"":"bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.code}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.name}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.symbol}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:jQ(1234.56,e.code)}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Active":"Inactive"})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>s(e),className:"text-xs px-2 py-1 rounded ".concat(e.isActive?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"),children:e.isActive?"Deactivate":"Activate"}),(0,k.jsx)("button",{onClick:()=>n(e),className:"text-indigo-600 hover:text-indigo-900 text-xs px-2 py-1 bg-indigo-100 rounded hover:bg-indigo-200",children:"Edit"}),(0,k.jsx)("button",{onClick:()=>r(e.code),disabled:o[e.code],className:"text-red-600 hover:text-red-900 text-xs px-2 py-1 bg-red-100 rounded hover:bg-red-200 disabled:opacity-50",children:o[e.code]?"Deleting...":"Delete"})]})})]},e.code)))})]})})},SQ=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(!1),[a,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)({}),[m,p]=(0,e.useState)(!1),{user:f}=(0,N.A)();(0,e.useEffect)((()=>{g()}),[]);const g=async()=>{s(!0);try{const e=(0,sl.rJ)(rl.db,"currencies"),t=await(0,sl.GG)(e);if(t.empty)console.log("No currencies found, showing initializer"),n([]),p(!0);else{const e=t.docs.map((e=>{var t;return{code:e.id,name:e.data().name,symbol:e.data().symbol,region:e.data().region||"Other",isActive:null===(t=e.data().isActive)||void 0===t||t,updatedAt:e.data().updatedAt,updatedBy:e.data().updatedBy}}));e.sort(((e,t)=>{var n;return e.region!==t.region?(null===(n=e.region)||void 0===n?void 0:n.localeCompare(t.region||"Other"))||0:e.code.localeCompare(t.code)})),n(e)}}catch(e){bj.error("Failed to load currencies"),console.error("Error loading currencies:",e),n([])}finally{s(!1)}},y=e=>{l(e),i(!1)},v=async e=>{if(null!==f&&void 0!==f&&f.uid){u(!0);try{const t=(0,S.A)((0,S.A)({},e),{},{isActive:!e.isActive}),r=(0,sl.H9)(rl.db,"currencies",e.code),{code:s}=t,o=E(t,wQ);await(0,sl.mZ)(r,(0,S.A)((0,S.A)({},o),{},{updatedAt:new Date,updatedBy:f.uid})),bj.success("Currency ".concat(e.code," ").concat(t.isActive?"activated":"deactivated"," successfully")),n((n=>n.map((n=>n.code===e.code?t:n))))}catch(t){bj.error("Error updating currency status"),console.error("Error toggling currency status:",t)}finally{u(!1)}}else bj.error("You must be logged in to perform this action")},x=async e=>{if(null!==f&&void 0!==f&&f.uid){if(window.confirm("Are you sure you want to delete the currency ".concat(e,"?"))){h((t=>(0,S.A)((0,S.A)({},t),{},{[e]:!0})));try{const t=(0,sl.H9)(rl.db,"currencies",e);await(0,sl.mZ)(t,{isActive:!1,updatedAt:new Date,updatedBy:f.uid}),bj.success("Currency ".concat(e," deleted successfully")),g()}catch(t){bj.error("Error deleting currency"),console.error("Error deleting currency:",t)}finally{h((t=>(0,S.A)((0,S.A)({},t),{},{[e]:!1})))}}}else bj.error("You must be logged in to perform this action")};if(r)return(0,k.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const b={};return t.forEach((e=>{const t=e.region||"Other";b[t]||(b[t]=[]),b[t].push(e)})),(0,k.jsxs)("div",{className:"bg-white rounded-md shadow-sm",children:[(0,k.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold",children:"System Currencies"}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsx)("button",{onClick:()=>p(!m),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:m?"Hide Initializer":"Initialize Currencies"}),(0,k.jsx)("button",{onClick:()=>{i(!0),l(null)},className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary/80",disabled:o,children:"Add New Currency"})]})]})}),m&&(0,k.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,k.jsx)(bQ,{onComplete:()=>{g(),p(!1)}})}),(0,k.jsxs)("div",{className:"p-6",children:[(o||a)&&(0,k.jsx)("div",{className:"mb-8",children:(0,k.jsx)(kQ,{currency:a||{},onSubmit:async e=>{var t;if(null===f||void 0===f||!f.uid)return void bj.error("You must be logged in to perform this action");const n=(0,S.A)((0,S.A)({},e),{},{isActive:null===(t=e.isActive)||void 0===t||t});u(!0);try{const{code:e}=n,t=E(n,NQ),r=(0,sl.H9)(rl.db,"currencies",e);(await(0,sl.x7)(r)).exists()?await(0,sl.mZ)(r,(0,S.A)((0,S.A)({},t),{},{updatedAt:new Date,updatedBy:f.uid})):await(0,sl.BN)(r,(0,S.A)((0,S.A)({},t),{},{updatedAt:new Date,updatedBy:f.uid})),bj.success("Currency ".concat(n.code," ").concat(a?"updated":"added"," successfully")),i(!1),l(null),g()}catch(r){bj.error("Error ".concat(a?"updating":"adding"," currency")),console.error("Error submitting currency:",r)}finally{u(!1)}},onCancel:()=>{i(!1),l(null)},isSubmitting:c,onChange:(e,t)=>{a&&l((0,S.A)((0,S.A)({},a),{},{[e]:t}))},isNew:!a})}),0===t.length?(0,k.jsxs)("div",{className:"text-center p-8",children:[(0,k.jsx)("p",{className:"text-gray-500 mb-4",children:"No currencies found in the database."}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:'Use the "Initialize Currencies" button to add all required currencies automatically.'})]}):(0,k.jsx)("div",{children:Object.keys(b).sort().map((e=>(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-4 text-gray-700 border-b pb-2",children:e}),(0,k.jsx)(CQ,{currencies:b[e],onEditCurrency:y,onDeleteCurrency:x,onToggleActive:v,isDeleting:d})]},e)))})]})]})},AQ=()=>{const[t,n]=(0,e.useState)("pricing");return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"py-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pricing Management"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Configure pricing plans and currency options for the website"})]}),(0,k.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,k.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,k.jsx)("button",{onClick:()=>n("pricing"),className:"\n              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n              ".concat("pricing"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n            "),children:"Pricing Plans"}),(0,k.jsx)("button",{onClick:()=>n("currencies"),className:"\n              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\n              ".concat("currencies"===t?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n            "),children:"Currencies"})]})}),(0,k.jsxs)("div",{children:["pricing"===t&&(0,k.jsx)(xQ,{}),"currencies"===t&&(0,k.jsx)(SQ,{})]})]})},EQ=L("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),_Q=L("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),IQ={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},TQ={hidden:{opacity:0},visible:{opacity:1}},PQ={fade:{container:IQ,item:{hidden:{opacity:0},visible:{opacity:1}}},slide:{container:IQ,item:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}}},scale:{container:IQ,item:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}}},blur:{container:IQ,item:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}}},"blur-slide":{container:IQ,item:{hidden:{opacity:0,filter:"blur(4px)",y:20},visible:{opacity:1,filter:"blur(0px)",y:0}}},zoom:{container:IQ,item:{hidden:{opacity:0,scale:.5},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:20}}}},flip:{container:IQ,item:{hidden:{opacity:0,rotateX:-90},visible:{opacity:1,rotateX:0,transition:{type:"spring",stiffness:300,damping:20}}}},bounce:{container:IQ,item:{hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:400,damping:10}}}},rotate:{container:IQ,item:{hidden:{opacity:0,rotate:-180},visible:{opacity:1,rotate:0,transition:{type:"spring",stiffness:200,damping:15}}}},swing:{container:IQ,item:{hidden:{opacity:0,rotate:-10},visible:{opacity:1,rotate:0,transition:{type:"spring",stiffness:300,damping:8}}}}};function RQ(t){let{children:n,className:r,variants:s,preset:o}=t;const i=o?PQ[o]:{container:IQ,item:TQ},a=(null===s||void 0===s?void 0:s.container)||i.container,l=(null===s||void 0===s?void 0:s.item)||i.item;return(0,k.jsx)(gg.div,{initial:"hidden",animate:"visible",variants:a,className:Po(r),children:e.Children.map(n,((e,t)=>(0,k.jsx)(gg.div,{variants:l,children:e},t)))})}function DQ(){return(0,k.jsxs)("div",{className:"relative space-y-3 rounded-[1rem] bg-white/5 p-4",children:[(0,k.jsxs)("div",{className:"flex items-center gap-1.5 text-orange-400",children:[(0,k.jsx)(LQ,{}),(0,k.jsx)("div",{className:"text-sm font-medium",children:"Loyalty Rewards"})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsx)("div",{className:"text-foreground border-b border-white/10 pb-3 text-sm font-medium",children:"Your customers are returning more often with TYCA loyalty programs."}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsx)(MQ,{value:"+28%",label:"Return Rate",withTyca:!0}),(0,k.jsx)(MQ,{value:"+42%",label:"Customer Value",withTyca:!1})]})]})]})}function MQ(e){let{value:t,label:n,withTyca:r}=e;return(0,k.jsxs)("div",{className:"space-y-1",children:[(0,k.jsxs)("div",{className:"space-x-1",children:[(0,k.jsx)("span",{className:"text-foreground align-baseline text-xl font-medium",children:t}),(0,k.jsx)("span",{className:"text-muted-foreground text-xs",children:n})]}),r?(0,k.jsx)("div",{className:"flex h-5 items-center rounded bg-gradient-to-l from-emerald-400 to-indigo-600 px-2 text-xs text-white",children:"With TYCA"}):(0,k.jsx)("div",{className:"text-foreground bg-muted flex h-5 w-2/3 items-center rounded px-2 text-xs dark:bg-white/20",children:"Without TYCA"})]})}function LQ(){return(0,k.jsxs)("svg",{className:"size-5",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[(0,k.jsx)("path",{fill:"currentColor",d:"M21.41 11.58l-9-9C12.04 2.21 11.53 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .53.21 1.04.59 1.41l9 9c.36.36.86.59 1.41.59s1.05-.23 1.41-.59l7-7c.37-.36.59-.87.59-1.41s-.23-1.06-.59-1.42M13 20.01L4 11V4h7v-.01l9 9z"}),(0,k.jsx)("circle",{fill:"currentColor",cx:"6.5",cy:"6.5",r:"1.5"})]})}const OQ={item:{hidden:{opacity:0,filter:"blur(12px)",y:12},visible:{opacity:1,filter:"blur(0px)",y:0,transition:{type:"spring",bounce:.3,duration:1.5}}}};function FQ(){return(0,k.jsx)("section",{children:(0,k.jsx)("div",{className:"relative mx-auto max-w-6xl px-6 pt-32 lg:pb-16 lg:pt-48",children:(0,k.jsx)("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:(0,k.jsxs)(RQ,{variants:{container:{visible:{transition:{staggerChildren:.05,delayChildren:.75}}},item:OQ.item},children:[(0,k.jsx)("h1",{className:"text-balance text-4xl font-medium sm:text-5xl md:text-6xl",children:nV.db.value.retention}),(0,k.jsx)("p",{className:"mx-auto mt-6 max-w-2xl text-pretty text-lg",children:nV.db.value.loyalty}),(0,k.jsx)(BQ,{}),(0,k.jsx)(UQ,{})]})})})})}function BQ(){const[t,n]=(0,e.useState)("");(0,i.Zp)();return(0,k.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),t&&t.includes("@"))try{console.log("Submitting email:",t),await(0,sl.gS)((0,sl.rJ)(Ug.db,"leadCapture"),{email:t,timestamp:(0,sl.O5)(),source:"hero_form",completed:!1}).catch((e=>{console.error("Error adding document to Firestore:",e)})),console.log("Email stored, redirecting to register page"),window.location.href="/register?email=".concat(encodeURIComponent(t),"&type=business")}catch(n){console.error("Error in form submission:",n)}},className:"mt-12 mx-auto max-w-sm",children:(0,k.jsxs)("div",{className:"bg-background has-[input:focus]:ring-muted relative grid grid-cols-[1fr_auto] pr-1.5 items-center rounded-[1rem] border shadow shadow-zinc-950/5 has-[input:focus]:ring-2 lg:pr-0",children:[(0,k.jsx)(EQ,{className:"pointer-events-none absolute inset-y-0 left-4 my-auto size-4"}),(0,k.jsx)("input",{placeholder:"Your email address",className:"h-12 w-full bg-transparent pl-12 focus:outline-none",type:"email",value:t,onChange:e=>{n(e.target.value)},required:!0}),(0,k.jsx)("div",{className:"md:pr-1.5 lg:pr-0",children:(0,k.jsxs)($a,{type:"submit","aria-label":"submit",size:"sm",variant:"default",className:"rounded-[0.5rem] bg-primary-700 hover:bg-primary-600 text-white",children:[(0,k.jsx)("span",{className:"hidden md:block",children:"Get Started"}),(0,k.jsx)(_Q,{className:"relative mx-auto size-5 md:hidden",strokeWidth:2})]})})]})})}function UQ(){return(0,k.jsxs)("div",{"aria-hidden":!0,className:"bg-radial from-primary/50 dark:from-primary/25 relative mx-auto mt-32 max-w-2xl to-transparent to-55% text-left",children:[(0,k.jsx)("div",{className:"bg-background border-border/50 absolute inset-0 mx-auto w-80 -translate-x-3 -translate-y-12 rounded-[2rem] border p-2 [mask-image:linear-gradient(to_bottom,#000_50%,transparent_90%)] sm:-translate-x-6",children:(0,k.jsx)("div",{className:"relative h-96 overflow-hidden rounded-[1.5rem] border p-2 pb-12 before:absolute before:inset-0 before:bg-[repeating-linear-gradient(-45deg,var(--border),var(--border)_1px,transparent_1px,transparent_6px)] before:opacity-50"})}),(0,k.jsx)("div",{className:"bg-muted dark:bg-background/50 border-border/50 mx-auto w-80 translate-x-4 rounded-[2rem] border p-2 backdrop-blur-3xl [mask-image:linear-gradient(to_bottom,#000_50%,transparent_90%)] sm:translate-x-8",children:(0,k.jsxs)("div",{className:"bg-background space-y-2 overflow-hidden rounded-[1.5rem] border p-2 shadow-xl dark:bg-white/5 dark:shadow-black dark:backdrop-blur-3xl",children:[(0,k.jsx)(DQ,{}),(0,k.jsx)("div",{className:"bg-muted rounded-[1rem] p-4 pb-16 dark:bg-white/5"})]})}),(0,k.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] mix-blend-overlay [background-size:16px_16px] [mask-image:radial-gradient(ellipse_50%_50%_at_50%_50%,#000_70%,transparent_100%)] dark:opacity-5"})]})}class zQ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>e.finished)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){const t=this.animations.map((t=>t.attachTimeline(e)));return()=>{t.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class VQ extends zQ{then(e,t){return this.finished.finally(e).then((()=>{}))}}function qQ(e,t){return du(e)?e[((e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e})(0,e.length,t)]:e}function WQ(e){return"object"===typeof e&&!Array.isArray(e)}function HQ(e,t,n,r){return"string"===typeof e&&WQ(t)?wp(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function GQ(e,t,n){return e*(t+1)}function KQ(e,t,n,r){return"number"===typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):null!==(s=r.get(t))&&void 0!==s?s:e;var s}function YQ(e,t,n,r,s,o){!function(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Al(e,s),r--)}}(e,s,o);for(let i=0;i<t.length;i++)e.push({value:t[i],at:Pc(s,o,r[i]),easing:qQ(n,i)})}function QQ(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function $Q(e,t){return e.at===t.at?null===e.value?1:null===t.value?-1:0:e.at-t.at}const JQ=["defaultTransition"],XQ=["delay","times","type","repeat","repeatType","repeatDelay"];function ZQ(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function e$(e,t){return t[e]||(t[e]=[]),t[e]}function t$(e){return Array.isArray(e)?e:[e]}function n$(e,t){return e&&e[t]?(0,S.A)((0,S.A)({},e),e[t]):(0,S.A)({},e)}const r$=e=>"number"===typeof e,s$=e=>e.every(r$);class o$ extends cg{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(function(e,t){return e in t}(t,e)){const n=e[t];if("string"===typeof n||"number"===typeof n)return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}build(e,t){Object.assign(e.output,t)}renderInstance(e,t){let{output:n}=t;Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function i$(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=hm(e)&&!mm(e)?new pg(t):new hg(t);n.mount(e),ig.set(e,n)}function a$(e){const t=new o$({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),ig.set(e,t)}function l$(e,t,n,r){const s=[];if(function(e,t){return Bl(e)||"number"===typeof e||"string"===typeof e&&!WQ(t)}(e,t))s.push(pm(e,WQ(t)&&t.default||t,n&&n.default||n));else{const o=HQ(e,t,r),i=o.length;Boolean(i);for(let e=0;e<i;e++){const r=o[e],a=r instanceof Element?i$:a$;ig.has(r)||a(r);const l=ig.get(r),c=(0,S.A)({},n);"delay"in c&&"function"===typeof c.delay&&(c.delay=c.delay(e,i)),s.push(...Ld(l,(0,S.A)((0,S.A)({},t),{},{transition:c}),{}))}}return s}function c$(e,t,n){const r=[],s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{defaultTransition:n={}}=t,r=E(t,JQ),s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const i=n.duration||.3,a=new Map,l=new Map,c={},u=new Map;let d=0,h=0,m=0;for(let p=0;p<e.length;p++){const t=e[p];if("string"===typeof t){u.set(t,h);continue}if(!Array.isArray(t)){u.set(t.name,KQ(h,t.at,d,u));continue}let[r,a,f={}]=t;void 0!==f.at&&(h=KQ(h,f.at,d,u));let g=0;const y=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const l=t$(e),{delay:c=0,times:u=Au(l),type:d="keyframes",repeat:p,repeatType:f,repeatDelay:y=0}=t,v=E(t,XQ);let{ease:x=n.ease||"easeOut",duration:b}=t;const w="function"===typeof c?c(s,a):c,N=l.length,j=md(d)?d:null===o||void 0===o?void 0:o[d||"keyframes"];if(N<=2&&j){let e=100;if(2===N&&s$(l)){const t=l[1]-l[0];e=Math.abs(t)}const t=(0,S.A)({},v);void 0!==b&&(t.duration=Kl(b));const n=Yc(t,e,j);x=n.ease,b=n.duration}null!==b&&void 0!==b||(b=i);const k=h+w;1===u.length&&0===u[0]&&(u[1]=1);const C=u.length-l.length;if(C>0&&Su(u,C),1===l.length&&l.unshift(null),p){b=GQ(b,p);const e=[...l],t=[...u];x=Array.isArray(x)?[...x]:[x];const n=[...x];for(let r=0;r<p;r++){l.push(...e);for(let s=0;s<e.length;s++)u.push(t[s]+(r+1)),x.push(0===s?"linear":qQ(n,s-1))}QQ(u,p)}const A=k+b;YQ(r,l,x,u,k,A),g=Math.max(w+b,g),m=Math.max(A,m)};if(Bl(r))y(a,f,e$("default",ZQ(r,l)));else{const e=HQ(r,a,s,c),t=e.length;for(let n=0;n<t;n++){const r=ZQ(e[n],l);for(const e in a)y(a[e],n$(f,e),e$(e,r),n,t)}}d=h,h+=g}return l.forEach(((e,t)=>{for(const s in e){const o=e[s];o.sort($Q);const i=[],l=[],c=[];for(let e=0;e<o.length;e++){const{at:t,value:n,easing:r}=o[e];i.push(n),l.push(ku(0,m,t)),c.push(r||"easeOut")}0!==l[0]&&(l.unshift(0),i.unshift(i[0]),c.unshift("easeInOut")),1!==l[l.length-1]&&(l.push(1),i.push(null)),a.has(t)||a.set(t,{keyframes:{},transition:{}});const u=a.get(t);u.keyframes[s]=i,u.transition[s]=(0,S.A)((0,S.A)({},n),{},{duration:m,ease:c,times:l},r)}})),a}(e,t,n,{spring:su});return s.forEach(((e,t)=>{let{keyframes:n,transition:s}=e;r.push(...l$(t,n,s))})),r}const u$=function(e,t,n){let r=[];var s;s=e,r=Array.isArray(s)&&s.some(Array.isArray)?c$(e,t,d$):l$(e,t,n,d$);const o=new VQ(r);return d$&&(d$.animations.push(o),o.finished.then((()=>{Al(d$.animations,o)}))),o};var d$;function h$(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];window.clearTimeout(n),n=window.setTimeout((()=>e(...s)),t)}}function m$(){let{debounce:t,scroll:n,polyfill:r,offsetSize:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const o=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,a]=(0,e.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,e.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i,orientationHandler:null}),c=t?"number"==typeof t?t:t.scroll:null,u=t?"number"==typeof t?t:t.resize:null,d=(0,e.useRef)(!1);(0,e.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[h,m,p]=(0,e.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:o,right:i,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:o,right:i,x:c,y:u};l.current.element instanceof HTMLElement&&s&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!g$(l.current.lastBounds,h)&&a(l.current.lastBounds=h)};return[e,u?h$(e,u):e,c?h$(e,c):e]}),[a,s,c,u]);function f(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",p,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",p,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(t,n){(0,e.useEffect)((()=>{if(n){const e=t;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[t,n])}(p,!!n),function(t){(0,e.useEffect)((()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[t])}(m),(0,e.useEffect)((()=>{f(),g()}),[n,p,m]),(0,e.useEffect)((()=>f),[]),[e=>{!e||e===l.current.element||(f(),l.current.element=e,l.current.scrollContainers=p$(e),g())},i,h]}function p$(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...p$(e.parentElement)]}const f$=["x","y","top","bottom","left","right","width","height"],g$=(e,t)=>f$.every((n=>e[n]===t[n]));function y$(t){let{children:n,gap:r=16,duration:s=25,durationOnHover:o,direction:i="horizontal",reverse:a=!1,className:l}=t;const[c,u]=(0,e.useState)(s),[d,{width:h,height:m}]=m$(),p=function(t){const n=Pf((()=>Ml(t))),{isStatic:r}=(0,e.useContext)(qp);if(r){const[,r]=(0,e.useState)(t);(0,e.useEffect)((()=>n.on("change",r)),[])}return n}(0),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(0);(0,e.useEffect)((()=>{var e;let t;const n=("horizontal"===i?h:m)+r,s=a?-n/2:0,o=a?0:-n/2;return t=f?u$(p,[p.get(),o],{ease:"linear",duration:c*Math.abs((p.get()-o)/n),onComplete:()=>{g(!1),v((e=>e+1))}}):u$(p,[s,o],{ease:"linear",duration:c,repeat:1/0,repeatType:"loop",repeatDelay:0,onRepeat:()=>{p.set(s)}}),null===(e=t)||void 0===e?void 0:e.stop}),[y,p,c,h,m,r,f,i,a]);const x=o?{onHoverStart:()=>{g(!0),u(o)},onHoverEnd:()=>{g(!0),u(s)}}:{};return(0,k.jsx)("div",{className:Po("overflow-hidden",l),children:(0,k.jsxs)(gg.div,(0,S.A)((0,S.A)({className:"flex w-max",style:(0,S.A)((0,S.A)({},"horizontal"===i?{x:p}:{y:p}),{},{gap:"".concat(r,"px"),flexDirection:"horizontal"===i?"row":"column"}),ref:d},x),{},{children:[n,n]}))})}const v$=["direction","blurLayers","className","blurIntensity"],x$={top:0,right:90,bottom:180,left:270};function b$(e){let{direction:t="bottom",blurLayers:n=8,className:r,blurIntensity:s=.25}=e,o=E(e,v$);const i=Math.max(n,2),a=1/(n+1);return(0,k.jsx)("div",{className:Po("relative",r),children:Array.from({length:i}).map(((e,n)=>{const r=x$[t],i=[n*a,(n+1)*a,(n+2)*a,(n+3)*a].map(((e,t)=>"rgba(255, 255, 255, ".concat(1===t||2===t?1:0,") ").concat(100*e,"%"))),l="linear-gradient(".concat(r,"deg, ").concat(i.join(", "),")");return(0,k.jsx)(gg.div,(0,S.A)({className:"pointer-events-none absolute inset-0 rounded-[inherit]",style:{maskImage:l,WebkitMaskImage:l,backdropFilter:"blur(".concat(n*s,"px)")}},o),n)}))})}function w$(){return(0,k.jsx)("section",{className:"bg-background pb-16 md:pb-32",children:(0,k.jsx)("div",{className:"group relative m-auto max-w-6xl px-6",children:(0,k.jsxs)("div",{className:"flex flex-col items-center md:flex-row",children:[(0,k.jsx)("div",{className:"inline md:max-w-44 md:border-r md:pr-6",children:(0,k.jsx)("p",{className:"text-end text-sm",children:"Trusted by local businesses"})}),(0,k.jsxs)("div",{className:"relative py-6 md:w-[calc(100%-11rem)]",children:[(0,k.jsxs)(y$,{duration:40,gap:112,children:[(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/nvidia.svg",alt:"Yoco Logo",height:"20"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/column.svg",alt:"SnapScan Logo",height:"16"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/github.svg",alt:"Zapper Logo",height:"16"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/nike.svg",alt:"Local Business Logo",height:"20"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/lemonsqueezy.svg",alt:"South African Business Logo",height:"20"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/laravel.svg",alt:"Local Shop Logo",height:"16"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/lilly.svg",alt:"Cape Town Business Logo",height:"28"}),(0,k.jsx)(N$,{src:"https://html.tailus.io/blocks/customers/openai.svg",alt:"Johannesburg Business Logo",height:"24"})]}),(0,k.jsx)(j$,{})]})]})})})}function N$(e){let{src:t,alt:n,height:r}=e;return(0,k.jsx)("div",{className:"flex",children:(0,k.jsx)("img",{className:"mx-auto h-".concat("28"===r?"7":"24"===r?"6":"20"===r?"5":"4"," w-fit dark:invert"),src:t,alt:n,height:r,width:"auto"})})}function j$(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"bg-linear-to-r from-background absolute inset-y-0 left-0 w-20"}),(0,k.jsx)("div",{className:"bg-linear-to-l from-background absolute inset-y-0 right-0 w-20"}),(0,k.jsx)(b$,{className:"pointer-events-none absolute left-0 top-0 h-full w-20",direction:"left",blurIntensity:1}),(0,k.jsx)(b$,{className:"pointer-events-none absolute right-0 top-0 h-full w-20",direction:"right",blurIntensity:1})]})}function k$(){return(0,k.jsxs)("main",{className:"overflow-hidden",children:[(0,k.jsx)(FQ,{}),(0,k.jsx)(w$,{})]})}function C$(){return(0,k.jsx)(k$,{})}const S$=()=>(0,k.jsxs)("div",{className:"bg-white",children:[(0,k.jsx)(C$,{}),(0,k.jsx)("div",{className:"py-12 bg-white",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"lg:text-center",children:[(0,k.jsx)("h2",{className:"text-base text-secondary-500 font-semibold tracking-wide uppercase",children:nV.qt.shortTagline}),(0,k.jsx)("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:nV.db.value.retention}),(0,k.jsx)("p",{className:"mt-4 max-w-2xl text-xl text-gray-500 lg:mx-auto",children:nV.db.value.loyalty})]}),(0,k.jsx)("div",{className:"mt-10",children:(0,k.jsxs)("div",{className:"space-y-10 md:space-y-0 md:grid md:grid-cols-2 md:gap-x-8 md:gap-y-10",children:[(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-primary-700 text-white",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"South African Payment Methods"}),(0,k.jsx)("p",{className:"mt-2 text-base text-gray-500",children:"Integrate with local payment providers like Yoco, SnapScan, and Zapper to provide a seamless experience."})]})]}),(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-primary-700 text-white",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Customer Retention Tools"}),(0,k.jsx)("p",{className:"mt-2 text-base text-gray-500",children:nV.db.value.growth})]})]})]})})]})}),(0,k.jsx)("div",{className:"bg-primary-800",children:(0,k.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8",children:[(0,k.jsxs)("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:[(0,k.jsx)("span",{className:"block",children:"Ready to boost your business?"}),(0,k.jsxs)("span",{className:"block",children:["Start using ",nV.qt.name," today."]})]}),(0,k.jsx)("p",{className:"mt-4 text-lg leading-6 text-primary-200",children:nV.db.cta.standard}),(0,k.jsx)(y,{to:"/register",className:"mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-primary-800 bg-white hover:bg-primary-50 sm:w-auto",children:"Sign up for free"})]})})]}),A$=()=>(0,k.jsx)("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("h2",{className:"text-base font-semibold text-primary-600 tracking-wide uppercase",children:"Features"}),(0,k.jsx)("p",{className:"mt-1 text-4xl font-extrabold text-gray-900 sm:text-5xl sm:tracking-tight lg:text-6xl",children:"Powerful Tools for Small Businesses"}),(0,k.jsx)("p",{className:"max-w-xl mt-5 mx-auto text-xl text-gray-500",children:"Everything you need to build stronger customer relationships, increase loyalty, and grow your business with modern digital tools."})]})}),E$=["className","children"],_$=["className","name","description","Icon","href","cta","background"];function I$(e){let{className:t,children:n}=e,r=E(e,E$);return(0,k.jsx)("div",(0,S.A)((0,S.A)({className:Po("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",t)},r),{},{children:n}))}function T$(e){let{className:t,name:n,description:r,Icon:s,href:o,cta:i="Learn more",background:a}=e,l=E(e,_$);return(0,k.jsxs)("div",(0,S.A)((0,S.A)({className:Po("row-span-1 rounded-xl group/bento hover:shadow-xl transition duration-200 shadow-input dark:shadow-none p-4 dark:bg-black dark:border-white/[0.2] bg-white border border-transparent justify-between flex flex-col space-y-4 relative overflow-hidden",t)},l),{},{children:[a&&(0,k.jsx)("div",{className:"absolute inset-0 z-0",children:a}),(0,k.jsxs)("div",{className:"relative z-10",children:[(0,k.jsx)("div",{className:"flex items-center justify-between",children:(0,k.jsx)("div",{className:"p-2 w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:(0,k.jsx)(s,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})})}),(0,k.jsx)("h3",{className:"mt-4 font-bold text-lg text-gray-900 dark:text-white",children:n}),(0,k.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:r})]}),o&&(0,k.jsx)("div",{className:"relative z-10",children:(0,k.jsx)($a,{variant:"outline",size:"sm",className:"border-primary-600 text-primary-600 hover:bg-primary-50 dark:border-primary-400 dark:text-primary-400 dark:hover:bg-primary-950/50",asChild:!0,children:(0,k.jsx)("a",{href:o,children:i})})})]}))}const P$=L("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),R$=L("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),D$=L("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),M$=L("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),L$=L("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),O$=L("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),F$=L("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),B$=L("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),U$=L("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),z$=L("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),V$=[{Icon:P$,name:"Digital Loyalty Programs",description:"Replace paper punch cards with beautiful digital loyalty systems. Automated tracking, custom rewards, and customer insights.",href:"/features/loyalty",cta:"See Demo",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-50 to-rose-100 dark:from-pink-950/20 dark:to-rose-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=400&h=300&fit=crop",alt:"Digital loyalty card",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:row-start-1 lg:row-end-3 lg:col-start-1 lg:col-end-2"},{Icon:R$,name:"Customer Engagement",description:"Personalized messaging, push notifications, and automated campaigns to keep customers coming back.",href:"/features/engagement",cta:"Learn More",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/20 dark:to-indigo-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=300&fit=crop",alt:"Customer messaging",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-2 lg:col-end-4 lg:row-start-1 lg:row-end-2"},{Icon:D$,name:"Campaign Management",description:"Create, schedule, and track promotional campaigns with our intuitive drag-and-drop builder.",href:"/features/campaigns",cta:"Try Builder",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-950/20 dark:to-emerald-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=300&fit=crop",alt:"Campaign dashboard",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-2 lg:col-end-3 lg:row-start-2 lg:row-end-4"},{Icon:M$,name:"Analytics & Insights",description:"Real-time dashboards showing customer behavior, revenue attribution, and business growth metrics.",href:"/features/analytics",cta:"View Dashboard",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-violet-100 dark:from-purple-950/20 dark:to-violet-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",alt:"Analytics dashboard",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-3 lg:col-end-4 lg:row-start-2 lg:row-end-3"},{Icon:L$,name:"Mobile Customer App",description:"Beautiful mobile experience for customers with QR scanning, digital wallets, and reward tracking.",href:"/features/mobile",cta:"See App",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-950/20 dark:to-amber-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=400&h=300&fit=crop",alt:"Mobile app interface",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-1 lg:col-end-2 lg:row-start-3 lg:row-end-4"},{Icon:O$,name:"Automation Tools",description:"Set up automated workflows for customer re-engagement, birthday rewards, and promotional triggers.",href:"/features/automation",cta:"Explore",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-50 to-orange-100 dark:from-yellow-950/20 dark:to-orange-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1518186285589-2f7649de83e0?w=400&h=300&fit=crop",alt:"Automation workflow",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-3 lg:col-end-4 lg:row-start-3 lg:row-end-4"}],q$=[{Icon:F$,name:"Customer Database",description:"Centralized customer profiles with purchase history, preferences, and engagement data.",href:"/features/database",cta:"Learn More",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-50 to-cyan-100 dark:from-teal-950/20 dark:to-cyan-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1552664730-d307ca884978?w=400&h=300&fit=crop",alt:"Customer database",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-1 lg:col-end-2 lg:row-start-1 lg:row-end-2"},{Icon:B$,name:"POS Integration",description:"Seamlessly connect with your existing point-of-sale system for automatic transaction tracking.",href:"/features/pos",cta:"View Integrations",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 to-gray-100 dark:from-slate-950/20 dark:to-gray-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1556742502-ec7c0e9f34b1?w=400&h=300&fit=crop",alt:"POS integration",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-2 lg:col-end-4 lg:row-start-1 lg:row-end-2"},{Icon:U$,name:"Smart Notifications",description:"Intelligent push notifications based on customer behavior and preferences.",href:"/features/notifications",cta:"See Examples",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-red-50 to-pink-100 dark:from-red-950/20 dark:to-pink-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=400&h=300&fit=crop",alt:"Push notifications",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-1 lg:col-end-3 lg:row-start-2 lg:row-end-3"},{Icon:z$,name:"Growth Analytics",description:"Track business growth with revenue trends, customer acquisition, and retention metrics.",href:"/features/growth",cta:"View Metrics",background:(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-950/20 dark:to-green-900/20",children:(0,k.jsx)("img",{src:"https://images.unsplash.com/photo-1590479773265-7464e5d48118?w=400&h=300&fit=crop",alt:"Growth analytics",className:"absolute -right-20 -top-20 opacity-60 rounded-lg"})}),className:"lg:col-start-3 lg:col-end-4 lg:row-start-2 lg:row-end-3"}],W$=()=>(0,k.jsx)("div",{className:"bg-white overflow-hidden",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8",children:(0,k.jsx)(I$,{className:"lg:grid-rows-3",children:V$.map((e=>(0,k.jsx)(T$,(0,S.A)({},e),e.name)))})})}),H$=()=>(0,k.jsx)("div",{className:"bg-gray-50 py-16",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"text-center mb-12",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"See It In Action"}),(0,k.jsx)("p",{className:"mt-4 text-lg text-gray-500 max-w-2xl mx-auto",children:"Our intuitive interface makes it easy to create and manage customer loyalty programs"})]}),(0,k.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[(0,k.jsx)("div",{className:"w-full max-w-sm mx-auto bg-gradient-to-br from-purple-600 to-blue-600 text-white rounded-xl shadow-lg overflow-hidden",children:(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-bold text-lg",children:"Coffee Rewards"}),(0,k.jsx)("p",{className:"text-purple-100",children:"Sarah's Card"})]}),(0,k.jsx)("div",{className:"bg-white/20 text-white text-xs px-2 py-1 rounded-full",children:"Gold Member"})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,k.jsx)("span",{children:"Progress to Free Coffee"}),(0,k.jsx)("span",{children:"8/10"})]}),(0,k.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-white h-2 rounded-full",style:{width:"80%"}})})]}),(0,k.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,k.jsx)("span",{className:"text-sm",children:"Total Points"}),(0,k.jsx)("span",{className:"font-bold text-xl",children:"2,450"})]})]})]})}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg overflow-hidden p-6 flex flex-col justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-bold text-lg text-white",children:"QR Code Scanning"}),(0,k.jsx)("p",{className:"text-blue-100 mt-2",children:"Customers can easily scan QR codes to redeem rewards and offers"})]}),(0,k.jsx)("div",{className:"mt-4 bg-white/20 p-4 rounded-lg",children:(0,k.jsx)("div",{className:"w-32 h-32 bg-white mx-auto rounded-lg flex items-center justify-center",children:(0,k.jsx)("div",{className:"w-24 h-24 bg-gray-800 grid grid-cols-4 grid-rows-4 gap-1 p-2",children:[...Array(16)].map(((e,t)=>(0,k.jsx)("div",{className:"".concat(Math.random()>.5?"bg-white":"bg-transparent")},t)))})})})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg overflow-hidden p-6",children:[(0,k.jsx)("h3",{className:"font-bold text-lg text-white",children:"Customer Analytics"}),(0,k.jsx)("p",{className:"text-green-100 mt-2",children:"Track customer behavior and optimize your marketing efforts"}),(0,k.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsx)("span",{className:"text-white text-sm",children:"New Customers"}),(0,k.jsx)("span",{className:"text-white font-bold",children:"+24%"})]}),(0,k.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-white h-2 rounded-full",style:{width:"75%"}})}),(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsx)("span",{className:"text-white text-sm",children:"Repeat Visits"}),(0,k.jsx)("span",{className:"text-white font-bold",children:"+18%"})]}),(0,k.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-white h-2 rounded-full",style:{width:"65%"}})}),(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsx)("span",{className:"text-white text-sm",children:"Redemption Rate"}),(0,k.jsx)("span",{className:"text-white font-bold",children:"+32%"})]}),(0,k.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2",children:(0,k.jsx)("div",{className:"bg-white h-2 rounded-full",style:{width:"85%"}})})]})]})]})]})}),G$=()=>(0,k.jsx)("div",{className:"bg-white py-16",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)("div",{className:"text-center mb-12",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Advanced Business Tools"}),(0,k.jsx)("p",{className:"mt-4 text-lg text-gray-500 max-w-2xl mx-auto",children:"Professional-grade features that scale with your business growth"})]}),(0,k.jsx)(I$,{className:"lg:grid-rows-2",children:q$.map((e=>(0,k.jsx)(T$,(0,S.A)({},e),e.name)))})]})}),K$=()=>(0,k.jsx)("div",{className:"bg-gray-50 py-16",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Compare Plans and Features"}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-lg",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"py-4 px-6 text-left text-gray-500 font-medium",children:"Feature"}),(0,k.jsx)("th",{className:"py-4 px-6 text-center text-gray-500 font-medium",children:"Free"}),(0,k.jsx)("th",{className:"py-4 px-6 text-center text-gray-500 font-medium",children:"Basic"}),(0,k.jsx)("th",{className:"py-4 px-6 text-center text-gray-500 font-medium",children:"Premium"})]})}),(0,k.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-4 px-6 text-gray-800",children:"Loyalty Programs"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"1"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"3"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Unlimited"})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-4 px-6 text-gray-800",children:"Customer Database"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"100 customers"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"1,000 customers"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Unlimited"})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-4 px-6 text-gray-800",children:"Campaign Management"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Basic"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Advanced"})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-4 px-6 text-gray-800",children:"Analytics & Insights"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Basic"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Standard"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:"Advanced"})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-4 px-6 text-gray-800",children:"Mobile Customer App"}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,k.jsx)("td",{className:"py-4 px-6 text-center text-gray-800",children:(0,k.jsx)("svg",{className:"w-5 h-5 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})]})]})}),(0,k.jsx)("div",{className:"mt-8 text-center",children:(0,k.jsx)(y,{to:"/pricing",className:"inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700",children:"View Full Pricing"})})]})}),Y$=()=>(0,k.jsx)("div",{className:"bg-white py-16",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-12 text-center",children:"Trusted by Businesses Like Yours"}),(0,k.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-blue-600 font-bold text-xl",children:"JC"})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h4",{className:"font-bold text-gray-900",children:"Jane Cooper"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Local Cafe Owner"})]})]}),(0,k.jsx)("p",{className:"text-gray-600",children:'"TYCA has transformed how we engage with our customers. Our loyalty program has increased repeat visits by 40% in just three months."'})]}),(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-green-600 font-bold text-xl",children:"MR"})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h4",{className:"font-bold text-gray-900",children:"Michael Robinson"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Boutique Retail Shop"})]})]}),(0,k.jsx)("p",{className:"text-gray-600",children:'"The customer insights we get from TYCA have helped us tailor our offerings. Our customers love the personalized experience."'})]}),(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{className:"flex items-center mb-4",children:[(0,k.jsx)("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-purple-600 font-bold text-xl",children:"AT"})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("h4",{className:"font-bold text-gray-900",children:"Alicia Thompson"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Salon Owner"})]})]}),(0,k.jsx)("p",{className:"text-gray-600",children:'"Setting up automated campaigns has saved us so much time. Our clients receive timely reminders and we\'ve seen a 25% reduction in no-shows."'})]})]})]})}),Q$=()=>(0,k.jsx)("div",{className:"bg-primary-700",children:(0,k.jsxs)("div",{className:"max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8",children:[(0,k.jsxs)("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:[(0,k.jsx)("span",{className:"block",children:"Ready to transform your business?"}),(0,k.jsx)("span",{className:"block",children:"Start using TYCA today."})]}),(0,k.jsx)("p",{className:"mt-4 text-lg leading-6 text-primary-200",children:"Join thousands of businesses already using TYCA to grow their customer relationships."}),(0,k.jsx)(y,{to:"/register",className:"mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-primary-600 bg-white hover:bg-primary-50 sm:w-auto",children:"Start Your Free Trial"})]})}),$$=()=>(0,k.jsxs)("div",{className:"bg-white",children:[(0,k.jsx)(A$,{}),(0,k.jsx)(W$,{}),(0,k.jsx)(H$,{}),(0,k.jsx)(G$,{}),(0,k.jsx)(K$,{}),(0,k.jsx)(Y$,{}),(0,k.jsx)(Q$,{})]}),J$=(0,e.createContext)({currency:"USD",setCurrency:()=>{},region:"US",setRegion:()=>{},getCurrencySymbol:()=>"$",isLoading:!1}),X$=e=>{let{id:t,name:n,included:r,highlight:s,tooltip:o}=e;return(0,k.jsxs)("li",{className:"flex items-start space-x-3 py-2",children:[r?(0,k.jsx)(SI,{className:"h-5 w-5 flex-shrink-0 text-green-500 mt-0.5","aria-hidden":"true"}):(0,k.jsx)(_I,{className:"h-5 w-5 flex-shrink-0 text-gray-400 mt-0.5","aria-hidden":"true"}),(0,k.jsx)("span",{className:"text-sm ".concat(s?"font-semibold":""," ").concat(r?"text-gray-800":"text-gray-500"),title:o,children:n})]},t)},Z$=e=>{let{plan:t,currency:n,currencySymbol:r}=e;return(0,k.jsxs)("div",{className:"relative rounded-2xl shadow-lg overflow-hidden border-2 ".concat(t.popularPlan?"border-primary-500 ring-2 ring-primary-500":"border-gray-100"," bg-white transform transition-all duration-300 hover:-translate-y-1 hover:shadow-xl"),children:[t.popularPlan&&(0,k.jsx)("div",{className:"absolute top-0 right-0 bg-primary-500 text-white py-1 px-4 rounded-bl-lg text-sm font-medium",children:"Recommended"}),(0,k.jsxs)("div",{className:"p-6 lg:p-8",children:[(0,k.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:t.name}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:t.description}),(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsxs)("p",{className:"flex items-baseline",children:[(0,k.jsx)("span",{className:"text-4xl font-extrabold text-gray-900",children:t.currency===n?HI(t.price,t.currency):HI(t.price,n||t.currency)}),(0,k.jsxs)("span",{className:"ml-1 text-xl font-medium text-gray-500",children:["/",t.billingCycle]})]}),"growth"===t.id&&"ZAR"===t.currency&&(0,k.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Was R249 - reduced for better conversion"}),"professional"===t.id&&"ZAR"===t.currency&&(0,k.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Was R499 - more accessible"})]}),t.valueProposition&&(0,k.jsx)("div",{className:"mt-4 bg-gray-50 p-3 rounded-lg",children:(0,k.jsxs)("p",{className:"text-sm text-gray-700 italic",children:['"',t.valueProposition,'"']})}),(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsx)(y,{to:"/register",className:"block w-full text-center px-6 py-3 border border-transparent rounded-md shadow text-base font-medium ".concat(t.popularPlan?"bg-primary-600 text-white hover:bg-primary-700":0===t.price?"bg-gray-100 text-gray-800 hover:bg-gray-200":"bg-white border-primary-600 text-primary-600 hover:bg-primary-50"," transition-colors duration-200"),children:t.ctaText||"Get started"})})]}),(0,k.jsxs)("div",{className:"px-6 pb-8 lg:px-8",children:[(0,k.jsx)("h4",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide mb-4",children:"What's included"}),(0,k.jsx)("ul",{className:"space-y-1",children:t.features.map((e=>(0,k.jsx)(X$,{id:e.id,name:e.name,included:e.included,highlight:e.highlight,tooltip:e.tooltip},e.id)))})]})]},t.id)},eJ=()=>(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,k.jsxs)("div",{className:"animate-pulse flex flex-col items-center",children:[(0,k.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded mb-8"}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-7xl",children:[1,2,3].map((e=>(0,k.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 h-[600px]",children:[(0,k.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,k.jsx)("div",{className:"h-10 bg-gray-200 rounded w-1/3 mb-6"}),(0,k.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5,6].map((e=>(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("div",{className:"h-5 w-5 rounded-full bg-gray-200"}),(0,k.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"})]},e)))})]},e)))})]})}),tJ=[{id:"starter",name:"Starter",description:"Perfect for: New businesses testing digital coupons",price:0,currency:"USD",billingCycle:"month",features:[{id:"starter-1",name:"Unlimited coupon creation & sending",included:!0},{id:"starter-2",name:"Basic coupon templates",included:!0},{id:"starter-3",name:"Customer management",included:!0},{id:"starter-4",name:"Basic analytics",included:!0},{id:"starter-5",name:"Email support",included:!0},{id:"starter-6",name:"Advanced customization",included:!1}],popularPlan:!1,valueProposition:"Create and share unlimited coupons. Upgrade only when customers start redeeming!",ctaText:"Start for free"},{id:"growth",name:"Growth",description:"Perfect for: Active businesses ready to drive sales",price:11.99,currency:"USD",billingCycle:"month",features:[{id:"growth-1",name:"Everything in Starter",included:!0},{id:"growth-2",name:"Unlimited coupon redemption",included:!0},{id:"growth-3",name:"Advanced coupon templates",included:!0},{id:"growth-4",name:"Customer segmentation",included:!0},{id:"growth-5",name:"Detailed analytics",included:!0},{id:"growth-6",name:"Priority support",included:!0}],popularPlan:!0,valueProposition:"Start converting customers into sales. Pay only when you're ready to redeem!",ctaText:"Start 14-day free trial"},{id:"professional",name:"Professional",description:"Perfect for: Established businesses with regular customers",price:22.99,currency:"USD",billingCycle:"month",features:[{id:"pro-1",name:"Everything in Growth",included:!0},{id:"pro-2",name:"Advanced loyalty programs (tiers, rewards)",included:!0},{id:"pro-3",name:"White-label experience",included:!0},{id:"pro-4",name:"API access",included:!0},{id:"pro-5",name:"Custom integrations",included:!0},{id:"pro-6",name:"Dedicated account manager",included:!0}],popularPlan:!1,valueProposition:"Automate customer retention and scale your marketing efforts.",ctaText:"Start free trial"}],nJ={starter:0,growth:199.99,professional:399.99},rJ=["starter","growth","professional"],sJ=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)(null),{currency:a,setCurrency:l,region:c,setRegion:u,getCurrencySymbol:d,isLoading:h}=(0,e.useContext)(J$),[m,p]=(0,e.useState)(["ZAR","USD","EUR","GBP"]),f=(e,t)=>(console.log("[PricingPage] Applying ".concat(t," pricing to plans")),e.map((e=>{var n;const r=null===(n=e.currencyPrices)||void 0===n?void 0:n.find((e=>e.currencyCode===t));if(r)return console.log("[PricingPage] Found specific ".concat(t," price for ").concat(e.name,": ").concat(r.price)),(0,S.A)((0,S.A)({},e),{},{currency:t,price:r.price});if("ZAR"===t){const t=e.name.toLowerCase(),n=nJ[t];if(void 0!==n)return console.log("[PricingPage] Using hardcoded ZAR price for ".concat(e.name,": ").concat(n)),(0,S.A)((0,S.A)({},e),{},{currency:"ZAR",price:n})}console.log("[PricingPage] No price found for ".concat(e.name," in ").concat(t,", defaulting to ZAR"));const s=e.name.toLowerCase(),o=nJ[s];return void 0!==o?(0,S.A)((0,S.A)({},e),{},{currency:"ZAR",price:o}):(console.warn("[PricingPage] No pricing found for ".concat(e.name," in any currency")),(0,S.A)((0,S.A)({},e),{},{currency:"ZAR"}))}))),g=e=>[...e].sort(((e,t)=>{if(void 0!==e.displayOrder&&void 0!==t.displayOrder)return e.displayOrder-t.displayOrder;const n=rJ.indexOf(e.name.toLowerCase()),r=rJ.indexOf(t.name.toLowerCase());return-1!==n&&-1!==r?n-r:-1!==n?-1:-1!==r?1:e.name.localeCompare(t.name)}));(0,e.useEffect)((()=>{(async()=>{try{s(!0),i(null),console.log("[PricingPage] Fetching pricing plans for currency: ".concat(a)),console.log("[PricingPage] Attempting to fetch plans from pricing_plans collection");const e=await TS.getPricingPlans();if(e&&e.length>0){console.log("[PricingPage] Successfully fetched ".concat(e.length," plans from Firestore"));const t=e.filter((e=>!1!==e.active));console.log("[PricingPage] Filtered to ".concat(t.length," active plans"));const r=f(t,a),s=g(r);console.log("[PricingPage] Plans sorted by displayOrder:",s.map((e=>"".concat(e.name," (order: ").concat(void 0!==e.displayOrder?e.displayOrder:"not set",")")))),n(s)}else{console.log("[PricingPage] No plans found in Firestore, using fallback data");const e=f(tJ,a),t=g(e);n(t)}}catch(zZ){console.error("[PricingPage] Error fetching pricing plans:",zZ),i("Failed to load pricing plans. Please try again later.");const t=f(tJ,a),r=g(t);n(r)}finally{s(!1)}})()}),[a]);return r||h?(0,k.jsx)(eJ,{}):(0,k.jsxs)("div",{className:"pricing-page container mx-auto px-4 py-12 max-w-7xl",children:[(0,k.jsxs)("div",{className:"text-center mb-16",children:[(0,k.jsx)("h1",{className:"text-5xl font-bold mb-6",children:"Simple, Transparent Pricing"}),(0,k.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Free Forever: Generate & send unlimited coupons. Pay only when you see value."})]}),(0,k.jsx)("div",{className:"flex justify-end mb-8",children:(0,k.jsx)(Ja,{defaultCurrency:a,defaultRegion:c,onCurrencyChange:e=>{console.log("[PricingPage] Setting currency to:",e),localStorage.setItem("userExplicitCurrencyChoice","true"),l(e)},onRegionChange:e=>{console.log("[PricingPage] Setting region to:",e),u(e)}})}),o&&(0,k.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-8",children:(0,k.jsx)("p",{children:o})}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e=>(0,k.jsx)(Z$,{plan:e,currency:a,currencySymbol:d(a)},e.id||e.name)))}),(0,k.jsxs)("div",{className:"mt-16 text-center",children:[(0,k.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Need a custom plan for your business?"}),(0,k.jsx)("p",{className:"text-gray-600 mb-6",children:"Contact our sales team to discuss a tailored solution for your specific needs."}),(0,k.jsx)("a",{href:"mailto:sales@coupin.app",className:"inline-block bg-primary text-white px-6 py-3 rounded-lg font-medium hover:bg-primary-dark transition-colors",children:"Contact Sales"})]})]})},oJ=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),o=_G({initialValues:{name:"",email:"",phone:"",message:""},validationSchema:ZK({name:PK().required("Name is required"),email:PK().email("Invalid email address").required("Email is required"),message:PK().required("Message is required")}),onSubmit:async e=>{n(!0);try{await new Promise((e=>setTimeout(e,1e3))),s(!0),bj.success("Your message has been sent!")}catch(t){bj.error("Failed to send message. Please try again.")}finally{n(!1)}}});return(0,k.jsxs)("div",{className:"bg-white",children:[(0,k.jsx)("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:py-24 lg:px-8",children:(0,k.jsxs)("div",{className:"divide-y-2 divide-gray-200",children:[(0,k.jsxs)("div",{className:"lg:grid lg:grid-cols-3 lg:gap-8",children:[(0,k.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Get in touch"}),(0,k.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-12 sm:grid-cols-2 sm:gap-x-8 sm:gap-y-12 lg:mt-0 lg:col-span-2",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Support"}),(0,k.jsxs)("dl",{className:"mt-2 text-base text-gray-500",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("dt",{className:"sr-only",children:"Email"}),(0,k.jsx)("dd",{children:"support@coupin.com"}),(0,k.jsx)("dd",{children:"support@regulist.com"})]}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("dt",{className:"sr-only",children:"Phone number"}),(0,k.jsx)("dd",{children:"+1 (555) 123-4567"})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Sales"}),(0,k.jsxs)("dl",{className:"mt-2 text-base text-gray-500",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("dt",{className:"sr-only",children:"Email"}),(0,k.jsx)("dd",{children:"sales@coupin.com"}),(0,k.jsx)("dd",{children:"sales@regulist.com"})]}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("dt",{className:"sr-only",children:"Phone number"}),(0,k.jsx)("dd",{children:"+1 (555) 789-0123"})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Press"}),(0,k.jsx)("dl",{className:"mt-2 text-base text-gray-500",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("dt",{className:"sr-only",children:"Email"}),(0,k.jsx)("dd",{children:"press@coupin.com"}),(0,k.jsx)("dd",{children:"press@regulist.com"})]})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Join our team"}),(0,k.jsx)("dl",{className:"mt-2 text-base text-gray-500",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("dt",{className:"sr-only",children:"Email"}),(0,k.jsx)("dd",{children:"careers@coupin.com"}),(0,k.jsx)("dd",{children:"careers@regulist.com"})]})})]})]})]}),(0,k.jsxs)("div",{className:"mt-16 pt-16 lg:grid lg:grid-cols-3 lg:gap-8",children:[(0,k.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Locations"}),(0,k.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-12 sm:grid-cols-2 sm:gap-x-8 sm:gap-y-12 lg:mt-0 lg:col-span-2",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Cape Town"}),(0,k.jsxs)("div",{className:"mt-2 text-base text-gray-500",children:[(0,k.jsx)("p",{children:"123 Main Street"}),(0,k.jsx)("p",{className:"mt-1",children:"Cape Town, 8001"}),(0,k.jsx)("p",{className:"mt-1",children:"South Africa"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Johannesburg"}),(0,k.jsxs)("div",{className:"mt-2 text-base text-gray-500",children:[(0,k.jsx)("p",{children:"456 Market Street"}),(0,k.jsx)("p",{className:"mt-1",children:"Johannesburg, 2000"}),(0,k.jsx)("p",{className:"mt-1",children:"South Africa"})]})]})]})]})]})}),(0,k.jsx)("div",{className:"bg-gray-50",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:py-24 lg:px-8",children:(0,k.jsxs)("div",{className:"max-w-lg mx-auto md:max-w-none md:grid md:grid-cols-2 md:gap-8",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-2xl font-extrabold text-gray-900 sm:text-3xl",children:"Send us a message"}),(0,k.jsx)("p",{className:"mt-3 text-lg text-gray-500",children:"Have a question or feedback? We'd love to hear from you."})]}),(0,k.jsx)("div",{className:"mt-8 md:mt-0",children:r?(0,k.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Message sent"}),(0,k.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,k.jsx)("p",{children:"Thank you for your message! We'll get back to you as soon as possible."})}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsx)("button",{type:"button",onClick:()=>{s(!1),o.resetForm()},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Send another message"})})]})]})}):(0,k.jsxs)("form",{onSubmit:o.handleSubmit,className:"grid grid-cols-1 gap-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{type:"text",name:"name",id:"name",autoComplete:"name",className:"form-input",value:o.values.name,onChange:o.handleChange,onBlur:o.handleBlur}),o.touched.name&&o.errors.name?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:o.errors.name}):null]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:"form-input",value:o.values.email,onChange:o.handleChange,onBlur:o.handleBlur}),o.touched.email&&o.errors.email?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:o.errors.email}):null]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone (optional)"}),(0,k.jsx)("div",{className:"mt-1",children:(0,k.jsx)("input",{type:"text",name:"phone",id:"phone",autoComplete:"tel",className:"form-input",value:o.values.phone,onChange:o.handleChange,onBlur:o.handleBlur})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Message"}),(0,k.jsxs)("div",{className:"mt-1",children:[(0,k.jsx)("textarea",{id:"message",name:"message",rows:4,className:"form-input",value:o.values.message,onChange:o.handleChange,onBlur:o.handleBlur}),o.touched.message&&o.errors.message?(0,k.jsx)("div",{className:"text-red-500 text-sm mt-1",children:o.errors.message}):null]})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{type:"submit",disabled:t,className:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Message"})})]})})]})})})]})},iJ=e=>{let{title:t="What Our Customers Say",subtitle:n="Discover how our solutions have helped businesses like yours succeed"}=e;return(0,k.jsx)("div",{className:"relative bg-gradient-to-b from-primary-50 to-white dark:from-gray-900 dark:to-gray-800 py-16 md:py-24",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,k.jsx)(gg.h1,{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t}),(0,k.jsx)(gg.p,{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:n}),(0,k.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[(0,k.jsx)("div",{className:"absolute -top-10 -left-10 w-40 h-40 bg-primary-200 dark:bg-primary-900 rounded-full opacity-20"}),(0,k.jsx)("div",{className:"absolute top-1/4 -right-20 w-60 h-60 bg-primary-300 dark:bg-primary-800 rounded-full opacity-10"}),(0,k.jsx)("div",{className:"absolute -bottom-20 left-1/3 w-80 h-80 bg-primary-100 dark:bg-primary-700 rounded-full opacity-10"})]})]})})};function aJ(e,t,n,r){const s=function(e){const t=1024,n=1456;return e<=t?60:e>=n?Math.max(60,86+.06018*(e-n)):60+(e-t)/432*26}(r),o=.8*s,i=(t+1)%n===e;return e===t?{zIndex:3,opacity:1,pointerEvents:"auto",transform:"translateX(0px) translateY(0px) scale(1) rotateY(0deg)",transition:"all 0.8s cubic-bezier(.4,2,.3,1)"}:(t-1+n)%n===e?{zIndex:2,opacity:1,pointerEvents:"auto",transform:"translateX(-".concat(s,"px) translateY(-").concat(o,"px) scale(0.85) rotateY(15deg)"),transition:"all 0.8s cubic-bezier(.4,2,.3,1)"}:i?{zIndex:2,opacity:1,pointerEvents:"auto",transform:"translateX(".concat(s,"px) translateY(-").concat(o,"px) scale(0.85) rotateY(-15deg)"),transition:"all 0.8s cubic-bezier(.4,2,.3,1)"}:{zIndex:1,opacity:0,pointerEvents:"none",transition:"all 0.8s cubic-bezier(.4,2,.3,1)"}}const lJ=e=>{let{direction:t,onClick:n,backgroundColor:r,foregroundColor:s,onMouseEnter:o,onMouseLeave:i}=e;const a="next"===t;return(0,k.jsx)("button",{className:"arrow-button ".concat(t,"-button"),onClick:n,style:{backgroundColor:r},onMouseEnter:o,onMouseLeave:i,"aria-label":"".concat(a?"Next":"Previous"," testimonial"),children:(0,k.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:s},children:(0,k.jsx)("path",{d:a?"M9 5L16 12L9 19":"M15 19L8 12L15 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},cJ={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},uJ=e=>{let{testimonial:t,colorName:n,colorDesignation:r,colorTestimony:s,fontSizeName:o,fontSizeDesignation:i,fontSizeQuote:a}=e;return(0,k.jsxs)(gg.div,{variants:cJ,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3,ease:"easeInOut"},children:[(0,k.jsx)("h3",{className:"name",style:{color:n,fontSize:o},children:t.name}),(0,k.jsx)("p",{className:"designation",style:{color:r,fontSize:i},children:t.designation}),(0,k.jsx)(gg.p,{className:"quote",style:{color:s,fontSize:a},children:t.quote.split(" ").map(((e,t)=>(0,k.jsxs)(gg.span,{initial:{filter:"blur(10px)",opacity:0,y:5},animate:{filter:"blur(0px)",opacity:1,y:0},transition:{duration:.22,ease:"easeInOut",delay:.025*t},style:{display:"inline-block"},children:[e,"\xa0"]},t)))})]})},dJ=t=>{var n,r,s,o,i,a,l,c,u;let{testimonials:d,autoplay:h=!0,colors:m={},fontSizes:p={}}=t;const f=null!==(n=m.name)&&void 0!==n?n:"#000",g=null!==(r=m.designation)&&void 0!==r?r:"#6b7280",y=null!==(s=m.testimony)&&void 0!==s?s:"#4b5563",v=null!==(o=m.arrowBackground)&&void 0!==o?o:"#141414",x=null!==(i=m.arrowForeground)&&void 0!==i?i:"#f1f1f7",b=null!==(a=m.arrowHoverBackground)&&void 0!==a?a:"#00a6fb",w=null!==(l=p.name)&&void 0!==l?l:"1.5rem",N=null!==(c=p.designation)&&void 0!==c?c:"0.925rem",j=null!==(u=p.quote)&&void 0!==u?u:"1.125rem",[C,S]=(0,e.useState)(0),[A,E]=(0,e.useState)(!1),[_,I]=(0,e.useState)(!1),[T,P]=(0,e.useState)(1200),R=(0,e.useRef)(null),D=(0,e.useRef)(null),M=(0,e.useMemo)((()=>d.length),[d]),L=(0,e.useMemo)((()=>d[C]),[C,d]);(0,e.useEffect)((()=>{function e(){R.current&&P(R.current.offsetWidth)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,e.useEffect)((()=>(h&&(D.current=setInterval((()=>{S((e=>(e+1)%M))}),5e3)),()=>{D.current&&clearInterval(D.current)})),[h,M]),(0,e.useEffect)((()=>{const e=e=>{"ArrowLeft"===e.key&&F(),"ArrowRight"===e.key&&O()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[C,M]);const O=(0,e.useCallback)((()=>{S((e=>(e+1)%M)),D.current&&clearInterval(D.current)}),[M]),F=(0,e.useCallback)((()=>{S((e=>(e-1+M)%M)),D.current&&clearInterval(D.current)}),[M]);return(0,k.jsxs)("div",{className:"testimonial-container",children:[(0,k.jsxs)("div",{className:"testimonial-grid",children:[(0,k.jsx)("div",{className:"image-container",ref:R,children:d.map(((e,t)=>(0,k.jsx)("img",{src:e.src,alt:e.name,className:"testimonial-image","data-index":t,style:aJ(t,C,M,T)},e.src)))}),(0,k.jsxs)("div",{className:"testimonial-content",children:[(0,k.jsx)(Ig,{mode:"wait",children:(0,k.jsx)(uJ,{testimonial:L,colorName:f,colorDesignation:g,colorTestimony:y,fontSizeName:w,fontSizeDesignation:N,fontSizeQuote:j},C)}),(0,k.jsxs)("div",{className:"arrow-buttons",children:[(0,k.jsx)(lJ,{direction:"prev",onClick:F,backgroundColor:A?b:v,foregroundColor:x,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1)}),(0,k.jsx)(lJ,{direction:"next",onClick:O,backgroundColor:_?b:v,foregroundColor:x,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1)})]})]})]}),(0,k.jsx)("style",{children:"\n.testimonial-container {\n  width: 100%;\n  max-width: 56rem;\n  padding: 2rem;\n}\n\n.testimonial-grid {\n  display: grid;\n  gap: 5rem;\n}\n\n.image-container {\n  position: relative;\n  width: 100%;\n  height: 24rem;\n  perspective: 1000px;\n}\n\n.testimonial-image {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 1.5rem;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n}\n\n.testimonial-content {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.name {\n  font-weight: bold;\n  margin-bottom: 0.25rem;\n}\n\n.designation {\n  margin-bottom: 2rem;\n}\n\n.quote {\n  line-height: 1.75;\n}\n\n.arrow-buttons {\n  display: flex;\n  gap: 1.5rem;\n  padding-top: 3rem;\n}\n\n.arrow-button {\n  width: 2.7rem;\n  height: 2.7rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  border: none;\n}\n\n.word {\n  display: inline-block;\n}\n\n@media (min-width: 768px) {\n  .testimonial-grid {\n    grid-template-columns: 1fr 1fr;\n  }\n  \n  .arrow-buttons {\n    padding-top: 0;\n  }\n}\n"})]})},hJ=dJ,mJ=e=>{let{testimonial:t,index:n}=e;return(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*n},className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 flex flex-col h-full",children:[(0,k.jsxs)("div",{className:"flex-grow",children:[(0,k.jsx)("div",{className:"flex items-center mb-4",children:Array.from({length:t.rating||5}).map(((e,t)=>(0,k.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),(0,k.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 italic",children:['"',t.quote,'"']})]}),(0,k.jsxs)("div",{className:"flex items-center mt-4",children:[(0,k.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden mr-4",children:(0,k.jsx)("img",{src:t.src,alt:t.name,className:"w-full h-full object-cover"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),(0,k.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.designation}),t.company&&(0,k.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:t.company})]})]})]})},pJ=e=>{let{testimonials:t,columns:n=3}=e;const r="grid gap-6 md:gap-8 grid-cols-1 md:grid-cols-2 lg:grid-cols-".concat(Math.min(n,4));return(0,k.jsx)("div",{className:r,children:t.map(((e,t)=>(0,k.jsx)(mJ,{testimonial:e,index:t},e.id)))})},fJ=e=>{let{categories:t,activeCategory:n,onCategoryChange:r}=e;return(0,k.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 md:gap-4 mb-8",children:[(0,k.jsx)(gg.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat("all"===n?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700"),onClick:()=>r("all"),children:"All"}),t.map((e=>(0,k.jsx)(gg.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(n===e?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700"),onClick:()=>r(e),children:e},e)))]})},gJ=e=>{let{stats:t=[{value:"97%",label:"Customer Satisfaction",description:"Based on post-purchase surveys"},{value:"2,500+",label:"Businesses Served",description:"Across various industries"},{value:"15M+",label:"Coupons Redeemed",description:"Driving customer loyalty"},{value:"30%",label:"Average Revenue Increase",description:"For businesses using our platform"}]}=e;return(0,k.jsx)("div",{className:"bg-white dark:bg-gray-800 py-12 md:py-16",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsx)("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:t.map(((e,t)=>(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1*t},className:"text-center p-6 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-sm",children:[(0,k.jsx)(gg.p,{className:"text-4xl font-bold text-primary-600 dark:text-primary-400",initial:{scale:.8},whileInView:{scale:1},viewport:{once:!0},transition:{type:"spring",stiffness:200,damping:10,delay:.2+.1*t},children:e.value}),(0,k.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-white",children:e.label}),e.description&&(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:e.description})]},t)))})})})},yJ=e=>{let{title:t="Ready to transform your business?",description:n="Join thousands of businesses that have already boosted their customer engagement and revenue with our platform.",buttonText:r="Get Started Today",buttonLink:s="/register?type=business"}=e;return(0,k.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-800 dark:to-primary-900",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between",children:[(0,k.jsxs)(gg.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},children:[(0,k.jsx)("h2",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:(0,k.jsx)("span",{className:"block",children:t})}),(0,k.jsx)("p",{className:"mt-4 text-lg text-primary-100 max-w-3xl",children:n})]}),(0,k.jsx)("div",{className:"mt-8 flex lg:mt-0 lg:flex-shrink-0",children:(0,k.jsx)(gg.div,{className:"inline-flex rounded-md shadow",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,k.jsx)(y,{to:s,className:"inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-primary-600 bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10",children:r})})})]})})};const vJ=new class{constructor(){this.COLLECTION_NAME="testimonials"}async getTestimonials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{featured:t,category:n,limit:r=100,orderByField:s="createdAt",orderDirection:o="desc"}=e;let i=(0,sl.rJ)(rl.db,this.COLLECTION_NAME),a=[];void 0!==t&&a.push((0,sl._M)("featured","==",t)),n&&a.push((0,sl._M)("category","==",n)),a.push((0,sl.My)(s,o)),a.push((0,sl.AB)(r));return(await(0,sl.GG)((0,sl.P)(i,...a))).docs.map((e=>{var t;const n=e.data();return(0,S.A)((0,S.A)({id:e.id},n),{},{createdAt:(null===(t=n.createdAt)||void 0===t?void 0:t.toDate())||new Date})}))}catch(t){throw console.error("Error fetching testimonials:",t),t}}async getFeaturedTestimonials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return this.getTestimonials({featured:!0,limit:e,orderByField:"createdAt",orderDirection:"desc"})}async getTestimonialById(e){try{var t;const n=await(0,sl.x7)((0,sl.H9)(rl.db,this.COLLECTION_NAME,e));if(!n.exists())return null;const r=n.data();return(0,S.A)((0,S.A)({id:n.id},r),{},{createdAt:(null===(t=r.createdAt)||void 0===t?void 0:t.toDate())||new Date})}catch(n){throw console.error("Error fetching testimonial with ID ".concat(e,":"),n),n}}async getTestimonialsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.getTestimonials({category:e,limit:t,orderByField:"createdAt",orderDirection:"desc"})}async addTestimonial(e){try{const t=(0,S.A)((0,S.A)({},e),{},{createdAt:new Date});return(await(0,sl.gS)((0,sl.rJ)(rl.db,this.COLLECTION_NAME),t)).id}catch(t){throw console.error("Error adding testimonial:",t),t}}async updateTestimonial(e,t){try{const n=(0,sl.H9)(rl.db,this.COLLECTION_NAME,e);await(0,sl.mZ)(n,t)}catch(n){throw console.error("Error updating testimonial with ID ".concat(e,":"),n),n}}async deleteTestimonial(e){try{const t=(0,sl.H9)(rl.db,this.COLLECTION_NAME,e);await(0,sl.kd)(t)}catch(t){throw console.error("Error deleting testimonial with ID ".concat(e,":"),t),t}}},xJ=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,e.useState)([]),[s,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)("all");(0,e.useEffect)((()=>{(async()=>{try{a(!0),c(null);const e=(0,S.A)((0,S.A)({},t),{},{category:"all"!==u?u:void 0}),n=await vJ.getTestimonials(e);if(r(n),0===s.length){const e=await vJ.getTestimonials(),t=Array.from(new Set(e.map((e=>e.category)).filter(Boolean)));o(t)}}catch(zZ){console.error("Error fetching testimonials:",zZ),c("Failed to load testimonials. Please try again later.")}finally{a(!1)}})()}),[t.featured,t.limit,u]);const h=(0,e.useMemo)((()=>n.filter((e=>e.featured)).slice(0,3)),[n]);return{testimonials:n,featuredTestimonials:h,categories:s,loading:i,error:l,activeCategory:u,setActiveCategory:d}},bJ=()=>{const{testimonials:t,featuredTestimonials:n,categories:r,loading:s,error:o,activeCategory:i,setActiveCategory:a}=xJ();(0,e.useEffect)((()=>{window.scrollTo(0,0)}),[]);const l=n.length>0?n:t.slice(0,3);return(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,k.jsx)(iJ,{}),(0,k.jsx)("section",{className:"py-16 md:py-24",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Featured Testimonials"}),(0,k.jsx)("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Hear from our satisfied customers about their experience"})]}),s?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-600"})}):o?(0,k.jsxs)("div",{className:"text-center text-red-500 py-8",children:[(0,k.jsx)("p",{children:o}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",children:"Try Again"})]}):l.length>0?(0,k.jsx)("div",{className:"flex justify-center",children:(0,k.jsx)(hJ,{testimonials:l,autoplay:!0,colors:{name:"#111827",designation:"#4B5563",testimony:"#1F2937",arrowBackground:"#111827",arrowForeground:"#F9FAFB",arrowHoverBackground:"#4F46E5"}})}):(0,k.jsx)("div",{className:"text-center py-12",children:(0,k.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No featured testimonials available."})})]})}),(0,k.jsx)(gJ,{stats:[{value:"97%",label:"Customer Satisfaction",description:"Based on post-purchase surveys"},{value:"2,500+",label:"Businesses Served",description:"Across various industries"},{value:"15M+",label:"Coupons Redeemed",description:"Driving customer loyalty"},{value:"30%",label:"Average Revenue Increase",description:"For businesses using our platform"}]}),(0,k.jsx)("section",{className:"py-16 md:py-24 bg-white dark:bg-gray-800",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"All Testimonials"}),(0,k.jsx)("p",{className:"mt-4 text-xl text-gray-600 dark:text-gray-300",children:"Filter by category to find relevant customer stories"})]}),r.length>0&&(0,k.jsx)(fJ,{categories:r,activeCategory:i,onCategoryChange:a}),s?(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-600"})}):o?(0,k.jsx)("div",{className:"text-center text-red-500 py-8",children:(0,k.jsx)("p",{children:o})}):t.length>0?(0,k.jsx)(pJ,{testimonials:t,columns:3}):(0,k.jsx)("div",{className:"text-center py-12",children:(0,k.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No testimonials available for this category."})})]})}),(0,k.jsx)(yJ,{})]})},wJ=()=>(0,k.jsx)("div",{className:"py-16 bg-white",children:(0,k.jsxs)("div",{className:"container mx-auto px-4",children:[(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-16",children:[(0,k.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"About TYCA"}),(0,k.jsx)("p",{className:"text-lg text-gray-600 leading-relaxed",children:"TYCA is a modern digital platform designed to help small businesses build stronger customer relationships, increase loyalty, and grow their business with powerful yet easy-to-use tools."})]}),(0,k.jsxs)("div",{className:"grid md:grid-cols-2 gap-12 max-w-5xl mx-auto mb-16",children:[(0,k.jsxs)(gg.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"space-y-4",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold",children:"Our Mission"}),(0,k.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"We believe that small businesses deserve powerful tools that are both affordable and easy to use. Our mission is to empower small business owners with technology that helps them compete effectively in today's digital marketplace."})]}),(0,k.jsxs)(gg.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"space-y-4",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold",children:"Our Vision"}),(0,k.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"We envision a world where small businesses thrive by building meaningful connections with their customers. Through our platform, we aim to make customer relationship management accessible to businesses of all sizes."})]})]}),(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"max-w-3xl mx-auto text-center mb-16",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Our Values"}),(0,k.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-8",children:[(0,k.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Simplicity"}),(0,k.jsx)("p",{className:"text-gray-600",children:"We believe in making complex technology simple and accessible."})]}),(0,k.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Innovation"}),(0,k.jsx)("p",{className:"text-gray-600",children:"We continuously improve our platform with new features and capabilities."})]}),(0,k.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg",children:[(0,k.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Customer Focus"}),(0,k.jsx)("p",{className:"text-gray-600",children:"We put our customers' needs at the center of everything we do."})]})]})]}),(0,k.jsxs)(gg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"max-w-4xl mx-auto",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-center mb-8",children:"Our Team"}),(0,k.jsx)("p",{className:"text-gray-600 text-center mb-12",children:"TYCA is built by a passionate team of developers, designers, and business experts who are committed to helping small businesses succeed in the digital age."})]})]})}),NJ=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),{user:o}=(0,N.A)();null===o||void 0===o||o.role;return(0,e.useEffect)((()=>{(async()=>{s(!0);const e=await oQ.getTimelineEntries();n(e),s(!1)})()}),[]),(0,k.jsx)("div",{className:"py-16 bg-gray-50",children:(0,k.jsxs)("div",{className:"container mx-auto px-4",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-center mb-12",children:"Our Journey"}),r?(0,k.jsx)("div",{className:"flex justify-center",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-gradient-to-b from-primary to-secondary"}),(0,k.jsxs)("div",{className:"space-y-12",children:[t.map(((e,t)=>(0,k.jsxs)("div",{className:"flex items-center ".concat(t%2===0?"flex-row":"flex-row-reverse"),children:[(0,k.jsx)("div",{className:"w-5/12",children:(0,k.jsxs)("div",{className:"p-6 rounded-lg shadow-lg bg-white ".concat(t%2===0?"mr-8":"ml-8"),children:[(0,k.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:e.title}),e.description&&(0,k.jsx)("p",{className:"mt-2 text-gray-600",children:e.description})]})}),(0,k.jsx)("div",{className:"w-2/12 flex justify-center",children:(0,k.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary text-white flex items-center justify-center font-bold z-10",children:e.year})}),(0,k.jsx)("div",{className:"w-5/12"})]},e.id))),0===t.length&&(0,k.jsx)("div",{className:"text-center py-8",children:(0,k.jsx)("p",{className:"text-gray-500",children:"No timeline entries yet."})})]})]})]})})},jJ=t=>{let{onEntryAdded:n}=t;const[r,s]=(0,e.useState)(!1),[o,i]=(0,e.useState)({year:(new Date).getFullYear().toString(),title:""}),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(""),d=e=>{const{name:t,value:n}=e.target;i((e=>(0,S.A)((0,S.A)({},e),{},{[t]:n})))};return(0,k.jsxs)("div",{className:"mb-8 bg-white p-6 rounded-lg shadow-md",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsx)("h3",{className:"text-xl font-semibold",children:"Timeline Management"}),!r&&(0,k.jsx)("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary/80 transition",children:"Add New Entry"})]}),r&&(0,k.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.year&&o.title){l(!0),u("");try{await oQ.addTimelineEntry(o),i({year:(new Date).getFullYear().toString(),title:"",description:""}),s(!1),n()}catch(zZ){u("Failed to add timeline entry"),console.error(zZ)}finally{l(!1)}}else u("Year and title are required")},className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),(0,k.jsx)("input",{type:"text",id:"year",name:"year",value:o.year,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., 2025"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,k.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., Built and Launched TYCA"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),(0,k.jsx)("textarea",{id:"description",name:"description",value:o.description||"",onChange:d,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Add more details about this milestone..."})]}),c&&(0,k.jsx)("p",{className:"text-red-500 text-sm",children:c}),(0,k.jsxs)("div",{className:"flex space-x-3",children:[(0,k.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary/80 transition disabled:opacity-50",children:a?"Adding...":"Add Entry"}),(0,k.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition",children:"Cancel"})]})]})]})},kJ=()=>{const{user:t}=(0,N.A)(),n="admin"===(null===t||void 0===t?void 0:t.role),[r,s]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{0===(await oQ.getTimelineEntries()).length&&await oQ.addTimelineEntry({year:"2025",title:"Built and Launched TYCA",description:"TYCA was officially launched as a modern digital platform for small businesses."})})()}),[]);return(0,k.jsxs)("div",{className:"bg-white min-h-screen",children:[(0,k.jsx)(wJ,{}),(0,k.jsxs)("div",{className:"bg-gray-50 py-12",children:[n&&(0,k.jsx)("div",{className:"container mx-auto px-4",children:(0,k.jsx)(jJ,{onEntryAdded:()=>{s((e=>!e))}})}),(0,k.jsx)(NJ,{},r?"refresh":"initial")]})]})},CJ=()=>{const[t,n]=(0,e.useState)(!1),r=(0,e.useRef)(!1),s=(0,e.useRef)(null);return(0,e.useEffect)((()=>{if(r.current)return;const e=new URLSearchParams(window.location.search);if(!(e.has("code")||e.has("state")||window.location.hash.includes("access_token")))return console.log("[RedirectAuthHandler] DISABLED - No redirect parameters found, skipping redirect check"),void(r.current=!0);console.log("[RedirectAuthHandler] DISABLED - Skipping redirect result check to prevent race conditions"),r.current=!0}),[]),(0,e.useEffect)((()=>()=>{s.current&&(clearTimeout(s.current),s.current=null)}),[]),null},SJ=()=>{const{user:t}=(0,N.A)();return(0,e.useEffect)((()=>{t&&(async e=>{if(e&&"phathizwe@gmail.com"===e.email)try{const t=(0,sl.H9)(rl.db,"users",e.uid),n=await(0,sl.x7)(t);let r=!1;n.exists()?"admin"!==n.data().role&&(await(0,sl.mZ)(t,{role:"admin",updatedAt:new Date}),console.log("User phathizwe@gmail.com has been set as admin"),r=!0):(await(0,sl.BN)(t,{uid:e.uid,email:e.email,displayName:e.displayName||"Admin User",role:"admin",createdAt:new Date,updatedAt:new Date}),console.log("Created new admin user for phathizwe@gmail.com"),r=!0),r&&(console.log("Role was updated, reloading page to refresh auth state..."),localStorage.setItem("adminRoleUpdated","true"),setTimeout((()=>{window.location.reload()}),1e3))}catch(t){console.error("Error setting up admin user:",t)}})(t)}),[t]),null},AJ=(0,e.createContext)({colors:nV.$k}),EJ=e=>{let{children:t}=e;const n={colors:nV.$k};return(0,k.jsx)(AJ.Provider,{value:n,children:t})};function _J(){return(0,k.jsx)("div",{children:(0,k.jsx)(C$,{})})}const IJ=(0,e.createContext)(void 0),TJ=t=>{let{children:n}=t;const{user:r}=(0,N.A)(),[s,o]=(0,e.useState)([]),[i,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null),u=async()=>{let e=(null===r||void 0===r?void 0:r.businessId)||(null===r||void 0===r?void 0:r.currentBusinessId);if(!e&&"business"===(null===r||void 0===r?void 0:r.role)&&null!==r&&void 0!==r&&r.uid&&(e=r.uid,console.log("Using user ID as business ID for fetching customers:",e)),e){console.log("[CustomerContext] Fetching customers with business ID:",e),a(!0),c(null);try{const t=(0,sl.rJ)(rl.db,"customers"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e)),r=await(0,sl.GG)(n),s=[...r.docs.map((e=>(0,S.A)({id:e.id},e.data())))].sort(((e,t)=>e.lastVisit&&t.lastVisit?t.lastVisit.seconds-e.lastVisit.seconds:e.lastVisit&&!t.lastVisit?-1:!e.lastVisit&&t.lastVisit?1:e.joinDate&&t.joinDate?t.joinDate.seconds-e.joinDate.seconds:e.firstName.localeCompare(t.firstName)));o(s)}catch(zZ){console.error("Error fetching customers:",zZ),c("Failed to load customers. Please try again.")}finally{a(!1)}}else console.log("[CustomerContext] No business ID found - user:",{uid:null===r||void 0===r?void 0:r.uid,role:null===r||void 0===r?void 0:r.role,businessId:null===r||void 0===r?void 0:r.businessId,currentBusinessId:null===r||void 0===r?void 0:r.currentBusinessId})};return(0,e.useEffect)((()=>{u()}),[null===r||void 0===r?void 0:r.businessId,null===r||void 0===r?void 0:r.currentBusinessId,null===r||void 0===r?void 0:r.role,null===r||void 0===r?void 0:r.uid]),(0,k.jsx)(IJ.Provider,{value:{customers:s,isLoading:i,error:l,addCustomer:async e=>{let t=(null===r||void 0===r?void 0:r.businessId)||(null===r||void 0===r?void 0:r.currentBusinessId);if(!t&&"business"===(null===r||void 0===r?void 0:r.role)&&null!==r&&void 0!==r&&r.uid&&(t=r.uid,console.log("Using user ID as business ID for user with business role:",t)),!t)throw new Error("User business ID not found. Please ensure you are logged in with a business account.");try{const n={businessId:t,firstName:e.firstName,lastName:e.lastName,phone:e.phone,joinDate:sl.Dc.now(),lastVisit:sl.Dc.now(),totalVisits:1,totalSpent:0},r=await(0,sl.gS)((0,sl.rJ)(rl.db,"customers"),n),s=(0,S.A)({id:r.id},n);return o((e=>[s,...e])),s}catch(zZ){throw console.error("Error adding customer:",zZ),zZ}},refreshCustomers:async()=>{await u()}},children:n})},PJ=e=>{let{searchQuery:t,onSearchChange:n,onAddCustomer:r,onSelectAll:s,isAllSelected:o,totalCustomers:i,placeholder:a="Search customers..."}=e;return(0,k.jsxs)("div",{className:"p-4 border-b",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h2",{className:"text-sm font-medium text-gray-600",children:"SELECT CUSTOMERS"}),s&&(0,k.jsx)("button",{onClick:s,className:"text-sm text-blue-600",children:o?"Deselect All":"Select All"})]}),(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,k.jsx)("svg",{className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),r&&(0,k.jsxs)("button",{onClick:r,className:"w-full mt-3 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center justify-center",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"ADD NEW CUSTOMER"]})]})},RJ=e=>{var t;let{customer:n,isSelected:r,onSelect:s}=e;return(0,k.jsxs)("li",{className:"p-3 flex items-center",children:[(0,k.jsx)("input",{type:"checkbox",checked:r,onChange:()=>s(n.id),className:"h-5 w-5 text-blue-600 mr-3"}),(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3 flex-shrink-0",children:(0,k.jsxs)("span",{className:"text-gray-600 font-medium",children:[n.firstName.charAt(0),n.lastName.charAt(0)]})}),(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsxs)("p",{className:"font-medium truncate",children:[n.firstName," ",n.lastName]}),(0,k.jsx)("p",{className:"text-sm text-gray-500 truncate",children:n.phone})]}),(0,k.jsx)("div",{className:"text-xs text-gray-500",children:null!==(t=n.lastVisit)&&void 0!==t&&t.toDate?new Date(n.lastVisit.toDate()).toLocaleDateString():"Never"})]})},DJ=e=>{let{customers:t,selectedCustomers:n,onSelectCustomer:r,isLoading:s}=e;return s?(0,k.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,k.jsx)("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin"})}):0===t.length?(0,k.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No customers found"}):(0,k.jsx)("ul",{className:"divide-y",children:t.map((e=>(0,k.jsx)(RJ,{customer:e,isSelected:n.includes(e.id),onSelect:r},e.id)))})},MJ=t=>{let{onClose:n,onSave:r,isLoading:s}=t;const[o,i]=(0,e.useState)({firstName:"",lastName:"",phone:""});return(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md p-4",children:[(0,k.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New Customer"}),(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name*"}),(0,k.jsx)("input",{type:"text",value:o.firstName,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{firstName:e.target.value})),className:"w-full p-2 border rounded-lg",placeholder:"First Name"})]}),(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,k.jsx)("input",{type:"text",value:o.lastName,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{lastName:e.target.value})),className:"w-full p-2 border rounded-lg",placeholder:"Last Name"})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number*"}),(0,k.jsx)("input",{type:"tel",value:o.phone,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{phone:e.target.value})),className:"w-full p-2 border rounded-lg",placeholder:"Phone Number"})]}),(0,k.jsxs)("div",{className:"flex gap-2",children:[(0,k.jsx)("button",{onClick:n,className:"flex-1 py-2 border border-gray-300 rounded-lg",children:"CANCEL"}),(0,k.jsx)("button",{onClick:()=>{o.firstName&&o.phone&&r(o)},disabled:!o.firstName||!o.phone||s,className:"flex-1 py-2 rounded-lg text-white ".concat(o.firstName&&o.phone&&!s?"bg-green-600 active:bg-green-700":"bg-gray-400"),children:s?"SAVING...":"SAVE CUSTOMER"})]})]})})},LJ=[{id:"percent",label:"\ud83d\udc9d WELCOME BACK TREAT",subtitle:"10% OFF NEXT VISIT",description:"Perfect for loyal friends",icon:"\ud83d\udc9d",customerView:"Your favorite spot misses you!",successRate:"87%",popularity:"Most loved",value:{type:"percentage",value:10}},{id:"appetizer",label:"\ud83c\udf7d\ufe0f SURPRISE STARTER",subtitle:"FREE APPETIZER",description:"First impressions matter",icon:"\ud83c\udf7d\ufe0f",customerView:"A delicious welcome awaits!",successRate:"92%",popularity:"Customer favorite",value:{type:"freeItem",item:"Appetizer"}},{id:"bogo",label:"\ud83e\udd1d BRING A FRIEND",subtitle:"BUY 1 GET 1",description:"Share the love",icon:"\ud83e\udd1d",customerView:"Double the joy, double the fun!",successRate:"78%",popularity:"Great for groups",value:{type:"buyXgetY",buyQty:1,getQty:1}},{id:"custom",label:"\ud83c\udfa8 YOUR SPECIAL CREATION",subtitle:"CUSTOM OFFER",description:"Make it uniquely yours",icon:"\ud83c\udfa8",customerView:"Something special just for you!",successRate:"85%",popularity:"Personalized",value:{type:"custom"}}],OJ=()=>{const t=(0,i.Zp)(),{user:n,businessProfile:r}=(0,N.A)(),{customers:s,addCustomer:o,isLoading:a}=(()=>{const t=(0,e.useContext)(IJ);if(void 0===t)throw new Error("useCustomers must be used within a CustomerProvider");return t})(),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,m]=(0,e.useState)(""),[p,f]=(0,e.useState)(LJ[0].id),[g,y]=(0,e.useState)(!1),[v,x]=(0,e.useState)(!1),[b,w]=(0,e.useState)(!1);(0,e.useEffect)((()=>{if(""===h.trim())return void c(s);const e=h.toLowerCase(),t=s.filter((t=>{var n,r;return"".concat(t.firstName," ").concat(t.lastName).toLowerCase().includes(e)||(null===(n=t.phone)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(e))}));c(t)}),[h,s]);const j=LJ.find((e=>e.id===p));return(0,k.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50",children:[(0,k.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-amber-200 sticky top-0 z-10",children:(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,k.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-amber-600 transition-colors duration-200 group",children:[(0,k.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,k.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"\u2728 Craft Something Special"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"Create a delightful surprise for your customers"})]})]}),(0,k.jsx)("div",{className:"flex items-center space-x-4",children:(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,k.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),(0,k.jsx)("div",{className:"w-2 h-2 bg-amber-300 rounded-full"}),(0,k.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})]}),(0,k.jsx)("span",{className:"text-sm text-gray-600",children:"Step 2 of 3"})]})})]})})}),(0,k.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,k.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,k.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-amber-200 p-8",children:[(0,k.jsxs)("div",{className:"text-center mb-8",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud83c\udf81 Choose Your Gift Type"}),(0,k.jsx)("p",{className:"text-gray-600",children:"What kind of joy will you create today?"})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:LJ.map(((e,t)=>(0,k.jsx)("div",{className:"relative group cursor-pointer transition-all duration-300 transform hover:scale-105 ".concat(p===e.id?"ring-4 ring-amber-400 ring-opacity-50":""),style:{animationDelay:"".concat(100*t,"ms")},onClick:()=>f(e.id),children:(0,k.jsxs)("div",{className:"\n                      relative overflow-hidden rounded-xl p-6 border-2 transition-all duration-300\n                      ".concat(p===e.id?"border-amber-400 bg-gradient-to-br from-amber-50 to-orange-50 shadow-lg":"border-gray-200 bg-white hover:border-amber-300 hover:shadow-md","\n                    "),children:[(0,k.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 rounded-full opacity-20 transform translate-x-10 -translate-y-10"}),(0,k.jsxs)("div",{className:"relative z-10",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,k.jsx)("div",{className:"text-3xl",children:e.icon}),p===e.id&&(0,k.jsx)("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:(0,k.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,k.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:e.label}),(0,k.jsx)("p",{className:"text-amber-600 font-semibold mb-2",children:e.subtitle}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[e.successRate," success rate"]}),(0,k.jsx)("span",{className:"text-gray-500",children:e.popularity})]})]})]})},e.id)))})]}),(0,k.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-amber-200 p-8",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\ud83d\udc65 Who Will You Delight?"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Choose the friends in your community to surprise"})]}),(0,k.jsxs)("div",{className:"text-right",children:[(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"Selected"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:u.length})]})]}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsx)(PJ,{searchQuery:h,onSearchChange:m,placeholder:"Find friends in your community..."}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("button",{onClick:()=>{u.length===l.length?d([]):d(l.map((e=>e.id)))},className:"flex items-center space-x-2 text-amber-600 hover:text-amber-700 font-medium transition-colors duration-200",children:[(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,k.jsx)("span",{children:"Select All Friends"})]}),(0,k.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105",children:[(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,k.jsx)("span",{children:"Invite New Friend"})]})]}),(0,k.jsx)(DJ,{customers:l,selectedCustomers:u,onSelectCustomer:e=>{d((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},isLoading:a})]})]})]}),(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-amber-200 p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"\ud83d\udcf1 Customer Preview"}),(0,k.jsx)("div",{className:"bg-gray-900 rounded-xl p-4 text-white",children:(0,k.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl mb-2",children:null===j||void 0===j?void 0:j.icon}),(0,k.jsx)("h4",{className:"font-bold text-lg",children:null===j||void 0===j?void 0:j.subtitle}),(0,k.jsx)("p",{className:"text-sm opacity-90 mt-1",children:null===j||void 0===j?void 0:j.customerView}),(0,k.jsx)("div",{className:"mt-3 bg-white/20 rounded-lg py-2 px-4",children:(0,k.jsx)("span",{className:"text-sm",children:"From TYCA with \u2764\ufe0f"})})]})})]}),(0,k.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg border border-amber-200 p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"\u2728 Gift Impact"}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Recipients"}),(0,k.jsxs)("span",{className:"font-semibold text-amber-600",children:[u.length," friends"]})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Expected joy"}),(0,k.jsx)("span",{className:"font-semibold text-green-600",children:"High \ud83d\udcc8"})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Success rate"}),(0,k.jsx)("span",{className:"font-semibold text-blue-600",children:null===j||void 0===j?void 0:j.successRate})]})]})]}),(0,k.jsx)("button",{onClick:async()=>{if(0!==u.length){x(!0);try{const e=LJ.find((e=>e.id===p));if(!e)return;let s=(null===n||void 0===n?void 0:n.businessId)||(null===n||void 0===n?void 0:n.currentBusinessId);!s&&"business"===(null===n||void 0===n?void 0:n.role)&&null!==n&&void 0!==n&&n.uid&&(s=n.uid),await(0,ty.n6)(s||"",(null===r||void 0===r?void 0:r.name)||"Your Business",e,u),alert("\ud83c\udf89 Your gifts have been sent! Your customers will be delighted!"),t("/business/coupons")}catch(e){console.error("Error creating coupon:",e),alert("Oops! Something went wrong while creating your gift. Please try again.")}finally{x(!1)}}else alert("Please select at least one customer to receive your gift!")},disabled:v||0===u.length,className:"\n                w-full py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 transform\n                ".concat(u.length>0&&!v?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 hover:scale-105 shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed","\n              "),children:v?(0,k.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,k.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,k.jsx)("span",{children:"Creating Magic..."})]}):u.length>0?(0,k.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,k.jsx)("span",{children:"\ud83c\udf81"}),(0,k.jsxs)("span",{children:["Send ",u.length," Gift",1!==u.length?"s":""]})]}):"Select Friends to Continue"})]})]})}),g&&(0,k.jsx)(MJ,{onClose:()=>y(!1),onSave:async e=>{if(e.firstName&&e.phone){x(!0);try{const t=await o(e);d((e=>[...e,t.id])),y(!1)}catch(t){console.error("Error adding customer:",t)}finally{x(!1)}}},isLoading:v}),(0,k.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes fadeInUp {\n            from {\n              opacity: 0;\n              transform: translateY(20px);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n          \n          .fade-in-up {\n            animation: fadeInUp 0.6s ease-out forwards;\n          }\n        "}})]})};var FJ=n(2570),BJ=n.n(FJ);const UJ=()=>{const t=(0,i.Zp)(),{user:n}=(0,N.A)(),[r,s]=(0,e.useState)(null),[o,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null);return{coupon:r,customer:o,isLoading:l,error:u,handleCodeScanned:async e=>{c(!0),d(null);try{if(null===n||void 0===n||!n.businessId)throw new Error("Business ID not found");console.log("Processing QR code data:",e);const i=(e=>{console.log("Extracting coupon code from:",e);try{if(e.includes("{")&&e.includes("}")){const t=e.indexOf("{"),n=e.lastIndexOf("}")+1,r=e.substring(t,n),s=JSON.parse(r);if("coupon"===s.type&&s.code)return console.log("Found coupon code in JSON:",s.code),s.code;if(s.code)return console.log("Found code property in JSON:",s.code),s.code;if(s.couponCode)return console.log("Found couponCode property in JSON:",s.couponCode),s.couponCode}}catch(zZ){console.log("JSON parsing failed, continuing with other methods")}const t=e.match(/code[:=]\s*([a-z0-9]+)/i);if(t&&t[1])return console.log("Found code pattern in string:",t[1]),t[1];const n=e.replace(/[^a-z0-9]/gi,"");return console.log("Using cleaned raw data as code:",n),n})(e);if(!i||i.length<3)throw new Error("Invalid QR code format");console.log("Extracted coupon code:",i);const l=(0,sl.rJ)(rl.db,"coupons"),c=(0,sl.P)(l,(0,sl._M)("businessId","==",n.businessId),(0,sl._M)("code","==",i)),u=await(0,sl.GG)(c);if(u.empty)throw new Error("Coupon not found");const d=u.docs[0],h=(0,S.A)({id:d.id},d.data());if(!h.active)throw new Error("This coupon is no longer active");const m=new Date;if(h.startDate||h.endDate){var t,r;const e=null!==(t=h.startDate)&&void 0!==t&&t.toDate?h.startDate.toDate():new Date(h.startDate||0),n=null!==(r=h.endDate)&&void 0!==r&&r.toDate?h.endDate.toDate():new Date(h.endDate||9999999999999);if(m<e||m>n)throw new Error("Coupon has expired or is not yet active")}const p={id:"walk-in-"+Date.now(),businessId:n.businessId,firstName:"Walk-in",lastName:"Customer",email:"walkin@example.com",joinDate:sl.Dc.now(),totalVisits:1};s(h),a(p);try{await(0,sl.gS)((0,sl.rJ)(rl.db,"couponDistributions"),{couponId:h.id,customerId:p.id,businessId:n.businessId,status:"redeemed",createdAt:sl.Dc.now(),redeemedAt:sl.Dc.now(),source:"walk-in-scan"}),console.log("Created new distribution record for walk-in customer")}catch(o){console.warn("Could not create distribution record:",o)}}catch(zZ){console.error("Error processing coupon:",zZ),d(zZ.message||"Failed to process coupon")}finally{c(!1)}},handleRedeemCoupon:async()=>{if(r&&o&&null!==n&&void 0!==n&&n.businessId){c(!0);try{await(0,sl.mZ)((0,sl.H9)(rl.db,"coupons",r.id),{usageCount:(r.usageCount||0)+1}),console.log("Updated coupon usage count"),t("/")}catch(zZ){console.error("Error redeeming coupon:",zZ),d(zZ.message||"Failed to redeem coupon")}finally{c(!1)}}},resetState:()=>{s(null),a(null),d(null)}}},zJ=e=>{let{videoRef:t,canvasRef:n}=e;return(0,k.jsxs)("div",{className:"flex-1 relative",children:[(0,k.jsx)("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 h-full w-full object-cover"}),(0,k.jsx)("canvas",{ref:n,className:"hidden"}),(0,k.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,k.jsxs)("div",{className:"w-64 h-64 border-2 border-white rounded-lg relative",children:[(0,k.jsx)("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-blue-500"}),(0,k.jsx)("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-blue-500"}),(0,k.jsx)("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-blue-500"}),(0,k.jsx)("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-blue-500"})]})}),(0,k.jsx)("div",{className:"absolute bottom-0 inset-x-0 p-4 text-center text-white",children:"Position the QR code in the center"})]})},VJ=e=>{var t;let{coupon:n,customer:r,isLoading:s,onRedeem:o}=e;return(0,k.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,k.jsx)("h2",{className:"text-xl font-bold text-center mb-6",children:n.title}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"CUSTOMER"}),(0,k.jsxs)("p",{className:"text-lg font-medium",children:[r.firstName," ",r.lastName]}),(0,k.jsx)("p",{className:"text-gray-600",children:r.phone})]}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"COUPON DETAILS"}),(0,k.jsx)("p",{className:"text-gray-800 mb-1",children:n.description}),(0,k.jsxs)("p",{className:"text-sm text-gray-600",children:["Valid until: ",null!==(t=n.endDate)&&void 0!==t&&t.toDate?new Date(n.endDate.toDate()).toLocaleDateString():new Date(n.endDate).toLocaleDateString()]})]})]}),(0,k.jsx)("button",{onClick:o,disabled:s,className:"w-full py-4 bg-green-600 text-white text-xl font-bold rounded-lg",children:s?"PROCESSING...":"APPLY DISCOUNT"})]})},qJ=e=>{let{error:t,onReset:n}=e;return(0,k.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mb-4",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Error"}),(0,k.jsx)("p",{className:"text-gray-600 text-center mb-6",children:t}),(0,k.jsx)("button",{onClick:n,className:"px-6 py-3 bg-blue-600 text-white rounded-lg",children:"TRY AGAIN"})]})},WJ=()=>(0,k.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin mb-4"}),(0,k.jsx)("p",{className:"text-gray-600",children:"Processing..."})]}),HJ=()=>{const t=(0,i.Zp)(),[n,r]=(0,e.useState)(!0),{coupon:s,customer:o,isLoading:a,error:l,handleCodeScanned:c,handleRedeemCoupon:u,resetState:d}=UJ(),{videoRef:h,canvasRef:m,cancelScanning:p}=(t=>{let{scanning:n,onCodeScanned:r}=t;const s=(0,e.useRef)(null),o=(0,e.useRef)(null),i=(0,e.useRef)(null),a=(0,e.useRef)(null),[l,c]=(0,e.useState)(null),u=(0,e.useRef)(0),d=(0,e.useRef)(new Map),h=(0,e.useRef)(!1),m=(0,e.useRef)(0);return(0,e.useEffect)((()=>((async()=>{if(a.current&&(a.current.getTracks().forEach((e=>e.stop())),a.current=null),h.current=!1,n)try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});a.current=e,s.current&&n&&(s.current.srcObject=e)}}catch(zZ){console.error("Error accessing camera:",zZ),c("Could not access camera. Please check permissions.")}})(),()=>{a.current&&(a.current.getTracks().forEach((e=>e.stop())),a.current=null)})),[n]),(0,e.useEffect)((()=>{const e=async()=>{if(s.current&&n&&!h.current&&s.current.readyState>=1){h.current=!0;try{await s.current.play(),console.log("Video playback started successfully")}catch(zZ){console.error("Error playing video:",zZ)}}},t=s.current;if(t&&n){const n=()=>{e()};return t.addEventListener("loadedmetadata",n),e(),()=>{t.removeEventListener("loadedmetadata",n)}}}),[n]),(0,e.useEffect)((()=>{const e=()=>{if(!s.current||!o.current||!n)return;const t=Date.now();if(0===m.current&&(m.current=t),t-u.current<200)return void(i.current=requestAnimationFrame(e));u.current=t;const a=o.current,l=s.current,c=a.getContext("2d");if(c){if(l.readyState===l.HAVE_ENOUGH_DATA&&!l.paused&&!l.ended){a.height=l.videoHeight,a.width=l.videoWidth,c.drawImage(l,0,0,a.width,a.height);const e=c.getImageData(0,0,a.width,a.height);try{const n=BJ()(e.data,e.width,e.height,{inversionAttempts:"attemptBoth"});if(n&&n.data){const e=d.current.get(n.data)||0;if(d.current.set(n.data,e+1),e%3===0&&console.log("QR Code detected: ".concat(n.data," (").concat(e+1," times)")),e+1>=3)return console.log("Accepting QR code with ".concat(e+1," confirmations: ").concat(n.data)),void r(n.data)}t-m.current>3e3&&(console.log("Resetting scan collection due to timeout"),d.current.clear(),m.current=t)}catch(zZ){console.error("Error processing QR code:",zZ)}}n&&(i.current=requestAnimationFrame(e))}};return n&&(d.current.clear(),m.current=0,u.current=0,i.current=requestAnimationFrame(e)),()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null)}}),[n,r]),{videoRef:s,canvasRef:o,error:l,cancelScanning:()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null),a.current&&(a.current.getTracks().forEach((e=>e.stop())),a.current=null)}}})({scanning:n,onCodeScanned:e=>{r(!1),c(e)}});return(0,k.jsxs)("div",{className:"flex flex-col h-screen bg-black",children:[(0,k.jsxs)("header",{className:"p-4 flex items-center z-10",children:[(0,k.jsx)("button",{onClick:()=>t("/"),className:"text-white",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,k.jsx)("h1",{className:"text-xl font-bold text-white ml-4",children:"Scan Coupon"})]}),n&&(0,k.jsx)(zJ,{videoRef:h,canvasRef:m}),!n&&(0,k.jsx)("div",{className:"flex-1 bg-white p-4 flex flex-col",children:l?(0,k.jsx)(qJ,{error:l,onReset:()=>{d(),r(!0)}}):a?(0,k.jsx)(WJ,{}):s&&o?(0,k.jsx)(VJ,{coupon:s,customer:o,isLoading:a,onRedeem:u}):null})]})},GJ=()=>{const{user:t}=(0,N.A)(),n=(0,i.Zp)(),[r,s]=(0,e.useState)("Checking registration status..."),[o,a]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{(async()=>{if(t&&t.uid)try{s("Checking user document for ".concat(t.uid,"..."));const e=(0,sl.H9)(rl.db,"users",t.uid),r=await(0,sl.x7)(e);r.exists()||(s("User document not found. Creating user document..."),await(0,sl.BN)(e,{uid:t.uid,email:t.email,displayName:t.displayName||"",role:"business",createdAt:new Date}),s("User document created successfully."));const o=r.exists()?r.data():{role:"business"};"business"!==o.role&&(s("User role is not set to business. Updating role..."),await(0,sl.mZ)(e,{role:"business"}),s("User role updated to business."));let i=o.businessId||o.currentBusinessId;if(i){const e=(0,sl.H9)(rl.db,"businesses",i);(await(0,sl.x7)(e)).exists()||(s("Business document not found for ID: ".concat(i,". Creating business document...")),await(0,sl.BN)(e,{businessId:i,businessName:t.displayName||"My Business",industry:"",createdAt:new Date,ownerId:t.uid,active:!0}),s("Business document created successfully."))}else{s("No business ID found. Creating new business...");const n=(0,sl.H9)((0,sl.rJ)(rl.db,"businesses"));i=n.id,await(0,sl.BN)(n,{businessId:i,businessName:t.displayName||"My Business",industry:"",createdAt:new Date,ownerId:t.uid,active:!0}),await(0,sl.mZ)(e,{businessId:i,businesses:[i],currentBusinessId:i}),s("New business created with ID: ".concat(i))}if(!o.businesses||!o.businesses.includes(i)){s("Updating user businesses array...");const t=o.businesses||[];t.push(i),await(0,sl.mZ)(e,{businesses:t,currentBusinessId:i}),s("User businesses array updated.")}s("Registration fixed successfully! Redirecting to dashboard..."),a(!0),setTimeout((()=>{n("/business/dashboard")}),2e3)}catch(e){console.error("Error fixing registration:",e),s("Error fixing registration: ".concat(e instanceof Error?e.message:"Unknown error"))}else s("No authenticated user found. Please log in again.")})()}),[t,n]),(0,k.jsxs)("div",{className:"p-8 max-w-md mx-auto bg-white rounded-lg shadow-md",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Business Registration Repair"}),(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)("p",{className:"text-gray-700",children:r})}),o&&(0,k.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:(0,k.jsx)("p",{children:"Registration fixed successfully! Redirecting to dashboard..."})})]})},KJ=()=>{const[t,n]=(0,e.useState)("profile"),[r,s]=(0,e.useState)("detailed");return(0,k.jsx)(EC,{children:(()=>{switch(t){case"profile":return(0,k.jsx)(MC,{isSimpleView:"simple"===r,onUpdate:()=>{}});case"branding":return(0,k.jsx)(BC,{});case"team":return(0,k.jsx)(YC,{});case"notifications":return(0,k.jsx)(UC,{});case"security":return(0,k.jsx)(zC,{});default:return null}})()})},YJ=async e=>{try{const t=e.replace(/\s+|-|\(|\)|\+/g,""),n=(0,sl.rJ)(rl.db,"customers"),r=(0,sl.P)(n,(0,sl._M)("phone","==",t)),s=await(0,sl.GG)(r);if(s.empty){const t=(0,sl.P)(n,(0,sl._M)("phone","==",e)),r=await(0,sl.GG)(t);if(r.empty)return null;const s=r.docs[0];return(0,S.A)({id:s.id},s.data())}const o=s.docs[0];return(0,S.A)({id:o.id},o.data())}catch(t){throw console.error("Error finding customer by phone:",t),t}},QJ=async(e,t)=>{try{const n=(0,sl.H9)(rl.db,"customers",t);return await(0,sl.mZ)(n,{userId:e,updatedAt:new Date}),!0}catch(n){throw console.error("Error linking user to customer:",n),n}},$J=async e=>{try{const t=(0,sl.rJ)(rl.db,"customers"),n=(0,sl.P)(t,(0,sl._M)("userId","==",e)),r=await(0,sl.GG)(n);if(r.empty)return null;const s=r.docs[0];return(0,S.A)({id:s.id},s.data())}catch(t){throw console.error("Error finding customer by user ID:",t),t}},JJ=async e=>{const t=await $J(e),n=null===t||void 0===t?void 0:t.id,r=[e];return n&&r.push(n),r},XJ=e=>{if("fixed"===e.type&&e.value)return Number(e.value)||0;if("percentage"===e.type&&e.value){return 100*(Number(e.value)||0)/100}return 30},ZJ=async e=>{try{const t=await JJ(e),n=[];for(const e of t){const t=(0,sl.rJ)(rl.db,"couponDistributions"),r=(0,sl.P)(t,(0,sl._M)("customerId","==",e),(0,sl._M)("status","==","redeemed"),(0,sl.My)("redeemedAt","desc"));(await(0,sl.GG)(r)).docs.forEach((e=>{const t=e.data();if(t.redeemedAt){const e=(t.redeemedAt instanceof sl.Dc?t.redeemedAt.toDate():new Date(t.redeemedAt)).toISOString().split("T")[0];n.push(new Date(e))}}))}if(0===n.length)return 0;n.sort(((e,t)=>t.getTime()-e.getTime()));const r=n.filter(((e,t,n)=>t===n.findIndex((t=>t.toISOString().split("T")[0]===e.toISOString().split("T")[0]))));let s=1;const o=new Date;o.setHours(0,0,0,0);const i=r[0];if(Math.floor((o.getTime()-i.getTime())/864e5)>1)return 0;for(let e=0;e<r.length-1;e++){const t=r[e],n=r[e+1],o=t.getTime()-n.getTime();if(1!==Math.floor(o/864e5))break;s++}return s}catch(t){return console.error("Error calculating savings streak:",t),0}},eX=async e=>{try{const t=await JJ(e),n=new Set;for(const e of t){const t=(0,sl.rJ)(rl.db,"couponDistributions"),r=(0,sl.P)(t,(0,sl._M)("customerId","==",e),(0,sl._M)("status","==","redeemed"));(await(0,sl.GG)(r)).docs.forEach((e=>{const t=e.data();t.couponId&&n.add(t.couponId)}))}if(0===n.size)return 0;let r=0;const s=Array.from(n);for(let e=0;e<s.length;e+=10){const t=s.slice(e,e+10),n=(0,sl.rJ)(rl.db,"coupons"),o=(0,sl.P)(n,(0,sl._M)("__name__","in",t));(await(0,sl.GG)(o)).docs.forEach((e=>{const t=e.data();r+=XJ(t)}))}return Math.round(r)}catch(t){return console.error("Error calculating total saved:",t),0}},tX=async e=>{try{const t=await JJ(e),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),s=sl.Dc.fromDate(r),o=new Set;for(const e of t){const t=(0,sl.rJ)(rl.db,"couponDistributions"),n=(0,sl.P)(t,(0,sl._M)("customerId","==",e),(0,sl._M)("status","==","redeemed"),(0,sl._M)("redeemedAt",">=",s));(await(0,sl.GG)(n)).docs.forEach((e=>{const t=e.data();t.couponId&&o.add(t.couponId)}))}if(0===o.size)return 0;let i=0;const a=Array.from(o);for(let e=0;e<a.length;e+=10){const t=a.slice(e,e+10),n=(0,sl.rJ)(rl.db,"coupons"),r=(0,sl.P)(n,(0,sl._M)("__name__","in",t));(await(0,sl.GG)(r)).docs.forEach((e=>{const t=e.data();i+=XJ(t)}))}return Math.round(i)}catch(t){return console.error("Error calculating monthly saved:",t),0}},nX=async e=>{try{const t=(0,sl.rJ)(rl.db,"userSettings"),n=(0,sl.P)(t,(0,sl._M)("userId","==",e),(0,sl.AB)(1)),r=await(0,sl.GG)(n);if(!r.empty){const e=r.docs[0].data();if(e.monthlySavingsGoal)return Number(e.monthlySavingsGoal)}return 500}catch(t){return console.error("Error getting monthly savings goal:",t),500}},rX=()=>{const{user:t,businessProfile:n}=(0,N.A)(),r=(0,i.Zp)();return(0,e.useEffect)((()=>{"business"===(null===t||void 0===t?void 0:t.role)||(null===t||void 0===t?void 0:t.businessId)&&"string"===typeof t.businessId&&""!==t.businessId.trim()||(null===t||void 0===t?void 0:t.businesses)&&Array.isArray(t.businesses)&&t.businesses.length>0||n&&n.businessId?(console.log("[BusinessRouteCorrector] Detected business user on customer dashboard, redirecting to business dashboard"),r("/business/dashboard",{replace:!0})):console.log("[BusinessRouteCorrector] User is correctly on customer dashboard")}),[t,n,r]),null},sX=async e=>{const t=[];for(const n of e){const e=(0,sl.rJ)(rl.db,"couponDistributions"),r=(0,sl.P)(e,(0,sl._M)("customerId","==",n));console.log("Checking couponDistributions collection for ID: ".concat(n,"..."));const s=await(0,sl.GG)(r);console.log("Found ".concat(s.size," distributions for ID: ").concat(n)),t.push(...s.docs)}return t},oX=async(e,t)=>{const n=[];for(const r of e){const e=(0,sl.rJ)(rl.db,"customerCoupons"),s=(0,sl.P)(e,(0,sl._M)("customerId","==",r),(0,sl.My)("allocatedDate","desc"),(0,sl.AB)(t));console.log("Checking customerCoupons collection for customerId: ".concat(r,"..."));const o=await(0,sl.GG)(s);console.log("Found ".concat(o.size," customer coupons with customerId: ").concat(r)),n.push(...o.docs);const i=(0,sl.rJ)(rl.db,"customerCoupons"),a=(0,sl.P)(i,(0,sl._M)("userId","==",r),(0,sl.My)("allocatedDate","desc"),(0,sl.AB)(t));console.log("Checking customerCoupons collection for userId: ".concat(r,"..."));const l=await(0,sl.GG)(a);console.log("Found ".concat(l.size," customer coupons with userId: ").concat(r)),n.push(...l.docs)}return n},iX=async e=>{const t=[];try{console.log("Looking up customers with phone number: ".concat(e));const n=e.replace(/\s+|-|\(|\)|\+/g,""),r=(0,sl.rJ)(rl.db,"customers"),s=(0,sl.P)(r,(0,sl._M)("phone","==",n));let o=(await(0,sl.GG)(s)).docs;if(0===o.length){const t=(0,sl.P)(r,(0,sl._M)("phone","==",e));o=(await(0,sl.GG)(t)).docs}console.log("Found ".concat(o.length," customers with phone number: ").concat(e));for(const e of o){const n=e.id;console.log("Checking distributions for phone-linked customer ID: ".concat(n));const r=(0,sl.rJ)(rl.db,"couponDistributions"),s=(0,sl.P)(r,(0,sl._M)("customerId","==",n)),o=await(0,sl.GG)(s);console.log("Found ".concat(o.size," distributions for phone-linked customer ID: ").concat(n)),t.push(...o.docs);const i=(0,sl.rJ)(rl.db,"customerCoupons"),a=(0,sl.P)(i,(0,sl._M)("customerId","==",n)),l=await(0,sl.GG)(a);console.log("Found ".concat(l.size," customer coupons for phone-linked customer ID: ").concat(n)),t.push(...l.docs)}}catch(n){console.error("Error getting coupons from phone number:",n)}return t},aX=e=>e.map((e=>{const t=e.data();return null===t||void 0===t?void 0:t.businessId})).filter((e=>!!e)).filter(((e,t,n)=>n.indexOf(e)===t)),lX=async e=>{const t=e.map((e=>(0,sl.x7)((0,sl.H9)(rl.db,"businesses",e)))),n=await Promise.all(t),r={};return n.forEach((e=>{if(e.exists()){var t,n;const s=e.data();r[e.id]={name:s.businessName||"Unknown Business",logo:s.logo||void 0,colors:{primary:(null===(t=s.colors)||void 0===t?void 0:t.primary)||"#3B82F6",secondary:(null===(n=s.colors)||void 0===n?void 0:n.secondary)||"#10B981"}}}})),r},cX=async(e,t)=>{const n=e.data();if(!n)return null;const r=n.businessId||"",s=t[r]||{name:"Unknown Business",logo:void 0,colors:{primary:"#3B82F6",secondary:"#10B981"}};return{id:e.id,businessId:r,distributionId:e.id,businessName:s.name,businessLogo:s.logo,businessColors:s.colors,title:n.title||"Unknown Coupon",description:n.description||"No description available",discount:uX(n),startDate:dX(n.startDate,new Date),endDate:dX(n.endDate,new Date(Date.now()+2592e6)),active:!1!==n.active,code:n.code||"UNKNOWN",terms:n.termsAndConditions||"",status:"viewed",value:n.value||0}};function uX(e){return e?"percentage"===e.type?"".concat(e.value||0,"%"):"fixed"===e.type?"$".concat(e.value||0):"buyXgetY"===e.type?"Buy ".concat(e.buyQuantity||1," get ").concat(e.getQuantity||1):"Free ".concat(e.freeItem||"item"):"Unknown discount"}function dX(e,t){if(e instanceof sl.Dc)return e.toDate();if(e)try{return new Date(e)}catch(UZ){return t}return t}let hX=function(e){return e.VIEW="view",e.COPY="copy",e.REDEEM="redeem",e}({});const mX=async function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{console.log("Fetching coupons for user:",e);const n=await $J(e),r=null===n||void 0===n?void 0:n.id;console.log("Linked customer ID:",r||"Not linked");const s=[e];r&&s.push(r);const o=await(async(e,t)=>{let n;if(e.length>0){const t=await $J(e[0]);n=null===t||void 0===t?void 0:t.phone,console.log("Linked customer phone:",n||"No phone")}const r=await sX(e);console.log("Total distributions found:",r.length);const s=await oX(e,t);console.log("Total customer coupons found:",s.length);let o=[];n&&(o=await iX(n),console.log("Total phone-linked documents found:",o.length));const i=[...r.map((e=>e.data().couponId)),...s.map((e=>e.data().couponId)),...o.map((e=>e.data().couponId))].filter((e=>void 0!==e)).filter(((e,t,n)=>n.indexOf(e)===t));return console.log("Combined unique coupon IDs:",i),i})(s,t);if(0===o.length)return console.log("No coupons found for user:",e),{coupons:[],lastDoc:null};const i=await(async e=>{const t=e.map((e=>(0,sl.x7)((0,sl.H9)(rl.db,"coupons",e)))),n=(await Promise.all(t)).filter((e=>e.exists()));console.log("Valid coupon documents:",n.length);const r=aX(n);console.log("Business IDs to fetch:",r);const s=await lX(r),o=[];for(const i of n){const e=await cX(i,s);e&&(o.push(e),console.log("Added formatted coupon:",e.title))}return o})(o);return console.log("Returning",i.length,"coupons"),{coupons:i,lastDoc:null}}catch(n){throw console.error("Error fetching customer coupons:",n),n}},pX=e=>{try{return navigator.clipboard.writeText(e),Promise.resolve(!0)}catch(t){return console.error("Error copying to clipboard:",t),Promise.resolve(!1)}},fX=async(e,t,n)=>{console.log("Tracking event ".concat(n," for coupon ").concat(e," by user ").concat(t))},gX=async e=>(console.log("Redeeming coupon with distribution ID: ".concat(e)),Promise.resolve(!0)),yX=t=>{var n,r,s;let{coupon:o,onRedeem:i,onCopy:a}=t;const{user:l}=(0,N.A)(),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),m=new Date(o.endDate)<new Date,p="redeemed"===o.status,f=(null===(n=o.businessColors)||void 0===n?void 0:n.primary)||"#3B82F6",g=(null===(r=o.businessColors)||void 0===r?void 0:r.secondary)||"#10B981";return(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-300",children:[(0,k.jsxs)("div",{className:"p-3 border-b flex items-center",style:{backgroundColor:f+"10"},children:[o.businessLogo?(0,k.jsx)("img",{src:o.businessLogo,alt:o.businessName,className:"w-10 h-10 rounded-full mr-3 object-cover border-2",style:{borderColor:f},onError:e=>{e.currentTarget.src="/assets/placeholder-coupon.png"}}):(0,k.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 text-white",style:{backgroundColor:f},children:(0,k.jsx)("span",{className:"font-semibold",children:(null===(s=o.businessName)||void 0===s?void 0:s.charAt(0))||"B"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium",style:{color:f},children:o.businessName}),(0,k.jsxs)("p",{className:"text-xs text-gray-500",children:["Valid until ",bg(o.endDate)]})]})]}),(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:o.title}),(0,k.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:o.description}),(0,k.jsxs)("div",{className:"bg-gray-100 p-3 rounded-md mb-3 flex justify-between items-center",children:[(0,k.jsx)("div",{className:"font-mono text-lg font-semibold",children:o.code}),(0,k.jsx)("button",{onClick:async()=>{if(l&&!d){h(!0);try{await pX(o.code)?(a&&a(o),alert("Coupon code ".concat(o.code," copied to clipboard!"))):alert("Failed to copy coupon code. Please try again."),await fX(o.id,l.uid,hX.COPY)}catch(e){console.error("Error copying coupon code:",e),alert("An error occurred while copying the coupon code.")}finally{h(!1)}}},disabled:d,className:"text-sm font-medium hover:opacity-80",style:{color:g},children:d?"Copying...":"Copy"})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("div",{className:"text-lg font-bold",style:{color:g},children:o.discount}),p?(0,k.jsx)("span",{className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-sm",children:"Redeemed"}):m?(0,k.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:"Expired"}):(0,k.jsx)("button",{onClick:async()=>{if(l&&!c&&!p&&!m)if(o.distributionId){u(!0);try{await gX(o.distributionId)?(i&&i(o),alert("Coupon ".concat(o.code," has been redeemed successfully!"))):alert("Failed to redeem coupon. Please try again."),await fX(o.id,l.uid,hX.REDEEM)}catch(e){console.error("Error redeeming coupon:",e),alert("An error occurred while redeeming the coupon.")}finally{u(!1)}}else alert("Cannot redeem this coupon. Distribution ID is missing.")},disabled:c,className:"px-4 py-2 text-white rounded-md text-sm font-medium hover:opacity-90 disabled:opacity-50",style:{backgroundColor:f},children:c?"Redeeming...":"Redeem Now"})]})]})]})},vX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},xX={scale:"hover:scale-105",glow:"hover:shadow-lg",pulse:"hover:animate-pulse"},bX={confetti:"animate-confetti",bounce:"animate-bounce",tada:"animate-tada"},wX=t=>{var n,r,s;let{coupon:o,onRedeem:i,onCopy:a}=t;const{user:l}=(0,N.A)(),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[m,p]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),x=new Date(o.endDate)<new Date,b="redeemed"===o.status,w=(null===(n=o.businessColors)||void 0===n?void 0:n.primary)||nV.$k.primary[600],j=(null===(r=o.businessColors)||void 0===r?void 0:r.secondary)||nV.$k.secondary[600],C=Math.max(0,Math.ceil((new Date(o.endDate).getTime()-(new Date).getTime())/864e5));return(0,k.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden border shadow-sm ".concat(vX.medium," ").concat(m?"shadow-xl scale-[1.02]":"hover:shadow-md hover:scale-[1.01]"),style:{borderColor:x?"#d1d5db":b?"#10B981":w+"40",borderWidth:"1px"},children:[b&&(0,k.jsx)("div",{className:"absolute top-0 right-0 m-2 px-2 py-1 text-xs font-medium rounded-full text-white",style:{backgroundColor:"#10B981"},children:"Redeemed"}),x&&!b&&(0,k.jsx)("div",{className:"absolute top-0 right-0 m-2 px-2 py-1 text-xs font-medium rounded-full text-white bg-gray-500",children:"Expired"}),!x&&!b&&C<=3&&(0,k.jsx)("div",{className:"absolute top-0 right-0 m-2 px-2 py-1 text-xs font-medium rounded-full text-white bg-amber-500 animate-pulse",children:"Expires soon!"}),(0,k.jsxs)("div",{className:"p-4 flex items-center",style:{background:"linear-gradient(135deg, ".concat(w,"10, ").concat(w,"30)")},children:[o.businessLogo?(0,k.jsx)("img",{src:o.businessLogo,alt:o.businessName,className:"w-12 h-12 rounded-full mr-4 object-cover border-2 ".concat(vX.medium),style:{borderColor:w},onError:e=>{e.currentTarget.src="/assets/placeholder-coupon.png"}}):(0,k.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mr-4 text-white ".concat(vX.medium),style:{backgroundColor:w},children:(0,k.jsx)("span",{className:"font-semibold text-lg",children:(null===(s=o.businessName)||void 0===s?void 0:s.charAt(0))||"B"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-semibold text-lg",style:{color:w},children:o.businessName}),(0,k.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Valid until ",bg(o.endDate)]})]})]}),(0,k.jsxs)("div",{className:"p-5",children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:o.title}),(0,k.jsx)("p",{className:"text-gray-600 text-sm",children:o.description})]}),(0,k.jsxs)("div",{className:"mb-4 py-3 px-4 rounded-lg flex items-center justify-between ".concat(vX.fast),style:{background:"linear-gradient(135deg, ".concat(j,"10, ").concat(j,"25)"),borderLeft:"4px solid ".concat(j)},children:[(0,k.jsx)("div",{className:"text-2xl font-bold",style:{color:j},children:o.discount}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:b?"Redeemed ".concat(o.redeemedAt?bg(o.redeemedAt):""):x?"Expired":0===C?"Expires today!":"".concat(C," days left")})]}),(0,k.jsxs)("div",{className:"relative mb-5",children:[(0,k.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg flex justify-between items-center ".concat(f?"bg-green-50 border border-green-200":""," ").concat(vX.medium),children:[(0,k.jsx)("div",{className:"font-mono text-lg font-semibold",children:o.code}),(0,k.jsx)("button",{onClick:async()=>{if(l&&!d){h(!0);try{await pX(o.code)?(g(!0),setTimeout((()=>g(!1)),2e3),a&&a(o)):alert("Failed to copy coupon code. Please try again."),await fX(o.id,l.uid,hX.COPY)}catch(e){console.error("Error copying coupon code:",e),alert("An error occurred while copying the coupon code.")}finally{h(!1)}}},disabled:d,className:"px-3 py-1 rounded-md text-sm font-medium ".concat(vX.fast," ").concat(d?"opacity-50":"hover:opacity-80"),style:{color:"white",backgroundColor:j},children:d?"Copying...":f?"Copied!":"Copy Code"})]}),f&&(0,k.jsx)("div",{className:"absolute -top-8 left-0 right-0 bg-green-100 text-green-700 px-3 py-1 rounded-md text-sm text-center ".concat(vX.fast," ").concat(bX.tada),children:"Code copied to clipboard! \ud83d\udccb"})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("button",{onClick:()=>p(!m),className:"text-sm font-medium text-gray-500 flex items-center ".concat(vX.fast," hover:text-gray-700"),children:m?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),"Less"]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Details"]})}),(0,k.jsxs)("div",{className:"relative",children:[b?(0,k.jsxs)("div",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium flex items-center",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Redeemed"]}):x?(0,k.jsx)("div",{className:"px-4 py-2 bg-gray-100 text-gray-500 rounded-lg text-sm font-medium",children:"Expired"}):(0,k.jsx)("button",{onClick:async()=>{if(l&&!c&&!b&&!x)if(o.distributionId){u(!0);try{await gX(o.distributionId)?(v(!0),setTimeout((()=>v(!1)),2e3),i&&i(o)):alert("Failed to redeem coupon. Please try again."),await fX(o.id,l.uid,hX.REDEEM)}catch(e){console.error("Error redeeming coupon:",e),alert("An error occurred while redeeming the coupon.")}finally{u(!1)}}else alert("Cannot redeem this coupon. Distribution ID is missing.")},disabled:c,className:"px-5 py-2 text-white rounded-lg text-sm font-medium ".concat(vX.medium," ").concat(c?"opacity-50":"hover:shadow-md ".concat(xX.scale)),style:{backgroundColor:w},children:c?"Redeeming...":y?"Redeemed!":"Redeem Now"}),y&&(0,k.jsx)("div",{className:"absolute -top-8 left-0 right-0 bg-green-100 text-green-700 px-3 py-1 rounded-md text-sm text-center ".concat(vX.fast," ").concat(bX.tada),children:"Coupon redeemed successfully! \ud83c\udf89"})]})]}),m&&(0,k.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 ".concat(vX.medium),children:[o.terms&&(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Terms & Conditions"}),(0,k.jsx)("p",{className:"text-xs text-gray-600",children:o.terms})]}),(0,k.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Valid from:"})," ",bg(o.startDate)]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{className:"font-medium",children:"Expires:"})," ",bg(o.endDate)]})]})]})]})]})},NX=e=>{let{searchQuery:t=""}=e;return(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg",children:[(0,k.jsx)("img",{src:"/images/empty-coupon.svg",alt:"No coupons found",className:"w-40 h-40 mb-4 opacity-60",onError:e=>{e.currentTarget.src="/assets/placeholder-coupon.png"}}),t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No coupons match your search"}),(0,k.jsxs)("p",{className:"text-gray-500 text-center",children:["We couldn't find any coupons matching \"",t,'". Try a different search term.']})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No coupons yet"}),(0,k.jsx)("p",{className:"text-gray-500 text-center",children:"You don't have any coupons at the moment. Check back later for special offers!"})]})]})},jX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},kX={scale:"hover:scale-105",glow:"hover:shadow-lg"},CX=e=>{let{searchQuery:t=""}=e;return(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-xl shadow-sm border border-gray-100 ".concat(jX.medium),children:[(0,k.jsx)("div",{className:"w-32 h-32 mb-6 rounded-full flex items-center justify-center ".concat(jX.medium," ").concat(kX.scale),style:{background:"linear-gradient(135deg, ".concat(nV.$k.primary[50],", ").concat(nV.$k.primary[100],")"),boxShadow:"0 10px 15px -3px ".concat(nV.$k.primary[100],", 0 4px 6px -2px ").concat(nV.$k.primary[100])},children:t?(0,k.jsx)("span",{className:"text-5xl",children:"\ud83d\udd0d"}):(0,k.jsx)("span",{className:"text-5xl",children:"\ud83c\udf9f\ufe0f"})}),t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"text-xl font-bold mb-2",style:{color:nV.$k.primary[700]},children:"No coupons match your search"}),(0,k.jsxs)("p",{className:"text-gray-600 text-center mb-4",children:["We couldn't find any coupons matching \"",t,'".']}),(0,k.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Try a different search term or check back later for new offers!"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"text-xl font-bold mb-2",style:{color:nV.$k.primary[700]},children:"Your coupon journey begins!"}),(0,k.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"You don't have any coupons yet, but great savings are on the way."}),(0,k.jsxs)("div",{className:"text-sm text-gray-500 text-center flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83d\udc40"}),"Check back soon for special offers tailored just for you!"]})]})]})},SX=()=>(0,k.jsx)("div",{className:"flex justify-center py-8",children:(0,k.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),AX=()=>{const e=["Finding your best savings...","Gathering your coupon collection...","Preparing your deals...","Calculating your potential savings...","Almost there! Your coupons are loading..."],t=e[Math.floor(Math.random()*e.length)];return(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,k.jsxs)("div",{className:"w-16 h-16 mb-6 relative",style:{color:nV.$k.primary[600]},children:[(0,k.jsxs)("svg",{className:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,k.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl animate-pulse",children:"\ud83d\udcb0"})]}),(0,k.jsx)("h3",{className:"text-lg font-semibold mb-2 animate-pulse",style:{color:nV.$k.primary[700]},children:t}),(0,k.jsx)("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden mt-2",children:(0,k.jsx)("div",{className:"h-full rounded-full animate-pulse",style:{background:"linear-gradient(90deg, ".concat(nV.$k.primary[400],", ").concat(nV.$k.primary[600],")"),width:"60%"}})})]})},EX=e=>{let{onClick:t,isLoading:n}=e;return(0,k.jsx)("div",{className:"flex justify-center mt-8",children:(0,k.jsx)("button",{onClick:t,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):"Load More"})})},_X={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},IX={scale:"hover:scale-105",glow:"hover:shadow-lg"},TX=e=>{let{onClick:t,isLoading:n}=e;return(0,k.jsx)("div",{className:"flex justify-center my-6",children:(0,k.jsx)("button",{onClick:()=>t(),disabled:n,className:"px-6 py-3 rounded-xl font-medium text-white ".concat(_X.medium," ").concat(n?"opacity-70":"".concat(IX.scale," ").concat(IX.glow)),style:{background:"linear-gradient(135deg, ".concat(nV.$k.primary[500],", ").concat(nV.$k.primary[600],")"),boxShadow:"0 4px 6px -1px ".concat(nV.$k.primary[500],"40, 0 2px 4px -1px ").concat(nV.$k.primary[500],"30")},children:n?(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,k.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,k.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading more..."]}):(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"Discover More Savings"}),(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})})},PX=e=>{let{searchQuery:t="",onSearchChange:n,currentFilter:r,onFilterChange:s,couponCount:o=0,onSortChange:i,currentSort:a="endDate",currentDirection:l="asc"}=e;const c=e=>{if(i){i(e,e===a&&"asc"===l?"desc":"asc")}};return(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Filter Coupons"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n&&(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"search-coupons",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Coupons"}),(0,k.jsxs)("div",{className:"relative rounded-md shadow-sm",children:[(0,k.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,k.jsx)("input",{type:"text",name:"search",id:"search-coupons",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search by title, business, or code",value:t,onChange:e=>{n&&n(e.target.value)}})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Status"}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsxs)("button",{onClick:()=>s("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===r?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:["All ",o>0&&"(".concat(o,")")]}),(0,k.jsx)("button",{onClick:()=>s("active"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("active"===r?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:"Active"}),(0,k.jsx)("button",{onClick:()=>s("expired"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("expired"===r?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:"Expired"}),(0,k.jsx)("button",{onClick:()=>s("redeemed"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("redeemed"===r?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:"Redeemed"})]})]})]}),i&&(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,k.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,k.jsxs)("button",{onClick:()=>c("endDate"),className:"px-3 py-1 text-sm font-medium rounded-md flex items-center ".concat("endDate"===a?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:["Expiry Date","endDate"===a&&(0,k.jsx)("span",{className:"ml-1",children:"asc"===l?"\u2191":"\u2193"})]}),(0,k.jsxs)("button",{onClick:()=>c("startDate"),className:"px-3 py-1 text-sm font-medium rounded-md flex items-center ".concat("startDate"===a?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:["Start Date","startDate"===a&&(0,k.jsx)("span",{className:"ml-1",children:"asc"===l?"\u2191":"\u2193"})]}),(0,k.jsxs)("button",{onClick:()=>c("businessName"),className:"px-3 py-1 text-sm font-medium rounded-md flex items-center ".concat("businessName"===a?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:["Business","businessName"===a&&(0,k.jsx)("span",{className:"ml-1",children:"asc"===l?"\u2191":"\u2193"})]}),(0,k.jsxs)("button",{onClick:()=>c("value"),className:"px-3 py-1 text-sm font-medium rounded-md flex items-center ".concat("value"===a?"bg-primary-100 text-primary-700 border-primary-300":"bg-white text-gray-700 border border-gray-300"),children:["Value","value"===a&&(0,k.jsx)("span",{className:"ml-1",children:"asc"===l?"\u2191":"\u2193"})]})]})]})]})},RX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},DX=t=>{let{onSearch:n,onFilterChange:r,onSortChange:s,currentFilter:o,currentSort:i,currentDirection:a}=t;const[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(!1);return(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(l)},className:"relative",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search your coupons...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-".concat(nV.$k.primary[300].replace("#","")," ").concat(RX.fast),style:{boxShadow:"0 2px 4px rgba(0,0,0,0.05)"}}),(0,k.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,k.jsx)("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-2 py-1 rounded-md text-xs font-medium ".concat(RX.fast),style:{color:nV.$k.primary[600]},children:"Search"})]}),(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>r("all"),className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat(RX.fast," ").concat("all"===o?"text-white":"text-gray-600 bg-gray-100"),style:{backgroundColor:"all"===o?nV.$k.primary[600]:void 0},children:"All"}),(0,k.jsx)("button",{onClick:()=>r("active"),className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat(RX.fast," ").concat("active"===o?"text-white":"text-gray-600 bg-gray-100"),style:{backgroundColor:"active"===o?nV.$k.secondary[600]:void 0},children:"Active"}),(0,k.jsx)("button",{onClick:()=>r("redeemed"),className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat(RX.fast," ").concat("redeemed"===o?"text-white":"text-gray-600 bg-gray-100"),style:{backgroundColor:"redeemed"===o?"#10B981":void 0},children:"Redeemed"})]}),(0,k.jsxs)("button",{onClick:()=>d(!u),className:"flex items-center text-sm font-medium ".concat(RX.fast),style:{color:nV.$k.primary[600]},children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Sort"]})]}),u&&(0,k.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 ".concat(RX.medium),children:[(0,k.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Sort by"}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,k.jsxs)("button",{onClick:()=>s("endDate","asc"===a?"desc":"asc"),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-between ".concat(RX.fast," ").concat("endDate"===i?"bg-primary-50 text-primary-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,k.jsx)("span",{children:"Expiry Date"}),"endDate"===i&&(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:"asc"===a?(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,k.jsxs)("button",{onClick:()=>s("value","asc"===a?"desc":"asc"),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-between ".concat(RX.fast," ").concat("value"===i?"bg-primary-50 text-primary-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,k.jsx)("span",{children:"Value"}),"value"===i&&(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:"asc"===a?(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,k.jsxs)("button",{onClick:()=>s("businessName","asc"===a?"desc":"asc"),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-between ".concat(RX.fast," ").concat("businessName"===i?"bg-primary-50 text-primary-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,k.jsx)("span",{children:"Business"}),"businessName"===i&&(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:"asc"===a?(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,k.jsxs)("button",{onClick:()=>s("startDate","asc"===a?"desc":"asc"),className:"px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-between ".concat(RX.fast," ").concat("startDate"===i?"bg-primary-50 text-primary-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,k.jsx)("span",{children:"Newest"}),"startDate"===i&&(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:"asc"===a?(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}):(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]})]})},MX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},LX=t=>{let{viewMode:n="default",onCouponAction:r}=t;const{user:s}=(0,N.A)(),[o,i]=(0,e.useState)([]),[a,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[m,p]=(0,e.useState)(""),[f,g]=(0,e.useState)(null),[y,v]=(0,e.useState)(!0),[x,b]=(0,e.useState)("all"),[w,j]=(0,e.useState)("endDate"),[C,A]=(0,e.useState)("asc"),[E,_]=(0,e.useState)(!1);(0,e.useEffect)((()=>{o.length>0&&!a&&_(!0)}),[o,a]),(0,e.useEffect)((()=>{null!==s&&void 0!==s&&s.uid&&I()}),[s,x,w,C]);const I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!==s&&void 0!==s&&s.uid)try{e?u(!0):l(!0);const t=await mX(s.uid,e?f:null);let n=t.coupons;"all"!==x&&(n=n.filter((e=>e.status===x))),n.sort(((e,t)=>{let n,r;switch(w){case"endDate":default:n=new Date(e.endDate).getTime(),r=new Date(t.endDate).getTime();break;case"startDate":n=new Date(e.startDate).getTime(),r=new Date(t.startDate).getTime();break;case"businessName":n=e.businessName||"",r=t.businessName||"";break;case"value":n=parseFloat(e.discount.replace(/[^0-9.-]+/g,"")||"0"),r=parseFloat(t.discount.replace(/[^0-9.-]+/g,"")||"0")}return"asc"===C?n>r?1:-1:n<r?1:-1})),i(e?e=>[...e,...n]:n),g(t.lastDoc),v(t.coupons.length>0)}catch(zZ){console.error("Error fetching coupons:",zZ),h("Failed to load your coupons. Please try again later.")}finally{l(!1),u(!1)}},T=async()=>{y&&!c&&(await I(!0),o.length>5&&r&&r("You've got quite a collection of savings!"))},P=e=>{p(e)},R=e=>{b(e)},D=(e,t)=>{j(e),A(t)},M=e=>{i((t=>t.map((t=>t.id===e.id?(0,S.A)((0,S.A)({},t),{},{status:"redeemed",redeemedAt:new Date}):t)))),r&&r("You saved ".concat(e.discount," at ").concat(e.businessName,"!"))},L=e=>{r&&r("Code copied! Ready to save at ".concat(e.businessName,"!"))};if(a)return"simple"===n?(0,k.jsx)(AX,{}):(0,k.jsx)(SX,{});if(d)return(0,k.jsx)("div",{className:"p-4 ".concat("simple"===n?"bg-red-50/80 backdrop-blur-sm":"bg-red-50"," text-red-700 rounded-xl shadow-sm border border-red-100"),children:(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"text-2xl",children:"\ud83d\ude15"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"font-medium",children:d}),(0,k.jsx)("button",{onClick:()=>I(),className:"mt-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium ".concat(MX.fast),children:"Try Again"})]})]})});const O=m?o.filter((e=>{var t;return e.title.toLowerCase().includes(m.toLowerCase())||(null===(t=e.businessName)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||e.description.toLowerCase().includes(m.toLowerCase())})):o;return 0===O.length?"simple"===n?(0,k.jsx)(CX,{searchQuery:m}):(0,k.jsx)(NX,{searchQuery:m}):"simple"===n?(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsx)(DX,{onSearch:P,onFilterChange:R,onSortChange:D,currentFilter:x,currentSort:w,currentDirection:C}),(0,k.jsx)("div",{className:"space-y-4",children:O.map(((e,t)=>(0,k.jsx)("div",{className:"".concat(MX.medium," ").concat(E?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),style:{transitionDelay:"".concat(100*t,"ms")},children:(0,k.jsx)(wX,{coupon:e,onRedeem:M,onCopy:L})},e.id)))}),y&&(0,k.jsx)(TX,{onClick:T,isLoading:c})]}):(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search your coupons...",value:m,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary-300"}),(0,k.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,k.jsx)(PX,{onFilterChange:R,onSortChange:D,currentFilter:x,currentSort:w,currentDirection:C}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(((e,t)=>(0,k.jsx)("div",{className:"".concat(MX.medium," ").concat(E?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),style:{transitionDelay:"".concat(100*t,"ms")},children:(0,k.jsx)(yX,{coupon:e,onRedeem:M,onCopy:L})},e.id)))}),y&&(0,k.jsx)(EX,{onClick:T,isLoading:c})]})},OX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},FX={scale:"hover:scale-105",glow:"hover:shadow-lg",pulse:"hover:animate-pulse"},BX={confetti:"animate-confetti",bounce:"animate-bounce",tada:"animate-tada"},UX={welcoming:{emoji:"\ud83d\udc4b",messages:["Welcome back! Ready to save?","Hi there! Let's find some deals!","Great to see you! Let's save today!"]},encouraging:{emoji:"\ud83d\udc4d",messages:["You're doing great! Keep going!","Smart saving choices today!","Every coupon helps your wallet!"]},celebrating:{emoji:"\ud83c\udf89",messages:["Amazing job on your savings!","You're a savings superstar!","Look at those savings add up!"]},grateful:{emoji:"\ud83d\ude4f",messages:["Thanks for being a smart saver!","Your wallet thanks you!","Saving money looks good on you!"]}},zX=t=>{let{state:n,onStateChange:r,savingsStreak:s,monthlySaved:o,totalSaved:i}=t;const[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=UX[n].messages,t=e[Math.floor(Math.random()*e.length)];l(t),u(!0);const r=setTimeout((()=>u(!1)),1e3);return()=>clearTimeout(r)}),[n]),(0,e.useEffect)((()=>{const e=setTimeout((()=>{"welcoming"===n?r("encouraging"):"celebrating"===n&&r("grateful")}),1e4);return()=>clearTimeout(e)}),[n,r]);return(0,k.jsx)("div",{className:"sticky top-6",children:(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200 ".concat(OX.medium," ").concat(c?BX.tada:FX.scale),children:[(0,k.jsx)("div",{className:"p-4 flex items-center justify-center",style:{background:"linear-gradient(135deg, ".concat(nV.$k.primary[50],", ").concat(nV.$k.primary[100],")")},children:(0,k.jsx)("div",{className:"w-16 h-16 rounded-full bg-white shadow-md flex items-center justify-center text-3xl",onClick:()=>{const e=["welcoming","encouraging","celebrating","grateful"],t=(e.indexOf(n)+1)%e.length;r(e[t])},children:UX[n].emoji})}),(0,k.jsxs)("div",{className:"p-4 text-center",children:[(0,k.jsx)("p",{className:"text-sm font-medium mb-3",style:{color:nV.$k.primary[700]},children:a}),(0,k.jsx)("div",{className:"text-xs text-gray-600 italic",children:s>7?"You're on a hot streak! Keep it up!":o>200?"Great savings this month!":i>1e3?"You've saved over R1000 in total!":"Use coupons regularly to build your streak!"})]}),(0,k.jsx)("div",{className:"p-3 text-center text-sm",style:{background:"linear-gradient(135deg, ".concat(nV.$k.secondary[50],", ").concat(nV.$k.secondary[100],")"),color:nV.$k.secondary[700]},children:s>0?(0,k.jsxs)("div",{className:"flex items-center justify-center",children:[(0,k.jsx)("span",{className:"mr-1",children:"\ud83d\udd25"}),(0,k.jsxs)("span",{className:"font-medium",children:[s," day streak"]})]}):(0,k.jsx)("div",{children:"Start your savings streak today!"})})]})})},VX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},qX=e=>{let{currentAmount:t,goalAmount:n,variant:r}=e;const s=Math.min(Math.round(t/n*100),100),o=()=>s<25?nV.$k.primary[400]:s<50?nV.$k.primary[500]:s<75?nV.$k.primary[600]:s<100?nV.$k.secondary[500]:nV.$k.secondary[600],i=()=>s<25?"Just getting started!":s<50?"Making progress!":s<75?"Well on your way!":s<100?"Almost there!":"Goal achieved! \ud83c\udf89";return"compact"===r?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Monthly Savings Goal"}),(0,k.jsxs)("div",{className:"text-xs font-medium",style:{color:o()},children:[s,"%"]})]}),(0,k.jsx)("div",{className:"relative h-3 bg-gray-100 rounded-full overflow-hidden",children:(0,k.jsx)("div",{className:"absolute top-0 left-0 h-full rounded-full ".concat(VX.medium),style:{width:"".concat(s,"%"),background:"linear-gradient(90deg, ".concat(o(),"80, ").concat(o(),")"),boxShadow:"0 0 8px ".concat(o(),"80")}})}),(0,k.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["R",t," of R",n]}),(0,k.jsx)("div",{className:"text-xs",style:{color:o()},children:i()})]})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"relative h-4 bg-gray-100 rounded-full overflow-hidden",children:(0,k.jsx)("div",{className:"absolute top-0 left-0 h-full rounded-full ".concat(VX.medium),style:{width:"".concat(s,"%"),background:"linear-gradient(90deg, ".concat(o(),"80, ").concat(o(),")"),boxShadow:"0 0 8px ".concat(o(),"80")}})}),(0,k.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,k.jsx)("div",{className:"text-xs text-gray-500",children:i()}),(0,k.jsxs)("div",{className:"text-xs font-medium",style:{color:o()},children:[s,"% complete"]})]})]})},WX=()=>{const[t,n]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{if(t){const e=3e3,t=Date.now()+e,r=document.createElement("canvas");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.pointerEvents="none",r.style.zIndex="9999",document.body.appendChild(r);const s=Og.create(r,{resize:!0,useWorker:!0}),o=()=>{const i=t-Date.now();if(i<=0)return document.body.removeChild(r),void n(!1);const a={particleCount:1,angle:60,spread:55,origin:{x:0},colors:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"]};s((0,S.A)((0,S.A)({},a),{},{particleCount:Math.floor(i/e*100),origin:{x:.2,y:.5}})),s((0,S.A)((0,S.A)({},a),{},{particleCount:Math.floor(i/e*100),angle:120,origin:{x:.8,y:.5}})),requestAnimationFrame(o)};o()}}),[t]),null},HX={fast:"transition-all duration-300 ease-in-out",medium:"transition-all duration-500 ease-in-out",slow:"transition-all duration-700 ease-in-out"},GX={confetti:"animate-confetti",bounce:"animate-bounce",tada:"animate-tada"},KX=t=>{let{message:n}=t;const[r,s]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{setTimeout((()=>s(!0)),100);const e=setTimeout((()=>s(!1)),4500);return()=>clearTimeout(e)}),[]),(0,k.jsx)("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 ".concat(HX.medium," ").concat(r?"opacity-100 translate-y-0":"opacity-0 -translate-y-10"),children:(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-lg py-3 px-5 flex items-center space-x-3 border ".concat(GX.tada),style:{borderColor:nV.$k.secondary[300]},children:[(0,k.jsx)("div",{className:"text-2xl",children:"\ud83c\udfc6"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-bold text-gray-800",children:"Achievement Unlocked!"}),(0,k.jsx)("p",{className:"text-sm text-gray-600",children:n})]})]})})},YX={welcoming:"\ud83d\udc4b",encouraging:"\ud83d\udc4d",celebrating:"\ud83c\udf89",grateful:"\ud83d\ude4f"},QX={streak:"On fire! [X] days of smart saving! \ud83d\udd25",welcome:"Ready to start saving? Let's make it happen! \ud83d\udcaa"},$X=()=>{const{user:t}=(0,N.A)(),n=(0,i.zy)(),{view:r}=(0,i.KC)(),[s,o]=(0,e.useState)(!1),[a,l]=(0,e.useState)("welcoming"),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(0),[m,p]=(0,e.useState)(0),[f,g]=(0,e.useState)(500),[y,v]=(0,e.useState)(0),[x,b]=(0,e.useState)(!0),w=()=>{var e;const n=(new Date).getHours(),r=(null===t||void 0===t||null===(e=t.displayName)||void 0===e?void 0:e.split(" ")[0])||"there";return n<12?"Good morning, ".concat(r,"! \ud83c\udf05"):n<18?"Good afternoon, ".concat(r,"! \u2600\ufe0f"):"Good evening, ".concat(r,"! \ud83c\udf19")};(0,e.useEffect)((()=>{if(null!==t&&void 0!==t&&t.uid){const e=async()=>{b(!0);try{const e=await(async e=>{if(!e)return{savingsStreak:0,totalSaved:0,monthlySaved:0,monthlySavingsGoal:500};try{const[t,n,r,s]=await Promise.all([ZJ(e),eX(e),tX(e),nX(e)]);return{savingsStreak:t,totalSaved:n,monthlySaved:r,monthlySavingsGoal:s}}catch(t){return console.error("Error getting savings stats:",t),{savingsStreak:0,totalSaved:0,monthlySaved:0,monthlySavingsGoal:500}}})(t.uid);h(e.savingsStreak),p(e.totalSaved),v(e.monthlySaved),g(e.monthlySavingsGoal),localStorage.getItem("lastVisit")&&l("welcoming"),localStorage.setItem("lastVisit",(new Date).toISOString())}catch(e){console.error("Error loading savings data:",e),h(0),p(0),v(0)}finally{b(!1)}};e()}}),[null===t||void 0===t?void 0:t.uid]),(0,e.useEffect)((()=>{"true"===new URLSearchParams(n.search).get("redeemed")&&(o(!0),l("celebrating"),u("Coupon redeemed successfully!"),setTimeout((()=>{o(!1),l("grateful")}),3e3),setTimeout((()=>{u(null)}),5e3))}),[n]);const j=e=>{o(!0),l("celebrating"),u(e),setTimeout((()=>{o(!1),l("grateful")}),3e3),setTimeout((()=>{u(null)}),5e3)},C=()=>d>0?QX.streak.replace("[X]",d.toString()):QX.welcome;return x&&t?(0,k.jsxs)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-b from-primary-50 to-white",children:[(0,k.jsx)(rX,{}),(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-primary-600 font-medium",children:"Loading your savings dashboard..."})]})]}):"simple"===r?(0,k.jsxs)("div",{className:"bg-gradient-to-b from-primary-50 to-white min-h-screen",children:[(0,k.jsx)(rX,{}),s&&(0,k.jsx)(WX,{}),c&&(0,k.jsx)(KX,{message:c}),(0,k.jsxs)("div",{className:"px-4 pt-6 pb-4",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-primary-800 mb-1",children:w()}),(0,k.jsx)("p",{className:"text-primary-600 text-sm",children:C()}),(0,k.jsx)("div",{className:"mt-4 flex justify-end items-center",children:(0,k.jsx)("div",{className:"text-3xl",children:YX[a]})})]}),(0,k.jsx)("div",{className:"px-4 mb-6",children:(0,k.jsx)(qX,{currentAmount:y,goalAmount:f,variant:"compact"})}),(0,k.jsx)("div",{className:"bg-white rounded-t-3xl shadow-lg px-4 py-6 min-h-screen",children:t?(0,k.jsx)(LX,{viewMode:"simple",onCouponAction:j}):(0,k.jsx)("div",{className:"p-4 bg-blue-50 text-blue-700 rounded-xl shadow-inner",children:(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"text-2xl",children:YX.encouraging}),(0,k.jsx)("p",{children:"Please log in to view your coupons."})]})})})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)(rX,{}),s&&(0,k.jsx)(WX,{}),c&&(0,k.jsx)(KX,{message:c}),(0,k.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:w()}),(0,k.jsx)("p",{className:"text-primary-600",children:C()})]})}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,k.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-5 shadow-sm border border-primary-100",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-primary-800",children:"Savings Streak"}),(0,k.jsx)("div",{className:"p-2 bg-white rounded-full text-primary-600 shadow-sm",children:(0,k.jsx)("span",{className:"text-xl",children:"\ud83d\udd25"})})]}),(0,k.jsxs)("div",{className:"flex items-baseline",children:[(0,k.jsx)("span",{className:"text-3xl font-bold text-primary-700",children:d}),(0,k.jsx)("span",{className:"ml-2 text-primary-600",children:"days"})]}),(0,k.jsx)("p",{className:"mt-2 text-sm text-primary-600",children:"Keep using coupons to maintain your streak!"})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-secondary-50 to-secondary-100 rounded-xl p-5 shadow-sm border border-secondary-100",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-secondary-800",children:"Total Saved"}),(0,k.jsx)("div",{className:"p-2 bg-white rounded-full text-secondary-600 shadow-sm",children:(0,k.jsx)("span",{className:"text-xl",children:"\ud83d\udcb0"})})]}),(0,k.jsx)("div",{className:"flex items-baseline",children:(0,k.jsxs)("span",{className:"text-3xl font-bold text-secondary-700",children:["R",m]})}),(0,k.jsx)("p",{className:"mt-2 text-sm text-secondary-600",children:"Your lifetime savings with our coupons"})]}),(0,k.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 shadow-sm border border-blue-100",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"This Month"}),(0,k.jsx)("div",{className:"p-2 bg-white rounded-full text-blue-600 shadow-sm",children:(0,k.jsx)("span",{className:"text-xl",children:"\ud83d\udcc5"})})]}),(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsxs)("div",{className:"flex items-baseline mb-2",children:[(0,k.jsxs)("span",{className:"text-2xl font-bold text-blue-700",children:["R",y]}),(0,k.jsxs)("span",{className:"ml-2 text-blue-600",children:["/ R",f]})]}),(0,k.jsx)(qX,{currentAmount:y,goalAmount:f,variant:"detailed"})]})]})]}),(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-grow",children:t?(0,k.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,k.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"My Coupons"}),(0,k.jsx)(LX,{viewMode:"default",onCouponAction:j})]}):(0,k.jsx)("div",{className:"p-6 bg-blue-50 text-blue-700 rounded-xl shadow-inner",children:(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"text-2xl",children:YX.encouraging}),(0,k.jsx)("p",{children:"Please log in to view your coupons."})]})})}),(0,k.jsx)("div",{className:"w-48 ml-6 hidden lg:block",children:(0,k.jsx)(zX,{state:a,onStateChange:l,savingsStreak:d,monthlySaved:y,totalSaved:m})})]})]})},JX=()=>{const[t,n]=(0,e.useState)(localStorage.getItem("dashboardView")||"default"),{user:r,logout:s}=(0,N.A)(),o=(0,i.Zp)(),[a,l]=(0,e.useState)(!1),c=e=>{n(e),localStorage.setItem("dashboardView",e)},u=async()=>{try{await s()}catch(e){console.error("Error logging out:",e)}},d=[{name:"My Coupons",path:"/customer/coupons",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})},{name:"My Loyalty",path:"/customer/loyalty",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{name:"Saved Stores",path:"/customer/stores",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{name:"Profile",path:"/customer/profile",icon:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}];return(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,k.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,k.jsxs)("div",{className:"flex flex-col w-64 border-r border-gray-200 bg-white",children:[(0,k.jsx)("div",{className:"h-16 flex items-center px-4 border-b border-gray-200",children:(0,k.jsx)(jY,{variant:"small"})}),(0,k.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,k.jsx)("span",{className:"font-medium text-lg text-primary-700",children:null!==r&&void 0!==r&&r.displayName?r.displayName.charAt(0).toUpperCase():"C"})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null===r||void 0===r?void 0:r.displayName)||"Customer"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 truncate",children:(null===r||void 0===r?void 0:r.email)||""})]})]})}),(0,k.jsx)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:(0,k.jsxs)("nav",{className:"flex-1 px-2 space-y-1",children:[(0,k.jsxs)("a",{href:"/customer/dashboard",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat("/customer/dashboard"===window.location.pathname?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600"),onClick:e=>{e.preventDefault(),o("/customer/dashboard")},children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),d.map((e=>(0,k.jsxs)("a",{href:e.path,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(window.location.pathname===e.path?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600"),onClick:t=>{t.preventDefault(),o(e.path)},children:[(0,k.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.name))),(0,k.jsxs)("button",{onClick:u,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-primary-600 w-full text-left",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})]})})]})}),(0,k.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,k.jsxs)("div",{className:"md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 flex items-center justify-between border-b border-gray-200 bg-white",children:[(0,k.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:()=>l(!0),children:[(0,k.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,k.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]}),(0,k.jsx)("div",{className:"flex-1 flex justify-center",children:(0,k.jsx)(jY,{variant:"small"})}),(0,k.jsx)("div",{className:"pr-4",children:(0,k.jsx)(C,{onChange:c,initialView:t})})]}),a&&(0,k.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden",children:[(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75","aria-hidden":"true",onClick:()=>l(!1)}),(0,k.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 pb-4 bg-white",children:[(0,k.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,k.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>l(!1),children:[(0,k.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,k.jsx)("svg",{className:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),(0,k.jsx)("div",{className:"flex-shrink-0 flex items-center px-4 mb-4",children:(0,k.jsx)(jY,{variant:"small"})}),(0,k.jsx)("div",{className:"px-4 pb-4 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,k.jsx)("span",{className:"font-medium text-lg text-primary-700",children:null!==r&&void 0!==r&&r.displayName?r.displayName.charAt(0).toUpperCase():"C"})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-700",children:(null===r||void 0===r?void 0:r.displayName)||"Customer"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 truncate",children:(null===r||void 0===r?void 0:r.email)||""})]})]})}),(0,k.jsx)("div",{className:"mt-5 flex-1 h-0 overflow-y-auto",children:(0,k.jsxs)("nav",{className:"px-2 space-y-1",children:[(0,k.jsxs)("a",{href:"/customer/dashboard",className:"group flex items-center px-2 py-2 text-base font-medium rounded-md ".concat("/customer/dashboard"===window.location.pathname?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600"),onClick:e=>{e.preventDefault(),o("/customer/dashboard"),l(!1)},children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-4 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),d.map((e=>(0,k.jsxs)("a",{href:e.path,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md ".concat(window.location.pathname===e.path?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-primary-600"),onClick:t=>{t.preventDefault(),o(e.path),l(!1)},children:[(0,k.jsx)("span",{className:"mr-4 h-6 w-6",children:e.icon}),e.name]},e.name))),(0,k.jsx)("div",{className:"px-2 py-2",children:(0,k.jsx)(C,{onChange:c,initialView:t})}),(0,k.jsxs)("button",{onClick:()=>{u(),l(!1)},className:"group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-primary-600 w-full text-left",children:[(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-4 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})]})})]}),(0,k.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]}),(0,k.jsx)("div",{className:"hidden md:flex md:items-center md:justify-end md:px-4 md:py-2 border-b border-gray-200 bg-white",children:(0,k.jsx)(C,{onChange:c,initialView:t})}),(0,k.jsx)("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:(0,k.jsx)("div",{className:"py-6 px-4 sm:px-6 md:px-8",children:(0,k.jsx)(i.sv,{context:{view:t}})})})]})]})},XX=()=>{const{user:e,logout:t}=(0,N.A)(),n=(0,i.Zp)();return(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,k.jsx)("header",{className:"bg-white shadow-sm",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("img",{src:"/logo.png",alt:"TYCA Logo",className:"h-8 w-auto"}),(0,k.jsx)("span",{className:"ml-2 font-semibold text-gray-800",children:"TYCA"})]}),(0,k.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,k.jsx)("button",{onClick:()=>t(),className:"text-sm text-gray-600 hover:text-gray-900",children:"Sign out"}):(0,k.jsx)("button",{onClick:()=>n("/login"),className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Sign in"})})]})}),(0,k.jsx)("main",{children:(0,k.jsx)(i.sv,{})})]})},ZX=()=>{const{user:t}=(0,N.A)(),n=(0,i.Zp)(),[r,s]=(0,e.useState)("there"),[o,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!1);(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.uid){a(!0);try{t.displayName&&s(t.displayName.split(" ")[0]);const e=await(0,sl.x7)((0,sl.H9)(rl.db,"users",t.uid));if(e.exists()){const t=e.data();if(t.customerId){const e=await(0,sl.x7)((0,sl.H9)(rl.db,"customers",t.customerId));if(e.exists()){const t=e.data();c(t.loyaltyPoints&&Object.keys(t.loyaltyPoints).length>0),d(!0)}}}}catch(e){console.error("Error loading user data:",e)}finally{a(!1)}}})()}),[t]);return o?(0,k.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-indigo-600 font-medium",children:"Loading..."})]})}):(0,k.jsxs)("div",{className:"bg-gray-50 min-h-screen px-4 py-6",children:[(0,k.jsxs)("div",{className:"text-center mb-8",children:[(0,k.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),", ",r,"! \ud83d\udc4b"]}),(0,k.jsx)("p",{className:"text-gray-600",children:"Ready to start saving? Let's make it happen! \ud83d\udcaa"})]}),(0,k.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,k.jsxs)("div",{onClick:()=>n("/customer/dashboard"),className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer transform transition-transform hover:scale-105",children:[(0,k.jsx)("div",{className:"bg-indigo-600 px-6 py-4",children:(0,k.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center",children:[(0,k.jsx)("span",{className:"text-2xl mr-2",children:"\ud83c\udf9f\ufe0f"})," Get My Coupons"]})}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:u?"View and redeem your available coupons":"Discover exclusive deals and discounts"}),(0,k.jsx)("div",{className:"flex justify-end",children:(0,k.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-indigo-100 text-indigo-600",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]})]}),(0,k.jsxs)("div",{onClick:()=>n("/customer/loyalty"),className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer transform transition-transform hover:scale-105",children:[(0,k.jsx)("div",{className:"bg-emerald-600 px-6 py-4",children:(0,k.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center",children:[(0,k.jsx)("span",{className:"text-2xl mr-2",children:"\ud83c\udfc6"})," My Loyalty Card"]})}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("p",{className:"text-gray-600 mb-4",children:l?"View your loyalty points and rewards":"Join loyalty programs to earn rewards"}),(0,k.jsx)("div",{className:"flex justify-end",children:(0,k.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-emerald-100 text-emerald-600",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]})]}),(0,k.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-8 text-center",children:[(0,k.jsxs)("p",{className:"text-yellow-700 flex items-center justify-center",children:[(0,k.jsx)("span",{className:"mr-2",children:"\ud83d\udccd"})," Store Mode Active"]}),(0,k.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"Quick access to your coupons and loyalty cards"})]})]}),(0,k.jsx)("div",{className:"text-center mt-8",children:(0,k.jsx)(y,{to:"/customer/dashboard",className:"text-indigo-600 font-medium hover:text-indigo-800",children:"Go to Full Dashboard"})})]})},eZ=async(e,t)=>{for(const n of e){console.log("Checking couponDistributions for ID: ".concat(n));const e=(0,sl.rJ)(rl.db,"couponDistributions"),r=(0,sl.P)(e,(0,sl._M)("customerId","==",n)),s=await(0,sl.GG)(r);console.log("Found ".concat(s.size," distributions for ID: ").concat(n)),s.forEach((e=>{const n=e.data();n.businessId&&t.add(n.businessId)}))}},tZ=async(e,t)=>{for(const n of e){console.log("Checking customerCoupons for ID: ".concat(n));const e=(0,sl.rJ)(rl.db,"customerCoupons"),r=(0,sl.P)(e,(0,sl._M)("customerId","==",n)),s=await(0,sl.GG)(r);console.log("Found ".concat(s.size," customer coupons with customerId: ").concat(n)),s.forEach((e=>{const n=e.data();n.businessId&&t.add(n.businessId)}));const o=(0,sl.rJ)(rl.db,"customerCoupons"),i=(0,sl.P)(o,(0,sl._M)("userId","==",n)),a=await(0,sl.GG)(i);console.log("Found ".concat(a.size," customer coupons with userId: ").concat(n)),a.forEach((e=>{const n=e.data();n.businessId&&t.add(n.businessId)}))}},nZ=async(e,t)=>{const n=new Set;for(const r of e){const e=(0,sl.rJ)(rl.db,"couponDistributions"),t=(0,sl.P)(e,(0,sl._M)("customerId","==",r));(await(0,sl.GG)(t)).forEach((e=>{const t=e.data();t.couponId&&n.add(t.couponId)}))}for(const r of e){const e=(0,sl.rJ)(rl.db,"customerCoupons"),t=(0,sl.P)(e,(0,sl._M)("customerId","==",r));(await(0,sl.GG)(t)).forEach((e=>{const t=e.data();t.couponId&&n.add(t.couponId)}));const s=(0,sl.rJ)(rl.db,"customerCoupons"),o=(0,sl.P)(s,(0,sl._M)("userId","==",r));(await(0,sl.GG)(o)).forEach((e=>{const t=e.data();t.couponId&&n.add(t.couponId)}))}if(console.log("Found ".concat(n.size," total coupon IDs")),n.size>0){const e=Array.from(n),r=10;for(let n=0;n<e.length;n+=r){const s=e.slice(n,n+r);for(const e of s){const n=(0,sl.rJ)(rl.db,"coupons"),r=(0,sl.P)(n,(0,sl._M)("__name__","==",e));(await(0,sl.GG)(r)).forEach((e=>{const n=e.data();n.businessId&&t.add(n.businessId)}))}}}},rZ=async(e,t)=>{try{console.log("Looking up customers with phone number: ".concat(e));const n=e.replace(/\s+|-|\(|\)|\+/g,""),r=(0,sl.rJ)(rl.db,"customers"),s=(0,sl.P)(r,(0,sl._M)("phone","==",n));let o=(await(0,sl.GG)(s)).docs;if(0===o.length){const t=(0,sl.P)(r,(0,sl._M)("phone","==",e));o=(await(0,sl.GG)(t)).docs}console.log("Found ".concat(o.length," customers with phone number: ").concat(e));for(const e of o){const n=e.id;console.log("Checking distributions for phone-linked customer ID: ".concat(n));const r=(0,sl.rJ)(rl.db,"couponDistributions"),s=(0,sl.P)(r,(0,sl._M)("customerId","==",n)),o=await(0,sl.GG)(s);console.log("Found ".concat(o.size," distributions for phone-linked customer ID: ").concat(n)),o.forEach((e=>{const n=e.data();n.businessId&&(t.add(n.businessId),console.log("Added business ID from phone lookup: ".concat(n.businessId)))}));const i=(0,sl.rJ)(rl.db,"customerCoupons"),a=(0,sl.P)(i,(0,sl._M)("customerId","==",n)),l=await(0,sl.GG)(a);console.log("Found ".concat(l.size," customer coupons for phone-linked customer ID: ").concat(n)),l.forEach((e=>{const n=e.data();n.businessId&&(t.add(n.businessId),console.log("Added business ID from phone lookup: ".concat(n.businessId)))}))}}catch(n){console.error("Error getting business IDs from phone number:",n)}},sZ=async e=>{const t=(0,sl.rJ)(rl.db,"coupons"),n=(0,sl.P)(t,(0,sl._M)("businessId","==",e),(0,sl._M)("active","==",!0));return(await(0,sl.GG)(n)).size},oZ=async e=>{try{console.log("Fetching stores for user:",e);const t=await $J(e),n=null===t||void 0===t?void 0:t.id,r=null===t||void 0===t?void 0:t.phone;console.log("Linked customer ID:",n||"Not linked"),console.log("Linked customer phone:",r||"No phone");const s=[e];n&&s.push(n);const o=await(async(e,t)=>{const n=new Set;return await eZ(e,n),await tZ(e,n),await nZ(e,n),t&&await rZ(t,n),n})(s,r);console.log("Total unique business IDs found:",o.size);const i=await(async e=>{const t=[],n=Array.from(e);for(const r of n){console.log("Fetching details for business: ".concat(r));const e=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",r));if(e.exists()){const n=e.data(),s=await sZ(r);t.push({id:r,businessName:n.businessName||"Unknown Business",industry:n.industry||"Not specified",logo:n.logo||void 0,description:n.description||"",address:n.address||"",couponCount:s,colors:n.colors||{primary:"#3B82F6",secondary:"#10B981"}}),console.log("Added store: ".concat(n.businessName," with ").concat(s," coupons"))}else console.log("Business document not found for ID: ".concat(r))}return t})(o);return console.log("Returning total stores:",i.length),{stores:i,lastVisible:null,hasMore:!1}}catch(t){throw console.error("Error fetching stores:",t),t}},iZ=(t,n,r)=>{const s=(0,e.useMemo)((()=>(console.log("Filtering stores:",{stores:t,searchQuery:n,showOnlyWithCoupons:r}),t&&0!==t.length?t.filter((e=>{var t,s,o,i;if(r&&(!e.couponCount||0===e.couponCount))return console.log("Store ".concat(e.businessName," filtered out - no coupons")),!1;if(""===n.trim())return!0;const a=n.toLowerCase(),l=(null===(t=e.businessName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.industry)||void 0===s?void 0:s.toLowerCase().includes(a))||(null===(o=e.description)||void 0===o?void 0:o.toLowerCase().includes(a))||(null===(i=e.address)||void 0===i?void 0:i.toLowerCase().includes(a));return l||console.log("Store ".concat(e.businessName," filtered out - doesn't match search")),l})):(console.log("No stores to filter"),[]))),[t,n,r]);return console.log("Filtered stores result:",s),s},aZ=e=>{let{searchQuery:t,setSearchQuery:n,showOnlyWithCoupons:r,setShowOnlyWithCoupons:s}=e;return(0,k.jsxs)("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,k.jsx)("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Search stores...",value:t,onChange:e=>n(e.target.value)})]}),(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("label",{htmlFor:"coupon-toggle",className:"mr-3 text-sm font-medium text-gray-700",children:"Show only stores with coupons"}),(0,k.jsx)("button",{type:"button",id:"coupon-toggle",className:"".concat(r?"bg-primary-600":"bg-gray-200"," relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),role:"switch","aria-checked":r,onClick:()=>s(!r),children:(0,k.jsx)("span",{"aria-hidden":"true",className:"".concat(r?"translate-x-5":"translate-x-0"," pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200")})})]})]})},lZ=e=>{let{searchQuery:t,showOnlyWithCoupons:n,setShowOnlyWithCoupons:r}=e;return(0,k.jsx)("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:"text-gray-700 font-medium",children:"No stores match your search"}),(0,k.jsx)("p",{className:"text-gray-500 mt-2",children:"Try adjusting your search or filters to find what you're looking for."})]}):n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:"text-gray-700 font-medium",children:"No stores with coupons found"}),(0,k.jsx)("p",{className:"text-gray-500 mt-2",children:'Try turning off the "Show only stores with coupons" filter to see all saved stores.'}),(0,k.jsx)("button",{onClick:()=>r(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Show all stores"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{className:"text-gray-700 font-medium",children:"You haven't saved any stores yet"}),(0,k.jsx)("p",{className:"text-gray-500 mt-2",children:"Explore businesses to find stores you like!"})]})})},cZ=e=>{var t,n;let{store:r}=e;const s=(0,i.Zp)(),o=(null===(t=r.colors)||void 0===t?void 0:t.primary)||"#3B82F6",a=(null===(n=r.colors)||void 0===n?void 0:n.secondary)||"#10B981",l=r.businessName||r.name||"Business",c=r.couponCount||0;return(0,k.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[(0,k.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center",style:{backgroundColor:o+"10"},children:[r.logo?(0,k.jsx)("img",{src:r.logo,alt:l,className:"h-10 w-10 rounded-full object-cover mr-3 border-2",style:{borderColor:o}}):(0,k.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white mr-3",style:{backgroundColor:o},children:l.charAt(0)}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium",style:{color:o},children:l}),(0,k.jsx)("p",{className:"text-xs text-gray-500",children:r.industry||"General"})]})]}),(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:r.description||"No description available"}),(0,k.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:r.address||"No address provided"}),(0,k.jsx)("div",{className:"flex items-center justify-between",children:(0,k.jsx)("span",{className:"text-sm text-gray-700",children:c>0?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"font-medium",style:{color:a},children:c})," ",1===c?"coupon":"coupons"," available"]}):(0,k.jsx)("span",{className:"text-gray-500",children:"No coupons available"})})})]}),(0,k.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between",children:[(0,k.jsx)("button",{className:"inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{borderColor:o+"40",color:o,outlineColor:o},onClick:()=>{s("/customer/stores/".concat(r.id))},children:"View Store"}),(0,k.jsx)("button",{className:"inline-flex justify-center py-2 px-4 border rounded-md shadow-sm text-sm font-medium ".concat(c>0?"border-transparent text-white hover:opacity-90":"border-gray-300 text-gray-400 bg-gray-50 cursor-not-allowed"," focus:outline-none focus:ring-2 focus:ring-offset-2"),style:{backgroundColor:c>0?o:void 0,outlineColor:o},disabled:0===c,onClick:c>0?()=>{s("/customer/coupons?businessId=".concat(r.id))}:void 0,children:"View Coupons"})]})]})},uZ=e=>{let{stores:t,searchQuery:n,hasMore:r,loadingMore:s,loadMoreStores:o}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Showing ",t.length," ",1===t.length?"store":"stores",n?' for "'.concat(n,'"'):""]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e=>(0,k.jsx)(cZ,{store:e},e.id)))}),r&&(0,k.jsx)(EX,{onClick:o,isLoading:s})]})},dZ=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)([]),[s,o]=(0,e.useState)(!0),[i,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(null),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)(!1),g=iZ(n,i,l);(0,e.useEffect)((()=>{(async()=>{if(t)try{o(!0);const e=await oZ(t.uid);e.stores.length>0&&(r(e.stores),d(e.lastVisible),f(e.hasMore))}catch(e){r([])}finally{o(!1)}})()}),[t]);return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Saved Stores"}),(0,k.jsx)(aZ,{searchQuery:i,setSearchQuery:a,showOnlyWithCoupons:l,setShowOnlyWithCoupons:c})]}),s?(0,k.jsx)(SX,{}):0===g.length?(0,k.jsx)(lZ,{searchQuery:i,showOnlyWithCoupons:l,setShowOnlyWithCoupons:c}):(0,k.jsx)(uZ,{stores:g,searchQuery:i,hasMore:p&&!s,loadingMore:h,loadMoreStores:async()=>{if(t&&u&&p)try{m(!0);const e=await(async()=>({stores:[],lastVisible:null,hasMore:!1}))(t.uid);r((t=>[...t,...e.stores])),d(e.lastVisible),f(e.hasMore)}catch(e){}finally{m(!1)}}})]})},hZ=()=>{const{storeId:t}=(0,i.g)(),n=(0,i.Zp)(),[r,s]=(0,e.useState)(null),[o,a]=(0,e.useState)(!0),[l,c]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{if(!t)return c("Store ID is missing"),void a(!1);try{a(!0);const e=await(async e=>{try{const t=await(0,sl.x7)((0,sl.H9)(rl.db,"businesses",e));if(!t.exists())return null;const n=t.data(),r=await sZ(e);return{id:e,businessName:n.businessName||"Unknown Business",industry:n.industry||"Not specified",logo:n.logo||void 0,description:n.description||"",address:n.address||"",couponCount:r,colors:n.colors||{primary:"#3B82F6",secondary:"#10B981"}}}catch(l){return console.error("Error fetching business by ID:",l),null}})(t);e?s(e):c("Store not found")}catch(zZ){console.error("Error loading store details:",zZ),c("Failed to load store details")}finally{a(!1)}})()}),[t]);const u=()=>{n("/customer/stores")};if(o)return(0,k.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,k.jsx)(SX,{})});if(l||!r)return(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:l||"Store not found"}),(0,k.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find the store you're looking for."}),(0,k.jsx)("button",{onClick:u,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"#3B82F6",outlineColor:"#3B82F6"},children:"Back to Stores"})]})});const d=(()=>{var e;return(null===r||void 0===r||null===(e=r.colors)||void 0===e?void 0:e.primary)||"#3B82F6"})(),h=(()=>{var e;return(null===r||void 0===r||null===(e=r.colors)||void 0===e?void 0:e.secondary)||"#10B981"})(),m=r.businessName||r.name||"Business",p=r.couponCount||0;return(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,k.jsx)("div",{className:"p-6 border-b",style:{backgroundColor:d+"10",borderColor:d+"40"},children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("button",{onClick:u,className:"mr-4 p-1 rounded-full hover:bg-gray-200","aria-label":"Back",children:(0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),r.logo?(0,k.jsx)("img",{src:r.logo,alt:m,className:"h-16 w-16 rounded-full object-cover mr-4 border-2",style:{borderColor:d}}):(0,k.jsx)("div",{className:"h-16 w-16 rounded-full flex items-center justify-center text-white mr-4",style:{backgroundColor:d},children:(0,k.jsx)("span",{className:"text-2xl",children:m.charAt(0)})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold",style:{color:d},children:m}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:r.industry||"General"})]})]})}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium mb-2",style:{color:d},children:"About"}),(0,k.jsx)("p",{className:"text-gray-600",children:r.description||"No description available for this store."})]}),r.address&&(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium mb-2",style:{color:d},children:"Location"}),(0,k.jsx)("p",{className:"text-gray-600",children:r.address})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsx)("h2",{className:"text-lg font-medium mb-2",style:{color:d},children:"Coupons"}),(0,k.jsxs)("div",{className:"rounded-lg p-4 flex items-center justify-between",style:{backgroundColor:d+"10"},children:[(0,k.jsx)("div",{children:(0,k.jsx)("p",{className:"text-gray-600",children:p>0?(0,k.jsxs)(k.Fragment,{children:["This store has ",(0,k.jsx)("span",{className:"font-medium",style:{color:h},children:p})," active ",1===p?"coupon":"coupons","."]}):"This store has no active coupons at the moment."})}),p>0&&(0,k.jsx)("button",{onClick:()=>{r&&n("/customer/coupons?businessId=".concat(r.id))},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:d,outlineColor:d},children:"View Coupons"})]})]})]})]})},mZ=e=>{let{user:t}=e;return(0,k.jsxs)("div",{className:"px-4 py-5 sm:px-6 flex items-center",children:[null!==t&&void 0!==t&&t.photoURL?(0,k.jsx)("img",{className:"h-16 w-16 rounded-full mr-4",src:t.photoURL,alt:t.displayName||"User"}):(0,k.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary-600 flex items-center justify-center text-white text-xl mr-4",children:null!==t&&void 0!==t&&t.displayName?t.displayName.charAt(0).toUpperCase():"U"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:(null===t||void 0===t?void 0:t.displayName)||"Customer"}),(0,k.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Personal details and account information"})]})]})},pZ=e=>{var t;let{user:n,customerProfile:r}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Full name"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null===n||void 0===n?void 0:n.displayName)||"Not provided"})]}),(0,k.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Email address"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:null===n||void 0===n?void 0:n.email})]}),(0,k.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Account type"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:"Customer"})]}),(0,k.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Account created"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:null!==n&&void 0!==n&&null!==(t=n.metadata)&&void 0!==t&&t.creationTime?new Date(n.metadata.creationTime).toLocaleDateString():"Unknown"})]}),r&&(0,k.jsxs)("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Customer status"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,k.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Linked to customer profile"})})]})]})},fZ=t=>{let{user:n,phoneNumber:r,originalPhoneNumber:s,onPhoneNumberChange:o,isLoading:i,viewMode:a="detailed"}=t;const[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(r),[h,m]=(0,e.useState)(!1),[p,f]=(0,e.useState)("");(0,e.useEffect)((()=>{d(r)}),[r]);const g=async e=>{if(e.preventDefault(),f(""),u.trim())if(/^\+?[0-9\s\-()]{7,20}$/.test(u)){m(!0);try{if(!n)throw new Error("User not authenticated");const e=(e=>{if(!e)return"";const t=e.replace(/[^\d+]/g,"");if(t.startsWith("+")){if(t.length>10){const e=t.substring(0,t.length-10),n=t.substring(t.length-10,t.length-7),r=t.substring(t.length-7,t.length-4),s=t.substring(t.length-4);return"".concat(e," (").concat(n,") ").concat(r,"-").concat(s)}}else if(10===t.length){const e=t.substring(0,3),n=t.substring(3,6),r=t.substring(6);return"(".concat(e,") ").concat(n,"-").concat(r)}return t})(u),t=(0,sl.H9)(rl.db,"users",n.uid);(await(0,sl.x7)(t)).exists()?await(0,sl.mZ)(t,{phone:e,phoneNormalized:e.replace(/\D/g,""),updatedAt:new Date}):await(0,sl.BN)(t,{uid:n.uid,email:n.email,displayName:n.displayName||"",phone:e,phoneNormalized:e.replace(/\D/g,""),role:"customer",createdAt:new Date,updatedAt:new Date});o(e,e!==s),bj.success("Phone number updated successfully"),c(!1)}catch(p){console.error("Error updating phone number:",p),f(p.message||"Failed to update profile"),bj.error(p.message||"Failed to update profile")}finally{m(!1)}}else f("Please enter a valid phone number");else f("Please enter a phone number")},y=()=>{d(r),c(!1),f("")};return"simple"===a?(0,k.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Phone Number"}),!l&&(0,k.jsx)("button",{type:"button",onClick:()=>c(!0),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:r?"Edit":"Add"})]}),l?(0,k.jsxs)("form",{onSubmit:g,className:"mt-2",children:[(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("input",{type:"tel",value:u,onChange:e=>d(e.target.value),placeholder:"Enter your phone number",className:"w-full px-3 py-2 border ".concat(p?"border-red-500":"border-gray-300"," rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"),disabled:h}),p&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{type:"submit",className:"flex-1 bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:h,children:h?"Saving...":"Save"}),(0,k.jsx)("button",{type:"button",onClick:y,className:"flex-1 bg-white text-gray-700 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:h,children:"Cancel"})]})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-gray-700",children:r||"Not provided"}),!r&&(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Required to see coupons"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Adding your phone number will link your account to your customer profile."})]})]})]})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,k.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Phone number"}),(0,k.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:l?(0,k.jsxs)("form",{onSubmit:g,className:"space-y-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("input",{type:"tel",value:u,onChange:e=>d(e.target.value),placeholder:"Enter your phone number",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm ".concat(p?"border-red-500":"border-gray-300"," rounded-md"),disabled:h}),p&&(0,k.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)("button",{type:"submit",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:h,children:h?"Saving...":"Save"}),(0,k.jsx)("button",{type:"button",onClick:y,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:h,children:"Cancel"})]})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("span",{children:r||"Not provided"}),!r&&(0,k.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Required to see coupons"})]}),!i&&!r&&(0,k.jsx)("p",{className:"mt-1 text-sm text-yellow-600",children:"Adding your phone number will link your account to your customer profile and allow you to see your coupons."})]})})]}),!l&&(0,k.jsx)("div",{className:"px-4 py-3 bg-white",children:(0,k.jsx)("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r?"Update Phone Number":"Add Phone Number"})})]})},gZ=()=>(0,k.jsx)("div",{className:"mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,k.jsx)("strong",{children:"Important:"})," To see your coupons, add your phone number to link your account to your customer profile."]}),(0,k.jsx)("p",{className:"mt-2 text-sm text-yellow-700",children:"Try using the phone number that businesses have on file for you."})]})]})}),yZ=t=>{let{phoneNumberChanged:n=!1,newPhoneNumber:r=""}=t;const{user:s}=(0,N.A)(),[o,i]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{n&&i(!1)}),[n,r]),(0,e.useEffect)((()=>{if(o||!s)return;(async()=>{try{console.log("AutoLink: Checking if user account needs linking...");let t=r;if(!t)if(s.phoneNumber)t=s.phoneNumber;else{const e=(0,sl.H9)(rl.db,"users",s.uid),n=await(0,sl.x7)(e);if(n.exists()){const e=n.data();e.phone&&(t=e.phone)}else console.log("AutoLink: User document does not exist, creating it"),await(0,sl.BN)(e,{email:s.email,displayName:s.displayName||"",createdAt:new Date,updatedAt:new Date})}const o=await $J(s.uid);if(n&&o){console.log("AutoLink: Phone number changed, checking if we need to de-link");const n=t?await YJ(t):null;if(n){if(n.id!==o.id){console.log("AutoLink: New phone number matches different customer profile, updating link");try{const e=(0,sl.H9)(rl.db,"customers",o.id);(await(0,sl.x7)(e)).exists()?await(0,sl.mZ)(e,{userId:null,updatedAt:new Date}):console.error("AutoLink: Old customer document does not exist, cannot de-link"),await QJ(s.uid,n.id),console.log("AutoLink: Successfully linked user to new customer profile")}catch(e){console.error("AutoLink: Error updating customer link:",e)}}}else{console.log("AutoLink: New phone number has no matching customer profile, de-linking");try{const e=(0,sl.H9)(rl.db,"customers",o.id);(await(0,sl.x7)(e)).exists()?(await(0,sl.mZ)(e,{userId:null,updatedAt:new Date}),console.log("AutoLink: Successfully de-linked user from customer profile")):console.error("AutoLink: Customer document does not exist, cannot de-link")}catch(e){console.error("AutoLink: Error de-linking customer:",e)}}return void i(!0)}if(o&&!n)return console.log("AutoLink: User already linked to customer profile",o.id),void i(!0);if(t){console.log("AutoLink: Searching for customer profile with phone ".concat(t));const n=await YJ(t);if(n){console.log("AutoLink: Found matching customer profile",n.id);try{await QJ(s.uid,n.id),console.log("AutoLink: Successfully linked user to customer profile");const e=(0,sl.H9)(rl.db,"users",s.uid);(await(0,sl.x7)(e)).exists()?await(0,sl.mZ)(e,{phone:t,updatedAt:new Date}):await(0,sl.BN)(e,{email:s.email,displayName:s.displayName||"",phone:t,createdAt:new Date,updatedAt:new Date})}catch(e){console.error("AutoLink: Error linking user to customer:",e)}}else console.log("AutoLink: No matching customer profile found for this phone number")}else console.log("AutoLink: No phone number found for user");i(!0)}catch(e){console.error("AutoLink: Error during auto-linking:",e),i(!0)}})()}),[s,o,n,r]),null},vZ=()=>{const{user:t}=(0,N.A)(),[n,r]=(0,e.useState)(""),[s,o]=(0,e.useState)(""),[a,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(!1),m=(0,i.zy)(),p="simple"===new URLSearchParams(m.search).get("view")?"simple":"detailed";(0,e.useEffect)((()=>{(async()=>{if(null!==t&&void 0!==t&&t.uid){u(!0);try{let e="";const n=await(0,sl.x7)((0,sl.H9)(rl.db,"users",t.uid));if(n.exists()){const t=n.data();t.phone&&(e=t.phone,r(t.phone),o(t.phone))}const s=await $J(t.uid);s&&(l(s),s.phone&&!e&&(r(s.phone),o(s.phone)))}catch(e){console.error("Error checking customer profile:",e)}finally{u(!1)}}})()}),[t]);const f=(e,t)=>{r(e),t&&(h(!0),o(e))};return"simple"===p?(0,k.jsxs)("div",{className:"max-w-lg mx-auto p-4",children:[d&&(0,k.jsx)(yZ,{phoneNumberChanged:d,newPhoneNumber:n}),(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,k.jsx)("div",{className:"p-4 bg-indigo-50 border-b border-indigo-100",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-500 mr-4",children:null!==t&&void 0!==t&&t.displayName?t.displayName.charAt(0).toUpperCase():"U"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:(null===t||void 0===t?void 0:t.displayName)||"Customer"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:null===t||void 0===t?void 0:t.email})]})]})}),(0,k.jsx)(fZ,{user:t,phoneNumber:n,originalPhoneNumber:s,onPhoneNumberChange:f,isLoading:c,viewMode:"simple"}),!a&&!c&&(0,k.jsx)("div",{className:"p-4 bg-yellow-50 border-t border-yellow-100",children:(0,k.jsxs)("div",{className:"flex items-start",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Link your account"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-yellow-700",children:"Add your phone number to link your account with your customer profile and access your coupons."})]})]})})]}),(0,k.jsx)("div",{className:"mt-6 flex justify-center",children:(0,k.jsx)("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"})})]}):(0,k.jsxs)("div",{children:[d&&(0,k.jsx)(yZ,{phoneNumberChanged:d,newPhoneNumber:n}),(0,k.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"My Profile"}),(0,k.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,k.jsx)(mZ,{user:t}),(0,k.jsx)("div",{className:"border-t border-gray-200",children:(0,k.jsxs)("dl",{children:[(0,k.jsx)(pZ,{user:t,customerProfile:a}),(0,k.jsx)(fZ,{user:t,phoneNumber:n,originalPhoneNumber:s,onPhoneNumberChange:f,isLoading:c,viewMode:"detailed"})]})})]}),!a&&!c&&(0,k.jsx)(gZ,{}),(0,k.jsx)("div",{className:"mt-6 flex justify-end",children:(0,k.jsx)("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back to Dashboard"})})]})};var xZ=n(8869);const bZ=e=>{let{program:t}=e;const{id:n,name:r,description:s,type:o,businessName:i,businessLogo:a,businessColors:l,customerPoints:c=0,customerVisits:u=0,customerTier:d="",pointsPerAmount:h,visitsRequired:m,tiers:p=[]}=t,f=(null===l||void 0===l?void 0:l.primary)||"#3B82F6",g=(null===l||void 0===l||l.secondary,"".concat(f,"20")),v=(()=>{if("points"===o&&h){if(p&&p.length>0){const e=[...p].sort(((e,t)=>e.threshold-t.threshold));for(const t of e)if(c<t.threshold)return c/t.threshold*100;return 100}return Math.min(c/100,100)}if("visits"===o&&m)return Math.min(u/m*100,100);if("tiered"===o&&p&&p.length>0){const e=[...p].sort(((e,t)=>e.threshold-t.threshold)),t=e.findIndex((e=>e.name===d));if(t>=0&&t<e.length-1){const n=e[t].threshold,r=e[t+1].threshold;return(c-n)/(r-n)*100}return t===e.length-1?100:0}return 0})();return(0,k.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm border transition-all duration-300 hover:shadow-md",style:{borderColor:"".concat(f,"30")},children:[(0,k.jsxs)("div",{className:"p-4 flex items-center border-b",style:{borderColor:"".concat(f,"20")},children:[a?(0,k.jsx)("img",{src:a,alt:i||"Business",className:"w-10 h-10 rounded-full object-cover mr-3"}):(0,k.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white mr-3",style:{backgroundColor:f},children:i?i.charAt(0).toUpperCase():"B"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:i}),(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Loyalty Program"})]})]}),(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold mb-2",style:{color:f},children:r}),(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,k.jsx)("span",{children:"points"===o?"".concat(c," points earned"):"visits"===o?"".concat(u," ").concat(1===u?"visit":"visits"," completed"):"tiered"===o?"".concat(d," tier (").concat(c," points)"):""}),(0,k.jsx)("span",{children:"tiered"===o?d:""})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-1",children:(0,k.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(v,"%"),backgroundColor:f}})}),(0,k.jsx)("p",{className:"text-xs text-gray-500",children:(()=>{if("points"===o&&h){if(p&&p.length>0){const e=[...p].sort(((e,t)=>e.threshold-t.threshold));for(const t of e)if(c<t.threshold)return"".concat(t.threshold-c," more points to reach ").concat(t.name," tier");return"You've reached the highest tier!"}return"Earn points with every purchase"}if("visits"===o&&m){const e=m-u;return e<=0?"You've earned a reward!":"".concat(e," more ").concat(1===e?"visit":"visits"," to earn a reward")}if("tiered"===o&&p&&p.length>0){const e=[...p].sort(((e,t)=>e.threshold-t.threshold)),t=e.findIndex((e=>e.name===d));if(t>=0&&t<e.length-1){const n=e[t+1];return"".concat(n.threshold-c," more points to reach ").concat(n.name," tier")}return t===e.length-1?"You've reached the highest tier!":"Start earning points to reach higher tiers"}return""})()})]})]}),(0,k.jsxs)("div",{className:"px-4 py-3 bg-gray-50 border-t flex justify-between items-center",style:{borderColor:"".concat(f,"20"),backgroundColor:g},children:[(0,k.jsx)("span",{className:"text-xs text-gray-500",children:"points"===o?"Points-based":"visits"===o?"Visit-based":"Tiered program"}),(0,k.jsx)(y,{to:"/customer/loyalty/".concat(n),className:"px-4 py-1.5 text-white text-sm rounded-md transition-all duration-300 hover:opacity-90",style:{backgroundColor:f},children:"View Details"})]})]})},wZ=t=>{let{program:n}=t;const[r,s]=(0,e.useState)(""),[o,i]=(0,e.useState)(0);return(0,e.useEffect)((()=>{(async()=>{try{const e={customerId:n.customerId,programId:n.programId,businessId:n.businessId,timestamp:Date.now()},t=JSON.stringify(e),r=await Lz.toDataURL(t);s(r)}catch(e){console.error("Error generating QR code:",e)}})();const e=setInterval((()=>{i((e=>e+1))}),3e4);return()=>clearInterval(e)}),[n,o]),r?(0,k.jsx)("div",{className:"qr-code-container",children:(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)("img",{src:r,alt:"Loyalty Card QR Code",className:"h-40 w-40 rounded-lg shadow-md"}),(0,k.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Show this QR code to earn points"}),(0,k.jsx)("div",{className:"mt-1 text-xs text-gray-400",children:"QR code refreshes every 30 seconds"})]})}):(0,k.jsx)("div",{className:"qr-code-container flex items-center justify-center h-40 w-40 bg-gray-100 rounded-lg",children:(0,k.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading QR..."})})},NZ=e=>{let{searchQuery:t=""}=e;return t?(0,k.jsxs)("div",{className:"text-center py-12 px-4 bg-white rounded-lg shadow-sm",children:[(0,k.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100 mb-4",children:(0,k.jsx)("svg",{className:"w-8 h-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No matching loyalty programs"}),(0,k.jsxs)("p",{className:"text-gray-500 mb-4",children:["We couldn't find any loyalty programs matching \"",t,'".']}),(0,k.jsx)("button",{onClick:()=>window.location.href="/customer/loyalty",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Search"})]}):(0,k.jsxs)("div",{className:"text-center py-12 px-4 bg-white rounded-lg shadow-sm",children:[(0,k.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100 mb-4",children:(0,k.jsx)("svg",{className:"w-8 h-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Loyalty Programs Yet"}),(0,k.jsx)("p",{className:"text-gray-500 mb-4",children:"You haven't joined any loyalty programs yet. Visit stores to start earning rewards!"}),(0,k.jsx)(y,{to:"/customer/stores",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Browse Stores"})]})},jZ=()=>{var t;const{user:n}=(0,N.A)(),[r,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{if(n)try{i(!0);const e=await $J(n.uid);if(!e)return s([]),void i(!1);const t=await(0,xZ.Ov)(e.id);s(t),t.length>0&&l(t[0])}catch(e){console.error("Error fetching loyalty programs:",e)}finally{i(!1)}})()}),[n]);return o?(0,k.jsx)(SX,{}):0===r.length?(0,k.jsx)(NZ,{}):(0,k.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"My Loyalty Programs"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,k.jsx)("div",{className:"md:col-span-1",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"My Programs"}),(0,k.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,k.jsx)("div",{className:"cursor-pointer p-3 rounded-lg transition-colors ".concat((null===a||void 0===a?void 0:a.id)===e.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"),onClick:()=>(e=>{l(e)})(e),children:(0,k.jsx)(bZ,{program:e})},e.id)))})]})}),(0,k.jsx)("div",{className:"md:col-span-2",children:a?(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a.programName||"Loyalty Card"}),(0,k.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)(wZ,{program:a})}),(0,k.jsxs)("div",{className:"flex-grow",children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Your Progress"}),(0,k.jsx)("div",{className:"bg-gray-100 rounded-full h-4 w-full",children:(0,k.jsx)("div",{className:"bg-blue-500 h-4 rounded-full",style:{width:"".concat(Math.min(a.progress.visits/(a.visitsRequired||10)*100,100),"%")}})}),(0,k.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[a.progress.visits," / ",a.visitsRequired||10," visits"]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Points Balance"}),(0,k.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[a.progress.points," pts"]})]}),(0,k.jsxs)("div",{className:"mt-6",children:[(0,k.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Available Rewards"}),(null===(t=a.rewards)||void 0===t?void 0:t.length)>0?(0,k.jsx)("div",{className:"space-y-2",children:a.rewards.map((e=>(0,k.jsxs)("div",{className:"p-3 border border-gray-200 rounded-lg",children:[(0,k.jsx)("div",{className:"font-medium",children:e.name}),(0,k.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,k.jsxs)("div",{className:"mt-1 text-blue-600 font-medium",children:[e.pointsCost," points"]})]},e.id)))}):(0,k.jsx)("div",{className:"text-gray-500",children:"No rewards available yet"})]})]})]})]}):(0,k.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 flex items-center justify-center h-full",children:(0,k.jsx)("div",{className:"text-gray-500",children:"Select a loyalty program to view details"})})})]})]})},kZ=()=>{const{user:t,businessProfile:n}=(0,N.A)(),[r,s]=(0,e.useState)([]),[o,i]=(0,e.useState)(!0),[a,l]=(0,e.useState)({}),[c,u]=(0,e.useState)(!1);(0,e.useEffect)((()=>{t&&(((e,t)=>{console.log("=== COUPON DEBUGGER STARTED ==="),console.log("Current user:",e),console.log("Business profile:",t),console.log("User's businessId:",null===e||void 0===e?void 0:e.businessId),console.log("Business profile businessId:",null===t||void 0===t?void 0:t.businessId),(async()=>{try{const n=(0,sl.rJ)(rl.db,"coupons"),r=await(0,sl.GG)(n);console.log("All coupons in database:",r.docs.map((e=>({id:e.id,businessId:e.data().businessId,title:e.data().title}))));const s=(null===e||void 0===e?void 0:e.businessId)||(null===t||void 0===t?void 0:t.businessId),o=r.docs.filter((e=>e.data().businessId===s));console.log("Found ".concat(o.length," coupons matching business ID: ").concat(s)),0===o.length&&s&&console.log("No coupons found for this business ID. This might be the issue!"),e&&!e.businessId&&null!==t&&void 0!==t&&t.businessId&&(console.log("WARNING: User does not have a businessId property but businessProfile does."),console.log("This might indicate a permission/role issue."));const i=[...new Set(r.docs.map((e=>e.data().businessId)))];console.log("Unique business IDs in coupons collection:",i),i.length>1&&(console.log("Multiple businesses found in coupons collection."),console.log("Make sure the application is using the correct business context."))}catch(n){console.error("Error fetching all coupons:",n)}})(),e&&(console.log("User role:",e.role),console.log("Is user a business owner?","business"===e.role),console.log("Is user an employee?","employee"===e.role||"staff"===e.role)),console.log("=== COUPON DEBUGGER COMPLETED ===")})(t,n),l({user:{uid:t.uid,email:t.email,role:t.role,businessId:t.businessId},businessProfile:n?{businessId:n.businessId,businessName:n.businessName}:null}))}),[t,n]),(0,e.useEffect)((()=>{null!==t&&void 0!==t&&t.businessId?(console.log("[CouponsDebug] Fetching coupons with user.businessId:",t.businessId),d(t.businessId)):null!==n&&void 0!==n&&n.businessId?(console.log("[CouponsDebug] Fetching coupons with businessProfile.businessId:",n.businessId),d(n.businessId)):(console.log("[CouponsDebug] No business ID available"),i(!1))}),[t,n]);const d=async e=>{i(!0);try{console.log("[CouponsDebug] Fetching coupons for business:",e);const t=await(0,ty.mx)(e);console.log("[CouponsDebug] Fetched coupons:",t),s(t||[])}catch(t){console.error("[CouponsDebug] Error fetching coupons:",t)}finally{i(!1)}};return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Coupon Debugger"}),(0,k.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-md mb-6",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Debug Information"}),(0,k.jsx)("pre",{className:"bg-white p-3 rounded overflow-auto max-h-40 text-sm",children:JSON.stringify(a,null,2)})]}),(0,k.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,k.jsx)("button",{onClick:()=>(async()=>{i(!0);try{const e=(0,sl.rJ)(rl.db,"coupons"),t=(await(0,sl.GG)(e)).docs.map((e=>(0,S.A)({id:e.id},e.data())));console.log("[CouponsDebug] All coupons:",t);const n=t.reduce(((e,t)=>{const n=t.businessId;return e[n]||(e[n]=[]),e[n].push(t),e}),{});if(console.log("[CouponsDebug] Coupons by business:",n),Object.keys(n).length>0){const e=Object.keys(n)[0];s(n[e]),kk.oR.success("Showing coupons for business ID: ".concat(e))}else kk.oR.error("No coupons found in database")}catch(e){console.error("[CouponsDebug] Error fetching all coupons:",e),kk.oR.error("Error fetching all coupons")}finally{i(!1)}})(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Fetch All Coupons"}),(0,k.jsx)("button",{onClick:async()=>{if(t){i(!0);try{const e=await(async e=>{if(!e)return null;try{if("employee"===e.role||"staff"===e.role){const t=(await(0,sl.x7)((0,sl.H9)(rl.db,"users",e.uid))).data();if(t&&t.employeeOf){const n=t.employeeOf;return console.log("Found employer business ID:",n),localStorage.setItem("currentBusinessId",n),(0,S.A)((0,S.A)({},e),{},{businessId:n})}}return null}catch(t){return console.error("Error fixing business context:",t),null}})(t);e&&e.businessId?(console.log("[CouponsDebug] Fixed user context:",e),kk.oR.success("Updated business context. Fetching coupons..."),await d(e.businessId)):kk.oR.error("Could not fix business context")}catch(e){console.error("[CouponsDebug] Error fixing context:",e),kk.oR.error("Error fixing business context")}finally{i(!1),u(!0)}}},disabled:c,className:"".concat(c?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"," text-white px-4 py-2 rounded"),children:"Attempt Fix Business Context"}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Reload Page"})]}),(0,k.jsxs)("div",{className:"mb-6",children:[(0,k.jsxs)("h2",{className:"text-xl font-semibold mb-3",children:["Coupons Found: ",r.length]}),o?(0,k.jsxs)("div",{className:"text-center p-8",children:[(0,k.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,k.jsx)("p",{className:"mt-2",children:"Loading..."})]}):0===r.length?(0,k.jsx)("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:(0,k.jsx)("p",{className:"text-lg text-gray-600",children:"No coupons found"})}):(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((e=>(0,k.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,k.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,k.jsxs)("span",{children:["Type: ",e.type]}),(0,k.jsxs)("span",{children:["Value: ",e.value]})]}),(0,k.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,k.jsxs)("p",{children:["Business ID: ",e.businessId]}),(0,k.jsxs)("p",{children:["Coupon ID: ",e.id]})]})]},e.id)))})]}),(0,k.jsxs)("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded-md",children:[(0,k.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Troubleshooting Steps"}),(0,k.jsxs)("ol",{className:"list-decimal list-inside space-y-2",children:[(0,k.jsx)("li",{children:"Check if the user has the correct business ID"}),(0,k.jsx)("li",{children:"Verify that coupons exist for this business ID"}),(0,k.jsx)("li",{children:"Try fetching all coupons to see what's available"}),(0,k.jsx)("li",{children:"Check user roles and permissions"}),(0,k.jsx)("li",{children:"Look for any filtering that might exclude coupons"})]})]})]})};const CZ="currencies",SZ="userRegionalPreferences";const AZ=new class{async getActiveCurrencies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{console.log("Fetching currencies from Firestore...");const t=(0,sl.P)((0,sl.rJ)(rl.db,CZ),(0,sl.My)("code","asc"),(0,sl.AB)(e)),n=await(0,sl.GG)(t);if(n.empty)return console.log("No currencies found in Firestore, using default currencies"),[{code:"USD",name:"US Dollar",symbol:"$",isActive:!0},{code:"EUR",name:"Euro",symbol:"\u20ac",isActive:!0},{code:"GBP",name:"British Pound",symbol:"\xa3",isActive:!0},{code:"JPY",name:"Japanese Yen",symbol:"\xa5",isActive:!0},{code:"CAD",name:"Canadian Dollar",symbol:"C$",isActive:!0},{code:"AUD",name:"Australian Dollar",symbol:"A$",isActive:!0},{code:"CHF",name:"Swiss Franc",symbol:"CHF",isActive:!0},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5",isActive:!0},{code:"INR",name:"Indian Rupee",symbol:"\u20b9",isActive:!0},{code:"BRL",name:"Brazilian Real",symbol:"R$",isActive:!0}];const r=n.docs.map((e=>(0,S.A)((0,S.A)({},e.data()),{},{code:e.id}))).filter((e=>e.isActive));return console.log("Successfully fetched ".concat(r.length," currencies from Firestore")),r}catch(t){return console.error("Error fetching currencies from Firestore:",t),console.log("Using default currencies as fallback"),[{code:"USD",name:"US Dollar",symbol:"$",isActive:!0},{code:"EUR",name:"Euro",symbol:"\u20ac",isActive:!0},{code:"GBP",name:"British Pound",symbol:"\xa3",isActive:!0},{code:"JPY",name:"Japanese Yen",symbol:"\xa5",isActive:!0},{code:"CAD",name:"Canadian Dollar",symbol:"C$",isActive:!0},{code:"AUD",name:"Australian Dollar",symbol:"A$",isActive:!0},{code:"CHF",name:"Swiss Franc",symbol:"CHF",isActive:!0},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5",isActive:!0},{code:"INR",name:"Indian Rupee",symbol:"\u20b9",isActive:!0},{code:"BRL",name:"Brazilian Real",symbol:"R$",isActive:!0}]}}async updateCurrency(e,t){try{const n=(0,sl.H9)(rl.db,CZ,e.code);return(await(0,sl.x7)(n)).exists()?await(0,sl.mZ)(n,(0,S.A)((0,S.A)({},e),{},{updatedAt:sl.Dc.now(),updatedBy:t})):await(0,sl.BN)(n,(0,S.A)((0,S.A)({},e),{},{updatedAt:sl.Dc.now(),updatedBy:t})),!0}catch(n){return console.error("Error updating currency:",n),!1}}async deleteCurrency(e,t){try{const n=(0,sl.H9)(rl.db,CZ,e);return await(0,sl.mZ)(n,{isActive:!1,updatedAt:sl.Dc.now(),updatedBy:t}),!0}catch(n){return console.error("Error deleting currency:",n),!1}}};const EZ=new class{async getRegions(){try{console.log("Fetching regions from Firestore...");const e=(0,sl.P)((0,sl.rJ)(rl.db,"regions"),(0,sl.My)("name","asc")),t=await(0,sl.GG)(e);if(t.empty)return console.log("No regions found in Firestore, using default regions"),[{code:"US",name:"United States",flag:"\ud83c\uddfa\ud83c\uddf8",currencies:["USD"],isActive:!0},{code:"GB",name:"United Kingdom",flag:"\ud83c\uddec\ud83c\udde7",currencies:["GBP"],isActive:!0},{code:"DE",name:"Germany",flag:"\ud83c\udde9\ud83c\uddea",currencies:["EUR"],isActive:!0},{code:"FR",name:"France",flag:"\ud83c\uddeb\ud83c\uddf7",currencies:["EUR"],isActive:!0},{code:"JP",name:"Japan",flag:"\ud83c\uddef\ud83c\uddf5",currencies:["JPY"],isActive:!0},{code:"CA",name:"Canada",flag:"\ud83c\udde8\ud83c\udde6",currencies:["CAD"],isActive:!0},{code:"AU",name:"Australia",flag:"\ud83c\udde6\ud83c\uddfa",currencies:["AUD"],isActive:!0},{code:"CH",name:"Switzerland",flag:"\ud83c\udde8\ud83c\udded",currencies:["CHF"],isActive:!0},{code:"CN",name:"China",flag:"\ud83c\udde8\ud83c\uddf3",currencies:["CNY"],isActive:!0},{code:"IN",name:"India",flag:"\ud83c\uddee\ud83c\uddf3",currencies:["INR"],isActive:!0},{code:"BR",name:"Brazil",flag:"\ud83c\udde7\ud83c\uddf7",currencies:["BRL"],isActive:!0}];const n=t.docs.map((e=>(0,S.A)((0,S.A)({},e.data()),{},{code:e.id}))).filter((e=>e.isActive));return console.log("Successfully fetched ".concat(n.length," regions from Firestore")),n}catch(e){return console.error("Error fetching regions from Firestore:",e),console.log("Using default regions as fallback"),[{code:"US",name:"United States",flag:"\ud83c\uddfa\ud83c\uddf8",currencies:["USD"],isActive:!0},{code:"GB",name:"United Kingdom",flag:"\ud83c\uddec\ud83c\udde7",currencies:["GBP"],isActive:!0},{code:"DE",name:"Germany",flag:"\ud83c\udde9\ud83c\uddea",currencies:["EUR"],isActive:!0},{code:"FR",name:"France",flag:"\ud83c\uddeb\ud83c\uddf7",currencies:["EUR"],isActive:!0},{code:"JP",name:"Japan",flag:"\ud83c\uddef\ud83c\uddf5",currencies:["JPY"],isActive:!0},{code:"CA",name:"Canada",flag:"\ud83c\udde8\ud83c\udde6",currencies:["CAD"],isActive:!0},{code:"AU",name:"Australia",flag:"\ud83c\udde6\ud83c\uddfa",currencies:["AUD"],isActive:!0},{code:"CH",name:"Switzerland",flag:"\ud83c\udde8\ud83c\udded",currencies:["CHF"],isActive:!0},{code:"CN",name:"China",flag:"\ud83c\udde8\ud83c\uddf3",currencies:["CNY"],isActive:!0},{code:"IN",name:"India",flag:"\ud83c\uddee\ud83c\uddf3",currencies:["INR"],isActive:!0},{code:"BR",name:"Brazil",flag:"\ud83c\udde7\ud83c\uddf7",currencies:["BRL"],isActive:!0}]}}};const _Z=new class{async saveUserPreferences(e,t){try{const n=(0,sl.H9)(rl.db,SZ,e),r=t.dateFormat||"yyyy-MM-dd",s=t.timeFormat||"HH:mm:ss";return await(0,sl.BN)(n,{userId:e,region:t.region,currency:t.currency,dateFormat:r,timeFormat:s,updatedAt:sl.Dc.now()}),!0}catch(n){return console.error("Error saving user preferences:",n),!1}}async getUserPreferences(e){try{const t=(0,sl.H9)(rl.db,SZ,e),n=await(0,sl.x7)(t);return n.exists()?n.data():null}catch(t){return console.error("Error getting user preferences:",t),null}}};const IZ={region:"US",currency:"USD",dateFormat:"yyyy-MM-dd",timeFormat:"HH:mm:ss"},TZ=(0,e.createContext)(void 0),PZ=t=>{let{children:n}=t;const{user:r}=(0,N.A)()||{user:null},[s,o]=(0,e.useState)(IZ),[i,a]=(0,e.useState)([]),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)(!0);(0,e.useEffect)((()=>{(async()=>{d(!0);try{const e=await AZ.getActiveCurrencies();a(e);const t=await EZ.getRegions();c(t);const n=localStorage.getItem("userRegion"),s=localStorage.getItem("userCurrency");if(r){const e=await _Z.getUserPreferences(r.uid);if(e)o({region:e.region,currency:e.currency,dateFormat:e.dateFormat,timeFormat:e.timeFormat}),localStorage.setItem("userRegion",e.region),localStorage.setItem("userCurrency",e.currency);else if(n&&s){const e={region:n,currency:s,dateFormat:IZ.dateFormat,timeFormat:IZ.timeFormat};o(e),await _Z.saveUserPreferences(r.uid,e)}else await h()}else n&&s?o((0,S.A)((0,S.A)({},IZ),{},{region:n,currency:s})):await h()}catch(e){console.error("Error loading regional settings:",e)}finally{d(!1)}})()}),[r]);const h=async()=>{try{const e=await fetch("https://ipapi.co/json/"),t=await e.json();if(t&&t.country){const e=t.country,n=function(e){return{US:"USD",GB:"GBP",DE:"EUR",FR:"EUR",JP:"JPY",CA:"CAD",AU:"AUD",CH:"CHF",CN:"CNY",IN:"INR",BR:"BRL"}[e]||"USD"}(e),s={region:e,currency:n,dateFormat:IZ.dateFormat,timeFormat:IZ.timeFormat};o(s),localStorage.setItem("userRegion",e),localStorage.setItem("userCurrency",n),r&&await _Z.saveUserPreferences(r.uid,s)}}catch(e){console.error("Error detecting user region:",e)}},m={settings:s,currencies:i,regions:l,isLoading:u,updateSettings:async e=>{try{const t=(0,S.A)((0,S.A)({},s),e);return o(t),e.region&&localStorage.setItem("userRegion",e.region),e.currency&&localStorage.setItem("userCurrency",e.currency),r&&await _Z.saveUserPreferences(r.uid,t),!0}catch(t){return console.error("Error updating settings:",t),!1}},formatCurrency:e=>{try{i.find((e=>e.code===s.currency));return new Intl.NumberFormat(s.region,{style:"currency",currency:s.currency,currencyDisplay:"symbol"}).format(e)}catch(t){return console.error("Error formatting currency:",t),"".concat(e)}},formatDate:e=>{try{const t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(s.region,{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)}catch(t){return console.error("Error formatting date:",t),String(e)}},formatTime:e=>{try{const t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(s.region,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:"US"===s.region}).format(t)}catch(t){return console.error("Error formatting time:",t),String(e)}},formatDateTime:e=>{try{const t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat(s.region,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:"US"===s.region}).format(t)}catch(t){return console.error("Error formatting date and time:",t),String(e)}}};return(0,k.jsx)(TZ.Provider,{value:m,children:n})},RZ=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!0),[o,i]=(0,e.useState)({code:"",name:"",symbol:""});(0,e.useEffect)((()=>{a()}),[]);const a=async()=>{s(!0);try{const e=(0,sl.rJ)(rl.db,"currencies"),t=await(0,sl.GG)(e),r=[];t.forEach((e=>{const t=e.data();r.push({id:e.id,code:e.id,name:t.name||"",symbol:t.symbol||"",isActive:!1!==t.isActive})})),n(r)}catch(e){console.error("Error fetching currencies:",e),bj.error("Failed to load currencies")}finally{s(!1)}};return r?(0,k.jsx)("div",{className:"p-4",children:"Loading currency data..."}):(0,k.jsxs)("div",{className:"p-4",children:[(0,k.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Currency Management"}),(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Currency"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Code"}),(0,k.jsx)("input",{type:"text",value:o.code,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{code:e.target.value.toUpperCase()})),placeholder:"USD",maxLength:3,className:"uppercase shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Name"}),(0,k.jsx)("input",{type:"text",value:o.name,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{name:e.target.value})),placeholder:"US Dollar",className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Symbol"}),(0,k.jsx)("input",{type:"text",value:o.symbol,onChange:e=>i((0,S.A)((0,S.A)({},o),{},{symbol:e.target.value})),placeholder:"$",maxLength:5,className:"shadow-sm focus:ring-primary-500 focus:border-primary-500 block w-full sm:text-sm border-gray-300 rounded-md"})]}),(0,k.jsx)("div",{className:"flex items-end",children:(0,k.jsx)("button",{onClick:async()=>{if(o.code&&o.name&&o.symbol)try{const e=(0,sl.H9)(rl.db,"currencies",o.code.toUpperCase());await(0,sl.BN)(e,{name:o.name,symbol:o.symbol,isActive:!0,updatedAt:new Date}),bj.success("Currency ".concat(o.code," added successfully")),i({code:"",name:"",symbol:""}),a()}catch(e){console.error("Error adding currency:",e),bj.error("Failed to add currency")}else bj.error("Please fill in all currency fields")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md",children:"Add Currency"})})]})]}),(0,k.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Manage Currencies"}),(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Manage currency metadata including names, symbols, and active status. Pricing for each currency should be set directly in the pricing plans."}),(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,k.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.code}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.name}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.symbol}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,k.jsx)("button",{onClick:()=>(async e=>{try{const r=t.find((t=>t.code===e));if(!r)return;const s=(0,sl.H9)(rl.db,"currencies",e);await(0,sl.BN)(s,{isActive:!r.isActive,updatedAt:new Date},{merge:!0});const o=t.map((t=>t.code===e?(0,S.A)((0,S.A)({},t),{},{isActive:!t.isActive}):t));n(o),bj.success("Currency ".concat(e," ").concat(r.isActive?"deactivated":"activated"))}catch(r){console.error("Error toggling currency active state:",r),bj.error("Failed to update currency")}})(e.code),className:"".concat(e.isActive?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),children:e.isActive?"Deactivate":"Activate"}),"USD"!==e.code&&"ZAR"!==e.code&&(0,k.jsx)("button",{onClick:()=>(async e=>{if("USD"!==e&&"ZAR"!==e){if(window.confirm("Are you sure you want to delete ".concat(e,"?")))try{await(0,sl.kd)((0,sl.H9)(rl.db,"currencies",e)),n(t.filter((t=>t.code!==e))),bj.success("Currency ".concat(e," deleted"))}catch(r){console.error("Error deleting currency:",r),bj.error("Failed to delete currency")}}else bj.error("Cannot delete base currencies")})(e.code),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.code)))})]})})]})]})},DZ=e=>{let{children:t}=e;return(0,k.jsx)(k.Fragment,{children:t})},MZ=()=>(0,k.jsx)(S$,{}),LZ=()=>(0,k.jsx)(TJ,{children:(0,k.jsx)(OJ,{})}),OZ=()=>(0,k.jsx)(TJ,{children:(0,k.jsx)(HJ,{})}),FZ=()=>(0,k.jsx)(PZ,{children:(0,k.jsx)(EJ,{children:(0,k.jsx)(DZ,{children:(0,k.jsxs)(p,{children:[(0,k.jsx)(CJ,{}),(0,k.jsx)(SJ,{}),(0,k.jsxs)(i.BV,{children:[(0,k.jsxs)(i.qh,{element:(0,k.jsx)(LY,{}),children:[(0,k.jsx)(i.qh,{path:"/",element:(0,k.jsx)(MZ,{})}),(0,k.jsx)(i.qh,{path:"/features",element:(0,k.jsx)($$,{})}),(0,k.jsx)(i.qh,{path:"/testimonials",element:(0,k.jsx)(bJ,{})}),(0,k.jsx)(i.qh,{path:"/pricing",element:(0,k.jsx)(sJ,{})}),(0,k.jsx)(i.qh,{path:"/contact",element:(0,k.jsx)(oJ,{})}),(0,k.jsx)(i.qh,{path:"/about",element:(0,k.jsx)(kJ,{})}),(0,k.jsx)(i.qh,{path:"/hero-example",element:(0,k.jsx)(_J,{})})]}),(0,k.jsxs)(i.qh,{element:(0,k.jsx)(NY,{}),children:[(0,k.jsx)(i.qh,{path:"/login",element:(0,k.jsx)(iY,{})}),(0,k.jsx)(i.qh,{path:"/register",element:(0,k.jsx)(mY,{})}),(0,k.jsx)(i.qh,{path:"/forgot-password",element:(0,k.jsx)(pY,{})}),(0,k.jsx)(i.qh,{path:"/reset-password",element:(0,k.jsx)(fY,{})}),(0,k.jsx)(i.qh,{path:"/logout",element:(0,k.jsx)(gY,{})}),(0,k.jsx)(i.qh,{path:"/unauthorized",element:(0,k.jsx)(wY,{})})]}),(0,k.jsx)(i.qh,{path:"/fix-registration",element:(0,k.jsx)(GJ,{})}),(0,k.jsxs)(i.qh,{path:"/admin",element:(0,k.jsx)(gV,{children:(0,k.jsx)(QY,{})}),children:[(0,k.jsx)(i.qh,{path:"dashboard",element:(0,k.jsx)(ZY,{})}),(0,k.jsx)(i.qh,{path:"homepage",element:(0,k.jsx)(sQ,{})}),(0,k.jsx)(i.qh,{path:"homepage/timeline",element:(0,k.jsx)(hQ,{})}),(0,k.jsx)(i.qh,{path:"homepage/pricing",element:(0,k.jsx)(AQ,{})}),(0,k.jsx)(i.qh,{path:"currencies",element:(0,k.jsx)(RZ,{})})]}),(0,k.jsxs)(i.qh,{path:"/business",element:(0,k.jsx)(fV,{children:(0,k.jsx)(nl,{})}),children:[(0,k.jsx)(i.qh,{path:"dashboard",element:(0,k.jsx)(jg,{})}),(0,k.jsx)(i.qh,{path:"dashboard/simple",element:(0,k.jsx)(jg,{})}),(0,k.jsx)(i.qh,{path:"coupons",element:(0,k.jsx)(Wg,{})}),(0,k.jsx)(i.qh,{path:"coupons/create",element:(0,k.jsx)(LZ,{})}),(0,k.jsx)(i.qh,{path:"scan",element:(0,k.jsx)(OZ,{})}),(0,k.jsx)(i.qh,{path:"coupons2",element:(0,k.jsx)(mV,{})}),(0,k.jsx)(i.qh,{path:"customers",element:(0,k.jsx)(hy,{})}),(0,k.jsx)(i.qh,{path:"customers/simple",element:(0,k.jsx)(my,{})}),(0,k.jsx)(i.qh,{path:"customers-emotional",element:(0,k.jsx)(hy,{})}),(0,k.jsx)(i.qh,{path:"customers/add",element:(0,k.jsx)(i.C5,{to:"/business/customers",replace:!0})}),(0,k.jsx)(i.qh,{path:"loyalty",element:(0,k.jsx)(dk,{})}),(0,k.jsx)(i.qh,{path:"communications",element:(0,k.jsx)(zk,{})}),(0,k.jsx)(i.qh,{path:"analytics",element:(0,k.jsx)(CC,{})}),(0,k.jsx)(i.qh,{path:"settings",element:(0,k.jsx)(XC,{})}),(0,k.jsx)(i.qh,{path:"settings/simple",element:(0,k.jsx)(_S,{})}),(0,k.jsx)(i.qh,{path:"enhanced-settings",element:(0,k.jsx)(KJ,{})}),(0,k.jsx)(i.qh,{path:"billing",element:(0,k.jsx)(Mz,{})}),(0,k.jsx)(i.qh,{path:"billing/legacy",element:(0,k.jsx)(AT,{})}),(0,k.jsx)(i.qh,{path:"qr-code",element:(0,k.jsx)(eV,{})}),(0,k.jsx)(i.qh,{path:"results",element:(0,k.jsx)(tV,{})}),(0,k.jsx)(i.qh,{path:"results/simple",element:(0,k.jsx)(tV,{})})]}),(0,k.jsx)(i.qh,{path:"/debug",element:(0,k.jsx)(fV,{children:(0,k.jsx)(nl,{})}),children:(0,k.jsx)(i.qh,{path:"coupons",element:(0,k.jsx)(kZ,{})})}),(0,k.jsxs)(i.qh,{path:"/customer",element:(0,k.jsx)(fV,{requiredRole:"customer",children:(0,k.jsx)(JX,{})}),children:[(0,k.jsx)(i.qh,{path:"dashboard",element:(0,k.jsx)($X,{})}),(0,k.jsx)(i.qh,{path:"loyalty",element:(0,k.jsx)(jZ,{})}),(0,k.jsx)(i.qh,{path:"stores",element:(0,k.jsx)(dZ,{})}),(0,k.jsx)(i.qh,{path:"store/:id",element:(0,k.jsx)(hZ,{})}),(0,k.jsx)(i.qh,{path:"profile",element:(0,k.jsx)(vZ,{})})]}),(0,k.jsx)(i.qh,{path:"/store",element:(0,k.jsx)(fV,{requiredRole:"customer",children:(0,k.jsx)(XX,{})}),children:(0,k.jsx)(i.qh,{path:"",element:(0,k.jsx)(ZX,{})})}),(0,k.jsx)(i.qh,{path:"*",element:(0,k.jsx)(yY,{})})]})]})})})});class BZ{constructor(){this.blockedRequests=new Set,this.setupGlobalHandlers()}static getInstance(){return BZ.instance||(BZ.instance=new BZ),BZ.instance}setupGlobalHandlers(){var e=this;const t=window.fetch;window.fetch=async function(){try{return await t(...arguments)}catch(r){var n;const t=(null===(n=arguments.length<=0?void 0:arguments[0])||void 0===n?void 0:n.toString())||"unknown";if(e.isAnalyticsRequest(t)||e.isBlockedRequest(r))return console.warn("[NetworkErrorHandler] Analytics request blocked: ".concat(t)),e.blockedRequests.add(t),new Response("{}",{status:200,statusText:"OK",headers:{"Content-Type":"application/json"}});throw r}};const n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t,r,s,o){const i=t.toString();return BZ.getInstance().isAnalyticsRequest(i)&&(console.warn("[NetworkErrorHandler] Analytics XHR request intercepted: ".concat(i)),this.addEventListener("error",(e=>{console.warn("[NetworkErrorHandler] Analytics XHR error handled gracefully"),e.stopPropagation()}))),n.call(this,e,t,null===r||void 0===r||r,null!==s&&void 0!==s?s:null,null!==o&&void 0!==o?o:null)}}isAnalyticsRequest(e){return["google-analytics.com","googletagmanager.com","analytics.google.com","gtag","ga.js","analytics.js","gtm.js"].some((t=>e.includes(t)))}isBlockedRequest(e){var t;const n=(null===e||void 0===e||null===(t=e.message)||void 0===t?void 0:t.toLowerCase())||"";return["blocked","network error","failed to fetch","cors","content security policy"].some((e=>n.includes(e)))}getBlockedRequests(){return Array.from(this.blockedRequests)}clearBlockedRequests(){this.blockedRequests.clear()}}BZ.instance=void 0;BZ.getInstance(),console.log("[NetworkErrorHandler] Initialized network error handling");window.addEventListener("error",(e=>{var t,n,r,s,o,i,a,l,c,u,d;null!==(t=e.error)&&void 0!==t&&null!==(n=t.message)&&void 0!==n&&n.includes("google-analytics")||null!==(r=e.error)&&void 0!==r&&null!==(s=r.message)&&void 0!==s&&s.includes("gtag")||null!==(o=e.error)&&void 0!==o&&null!==(i=o.message)&&void 0!==i&&i.includes("Failed to fetch")||null!==(a=e.error)&&void 0!==a&&null!==(l=a.message)&&void 0!==l&&l.includes("NetworkError")||null!==(c=e.error)&&void 0!==c&&null!==(u=c.message)&&void 0!==u&&u.includes("blocked")?console.warn("Network error filtered:",null===(d=e.error)||void 0===d?void 0:d.message):console.error("Global error caught:",e.error)})),window.addEventListener("unhandledrejection",(e=>{var t,n,r,s,o,i,a,l,c;if(null!==(t=e.reason)&&void 0!==t&&null!==(n=t.message)&&void 0!==n&&n.includes("google-analytics")||null!==(r=e.reason)&&void 0!==r&&null!==(s=r.message)&&void 0!==s&&s.includes("gtag")||null!==(o=e.reason)&&void 0!==o&&null!==(i=o.message)&&void 0!==i&&i.includes("Failed to fetch")||null!==(a=e.reason)&&void 0!==a&&null!==(l=a.message)&&void 0!==l&&l.includes("NetworkError")||null!==(c=e.reason)&&void 0!==c&&c.toString().includes("blocked"))return console.warn("Network promise rejection filtered:",e.reason),void e.preventDefault();console.error("Unhandled promise rejection:",e.reason)})),setTimeout((()=>{document.querySelectorAll('[class*="loading"], [class*="spinner"]').length>0&&console.warn("App appears to be stuck loading, this may indicate an initialization issue")}),1e4),(()=>{try{const t=document.getElementById("root");if(!t)return void console.error("Root element not found");r.createRoot(t).render((0,k.jsx)(e.StrictMode,{children:(0,k.jsxs)(IS.O,{children:[(0,k.jsx)(FZ,{}),(0,k.jsx)(Ij,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}))}catch(t){console.error("Failed to initialize app:",t);const e=document.getElementById("root");e&&(e.innerHTML='\n        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif; background-color: #f7fafc;">\n          <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); max-width: 400px; text-align: center;">\n            <h1 style="color: #e53e3e; margin-bottom: 1rem;">Unable to load application</h1>\n            <p style="color: #4a5568; margin-bottom: 1.5rem;">We encountered a problem while loading the application. Please try refreshing the page.</p>\n            <button\n              style="background: #3182ce; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;"\n              onclick="window.location.reload()"\n            >\n              Refresh Page\n            </button>\n          </div>\n        </div>\n      ')}})()})()})();